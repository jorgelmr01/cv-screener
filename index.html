<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Evaluador de CVs - Analizador de CVs de LinkedIn</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>üìã Evaluador de CVs</h1>
            <p class="subtitle">Eval√∫a CVs de LinkedIn con an√°lisis potenciado por IA</p>
        </header>

        <div class="input-section">
            <div class="input-group">
                <label for="apiKey">Clave API de OpenAI:</label>
                <input type="password" id="apiKey" placeholder="sk-..." />
                <small>Tu clave API se almacena localmente y nunca se env√≠a a nuestros servidores</small>
            </div>

            <div class="input-group">
                <label for="gptModel">Modelo GPT:</label>
                <select id="gptModel">
                    <optgroup label="Familia GPT-4">
                        <option value="gpt-4o-mini" selected>GPT-4o mini - Modelo peque√±o r√°pido y econ√≥mico para tareas espec√≠ficas (Recomendado)</option>
                        <option value="gpt-4o">GPT-4o - Modelo GPT r√°pido, inteligente y flexible</option>
                    </optgroup>
                    <optgroup label="Familia GPT-5">
                        <option value="gpt-5.1">GPT-5.1 - Mejor para codificaci√≥n y tareas ag√©nticas con esfuerzo de razonamiento configurable</option>
                        <option value="gpt-5">GPT-5 - Modelo de razonamiento inteligente anterior para codificaci√≥n y tareas ag√©nticas</option>
                        <option value="gpt-5-mini">GPT-5 mini - Versi√≥n m√°s r√°pida y eficiente de GPT-5 para tareas bien definidas</option>
                        <option value="gpt-5-nano">GPT-5 nano - Versi√≥n m√°s r√°pida y eficiente de GPT-5</option>
                    </optgroup>
                    <optgroup label="Otros Modelos">
                        <option value="o3">o3 - Modelo de razonamiento para tareas complejas, sucedido por GPT-5</option>
                        <option value="gpt-4.1">GPT-4.1 - Modelo m√°s inteligente sin razonamiento</option>
                        <option value="o4-mini">o4-mini - Modelo de razonamiento r√°pido y eficiente, sucedido por GPT-5 mini</option>
                        <option value="gpt-4.1-mini">GPT-4.1 mini - Versi√≥n m√°s peque√±a y r√°pida de GPT-4.1</option>
                    </optgroup>
                </select>
                <small>Selecciona el modelo GPT a usar para el an√°lisis de CVs</small>
            </div>

            <div class="input-group">
                <label for="jobDescription">Descripci√≥n del Puesto de Trabajo:</label>
                <textarea id="jobDescription" rows="5" placeholder="Ingresa la descripci√≥n del puesto, requisitos y contexto aqu√≠..."></textarea>
            </div>

            <div class="input-group config-box">
                <label for="personalizedInstructions">‚öôÔ∏è Instrucciones Personalizadas (Opcional):</label>
                <textarea id="personalizedInstructions" rows="4" placeholder="Ejemplo: Excluir candidatos de X o Y escuela/empresa. Priorizar candidatos con habilidades espec√≠ficas. Aplicar criterios de filtrado personalizados..."></textarea>
                <small>Agrega instrucciones personalizadas para el an√°lisis de IA (ej., excluir ciertas escuelas/empresas, priorizar criterios espec√≠ficos)</small>
            </div>

            <div class="input-group config-box">
                <div class="config-header" onclick="toggleCriteriaConfig()">
                    <label>üìä Configuraci√≥n de Criterios de Evaluaci√≥n:</label>
                    <span class="toggle-icon" id="criteriaToggleIcon">‚ñº</span>
                </div>
                <div id="criteriaConfig" class="collapsible-content">
                    <div class="criterion-item">
                        <input type="text" class="criterion-name" data-criterion="relevance" placeholder="Nombre del Criterio" value="Relevancia del Perfil al Puesto" />
                        <textarea class="criterion-desc" data-criterion="relevance" placeholder="Descripci√≥n del Criterio" rows="2">Compara el contenido del CV con el contexto del puesto de trabajo. Considera habilidades, experiencia y ajuste general.</textarea>
                    </div>
                    <div class="criterion-item">
                        <input type="text" class="criterion-name" data-criterion="education" placeholder="Nombre del Criterio" value="Nivel Educativo" />
                        <textarea class="criterion-desc" data-criterion="education" placeholder="Descripci√≥n del Criterio" rows="2">Eval√∫a el prestigio de las instituciones educativas. El t√≠tulo principal cuenta el 80% del valor, certificaciones adicionales, programas de intercambio, etc. cuentan el 20%.</textarea>
                    </div>
                    <div class="criterion-item">
                        <input type="text" class="criterion-name" data-criterion="previousJobs" placeholder="Nombre del Criterio" value="Trabajos Previos" />
                        <textarea class="criterion-desc" data-criterion="previousJobs" placeholder="Descripci√≥n del Criterio" rows="2">Eval√∫a el prestigio de empleadores anteriores y el nivel del √∫ltimo puesto ocupado.</textarea>
                    </div>
                    <div class="criterion-item">
                        <input type="text" class="criterion-name" data-criterion="proactivity" placeholder="Nombre del Criterio" value="Proactividad" />
                        <textarea class="criterion-desc" data-criterion="proactivity" placeholder="Descripci√≥n del Criterio" rows="2">Eval√∫a actividades extracurriculares, certificaciones, aprendizaje continuo e iniciativa mostrada m√°s all√° de los requisitos b√°sicos del trabajo.</textarea>
                    </div>
                </div>
                <small>Personaliza los nombres y descripciones de los criterios de evaluaci√≥n</small>
            </div>

            <div class="input-group">
                <label for="cvFiles">Subir CVs de LinkedIn (PDF):</label>
                <input type="file" id="cvFiles" multiple accept=".pdf" />
                <small>Selecciona m√∫ltiples archivos PDF para evaluar</small>
            </div>

            <button id="analyzeBtn" class="btn-primary" disabled>Analizar CVs</button>
        </div>

        <div id="loadingSection" class="loading-section hidden">
            <div class="spinner"></div>
            <p id="loadingText">Procesando CVs...</p>
            <div id="progressBar" class="progress-bar">
                <div id="progressFill" class="progress-fill"></div>
            </div>
        </div>

        <div id="resultsSection" class="results-section hidden">
            <div class="results-layout">
                <div class="sidebar">
                    <div class="sidebar-header">
                        <h3>Todos los CVs</h3>
                        <div class="sort-controls">
                            <label>Ordenar:</label>
                            <select id="sortBy">
                                <option value="total">Puntuaci√≥n Total</option>
                                <option value="relevance">Relevancia</option>
                                <option value="education">Educaci√≥n</option>
                                <option value="jobs">Trabajos</option>
                                <option value="proactivity">Proactividad</option>
                            </select>
                        </div>
                    </div>
                    <div class="sidebar-search">
                        <input type="text" id="searchCVs" placeholder="Buscar CVs..." />
                    </div>
                    <div class="sidebar-list" id="sidebarList">
                        <!-- CV list items will be inserted here -->
                    </div>
                    <div class="sidebar-footer">
                        <div class="selection-info">
                            <span id="selectedCount">0</span> seleccionados (m√°x. 10)
                        </div>
                        <button id="clearSelection" class="btn-clear">Limpiar Selecci√≥n</button>
                    </div>
                </div>
                <div class="main-content">
                    <div class="main-header">
                        <h2>CVs Seleccionados</h2>
                        <div class="selected-count-badge" id="selectedBadge">0 seleccionados</div>
                    </div>
                    <div id="selectedGallery" class="selected-gallery">
                        <div class="empty-state">
                            <p>Selecciona CVs de la barra lateral para ver el an√°lisis detallado</p>
                            <small>Puedes seleccionar hasta 10 CVs a la vez</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="interviewQuestionsSection" class="interview-questions-section hidden">
            <div class="section-header">
                <h3>üìù Generador de Preguntas de Entrevista</h3>
                <button id="closeInterviewSection" class="btn-close-section">√ó</button>
            </div>
            <div class="interview-controls">
                <div class="input-group-inline">
                    <label for="numQuestions">N√∫mero de Preguntas por CV:</label>
                    <input type="number" id="numQuestions" min="1" max="20" value="5" />
                </div>
                <button id="generateQuestionsBtn" class="btn-secondary">Generar Preguntas</button>
            </div>
            <div id="interviewQuestions" class="interview-questions-list"></div>
        </div>

        <div id="chatSection" class="chat-section hidden">
            <div class="chat-header">
                <h3>üí¨ Haz Preguntas sobre los CVs</h3>
                <button id="toggleChat" class="btn-toggle-chat">‚àí</button>
            </div>
            <div class="chat-body">
                <div class="chat-cv-selector">
                    <label>Selecciona CVs para usar como contexto:</label>
                    <div class="chat-dropdown-container">
                        <div class="chat-dropdown-header" onclick="toggleChatDropdown()">
                            <span id="chatDropdownText">Seleccionar CVs...</span>
                            <span class="dropdown-arrow">‚ñº</span>
                        </div>
                        <div id="chatDropdown" class="chat-dropdown hidden">
                            <input type="text" id="chatCVSearch" placeholder="Buscar CVs..." class="chat-search-input" />
                            <div id="chatCVList" class="chat-cv-list"></div>
                        </div>
                    </div>
                    <small>Selecciona uno o m√°s CVs para hacer preguntas</small>
                </div>
                <div id="chatMessages" class="chat-messages"></div>
                <div class="chat-input-container">
                    <input type="text" id="chatInput" placeholder="Haz una pregunta sobre los CVs seleccionados..." />
                    <button id="sendChatBtn" class="btn-send-chat">Enviar</button>
                </div>
            </div>
        </div>

        <button id="openChatBtn" class="btn-open-chat hidden">üí¨ Chat</button>

        <div id="errorSection" class="error-section hidden"></div>
    </div>

    <script src="app.js"></script>
</body>
</html>

