<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CV Screener</title>
    <script type="module" crossorigin>(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function t(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(r){if(r.ep)return;r.ep=!0;const o=t(r);fetch(r.href,o)}})();function Fx(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var bd={exports:{}},fa={},wd={exports:{}},Ie={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lm;function jx(){if(lm)return Ie;lm=1;var i=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.iterator;function y(L){return L===null||typeof L!="object"?null:(L=g&&L[g]||L["@@iterator"],typeof L=="function"?L:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,_={};function A(L,B,se){this.props=L,this.context=B,this.refs=_,this.updater=se||v}A.prototype.isReactComponent={},A.prototype.setState=function(L,B){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,B,"setState")},A.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function C(){}C.prototype=A.prototype;function E(L,B,se){this.props=L,this.context=B,this.refs=_,this.updater=se||v}var P=E.prototype=new C;P.constructor=E,x(P,A.prototype),P.isPureReactComponent=!0;var R=Array.isArray,M=Object.prototype.hasOwnProperty,D={current:null},O={key:!0,ref:!0,__self:!0,__source:!0};function H(L,B,se){var me,ke={},ce=null,pe=null;if(B!=null)for(me in B.ref!==void 0&&(pe=B.ref),B.key!==void 0&&(ce=""+B.key),B)M.call(B,me)&&!O.hasOwnProperty(me)&&(ke[me]=B[me]);var Ee=arguments.length-2;if(Ee===1)ke.children=se;else if(1<Ee){for(var Le=Array(Ee),Re=0;Re<Ee;Re++)Le[Re]=arguments[Re+2];ke.children=Le}if(L&&L.defaultProps)for(me in Ee=L.defaultProps,Ee)ke[me]===void 0&&(ke[me]=Ee[me]);return{$$typeof:i,type:L,key:ce,ref:pe,props:ke,_owner:D.current}}function U(L,B){return{$$typeof:i,type:L.type,key:B,ref:L.ref,props:L.props,_owner:L._owner}}function K(L){return typeof L=="object"&&L!==null&&L.$$typeof===i}function V(L){var B={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(se){return B[se]})}var fe=/\/+/g;function we(L,B){return typeof L=="object"&&L!==null&&L.key!=null?V(""+L.key):B.toString(36)}function be(L,B,se,me,ke){var ce=typeof L;(ce==="undefined"||ce==="boolean")&&(L=null);var pe=!1;if(L===null)pe=!0;else switch(ce){case"string":case"number":pe=!0;break;case"object":switch(L.$$typeof){case i:case e:pe=!0}}if(pe)return pe=L,ke=ke(pe),L=me===""?"."+we(pe,0):me,R(ke)?(se="",L!=null&&(se=L.replace(fe,"$&/")+"/"),be(ke,B,se,"",function(Re){return Re})):ke!=null&&(K(ke)&&(ke=U(ke,se+(!ke.key||pe&&pe.key===ke.key?"":(""+ke.key).replace(fe,"$&/")+"/")+L)),B.push(ke)),1;if(pe=0,me=me===""?".":me+":",R(L))for(var Ee=0;Ee<L.length;Ee++){ce=L[Ee];var Le=me+we(ce,Ee);pe+=be(ce,B,se,Le,ke)}else if(Le=y(L),typeof Le=="function")for(L=Le.call(L),Ee=0;!(ce=L.next()).done;)ce=ce.value,Le=me+we(ce,Ee++),pe+=be(ce,B,se,Le,ke);else if(ce==="object")throw B=String(L),Error("Objects are not valid as a React child (found: "+(B==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":B)+"). If you meant to render a collection of children, use an array instead.");return pe}function De(L,B,se){if(L==null)return L;var me=[],ke=0;return be(L,me,"","",function(ce){return B.call(se,ce,ke++)}),me}function Z(L){if(L._status===-1){var B=L._result;B=B(),B.then(function(se){(L._status===0||L._status===-1)&&(L._status=1,L._result=se)},function(se){(L._status===0||L._status===-1)&&(L._status=2,L._result=se)}),L._status===-1&&(L._status=0,L._result=B)}if(L._status===1)return L._result.default;throw L._result}var J={current:null},Y={transition:null},te={ReactCurrentDispatcher:J,ReactCurrentBatchConfig:Y,ReactCurrentOwner:D};function ee(){throw Error("act(...) is not supported in production builds of React.")}return Ie.Children={map:De,forEach:function(L,B,se){De(L,function(){B.apply(this,arguments)},se)},count:function(L){var B=0;return De(L,function(){B++}),B},toArray:function(L){return De(L,function(B){return B})||[]},only:function(L){if(!K(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},Ie.Component=A,Ie.Fragment=t,Ie.Profiler=r,Ie.PureComponent=E,Ie.StrictMode=n,Ie.Suspense=d,Ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=te,Ie.act=ee,Ie.cloneElement=function(L,B,se){if(L==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+L+".");var me=x({},L.props),ke=L.key,ce=L.ref,pe=L._owner;if(B!=null){if(B.ref!==void 0&&(ce=B.ref,pe=D.current),B.key!==void 0&&(ke=""+B.key),L.type&&L.type.defaultProps)var Ee=L.type.defaultProps;for(Le in B)M.call(B,Le)&&!O.hasOwnProperty(Le)&&(me[Le]=B[Le]===void 0&&Ee!==void 0?Ee[Le]:B[Le])}var Le=arguments.length-2;if(Le===1)me.children=se;else if(1<Le){Ee=Array(Le);for(var Re=0;Re<Le;Re++)Ee[Re]=arguments[Re+2];me.children=Ee}return{$$typeof:i,type:L.type,key:ke,ref:ce,props:me,_owner:pe}},Ie.createContext=function(L){return L={$$typeof:l,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},L.Provider={$$typeof:o,_context:L},L.Consumer=L},Ie.createElement=H,Ie.createFactory=function(L){var B=H.bind(null,L);return B.type=L,B},Ie.createRef=function(){return{current:null}},Ie.forwardRef=function(L){return{$$typeof:c,render:L}},Ie.isValidElement=K,Ie.lazy=function(L){return{$$typeof:p,_payload:{_status:-1,_result:L},_init:Z}},Ie.memo=function(L,B){return{$$typeof:f,type:L,compare:B===void 0?null:B}},Ie.startTransition=function(L){var B=Y.transition;Y.transition={};try{L()}finally{Y.transition=B}},Ie.unstable_act=ee,Ie.useCallback=function(L,B){return J.current.useCallback(L,B)},Ie.useContext=function(L){return J.current.useContext(L)},Ie.useDebugValue=function(){},Ie.useDeferredValue=function(L){return J.current.useDeferredValue(L)},Ie.useEffect=function(L,B){return J.current.useEffect(L,B)},Ie.useId=function(){return J.current.useId()},Ie.useImperativeHandle=function(L,B,se){return J.current.useImperativeHandle(L,B,se)},Ie.useInsertionEffect=function(L,B){return J.current.useInsertionEffect(L,B)},Ie.useLayoutEffect=function(L,B){return J.current.useLayoutEffect(L,B)},Ie.useMemo=function(L,B){return J.current.useMemo(L,B)},Ie.useReducer=function(L,B,se){return J.current.useReducer(L,B,se)},Ie.useRef=function(L){return J.current.useRef(L)},Ie.useState=function(L){return J.current.useState(L)},Ie.useSyncExternalStore=function(L,B,se){return J.current.useSyncExternalStore(L,B,se)},Ie.useTransition=function(){return J.current.useTransition()},Ie.version="18.3.1",Ie}var cm;function Th(){return cm||(cm=1,wd.exports=jx()),wd.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var um;function $x(){if(um)return fa;um=1;var i=Th(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,r=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function l(c,d,f){var p,g={},y=null,v=null;f!==void 0&&(y=""+f),d.key!==void 0&&(y=""+d.key),d.ref!==void 0&&(v=d.ref);for(p in d)n.call(d,p)&&!o.hasOwnProperty(p)&&(g[p]=d[p]);if(c&&c.defaultProps)for(p in d=c.defaultProps,d)g[p]===void 0&&(g[p]=d[p]);return{$$typeof:e,type:c,key:y,ref:v,props:g,_owner:r.current}}return fa.Fragment=t,fa.jsx=l,fa.jsxs=l,fa}var dm;function zx(){return dm||(dm=1,bd.exports=$x()),bd.exports}var w=zx(),k=Th();const He=Fx(k);var ml={},xd={exports:{}},en={},_d={exports:{}},Sd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hm;function Bx(){return hm||(hm=1,(function(i){function e(Y,te){var ee=Y.length;Y.push(te);e:for(;0<ee;){var L=ee-1>>>1,B=Y[L];if(0<r(B,te))Y[L]=te,Y[ee]=B,ee=L;else break e}}function t(Y){return Y.length===0?null:Y[0]}function n(Y){if(Y.length===0)return null;var te=Y[0],ee=Y.pop();if(ee!==te){Y[0]=ee;e:for(var L=0,B=Y.length,se=B>>>1;L<se;){var me=2*(L+1)-1,ke=Y[me],ce=me+1,pe=Y[ce];if(0>r(ke,ee))ce<B&&0>r(pe,ke)?(Y[L]=pe,Y[ce]=ee,L=ce):(Y[L]=ke,Y[me]=ee,L=me);else if(ce<B&&0>r(pe,ee))Y[L]=pe,Y[ce]=ee,L=ce;else break e}}return te}function r(Y,te){var ee=Y.sortIndex-te.sortIndex;return ee!==0?ee:Y.id-te.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;i.unstable_now=function(){return o.now()}}else{var l=Date,c=l.now();i.unstable_now=function(){return l.now()-c}}var d=[],f=[],p=1,g=null,y=3,v=!1,x=!1,_=!1,A=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function P(Y){for(var te=t(f);te!==null;){if(te.callback===null)n(f);else if(te.startTime<=Y)n(f),te.sortIndex=te.expirationTime,e(d,te);else break;te=t(f)}}function R(Y){if(_=!1,P(Y),!x)if(t(d)!==null)x=!0,Z(M);else{var te=t(f);te!==null&&J(R,te.startTime-Y)}}function M(Y,te){x=!1,_&&(_=!1,C(H),H=-1),v=!0;var ee=y;try{for(P(te),g=t(d);g!==null&&(!(g.expirationTime>te)||Y&&!V());){var L=g.callback;if(typeof L=="function"){g.callback=null,y=g.priorityLevel;var B=L(g.expirationTime<=te);te=i.unstable_now(),typeof B=="function"?g.callback=B:g===t(d)&&n(d),P(te)}else n(d);g=t(d)}if(g!==null)var se=!0;else{var me=t(f);me!==null&&J(R,me.startTime-te),se=!1}return se}finally{g=null,y=ee,v=!1}}var D=!1,O=null,H=-1,U=5,K=-1;function V(){return!(i.unstable_now()-K<U)}function fe(){if(O!==null){var Y=i.unstable_now();K=Y;var te=!0;try{te=O(!0,Y)}finally{te?we():(D=!1,O=null)}}else D=!1}var we;if(typeof E=="function")we=function(){E(fe)};else if(typeof MessageChannel<"u"){var be=new MessageChannel,De=be.port2;be.port1.onmessage=fe,we=function(){De.postMessage(null)}}else we=function(){A(fe,0)};function Z(Y){O=Y,D||(D=!0,we())}function J(Y,te){H=A(function(){Y(i.unstable_now())},te)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(Y){Y.callback=null},i.unstable_continueExecution=function(){x||v||(x=!0,Z(M))},i.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<Y?Math.floor(1e3/Y):5},i.unstable_getCurrentPriorityLevel=function(){return y},i.unstable_getFirstCallbackNode=function(){return t(d)},i.unstable_next=function(Y){switch(y){case 1:case 2:case 3:var te=3;break;default:te=y}var ee=y;y=te;try{return Y()}finally{y=ee}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(Y,te){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var ee=y;y=Y;try{return te()}finally{y=ee}},i.unstable_scheduleCallback=function(Y,te,ee){var L=i.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?L+ee:L):ee=L,Y){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=ee+B,Y={id:p++,callback:te,priorityLevel:Y,startTime:ee,expirationTime:B,sortIndex:-1},ee>L?(Y.sortIndex=ee,e(f,Y),t(d)===null&&Y===t(f)&&(_?(C(H),H=-1):_=!0,J(R,ee-L))):(Y.sortIndex=B,e(d,Y),x||v||(x=!0,Z(M))),Y},i.unstable_shouldYield=V,i.unstable_wrapCallback=function(Y){var te=y;return function(){var ee=y;y=te;try{return Y.apply(this,arguments)}finally{y=ee}}}})(Sd)),Sd}var fm;function Hx(){return fm||(fm=1,_d.exports=Bx()),_d.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pm;function Ux(){if(pm)return en;pm=1;var i=Th(),e=Hx();function t(s){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+s,u=1;u<arguments.length;u++)a+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+s+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,r={};function o(s,a){l(s,a),l(s+"Capture",a)}function l(s,a){for(r[s]=a,s=0;s<a.length;s++)n.add(a[s])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},g={};function y(s){return d.call(g,s)?!0:d.call(p,s)?!1:f.test(s)?g[s]=!0:(p[s]=!0,!1)}function v(s,a,u,h){if(u!==null&&u.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return h?!1:u!==null?!u.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function x(s,a,u,h){if(a===null||typeof a>"u"||v(s,a,u,h))return!0;if(h)return!1;if(u!==null)switch(u.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function _(s,a,u,h,m,b,S){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=h,this.attributeNamespace=m,this.mustUseProperty=u,this.propertyName=s,this.type=a,this.sanitizeURL=b,this.removeEmptyString=S}var A={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){A[s]=new _(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var a=s[0];A[a]=new _(a,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){A[s]=new _(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){A[s]=new _(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){A[s]=new _(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){A[s]=new _(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){A[s]=new _(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){A[s]=new _(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){A[s]=new _(s,5,!1,s.toLowerCase(),null,!1,!1)});var C=/[\-:]([a-z])/g;function E(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var a=s.replace(C,E);A[a]=new _(a,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var a=s.replace(C,E);A[a]=new _(a,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var a=s.replace(C,E);A[a]=new _(a,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){A[s]=new _(s,1,!1,s.toLowerCase(),null,!1,!1)}),A.xlinkHref=new _("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){A[s]=new _(s,1,!1,s.toLowerCase(),null,!0,!0)});function P(s,a,u,h){var m=A.hasOwnProperty(a)?A[a]:null;(m!==null?m.type!==0:h||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(x(a,u,m,h)&&(u=null),h||m===null?y(a)&&(u===null?s.removeAttribute(a):s.setAttribute(a,""+u)):m.mustUseProperty?s[m.propertyName]=u===null?m.type===3?!1:"":u:(a=m.attributeName,h=m.attributeNamespace,u===null?s.removeAttribute(a):(m=m.type,u=m===3||m===4&&u===!0?"":""+u,h?s.setAttributeNS(h,a,u):s.setAttribute(a,u))))}var R=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,M=Symbol.for("react.element"),D=Symbol.for("react.portal"),O=Symbol.for("react.fragment"),H=Symbol.for("react.strict_mode"),U=Symbol.for("react.profiler"),K=Symbol.for("react.provider"),V=Symbol.for("react.context"),fe=Symbol.for("react.forward_ref"),we=Symbol.for("react.suspense"),be=Symbol.for("react.suspense_list"),De=Symbol.for("react.memo"),Z=Symbol.for("react.lazy"),J=Symbol.for("react.offscreen"),Y=Symbol.iterator;function te(s){return s===null||typeof s!="object"?null:(s=Y&&s[Y]||s["@@iterator"],typeof s=="function"?s:null)}var ee=Object.assign,L;function B(s){if(L===void 0)try{throw Error()}catch(u){var a=u.stack.trim().match(/\n( *(at )?)/);L=a&&a[1]||""}return`
`+L+s}var se=!1;function me(s,a){if(!s||se)return"";se=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(z){var h=z}Reflect.construct(s,[],a)}else{try{a.call()}catch(z){h=z}s.call(a.prototype)}else{try{throw Error()}catch(z){h=z}s()}}catch(z){if(z&&h&&typeof z.stack=="string"){for(var m=z.stack.split(`
`),b=h.stack.split(`
`),S=m.length-1,T=b.length-1;1<=S&&0<=T&&m[S]!==b[T];)T--;for(;1<=S&&0<=T;S--,T--)if(m[S]!==b[T]){if(S!==1||T!==1)do if(S--,T--,0>T||m[S]!==b[T]){var N=`
`+m[S].replace(" at new "," at ");return s.displayName&&N.includes("<anonymous>")&&(N=N.replace("<anonymous>",s.displayName)),N}while(1<=S&&0<=T);break}}}finally{se=!1,Error.prepareStackTrace=u}return(s=s?s.displayName||s.name:"")?B(s):""}function ke(s){switch(s.tag){case 5:return B(s.type);case 16:return B("Lazy");case 13:return B("Suspense");case 19:return B("SuspenseList");case 0:case 2:case 15:return s=me(s.type,!1),s;case 11:return s=me(s.type.render,!1),s;case 1:return s=me(s.type,!0),s;default:return""}}function ce(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case O:return"Fragment";case D:return"Portal";case U:return"Profiler";case H:return"StrictMode";case we:return"Suspense";case be:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case V:return(s.displayName||"Context")+".Consumer";case K:return(s._context.displayName||"Context")+".Provider";case fe:var a=s.render;return s=s.displayName,s||(s=a.displayName||a.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case De:return a=s.displayName||null,a!==null?a:ce(s.type)||"Memo";case Z:a=s._payload,s=s._init;try{return ce(s(a))}catch{}}return null}function pe(s){var a=s.type;switch(s.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=a.render,s=s.displayName||s.name||"",a.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ce(a);case 8:return a===H?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function Ee(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Le(s){var a=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Re(s){var a=Le(s)?"checked":"value",u=Object.getOwnPropertyDescriptor(s.constructor.prototype,a),h=""+s[a];if(!s.hasOwnProperty(a)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var m=u.get,b=u.set;return Object.defineProperty(s,a,{configurable:!0,get:function(){return m.call(this)},set:function(S){h=""+S,b.call(this,S)}}),Object.defineProperty(s,a,{enumerable:u.enumerable}),{getValue:function(){return h},setValue:function(S){h=""+S},stopTracking:function(){s._valueTracker=null,delete s[a]}}}}function Jn(s){s._valueTracker||(s._valueTracker=Re(s))}function an(s){if(!s)return!1;var a=s._valueTracker;if(!a)return!0;var u=a.getValue(),h="";return s&&(h=Le(s)?s.checked?"true":"false":s.value),s=h,s!==u?(a.setValue(s),!0):!1}function Mn(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function on(s,a){var u=a.checked;return ee({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??s._wrapperState.initialChecked})}function hs(s,a){var u=a.defaultValue==null?"":a.defaultValue,h=a.checked!=null?a.checked:a.defaultChecked;u=Ee(a.value!=null?a.value:u),s._wrapperState={initialChecked:h,initialValue:u,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function fs(s,a){a=a.checked,a!=null&&P(s,"checked",a,!1)}function Or(s,a){fs(s,a);var u=Ee(a.value),h=a.type;if(u!=null)h==="number"?(u===0&&s.value===""||s.value!=u)&&(s.value=""+u):s.value!==""+u&&(s.value=""+u);else if(h==="submit"||h==="reset"){s.removeAttribute("value");return}a.hasOwnProperty("value")?cr(s,a.type,u):a.hasOwnProperty("defaultValue")&&cr(s,a.type,Ee(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(s.defaultChecked=!!a.defaultChecked)}function Ei(s,a,u){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var h=a.type;if(!(h!=="submit"&&h!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+s._wrapperState.initialValue,u||a===s.value||(s.value=a),s.defaultValue=a}u=s.name,u!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,u!==""&&(s.name=u)}function cr(s,a,u){(a!=="number"||Mn(s.ownerDocument)!==s)&&(u==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+u&&(s.defaultValue=""+u))}var Gt=Array.isArray;function Ln(s,a,u,h){if(s=s.options,a){a={};for(var m=0;m<u.length;m++)a["$"+u[m]]=!0;for(u=0;u<s.length;u++)m=a.hasOwnProperty("$"+s[u].value),s[u].selected!==m&&(s[u].selected=m),m&&h&&(s[u].defaultSelected=!0)}else{for(u=""+Ee(u),a=null,m=0;m<s.length;m++){if(s[m].value===u){s[m].selected=!0,h&&(s[m].defaultSelected=!0);return}a!==null||s[m].disabled||(a=s[m])}a!==null&&(a.selected=!0)}}function Ns(s,a){if(a.dangerouslySetInnerHTML!=null)throw Error(t(91));return ee({},a,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function ki(s,a){var u=a.value;if(u==null){if(u=a.children,a=a.defaultValue,u!=null){if(a!=null)throw Error(t(92));if(Gt(u)){if(1<u.length)throw Error(t(93));u=u[0]}a=u}a==null&&(a=""),u=a}s._wrapperState={initialValue:Ee(u)}}function Ri(s,a){var u=Ee(a.value),h=Ee(a.defaultValue);u!=null&&(u=""+u,u!==s.value&&(s.value=u),a.defaultValue==null&&s.defaultValue!==u&&(s.defaultValue=u)),h!=null&&(s.defaultValue=""+h)}function io(s){var a=s.textContent;a===s._wrapperState.initialValue&&a!==""&&a!==null&&(s.value=a)}function ao(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Zn(s,a){return s==null||s==="http://www.w3.org/1999/xhtml"?ao(a):s==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var Dn,Is=(function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,u,h,m){MSApp.execUnsafeLocalFunction(function(){return s(a,u,h,m)})}:s})(function(s,a){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=a;else{for(Dn=Dn||document.createElement("div"),Dn.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=Dn.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;a.firstChild;)s.appendChild(a.firstChild)}});function Ms(s,a){if(a){var u=s.firstChild;if(u&&u===s.lastChild&&u.nodeType===3){u.nodeValue=a;return}}s.textContent=a}var qt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},oo=["Webkit","ms","Moz","O"];Object.keys(qt).forEach(function(s){oo.forEach(function(a){a=a+s.charAt(0).toUpperCase()+s.substring(1),qt[a]=qt[s]})});function lo(s,a,u){return a==null||typeof a=="boolean"||a===""?"":u||typeof a!="number"||a===0||qt.hasOwnProperty(s)&&qt[s]?(""+a).trim():a+"px"}function co(s,a){s=s.style;for(var u in a)if(a.hasOwnProperty(u)){var h=u.indexOf("--")===0,m=lo(u,a[u],h);u==="float"&&(u="cssFloat"),h?s.setProperty(u,m):s[u]=m}}var Ti=ee({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Fr(s,a){if(a){if(Ti[s]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(t(137,s));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(t(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(t(61))}if(a.style!=null&&typeof a.style!="object")throw Error(t(62))}}function Pi(s,a){if(s.indexOf("-")===-1)return typeof a.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jr=null;function Ni(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Ii=null,Ls=null,Ye=null;function kt(s){if(s=Ji(s)){if(typeof Ii!="function")throw Error(t(280));var a=s.stateNode;a&&(a=No(a),Ii(s.stateNode,s.type,a))}}function Rt(s){Ls?Ye?Ye.push(s):Ye=[s]:Ls=s}function On(){if(Ls){var s=Ls,a=Ye;if(Ye=Ls=null,kt(s),a)for(s=0;s<a.length;s++)kt(a[s])}}function jt(s,a){return s(a)}function Tt(){}var Xt=!1;function ps(s,a,u){if(Xt)return s(a,u);Xt=!0;try{return jt(s,a,u)}finally{Xt=!1,(Ls!==null||Ye!==null)&&(Tt(),On())}}function Qe(s,a){var u=s.stateNode;if(u===null)return null;var h=No(u);if(h===null)return null;u=h[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(s=s.type,h=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!h;break e;default:s=!1}if(s)return null;if(u&&typeof u!="function")throw Error(t(231,a,typeof u));return u}var bn=!1;if(c)try{var Pt={};Object.defineProperty(Pt,"passive",{get:function(){bn=!0}}),window.addEventListener("test",Pt,Pt),window.removeEventListener("test",Pt,Pt)}catch{bn=!1}function Fn(s,a,u,h,m,b,S,T,N){var z=Array.prototype.slice.call(arguments,3);try{a.apply(u,z)}catch(G){this.onError(G)}}var jn=!1,es=null,ln=!1,gs=null,Mi={onError:function(s){jn=!0,es=s}};function Vb(s,a,u,h,m,b,S,T,N){jn=!1,es=null,Fn.apply(Mi,arguments)}function Gb(s,a,u,h,m,b,S,T,N){if(Vb.apply(this,arguments),jn){if(jn){var z=es;jn=!1,es=null}else throw Error(t(198));ln||(ln=!0,gs=z)}}function ur(s){var a=s,u=s;if(s.alternate)for(;a.return;)a=a.return;else{s=a;do a=s,(a.flags&4098)!==0&&(u=a.return),s=a.return;while(s)}return a.tag===3?u:null}function Nf(s){if(s.tag===13){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function If(s){if(ur(s)!==s)throw Error(t(188))}function qb(s){var a=s.alternate;if(!a){if(a=ur(s),a===null)throw Error(t(188));return a!==s?null:s}for(var u=s,h=a;;){var m=u.return;if(m===null)break;var b=m.alternate;if(b===null){if(h=m.return,h!==null){u=h;continue}break}if(m.child===b.child){for(b=m.child;b;){if(b===u)return If(m),s;if(b===h)return If(m),a;b=b.sibling}throw Error(t(188))}if(u.return!==h.return)u=m,h=b;else{for(var S=!1,T=m.child;T;){if(T===u){S=!0,u=m,h=b;break}if(T===h){S=!0,h=m,u=b;break}T=T.sibling}if(!S){for(T=b.child;T;){if(T===u){S=!0,u=b,h=m;break}if(T===h){S=!0,h=b,u=m;break}T=T.sibling}if(!S)throw Error(t(189))}}if(u.alternate!==h)throw Error(t(190))}if(u.tag!==3)throw Error(t(188));return u.stateNode.current===u?s:a}function Mf(s){return s=qb(s),s!==null?Lf(s):null}function Lf(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var a=Lf(s);if(a!==null)return a;s=s.sibling}return null}var Df=e.unstable_scheduleCallback,Of=e.unstable_cancelCallback,Xb=e.unstable_shouldYield,Kb=e.unstable_requestPaint,tt=e.unstable_now,Yb=e.unstable_getCurrentPriorityLevel,$c=e.unstable_ImmediatePriority,Ff=e.unstable_UserBlockingPriority,uo=e.unstable_NormalPriority,Qb=e.unstable_LowPriority,jf=e.unstable_IdlePriority,ho=null,ts=null;function Jb(s){if(ts&&typeof ts.onCommitFiberRoot=="function")try{ts.onCommitFiberRoot(ho,s,void 0,(s.current.flags&128)===128)}catch{}}var $n=Math.clz32?Math.clz32:tw,Zb=Math.log,ew=Math.LN2;function tw(s){return s>>>=0,s===0?32:31-(Zb(s)/ew|0)|0}var fo=64,po=4194304;function Li(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function go(s,a){var u=s.pendingLanes;if(u===0)return 0;var h=0,m=s.suspendedLanes,b=s.pingedLanes,S=u&268435455;if(S!==0){var T=S&~m;T!==0?h=Li(T):(b&=S,b!==0&&(h=Li(b)))}else S=u&~m,S!==0?h=Li(S):b!==0&&(h=Li(b));if(h===0)return 0;if(a!==0&&a!==h&&(a&m)===0&&(m=h&-h,b=a&-a,m>=b||m===16&&(b&4194240)!==0))return a;if((h&4)!==0&&(h|=u&16),a=s.entangledLanes,a!==0)for(s=s.entanglements,a&=h;0<a;)u=31-$n(a),m=1<<u,h|=s[u],a&=~m;return h}function nw(s,a){switch(s){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function sw(s,a){for(var u=s.suspendedLanes,h=s.pingedLanes,m=s.expirationTimes,b=s.pendingLanes;0<b;){var S=31-$n(b),T=1<<S,N=m[S];N===-1?((T&u)===0||(T&h)!==0)&&(m[S]=nw(T,a)):N<=a&&(s.expiredLanes|=T),b&=~T}}function zc(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function $f(){var s=fo;return fo<<=1,(fo&4194240)===0&&(fo=64),s}function Bc(s){for(var a=[],u=0;31>u;u++)a.push(s);return a}function Di(s,a,u){s.pendingLanes|=a,a!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,a=31-$n(a),s[a]=u}function rw(s,a){var u=s.pendingLanes&~a;s.pendingLanes=a,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=a,s.mutableReadLanes&=a,s.entangledLanes&=a,a=s.entanglements;var h=s.eventTimes;for(s=s.expirationTimes;0<u;){var m=31-$n(u),b=1<<m;a[m]=0,h[m]=-1,s[m]=-1,u&=~b}}function Hc(s,a){var u=s.entangledLanes|=a;for(s=s.entanglements;u;){var h=31-$n(u),m=1<<h;m&a|s[h]&a&&(s[h]|=a),u&=~m}}var ze=0;function zf(s){return s&=-s,1<s?4<s?(s&268435455)!==0?16:536870912:4:1}var Bf,Uc,Hf,Uf,Wf,Wc=!1,mo=[],Ds=null,Os=null,Fs=null,Oi=new Map,Fi=new Map,js=[],iw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Vf(s,a){switch(s){case"focusin":case"focusout":Ds=null;break;case"dragenter":case"dragleave":Os=null;break;case"mouseover":case"mouseout":Fs=null;break;case"pointerover":case"pointerout":Oi.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fi.delete(a.pointerId)}}function ji(s,a,u,h,m,b){return s===null||s.nativeEvent!==b?(s={blockedOn:a,domEventName:u,eventSystemFlags:h,nativeEvent:b,targetContainers:[m]},a!==null&&(a=Ji(a),a!==null&&Uc(a)),s):(s.eventSystemFlags|=h,a=s.targetContainers,m!==null&&a.indexOf(m)===-1&&a.push(m),s)}function aw(s,a,u,h,m){switch(a){case"focusin":return Ds=ji(Ds,s,a,u,h,m),!0;case"dragenter":return Os=ji(Os,s,a,u,h,m),!0;case"mouseover":return Fs=ji(Fs,s,a,u,h,m),!0;case"pointerover":var b=m.pointerId;return Oi.set(b,ji(Oi.get(b)||null,s,a,u,h,m)),!0;case"gotpointercapture":return b=m.pointerId,Fi.set(b,ji(Fi.get(b)||null,s,a,u,h,m)),!0}return!1}function Gf(s){var a=dr(s.target);if(a!==null){var u=ur(a);if(u!==null){if(a=u.tag,a===13){if(a=Nf(u),a!==null){s.blockedOn=a,Wf(s.priority,function(){Hf(u)});return}}else if(a===3&&u.stateNode.current.memoizedState.isDehydrated){s.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}s.blockedOn=null}function yo(s){if(s.blockedOn!==null)return!1;for(var a=s.targetContainers;0<a.length;){var u=Gc(s.domEventName,s.eventSystemFlags,a[0],s.nativeEvent);if(u===null){u=s.nativeEvent;var h=new u.constructor(u.type,u);jr=h,u.target.dispatchEvent(h),jr=null}else return a=Ji(u),a!==null&&Uc(a),s.blockedOn=u,!1;a.shift()}return!0}function qf(s,a,u){yo(s)&&u.delete(a)}function ow(){Wc=!1,Ds!==null&&yo(Ds)&&(Ds=null),Os!==null&&yo(Os)&&(Os=null),Fs!==null&&yo(Fs)&&(Fs=null),Oi.forEach(qf),Fi.forEach(qf)}function $i(s,a){s.blockedOn===a&&(s.blockedOn=null,Wc||(Wc=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,ow)))}function zi(s){function a(m){return $i(m,s)}if(0<mo.length){$i(mo[0],s);for(var u=1;u<mo.length;u++){var h=mo[u];h.blockedOn===s&&(h.blockedOn=null)}}for(Ds!==null&&$i(Ds,s),Os!==null&&$i(Os,s),Fs!==null&&$i(Fs,s),Oi.forEach(a),Fi.forEach(a),u=0;u<js.length;u++)h=js[u],h.blockedOn===s&&(h.blockedOn=null);for(;0<js.length&&(u=js[0],u.blockedOn===null);)Gf(u),u.blockedOn===null&&js.shift()}var $r=R.ReactCurrentBatchConfig,vo=!0;function lw(s,a,u,h){var m=ze,b=$r.transition;$r.transition=null;try{ze=1,Vc(s,a,u,h)}finally{ze=m,$r.transition=b}}function cw(s,a,u,h){var m=ze,b=$r.transition;$r.transition=null;try{ze=4,Vc(s,a,u,h)}finally{ze=m,$r.transition=b}}function Vc(s,a,u,h){if(vo){var m=Gc(s,a,u,h);if(m===null)cu(s,a,h,bo,u),Vf(s,h);else if(aw(m,s,a,u,h))h.stopPropagation();else if(Vf(s,h),a&4&&-1<iw.indexOf(s)){for(;m!==null;){var b=Ji(m);if(b!==null&&Bf(b),b=Gc(s,a,u,h),b===null&&cu(s,a,h,bo,u),b===m)break;m=b}m!==null&&h.stopPropagation()}else cu(s,a,h,null,u)}}var bo=null;function Gc(s,a,u,h){if(bo=null,s=Ni(h),s=dr(s),s!==null)if(a=ur(s),a===null)s=null;else if(u=a.tag,u===13){if(s=Nf(a),s!==null)return s;s=null}else if(u===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;s=null}else a!==s&&(s=null);return bo=s,null}function Xf(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Yb()){case $c:return 1;case Ff:return 4;case uo:case Qb:return 16;case jf:return 536870912;default:return 16}default:return 16}}var $s=null,qc=null,wo=null;function Kf(){if(wo)return wo;var s,a=qc,u=a.length,h,m="value"in $s?$s.value:$s.textContent,b=m.length;for(s=0;s<u&&a[s]===m[s];s++);var S=u-s;for(h=1;h<=S&&a[u-h]===m[b-h];h++);return wo=m.slice(s,1<h?1-h:void 0)}function xo(s){var a=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&a===13&&(s=13)):s=a,s===10&&(s=13),32<=s||s===13?s:0}function _o(){return!0}function Yf(){return!1}function cn(s){function a(u,h,m,b,S){this._reactName=u,this._targetInst=m,this.type=h,this.nativeEvent=b,this.target=S,this.currentTarget=null;for(var T in s)s.hasOwnProperty(T)&&(u=s[T],this[T]=u?u(b):b[T]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?_o:Yf,this.isPropagationStopped=Yf,this}return ee(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=_o)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=_o)},persist:function(){},isPersistent:_o}),a}var zr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xc=cn(zr),Bi=ee({},zr,{view:0,detail:0}),uw=cn(Bi),Kc,Yc,Hi,So=ee({},Bi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Jc,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Hi&&(Hi&&s.type==="mousemove"?(Kc=s.screenX-Hi.screenX,Yc=s.screenY-Hi.screenY):Yc=Kc=0,Hi=s),Kc)},movementY:function(s){return"movementY"in s?s.movementY:Yc}}),Qf=cn(So),dw=ee({},So,{dataTransfer:0}),hw=cn(dw),fw=ee({},Bi,{relatedTarget:0}),Qc=cn(fw),pw=ee({},zr,{animationName:0,elapsedTime:0,pseudoElement:0}),gw=cn(pw),mw=ee({},zr,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),yw=cn(mw),vw=ee({},zr,{data:0}),Jf=cn(vw),bw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ww={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _w(s){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(s):(s=xw[s])?!!a[s]:!1}function Jc(){return _w}var Sw=ee({},Bi,{key:function(s){if(s.key){var a=bw[s.key]||s.key;if(a!=="Unidentified")return a}return s.type==="keypress"?(s=xo(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?ww[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Jc,charCode:function(s){return s.type==="keypress"?xo(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?xo(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Aw=cn(Sw),Cw=ee({},So,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Zf=cn(Cw),Ew=ee({},Bi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Jc}),kw=cn(Ew),Rw=ee({},zr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Tw=cn(Rw),Pw=ee({},So,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Nw=cn(Pw),Iw=[9,13,27,32],Zc=c&&"CompositionEvent"in window,Ui=null;c&&"documentMode"in document&&(Ui=document.documentMode);var Mw=c&&"TextEvent"in window&&!Ui,ep=c&&(!Zc||Ui&&8<Ui&&11>=Ui),tp=" ",np=!1;function sp(s,a){switch(s){case"keyup":return Iw.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function rp(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Br=!1;function Lw(s,a){switch(s){case"compositionend":return rp(a);case"keypress":return a.which!==32?null:(np=!0,tp);case"textInput":return s=a.data,s===tp&&np?null:s;default:return null}}function Dw(s,a){if(Br)return s==="compositionend"||!Zc&&sp(s,a)?(s=Kf(),wo=qc=$s=null,Br=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return ep&&a.locale!=="ko"?null:a.data;default:return null}}var Ow={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ip(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a==="input"?!!Ow[s.type]:a==="textarea"}function ap(s,a,u,h){Rt(h),a=Ro(a,"onChange"),0<a.length&&(u=new Xc("onChange","change",null,u,h),s.push({event:u,listeners:a}))}var Wi=null,Vi=null;function Fw(s){Ap(s,0)}function Ao(s){var a=Gr(s);if(an(a))return s}function jw(s,a){if(s==="change")return a}var op=!1;if(c){var eu;if(c){var tu="oninput"in document;if(!tu){var lp=document.createElement("div");lp.setAttribute("oninput","return;"),tu=typeof lp.oninput=="function"}eu=tu}else eu=!1;op=eu&&(!document.documentMode||9<document.documentMode)}function cp(){Wi&&(Wi.detachEvent("onpropertychange",up),Vi=Wi=null)}function up(s){if(s.propertyName==="value"&&Ao(Vi)){var a=[];ap(a,Vi,s,Ni(s)),ps(Fw,a)}}function $w(s,a,u){s==="focusin"?(cp(),Wi=a,Vi=u,Wi.attachEvent("onpropertychange",up)):s==="focusout"&&cp()}function zw(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Ao(Vi)}function Bw(s,a){if(s==="click")return Ao(a)}function Hw(s,a){if(s==="input"||s==="change")return Ao(a)}function Uw(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var zn=typeof Object.is=="function"?Object.is:Uw;function Gi(s,a){if(zn(s,a))return!0;if(typeof s!="object"||s===null||typeof a!="object"||a===null)return!1;var u=Object.keys(s),h=Object.keys(a);if(u.length!==h.length)return!1;for(h=0;h<u.length;h++){var m=u[h];if(!d.call(a,m)||!zn(s[m],a[m]))return!1}return!0}function dp(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function hp(s,a){var u=dp(s);s=0;for(var h;u;){if(u.nodeType===3){if(h=s+u.textContent.length,s<=a&&h>=a)return{node:u,offset:a-s};s=h}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=dp(u)}}function fp(s,a){return s&&a?s===a?!0:s&&s.nodeType===3?!1:a&&a.nodeType===3?fp(s,a.parentNode):"contains"in s?s.contains(a):s.compareDocumentPosition?!!(s.compareDocumentPosition(a)&16):!1:!1}function pp(){for(var s=window,a=Mn();a instanceof s.HTMLIFrameElement;){try{var u=typeof a.contentWindow.location.href=="string"}catch{u=!1}if(u)s=a.contentWindow;else break;a=Mn(s.document)}return a}function nu(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a&&(a==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||a==="textarea"||s.contentEditable==="true")}function Ww(s){var a=pp(),u=s.focusedElem,h=s.selectionRange;if(a!==u&&u&&u.ownerDocument&&fp(u.ownerDocument.documentElement,u)){if(h!==null&&nu(u)){if(a=h.start,s=h.end,s===void 0&&(s=a),"selectionStart"in u)u.selectionStart=a,u.selectionEnd=Math.min(s,u.value.length);else if(s=(a=u.ownerDocument||document)&&a.defaultView||window,s.getSelection){s=s.getSelection();var m=u.textContent.length,b=Math.min(h.start,m);h=h.end===void 0?b:Math.min(h.end,m),!s.extend&&b>h&&(m=h,h=b,b=m),m=hp(u,b);var S=hp(u,h);m&&S&&(s.rangeCount!==1||s.anchorNode!==m.node||s.anchorOffset!==m.offset||s.focusNode!==S.node||s.focusOffset!==S.offset)&&(a=a.createRange(),a.setStart(m.node,m.offset),s.removeAllRanges(),b>h?(s.addRange(a),s.extend(S.node,S.offset)):(a.setEnd(S.node,S.offset),s.addRange(a)))}}for(a=[],s=u;s=s.parentNode;)s.nodeType===1&&a.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<a.length;u++)s=a[u],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var Vw=c&&"documentMode"in document&&11>=document.documentMode,Hr=null,su=null,qi=null,ru=!1;function gp(s,a,u){var h=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;ru||Hr==null||Hr!==Mn(h)||(h=Hr,"selectionStart"in h&&nu(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),qi&&Gi(qi,h)||(qi=h,h=Ro(su,"onSelect"),0<h.length&&(a=new Xc("onSelect","select",null,a,u),s.push({event:a,listeners:h}),a.target=Hr)))}function Co(s,a){var u={};return u[s.toLowerCase()]=a.toLowerCase(),u["Webkit"+s]="webkit"+a,u["Moz"+s]="moz"+a,u}var Ur={animationend:Co("Animation","AnimationEnd"),animationiteration:Co("Animation","AnimationIteration"),animationstart:Co("Animation","AnimationStart"),transitionend:Co("Transition","TransitionEnd")},iu={},mp={};c&&(mp=document.createElement("div").style,"AnimationEvent"in window||(delete Ur.animationend.animation,delete Ur.animationiteration.animation,delete Ur.animationstart.animation),"TransitionEvent"in window||delete Ur.transitionend.transition);function Eo(s){if(iu[s])return iu[s];if(!Ur[s])return s;var a=Ur[s],u;for(u in a)if(a.hasOwnProperty(u)&&u in mp)return iu[s]=a[u];return s}var yp=Eo("animationend"),vp=Eo("animationiteration"),bp=Eo("animationstart"),wp=Eo("transitionend"),xp=new Map,_p="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function zs(s,a){xp.set(s,a),o(a,[s])}for(var au=0;au<_p.length;au++){var ou=_p[au],Gw=ou.toLowerCase(),qw=ou[0].toUpperCase()+ou.slice(1);zs(Gw,"on"+qw)}zs(yp,"onAnimationEnd"),zs(vp,"onAnimationIteration"),zs(bp,"onAnimationStart"),zs("dblclick","onDoubleClick"),zs("focusin","onFocus"),zs("focusout","onBlur"),zs(wp,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Xw=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xi));function Sp(s,a,u){var h=s.type||"unknown-event";s.currentTarget=u,Gb(h,a,void 0,s),s.currentTarget=null}function Ap(s,a){a=(a&4)!==0;for(var u=0;u<s.length;u++){var h=s[u],m=h.event;h=h.listeners;e:{var b=void 0;if(a)for(var S=h.length-1;0<=S;S--){var T=h[S],N=T.instance,z=T.currentTarget;if(T=T.listener,N!==b&&m.isPropagationStopped())break e;Sp(m,T,z),b=N}else for(S=0;S<h.length;S++){if(T=h[S],N=T.instance,z=T.currentTarget,T=T.listener,N!==b&&m.isPropagationStopped())break e;Sp(m,T,z),b=N}}}if(ln)throw s=gs,ln=!1,gs=null,s}function Ve(s,a){var u=a[gu];u===void 0&&(u=a[gu]=new Set);var h=s+"__bubble";u.has(h)||(Cp(a,s,2,!1),u.add(h))}function lu(s,a,u){var h=0;a&&(h|=4),Cp(u,s,h,a)}var ko="_reactListening"+Math.random().toString(36).slice(2);function Ki(s){if(!s[ko]){s[ko]=!0,n.forEach(function(u){u!=="selectionchange"&&(Xw.has(u)||lu(u,!1,s),lu(u,!0,s))});var a=s.nodeType===9?s:s.ownerDocument;a===null||a[ko]||(a[ko]=!0,lu("selectionchange",!1,a))}}function Cp(s,a,u,h){switch(Xf(a)){case 1:var m=lw;break;case 4:m=cw;break;default:m=Vc}u=m.bind(null,a,u,s),m=void 0,!bn||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(m=!0),h?m!==void 0?s.addEventListener(a,u,{capture:!0,passive:m}):s.addEventListener(a,u,!0):m!==void 0?s.addEventListener(a,u,{passive:m}):s.addEventListener(a,u,!1)}function cu(s,a,u,h,m){var b=h;if((a&1)===0&&(a&2)===0&&h!==null)e:for(;;){if(h===null)return;var S=h.tag;if(S===3||S===4){var T=h.stateNode.containerInfo;if(T===m||T.nodeType===8&&T.parentNode===m)break;if(S===4)for(S=h.return;S!==null;){var N=S.tag;if((N===3||N===4)&&(N=S.stateNode.containerInfo,N===m||N.nodeType===8&&N.parentNode===m))return;S=S.return}for(;T!==null;){if(S=dr(T),S===null)return;if(N=S.tag,N===5||N===6){h=b=S;continue e}T=T.parentNode}}h=h.return}ps(function(){var z=b,G=Ni(u),q=[];e:{var W=xp.get(s);if(W!==void 0){var ne=Xc,oe=s;switch(s){case"keypress":if(xo(u)===0)break e;case"keydown":case"keyup":ne=Aw;break;case"focusin":oe="focus",ne=Qc;break;case"focusout":oe="blur",ne=Qc;break;case"beforeblur":case"afterblur":ne=Qc;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ne=Qf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ne=hw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ne=kw;break;case yp:case vp:case bp:ne=gw;break;case wp:ne=Tw;break;case"scroll":ne=uw;break;case"wheel":ne=Nw;break;case"copy":case"cut":case"paste":ne=yw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ne=Zf}var le=(a&4)!==0,nt=!le&&s==="scroll",F=le?W!==null?W+"Capture":null:W;le=[];for(var I=z,j;I!==null;){j=I;var Q=j.stateNode;if(j.tag===5&&Q!==null&&(j=Q,F!==null&&(Q=Qe(I,F),Q!=null&&le.push(Yi(I,Q,j)))),nt)break;I=I.return}0<le.length&&(W=new ne(W,oe,null,u,G),q.push({event:W,listeners:le}))}}if((a&7)===0){e:{if(W=s==="mouseover"||s==="pointerover",ne=s==="mouseout"||s==="pointerout",W&&u!==jr&&(oe=u.relatedTarget||u.fromElement)&&(dr(oe)||oe[ms]))break e;if((ne||W)&&(W=G.window===G?G:(W=G.ownerDocument)?W.defaultView||W.parentWindow:window,ne?(oe=u.relatedTarget||u.toElement,ne=z,oe=oe?dr(oe):null,oe!==null&&(nt=ur(oe),oe!==nt||oe.tag!==5&&oe.tag!==6)&&(oe=null)):(ne=null,oe=z),ne!==oe)){if(le=Qf,Q="onMouseLeave",F="onMouseEnter",I="mouse",(s==="pointerout"||s==="pointerover")&&(le=Zf,Q="onPointerLeave",F="onPointerEnter",I="pointer"),nt=ne==null?W:Gr(ne),j=oe==null?W:Gr(oe),W=new le(Q,I+"leave",ne,u,G),W.target=nt,W.relatedTarget=j,Q=null,dr(G)===z&&(le=new le(F,I+"enter",oe,u,G),le.target=j,le.relatedTarget=nt,Q=le),nt=Q,ne&&oe)t:{for(le=ne,F=oe,I=0,j=le;j;j=Wr(j))I++;for(j=0,Q=F;Q;Q=Wr(Q))j++;for(;0<I-j;)le=Wr(le),I--;for(;0<j-I;)F=Wr(F),j--;for(;I--;){if(le===F||F!==null&&le===F.alternate)break t;le=Wr(le),F=Wr(F)}le=null}else le=null;ne!==null&&Ep(q,W,ne,le,!1),oe!==null&&nt!==null&&Ep(q,nt,oe,le,!0)}}e:{if(W=z?Gr(z):window,ne=W.nodeName&&W.nodeName.toLowerCase(),ne==="select"||ne==="input"&&W.type==="file")var ue=jw;else if(ip(W))if(op)ue=Hw;else{ue=zw;var ye=$w}else(ne=W.nodeName)&&ne.toLowerCase()==="input"&&(W.type==="checkbox"||W.type==="radio")&&(ue=Bw);if(ue&&(ue=ue(s,z))){ap(q,ue,u,G);break e}ye&&ye(s,W,z),s==="focusout"&&(ye=W._wrapperState)&&ye.controlled&&W.type==="number"&&cr(W,"number",W.value)}switch(ye=z?Gr(z):window,s){case"focusin":(ip(ye)||ye.contentEditable==="true")&&(Hr=ye,su=z,qi=null);break;case"focusout":qi=su=Hr=null;break;case"mousedown":ru=!0;break;case"contextmenu":case"mouseup":case"dragend":ru=!1,gp(q,u,G);break;case"selectionchange":if(Vw)break;case"keydown":case"keyup":gp(q,u,G)}var ve;if(Zc)e:{switch(s){case"compositionstart":var Ae="onCompositionStart";break e;case"compositionend":Ae="onCompositionEnd";break e;case"compositionupdate":Ae="onCompositionUpdate";break e}Ae=void 0}else Br?sp(s,u)&&(Ae="onCompositionEnd"):s==="keydown"&&u.keyCode===229&&(Ae="onCompositionStart");Ae&&(ep&&u.locale!=="ko"&&(Br||Ae!=="onCompositionStart"?Ae==="onCompositionEnd"&&Br&&(ve=Kf()):($s=G,qc="value"in $s?$s.value:$s.textContent,Br=!0)),ye=Ro(z,Ae),0<ye.length&&(Ae=new Jf(Ae,s,null,u,G),q.push({event:Ae,listeners:ye}),ve?Ae.data=ve:(ve=rp(u),ve!==null&&(Ae.data=ve)))),(ve=Mw?Lw(s,u):Dw(s,u))&&(z=Ro(z,"onBeforeInput"),0<z.length&&(G=new Jf("onBeforeInput","beforeinput",null,u,G),q.push({event:G,listeners:z}),G.data=ve))}Ap(q,a)})}function Yi(s,a,u){return{instance:s,listener:a,currentTarget:u}}function Ro(s,a){for(var u=a+"Capture",h=[];s!==null;){var m=s,b=m.stateNode;m.tag===5&&b!==null&&(m=b,b=Qe(s,u),b!=null&&h.unshift(Yi(s,b,m)),b=Qe(s,a),b!=null&&h.push(Yi(s,b,m))),s=s.return}return h}function Wr(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function Ep(s,a,u,h,m){for(var b=a._reactName,S=[];u!==null&&u!==h;){var T=u,N=T.alternate,z=T.stateNode;if(N!==null&&N===h)break;T.tag===5&&z!==null&&(T=z,m?(N=Qe(u,b),N!=null&&S.unshift(Yi(u,N,T))):m||(N=Qe(u,b),N!=null&&S.push(Yi(u,N,T)))),u=u.return}S.length!==0&&s.push({event:a,listeners:S})}var Kw=/\r\n?/g,Yw=/\u0000|\uFFFD/g;function kp(s){return(typeof s=="string"?s:""+s).replace(Kw,`
`).replace(Yw,"")}function To(s,a,u){if(a=kp(a),kp(s)!==a&&u)throw Error(t(425))}function Po(){}var uu=null,du=null;function hu(s,a){return s==="textarea"||s==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var fu=typeof setTimeout=="function"?setTimeout:void 0,Qw=typeof clearTimeout=="function"?clearTimeout:void 0,Rp=typeof Promise=="function"?Promise:void 0,Jw=typeof queueMicrotask=="function"?queueMicrotask:typeof Rp<"u"?function(s){return Rp.resolve(null).then(s).catch(Zw)}:fu;function Zw(s){setTimeout(function(){throw s})}function pu(s,a){var u=a,h=0;do{var m=u.nextSibling;if(s.removeChild(u),m&&m.nodeType===8)if(u=m.data,u==="/$"){if(h===0){s.removeChild(m),zi(a);return}h--}else u!=="$"&&u!=="$?"&&u!=="$!"||h++;u=m}while(u);zi(a)}function Bs(s){for(;s!=null;s=s.nextSibling){var a=s.nodeType;if(a===1||a===3)break;if(a===8){if(a=s.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return s}function Tp(s){s=s.previousSibling;for(var a=0;s;){if(s.nodeType===8){var u=s.data;if(u==="$"||u==="$!"||u==="$?"){if(a===0)return s;a--}else u==="/$"&&a++}s=s.previousSibling}return null}var Vr=Math.random().toString(36).slice(2),ns="__reactFiber$"+Vr,Qi="__reactProps$"+Vr,ms="__reactContainer$"+Vr,gu="__reactEvents$"+Vr,ex="__reactListeners$"+Vr,tx="__reactHandles$"+Vr;function dr(s){var a=s[ns];if(a)return a;for(var u=s.parentNode;u;){if(a=u[ms]||u[ns]){if(u=a.alternate,a.child!==null||u!==null&&u.child!==null)for(s=Tp(s);s!==null;){if(u=s[ns])return u;s=Tp(s)}return a}s=u,u=s.parentNode}return null}function Ji(s){return s=s[ns]||s[ms],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function Gr(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(t(33))}function No(s){return s[Qi]||null}var mu=[],qr=-1;function Hs(s){return{current:s}}function Ge(s){0>qr||(s.current=mu[qr],mu[qr]=null,qr--)}function We(s,a){qr++,mu[qr]=s.current,s.current=a}var Us={},Nt=Hs(Us),Kt=Hs(!1),hr=Us;function Xr(s,a){var u=s.type.contextTypes;if(!u)return Us;var h=s.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===a)return h.__reactInternalMemoizedMaskedChildContext;var m={},b;for(b in u)m[b]=a[b];return h&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=a,s.__reactInternalMemoizedMaskedChildContext=m),m}function Yt(s){return s=s.childContextTypes,s!=null}function Io(){Ge(Kt),Ge(Nt)}function Pp(s,a,u){if(Nt.current!==Us)throw Error(t(168));We(Nt,a),We(Kt,u)}function Np(s,a,u){var h=s.stateNode;if(a=a.childContextTypes,typeof h.getChildContext!="function")return u;h=h.getChildContext();for(var m in h)if(!(m in a))throw Error(t(108,pe(s)||"Unknown",m));return ee({},u,h)}function Mo(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||Us,hr=Nt.current,We(Nt,s),We(Kt,Kt.current),!0}function Ip(s,a,u){var h=s.stateNode;if(!h)throw Error(t(169));u?(s=Np(s,a,hr),h.__reactInternalMemoizedMergedChildContext=s,Ge(Kt),Ge(Nt),We(Nt,s)):Ge(Kt),We(Kt,u)}var ys=null,Lo=!1,yu=!1;function Mp(s){ys===null?ys=[s]:ys.push(s)}function nx(s){Lo=!0,Mp(s)}function Ws(){if(!yu&&ys!==null){yu=!0;var s=0,a=ze;try{var u=ys;for(ze=1;s<u.length;s++){var h=u[s];do h=h(!0);while(h!==null)}ys=null,Lo=!1}catch(m){throw ys!==null&&(ys=ys.slice(s+1)),Df($c,Ws),m}finally{ze=a,yu=!1}}return null}var Kr=[],Yr=0,Do=null,Oo=0,wn=[],xn=0,fr=null,vs=1,bs="";function pr(s,a){Kr[Yr++]=Oo,Kr[Yr++]=Do,Do=s,Oo=a}function Lp(s,a,u){wn[xn++]=vs,wn[xn++]=bs,wn[xn++]=fr,fr=s;var h=vs;s=bs;var m=32-$n(h)-1;h&=~(1<<m),u+=1;var b=32-$n(a)+m;if(30<b){var S=m-m%5;b=(h&(1<<S)-1).toString(32),h>>=S,m-=S,vs=1<<32-$n(a)+m|u<<m|h,bs=b+s}else vs=1<<b|u<<m|h,bs=s}function vu(s){s.return!==null&&(pr(s,1),Lp(s,1,0))}function bu(s){for(;s===Do;)Do=Kr[--Yr],Kr[Yr]=null,Oo=Kr[--Yr],Kr[Yr]=null;for(;s===fr;)fr=wn[--xn],wn[xn]=null,bs=wn[--xn],wn[xn]=null,vs=wn[--xn],wn[xn]=null}var un=null,dn=null,qe=!1,Bn=null;function Dp(s,a){var u=Cn(5,null,null,0);u.elementType="DELETED",u.stateNode=a,u.return=s,a=s.deletions,a===null?(s.deletions=[u],s.flags|=16):a.push(u)}function Op(s,a){switch(s.tag){case 5:var u=s.type;return a=a.nodeType!==1||u.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(s.stateNode=a,un=s,dn=Bs(a.firstChild),!0):!1;case 6:return a=s.pendingProps===""||a.nodeType!==3?null:a,a!==null?(s.stateNode=a,un=s,dn=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(u=fr!==null?{id:vs,overflow:bs}:null,s.memoizedState={dehydrated:a,treeContext:u,retryLane:1073741824},u=Cn(18,null,null,0),u.stateNode=a,u.return=s,s.child=u,un=s,dn=null,!0):!1;default:return!1}}function wu(s){return(s.mode&1)!==0&&(s.flags&128)===0}function xu(s){if(qe){var a=dn;if(a){var u=a;if(!Op(s,a)){if(wu(s))throw Error(t(418));a=Bs(u.nextSibling);var h=un;a&&Op(s,a)?Dp(h,u):(s.flags=s.flags&-4097|2,qe=!1,un=s)}}else{if(wu(s))throw Error(t(418));s.flags=s.flags&-4097|2,qe=!1,un=s}}}function Fp(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;un=s}function Fo(s){if(s!==un)return!1;if(!qe)return Fp(s),qe=!0,!1;var a;if((a=s.tag!==3)&&!(a=s.tag!==5)&&(a=s.type,a=a!=="head"&&a!=="body"&&!hu(s.type,s.memoizedProps)),a&&(a=dn)){if(wu(s))throw jp(),Error(t(418));for(;a;)Dp(s,a),a=Bs(a.nextSibling)}if(Fp(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(t(317));e:{for(s=s.nextSibling,a=0;s;){if(s.nodeType===8){var u=s.data;if(u==="/$"){if(a===0){dn=Bs(s.nextSibling);break e}a--}else u!=="$"&&u!=="$!"&&u!=="$?"||a++}s=s.nextSibling}dn=null}}else dn=un?Bs(s.stateNode.nextSibling):null;return!0}function jp(){for(var s=dn;s;)s=Bs(s.nextSibling)}function Qr(){dn=un=null,qe=!1}function _u(s){Bn===null?Bn=[s]:Bn.push(s)}var sx=R.ReactCurrentBatchConfig;function Zi(s,a,u){if(s=u.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(t(309));var h=u.stateNode}if(!h)throw Error(t(147,s));var m=h,b=""+s;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===b?a.ref:(a=function(S){var T=m.refs;S===null?delete T[b]:T[b]=S},a._stringRef=b,a)}if(typeof s!="string")throw Error(t(284));if(!u._owner)throw Error(t(290,s))}return s}function jo(s,a){throw s=Object.prototype.toString.call(a),Error(t(31,s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s))}function $p(s){var a=s._init;return a(s._payload)}function zp(s){function a(F,I){if(s){var j=F.deletions;j===null?(F.deletions=[I],F.flags|=16):j.push(I)}}function u(F,I){if(!s)return null;for(;I!==null;)a(F,I),I=I.sibling;return null}function h(F,I){for(F=new Map;I!==null;)I.key!==null?F.set(I.key,I):F.set(I.index,I),I=I.sibling;return F}function m(F,I){return F=Js(F,I),F.index=0,F.sibling=null,F}function b(F,I,j){return F.index=j,s?(j=F.alternate,j!==null?(j=j.index,j<I?(F.flags|=2,I):j):(F.flags|=2,I)):(F.flags|=1048576,I)}function S(F){return s&&F.alternate===null&&(F.flags|=2),F}function T(F,I,j,Q){return I===null||I.tag!==6?(I=fd(j,F.mode,Q),I.return=F,I):(I=m(I,j),I.return=F,I)}function N(F,I,j,Q){var ue=j.type;return ue===O?G(F,I,j.props.children,Q,j.key):I!==null&&(I.elementType===ue||typeof ue=="object"&&ue!==null&&ue.$$typeof===Z&&$p(ue)===I.type)?(Q=m(I,j.props),Q.ref=Zi(F,I,j),Q.return=F,Q):(Q=ll(j.type,j.key,j.props,null,F.mode,Q),Q.ref=Zi(F,I,j),Q.return=F,Q)}function z(F,I,j,Q){return I===null||I.tag!==4||I.stateNode.containerInfo!==j.containerInfo||I.stateNode.implementation!==j.implementation?(I=pd(j,F.mode,Q),I.return=F,I):(I=m(I,j.children||[]),I.return=F,I)}function G(F,I,j,Q,ue){return I===null||I.tag!==7?(I=_r(j,F.mode,Q,ue),I.return=F,I):(I=m(I,j),I.return=F,I)}function q(F,I,j){if(typeof I=="string"&&I!==""||typeof I=="number")return I=fd(""+I,F.mode,j),I.return=F,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case M:return j=ll(I.type,I.key,I.props,null,F.mode,j),j.ref=Zi(F,null,I),j.return=F,j;case D:return I=pd(I,F.mode,j),I.return=F,I;case Z:var Q=I._init;return q(F,Q(I._payload),j)}if(Gt(I)||te(I))return I=_r(I,F.mode,j,null),I.return=F,I;jo(F,I)}return null}function W(F,I,j,Q){var ue=I!==null?I.key:null;if(typeof j=="string"&&j!==""||typeof j=="number")return ue!==null?null:T(F,I,""+j,Q);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case M:return j.key===ue?N(F,I,j,Q):null;case D:return j.key===ue?z(F,I,j,Q):null;case Z:return ue=j._init,W(F,I,ue(j._payload),Q)}if(Gt(j)||te(j))return ue!==null?null:G(F,I,j,Q,null);jo(F,j)}return null}function ne(F,I,j,Q,ue){if(typeof Q=="string"&&Q!==""||typeof Q=="number")return F=F.get(j)||null,T(I,F,""+Q,ue);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case M:return F=F.get(Q.key===null?j:Q.key)||null,N(I,F,Q,ue);case D:return F=F.get(Q.key===null?j:Q.key)||null,z(I,F,Q,ue);case Z:var ye=Q._init;return ne(F,I,j,ye(Q._payload),ue)}if(Gt(Q)||te(Q))return F=F.get(j)||null,G(I,F,Q,ue,null);jo(I,Q)}return null}function oe(F,I,j,Q){for(var ue=null,ye=null,ve=I,Ae=I=0,vt=null;ve!==null&&Ae<j.length;Ae++){ve.index>Ae?(vt=ve,ve=null):vt=ve.sibling;var je=W(F,ve,j[Ae],Q);if(je===null){ve===null&&(ve=vt);break}s&&ve&&je.alternate===null&&a(F,ve),I=b(je,I,Ae),ye===null?ue=je:ye.sibling=je,ye=je,ve=vt}if(Ae===j.length)return u(F,ve),qe&&pr(F,Ae),ue;if(ve===null){for(;Ae<j.length;Ae++)ve=q(F,j[Ae],Q),ve!==null&&(I=b(ve,I,Ae),ye===null?ue=ve:ye.sibling=ve,ye=ve);return qe&&pr(F,Ae),ue}for(ve=h(F,ve);Ae<j.length;Ae++)vt=ne(ve,F,Ae,j[Ae],Q),vt!==null&&(s&&vt.alternate!==null&&ve.delete(vt.key===null?Ae:vt.key),I=b(vt,I,Ae),ye===null?ue=vt:ye.sibling=vt,ye=vt);return s&&ve.forEach(function(Zs){return a(F,Zs)}),qe&&pr(F,Ae),ue}function le(F,I,j,Q){var ue=te(j);if(typeof ue!="function")throw Error(t(150));if(j=ue.call(j),j==null)throw Error(t(151));for(var ye=ue=null,ve=I,Ae=I=0,vt=null,je=j.next();ve!==null&&!je.done;Ae++,je=j.next()){ve.index>Ae?(vt=ve,ve=null):vt=ve.sibling;var Zs=W(F,ve,je.value,Q);if(Zs===null){ve===null&&(ve=vt);break}s&&ve&&Zs.alternate===null&&a(F,ve),I=b(Zs,I,Ae),ye===null?ue=Zs:ye.sibling=Zs,ye=Zs,ve=vt}if(je.done)return u(F,ve),qe&&pr(F,Ae),ue;if(ve===null){for(;!je.done;Ae++,je=j.next())je=q(F,je.value,Q),je!==null&&(I=b(je,I,Ae),ye===null?ue=je:ye.sibling=je,ye=je);return qe&&pr(F,Ae),ue}for(ve=h(F,ve);!je.done;Ae++,je=j.next())je=ne(ve,F,Ae,je.value,Q),je!==null&&(s&&je.alternate!==null&&ve.delete(je.key===null?Ae:je.key),I=b(je,I,Ae),ye===null?ue=je:ye.sibling=je,ye=je);return s&&ve.forEach(function(Ox){return a(F,Ox)}),qe&&pr(F,Ae),ue}function nt(F,I,j,Q){if(typeof j=="object"&&j!==null&&j.type===O&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case M:e:{for(var ue=j.key,ye=I;ye!==null;){if(ye.key===ue){if(ue=j.type,ue===O){if(ye.tag===7){u(F,ye.sibling),I=m(ye,j.props.children),I.return=F,F=I;break e}}else if(ye.elementType===ue||typeof ue=="object"&&ue!==null&&ue.$$typeof===Z&&$p(ue)===ye.type){u(F,ye.sibling),I=m(ye,j.props),I.ref=Zi(F,ye,j),I.return=F,F=I;break e}u(F,ye);break}else a(F,ye);ye=ye.sibling}j.type===O?(I=_r(j.props.children,F.mode,Q,j.key),I.return=F,F=I):(Q=ll(j.type,j.key,j.props,null,F.mode,Q),Q.ref=Zi(F,I,j),Q.return=F,F=Q)}return S(F);case D:e:{for(ye=j.key;I!==null;){if(I.key===ye)if(I.tag===4&&I.stateNode.containerInfo===j.containerInfo&&I.stateNode.implementation===j.implementation){u(F,I.sibling),I=m(I,j.children||[]),I.return=F,F=I;break e}else{u(F,I);break}else a(F,I);I=I.sibling}I=pd(j,F.mode,Q),I.return=F,F=I}return S(F);case Z:return ye=j._init,nt(F,I,ye(j._payload),Q)}if(Gt(j))return oe(F,I,j,Q);if(te(j))return le(F,I,j,Q);jo(F,j)}return typeof j=="string"&&j!==""||typeof j=="number"?(j=""+j,I!==null&&I.tag===6?(u(F,I.sibling),I=m(I,j),I.return=F,F=I):(u(F,I),I=fd(j,F.mode,Q),I.return=F,F=I),S(F)):u(F,I)}return nt}var Jr=zp(!0),Bp=zp(!1),$o=Hs(null),zo=null,Zr=null,Su=null;function Au(){Su=Zr=zo=null}function Cu(s){var a=$o.current;Ge($o),s._currentValue=a}function Eu(s,a,u){for(;s!==null;){var h=s.alternate;if((s.childLanes&a)!==a?(s.childLanes|=a,h!==null&&(h.childLanes|=a)):h!==null&&(h.childLanes&a)!==a&&(h.childLanes|=a),s===u)break;s=s.return}}function ei(s,a){zo=s,Su=Zr=null,s=s.dependencies,s!==null&&s.firstContext!==null&&((s.lanes&a)!==0&&(Qt=!0),s.firstContext=null)}function _n(s){var a=s._currentValue;if(Su!==s)if(s={context:s,memoizedValue:a,next:null},Zr===null){if(zo===null)throw Error(t(308));Zr=s,zo.dependencies={lanes:0,firstContext:s}}else Zr=Zr.next=s;return a}var gr=null;function ku(s){gr===null?gr=[s]:gr.push(s)}function Hp(s,a,u,h){var m=a.interleaved;return m===null?(u.next=u,ku(a)):(u.next=m.next,m.next=u),a.interleaved=u,ws(s,h)}function ws(s,a){s.lanes|=a;var u=s.alternate;for(u!==null&&(u.lanes|=a),u=s,s=s.return;s!==null;)s.childLanes|=a,u=s.alternate,u!==null&&(u.childLanes|=a),u=s,s=s.return;return u.tag===3?u.stateNode:null}var Vs=!1;function Ru(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Up(s,a){s=s.updateQueue,a.updateQueue===s&&(a.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function xs(s,a){return{eventTime:s,lane:a,tag:0,payload:null,callback:null,next:null}}function Gs(s,a,u){var h=s.updateQueue;if(h===null)return null;if(h=h.shared,(Fe&2)!==0){var m=h.pending;return m===null?a.next=a:(a.next=m.next,m.next=a),h.pending=a,ws(s,u)}return m=h.interleaved,m===null?(a.next=a,ku(h)):(a.next=m.next,m.next=a),h.interleaved=a,ws(s,u)}function Bo(s,a,u){if(a=a.updateQueue,a!==null&&(a=a.shared,(u&4194240)!==0)){var h=a.lanes;h&=s.pendingLanes,u|=h,a.lanes=u,Hc(s,u)}}function Wp(s,a){var u=s.updateQueue,h=s.alternate;if(h!==null&&(h=h.updateQueue,u===h)){var m=null,b=null;if(u=u.firstBaseUpdate,u!==null){do{var S={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};b===null?m=b=S:b=b.next=S,u=u.next}while(u!==null);b===null?m=b=a:b=b.next=a}else m=b=a;u={baseState:h.baseState,firstBaseUpdate:m,lastBaseUpdate:b,shared:h.shared,effects:h.effects},s.updateQueue=u;return}s=u.lastBaseUpdate,s===null?u.firstBaseUpdate=a:s.next=a,u.lastBaseUpdate=a}function Ho(s,a,u,h){var m=s.updateQueue;Vs=!1;var b=m.firstBaseUpdate,S=m.lastBaseUpdate,T=m.shared.pending;if(T!==null){m.shared.pending=null;var N=T,z=N.next;N.next=null,S===null?b=z:S.next=z,S=N;var G=s.alternate;G!==null&&(G=G.updateQueue,T=G.lastBaseUpdate,T!==S&&(T===null?G.firstBaseUpdate=z:T.next=z,G.lastBaseUpdate=N))}if(b!==null){var q=m.baseState;S=0,G=z=N=null,T=b;do{var W=T.lane,ne=T.eventTime;if((h&W)===W){G!==null&&(G=G.next={eventTime:ne,lane:0,tag:T.tag,payload:T.payload,callback:T.callback,next:null});e:{var oe=s,le=T;switch(W=a,ne=u,le.tag){case 1:if(oe=le.payload,typeof oe=="function"){q=oe.call(ne,q,W);break e}q=oe;break e;case 3:oe.flags=oe.flags&-65537|128;case 0:if(oe=le.payload,W=typeof oe=="function"?oe.call(ne,q,W):oe,W==null)break e;q=ee({},q,W);break e;case 2:Vs=!0}}T.callback!==null&&T.lane!==0&&(s.flags|=64,W=m.effects,W===null?m.effects=[T]:W.push(T))}else ne={eventTime:ne,lane:W,tag:T.tag,payload:T.payload,callback:T.callback,next:null},G===null?(z=G=ne,N=q):G=G.next=ne,S|=W;if(T=T.next,T===null){if(T=m.shared.pending,T===null)break;W=T,T=W.next,W.next=null,m.lastBaseUpdate=W,m.shared.pending=null}}while(!0);if(G===null&&(N=q),m.baseState=N,m.firstBaseUpdate=z,m.lastBaseUpdate=G,a=m.shared.interleaved,a!==null){m=a;do S|=m.lane,m=m.next;while(m!==a)}else b===null&&(m.shared.lanes=0);vr|=S,s.lanes=S,s.memoizedState=q}}function Vp(s,a,u){if(s=a.effects,a.effects=null,s!==null)for(a=0;a<s.length;a++){var h=s[a],m=h.callback;if(m!==null){if(h.callback=null,h=u,typeof m!="function")throw Error(t(191,m));m.call(h)}}}var ea={},ss=Hs(ea),ta=Hs(ea),na=Hs(ea);function mr(s){if(s===ea)throw Error(t(174));return s}function Tu(s,a){switch(We(na,a),We(ta,s),We(ss,ea),s=a.nodeType,s){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:Zn(null,"");break;default:s=s===8?a.parentNode:a,a=s.namespaceURI||null,s=s.tagName,a=Zn(a,s)}Ge(ss),We(ss,a)}function ti(){Ge(ss),Ge(ta),Ge(na)}function Gp(s){mr(na.current);var a=mr(ss.current),u=Zn(a,s.type);a!==u&&(We(ta,s),We(ss,u))}function Pu(s){ta.current===s&&(Ge(ss),Ge(ta))}var Je=Hs(0);function Uo(s){for(var a=s;a!==null;){if(a.tag===13){var u=a.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Nu=[];function Iu(){for(var s=0;s<Nu.length;s++)Nu[s]._workInProgressVersionPrimary=null;Nu.length=0}var Wo=R.ReactCurrentDispatcher,Mu=R.ReactCurrentBatchConfig,yr=0,Ze=null,ct=null,mt=null,Vo=!1,sa=!1,ra=0,rx=0;function It(){throw Error(t(321))}function Lu(s,a){if(a===null)return!1;for(var u=0;u<a.length&&u<s.length;u++)if(!zn(s[u],a[u]))return!1;return!0}function Du(s,a,u,h,m,b){if(yr=b,Ze=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,Wo.current=s===null||s.memoizedState===null?lx:cx,s=u(h,m),sa){b=0;do{if(sa=!1,ra=0,25<=b)throw Error(t(301));b+=1,mt=ct=null,a.updateQueue=null,Wo.current=ux,s=u(h,m)}while(sa)}if(Wo.current=Xo,a=ct!==null&&ct.next!==null,yr=0,mt=ct=Ze=null,Vo=!1,a)throw Error(t(300));return s}function Ou(){var s=ra!==0;return ra=0,s}function rs(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mt===null?Ze.memoizedState=mt=s:mt=mt.next=s,mt}function Sn(){if(ct===null){var s=Ze.alternate;s=s!==null?s.memoizedState:null}else s=ct.next;var a=mt===null?Ze.memoizedState:mt.next;if(a!==null)mt=a,ct=s;else{if(s===null)throw Error(t(310));ct=s,s={memoizedState:ct.memoizedState,baseState:ct.baseState,baseQueue:ct.baseQueue,queue:ct.queue,next:null},mt===null?Ze.memoizedState=mt=s:mt=mt.next=s}return mt}function ia(s,a){return typeof a=="function"?a(s):a}function Fu(s){var a=Sn(),u=a.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=s;var h=ct,m=h.baseQueue,b=u.pending;if(b!==null){if(m!==null){var S=m.next;m.next=b.next,b.next=S}h.baseQueue=m=b,u.pending=null}if(m!==null){b=m.next,h=h.baseState;var T=S=null,N=null,z=b;do{var G=z.lane;if((yr&G)===G)N!==null&&(N=N.next={lane:0,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),h=z.hasEagerState?z.eagerState:s(h,z.action);else{var q={lane:G,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null};N===null?(T=N=q,S=h):N=N.next=q,Ze.lanes|=G,vr|=G}z=z.next}while(z!==null&&z!==b);N===null?S=h:N.next=T,zn(h,a.memoizedState)||(Qt=!0),a.memoizedState=h,a.baseState=S,a.baseQueue=N,u.lastRenderedState=h}if(s=u.interleaved,s!==null){m=s;do b=m.lane,Ze.lanes|=b,vr|=b,m=m.next;while(m!==s)}else m===null&&(u.lanes=0);return[a.memoizedState,u.dispatch]}function ju(s){var a=Sn(),u=a.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=s;var h=u.dispatch,m=u.pending,b=a.memoizedState;if(m!==null){u.pending=null;var S=m=m.next;do b=s(b,S.action),S=S.next;while(S!==m);zn(b,a.memoizedState)||(Qt=!0),a.memoizedState=b,a.baseQueue===null&&(a.baseState=b),u.lastRenderedState=b}return[b,h]}function qp(){}function Xp(s,a){var u=Ze,h=Sn(),m=a(),b=!zn(h.memoizedState,m);if(b&&(h.memoizedState=m,Qt=!0),h=h.queue,$u(Qp.bind(null,u,h,s),[s]),h.getSnapshot!==a||b||mt!==null&&mt.memoizedState.tag&1){if(u.flags|=2048,aa(9,Yp.bind(null,u,h,m,a),void 0,null),yt===null)throw Error(t(349));(yr&30)!==0||Kp(u,a,m)}return m}function Kp(s,a,u){s.flags|=16384,s={getSnapshot:a,value:u},a=Ze.updateQueue,a===null?(a={lastEffect:null,stores:null},Ze.updateQueue=a,a.stores=[s]):(u=a.stores,u===null?a.stores=[s]:u.push(s))}function Yp(s,a,u,h){a.value=u,a.getSnapshot=h,Jp(a)&&Zp(s)}function Qp(s,a,u){return u(function(){Jp(a)&&Zp(s)})}function Jp(s){var a=s.getSnapshot;s=s.value;try{var u=a();return!zn(s,u)}catch{return!0}}function Zp(s){var a=ws(s,1);a!==null&&Vn(a,s,1,-1)}function eg(s){var a=rs();return typeof s=="function"&&(s=s()),a.memoizedState=a.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ia,lastRenderedState:s},a.queue=s,s=s.dispatch=ox.bind(null,Ze,s),[a.memoizedState,s]}function aa(s,a,u,h){return s={tag:s,create:a,destroy:u,deps:h,next:null},a=Ze.updateQueue,a===null?(a={lastEffect:null,stores:null},Ze.updateQueue=a,a.lastEffect=s.next=s):(u=a.lastEffect,u===null?a.lastEffect=s.next=s:(h=u.next,u.next=s,s.next=h,a.lastEffect=s)),s}function tg(){return Sn().memoizedState}function Go(s,a,u,h){var m=rs();Ze.flags|=s,m.memoizedState=aa(1|a,u,void 0,h===void 0?null:h)}function qo(s,a,u,h){var m=Sn();h=h===void 0?null:h;var b=void 0;if(ct!==null){var S=ct.memoizedState;if(b=S.destroy,h!==null&&Lu(h,S.deps)){m.memoizedState=aa(a,u,b,h);return}}Ze.flags|=s,m.memoizedState=aa(1|a,u,b,h)}function ng(s,a){return Go(8390656,8,s,a)}function $u(s,a){return qo(2048,8,s,a)}function sg(s,a){return qo(4,2,s,a)}function rg(s,a){return qo(4,4,s,a)}function ig(s,a){if(typeof a=="function")return s=s(),a(s),function(){a(null)};if(a!=null)return s=s(),a.current=s,function(){a.current=null}}function ag(s,a,u){return u=u!=null?u.concat([s]):null,qo(4,4,ig.bind(null,a,s),u)}function zu(){}function og(s,a){var u=Sn();a=a===void 0?null:a;var h=u.memoizedState;return h!==null&&a!==null&&Lu(a,h[1])?h[0]:(u.memoizedState=[s,a],s)}function lg(s,a){var u=Sn();a=a===void 0?null:a;var h=u.memoizedState;return h!==null&&a!==null&&Lu(a,h[1])?h[0]:(s=s(),u.memoizedState=[s,a],s)}function cg(s,a,u){return(yr&21)===0?(s.baseState&&(s.baseState=!1,Qt=!0),s.memoizedState=u):(zn(u,a)||(u=$f(),Ze.lanes|=u,vr|=u,s.baseState=!0),a)}function ix(s,a){var u=ze;ze=u!==0&&4>u?u:4,s(!0);var h=Mu.transition;Mu.transition={};try{s(!1),a()}finally{ze=u,Mu.transition=h}}function ug(){return Sn().memoizedState}function ax(s,a,u){var h=Ys(s);if(u={lane:h,action:u,hasEagerState:!1,eagerState:null,next:null},dg(s))hg(a,u);else if(u=Hp(s,a,u,h),u!==null){var m=zt();Vn(u,s,h,m),fg(u,a,h)}}function ox(s,a,u){var h=Ys(s),m={lane:h,action:u,hasEagerState:!1,eagerState:null,next:null};if(dg(s))hg(a,m);else{var b=s.alternate;if(s.lanes===0&&(b===null||b.lanes===0)&&(b=a.lastRenderedReducer,b!==null))try{var S=a.lastRenderedState,T=b(S,u);if(m.hasEagerState=!0,m.eagerState=T,zn(T,S)){var N=a.interleaved;N===null?(m.next=m,ku(a)):(m.next=N.next,N.next=m),a.interleaved=m;return}}catch{}finally{}u=Hp(s,a,m,h),u!==null&&(m=zt(),Vn(u,s,h,m),fg(u,a,h))}}function dg(s){var a=s.alternate;return s===Ze||a!==null&&a===Ze}function hg(s,a){sa=Vo=!0;var u=s.pending;u===null?a.next=a:(a.next=u.next,u.next=a),s.pending=a}function fg(s,a,u){if((u&4194240)!==0){var h=a.lanes;h&=s.pendingLanes,u|=h,a.lanes=u,Hc(s,u)}}var Xo={readContext:_n,useCallback:It,useContext:It,useEffect:It,useImperativeHandle:It,useInsertionEffect:It,useLayoutEffect:It,useMemo:It,useReducer:It,useRef:It,useState:It,useDebugValue:It,useDeferredValue:It,useTransition:It,useMutableSource:It,useSyncExternalStore:It,useId:It,unstable_isNewReconciler:!1},lx={readContext:_n,useCallback:function(s,a){return rs().memoizedState=[s,a===void 0?null:a],s},useContext:_n,useEffect:ng,useImperativeHandle:function(s,a,u){return u=u!=null?u.concat([s]):null,Go(4194308,4,ig.bind(null,a,s),u)},useLayoutEffect:function(s,a){return Go(4194308,4,s,a)},useInsertionEffect:function(s,a){return Go(4,2,s,a)},useMemo:function(s,a){var u=rs();return a=a===void 0?null:a,s=s(),u.memoizedState=[s,a],s},useReducer:function(s,a,u){var h=rs();return a=u!==void 0?u(a):a,h.memoizedState=h.baseState=a,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:a},h.queue=s,s=s.dispatch=ax.bind(null,Ze,s),[h.memoizedState,s]},useRef:function(s){var a=rs();return s={current:s},a.memoizedState=s},useState:eg,useDebugValue:zu,useDeferredValue:function(s){return rs().memoizedState=s},useTransition:function(){var s=eg(!1),a=s[0];return s=ix.bind(null,s[1]),rs().memoizedState=s,[a,s]},useMutableSource:function(){},useSyncExternalStore:function(s,a,u){var h=Ze,m=rs();if(qe){if(u===void 0)throw Error(t(407));u=u()}else{if(u=a(),yt===null)throw Error(t(349));(yr&30)!==0||Kp(h,a,u)}m.memoizedState=u;var b={value:u,getSnapshot:a};return m.queue=b,ng(Qp.bind(null,h,b,s),[s]),h.flags|=2048,aa(9,Yp.bind(null,h,b,u,a),void 0,null),u},useId:function(){var s=rs(),a=yt.identifierPrefix;if(qe){var u=bs,h=vs;u=(h&~(1<<32-$n(h)-1)).toString(32)+u,a=":"+a+"R"+u,u=ra++,0<u&&(a+="H"+u.toString(32)),a+=":"}else u=rx++,a=":"+a+"r"+u.toString(32)+":";return s.memoizedState=a},unstable_isNewReconciler:!1},cx={readContext:_n,useCallback:og,useContext:_n,useEffect:$u,useImperativeHandle:ag,useInsertionEffect:sg,useLayoutEffect:rg,useMemo:lg,useReducer:Fu,useRef:tg,useState:function(){return Fu(ia)},useDebugValue:zu,useDeferredValue:function(s){var a=Sn();return cg(a,ct.memoizedState,s)},useTransition:function(){var s=Fu(ia)[0],a=Sn().memoizedState;return[s,a]},useMutableSource:qp,useSyncExternalStore:Xp,useId:ug,unstable_isNewReconciler:!1},ux={readContext:_n,useCallback:og,useContext:_n,useEffect:$u,useImperativeHandle:ag,useInsertionEffect:sg,useLayoutEffect:rg,useMemo:lg,useReducer:ju,useRef:tg,useState:function(){return ju(ia)},useDebugValue:zu,useDeferredValue:function(s){var a=Sn();return ct===null?a.memoizedState=s:cg(a,ct.memoizedState,s)},useTransition:function(){var s=ju(ia)[0],a=Sn().memoizedState;return[s,a]},useMutableSource:qp,useSyncExternalStore:Xp,useId:ug,unstable_isNewReconciler:!1};function Hn(s,a){if(s&&s.defaultProps){a=ee({},a),s=s.defaultProps;for(var u in s)a[u]===void 0&&(a[u]=s[u]);return a}return a}function Bu(s,a,u,h){a=s.memoizedState,u=u(h,a),u=u==null?a:ee({},a,u),s.memoizedState=u,s.lanes===0&&(s.updateQueue.baseState=u)}var Ko={isMounted:function(s){return(s=s._reactInternals)?ur(s)===s:!1},enqueueSetState:function(s,a,u){s=s._reactInternals;var h=zt(),m=Ys(s),b=xs(h,m);b.payload=a,u!=null&&(b.callback=u),a=Gs(s,b,m),a!==null&&(Vn(a,s,m,h),Bo(a,s,m))},enqueueReplaceState:function(s,a,u){s=s._reactInternals;var h=zt(),m=Ys(s),b=xs(h,m);b.tag=1,b.payload=a,u!=null&&(b.callback=u),a=Gs(s,b,m),a!==null&&(Vn(a,s,m,h),Bo(a,s,m))},enqueueForceUpdate:function(s,a){s=s._reactInternals;var u=zt(),h=Ys(s),m=xs(u,h);m.tag=2,a!=null&&(m.callback=a),a=Gs(s,m,h),a!==null&&(Vn(a,s,h,u),Bo(a,s,h))}};function pg(s,a,u,h,m,b,S){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(h,b,S):a.prototype&&a.prototype.isPureReactComponent?!Gi(u,h)||!Gi(m,b):!0}function gg(s,a,u){var h=!1,m=Us,b=a.contextType;return typeof b=="object"&&b!==null?b=_n(b):(m=Yt(a)?hr:Nt.current,h=a.contextTypes,b=(h=h!=null)?Xr(s,m):Us),a=new a(u,b),s.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=Ko,s.stateNode=a,a._reactInternals=s,h&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=m,s.__reactInternalMemoizedMaskedChildContext=b),a}function mg(s,a,u,h){s=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(u,h),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(u,h),a.state!==s&&Ko.enqueueReplaceState(a,a.state,null)}function Hu(s,a,u,h){var m=s.stateNode;m.props=u,m.state=s.memoizedState,m.refs={},Ru(s);var b=a.contextType;typeof b=="object"&&b!==null?m.context=_n(b):(b=Yt(a)?hr:Nt.current,m.context=Xr(s,b)),m.state=s.memoizedState,b=a.getDerivedStateFromProps,typeof b=="function"&&(Bu(s,a,b,u),m.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(a=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),a!==m.state&&Ko.enqueueReplaceState(m,m.state,null),Ho(s,u,m,h),m.state=s.memoizedState),typeof m.componentDidMount=="function"&&(s.flags|=4194308)}function ni(s,a){try{var u="",h=a;do u+=ke(h),h=h.return;while(h);var m=u}catch(b){m=`
Error generating stack: `+b.message+`
`+b.stack}return{value:s,source:a,stack:m,digest:null}}function Uu(s,a,u){return{value:s,source:null,stack:u??null,digest:a??null}}function Wu(s,a){try{console.error(a.value)}catch(u){setTimeout(function(){throw u})}}var dx=typeof WeakMap=="function"?WeakMap:Map;function yg(s,a,u){u=xs(-1,u),u.tag=3,u.payload={element:null};var h=a.value;return u.callback=function(){nl||(nl=!0,id=h),Wu(s,a)},u}function vg(s,a,u){u=xs(-1,u),u.tag=3;var h=s.type.getDerivedStateFromError;if(typeof h=="function"){var m=a.value;u.payload=function(){return h(m)},u.callback=function(){Wu(s,a)}}var b=s.stateNode;return b!==null&&typeof b.componentDidCatch=="function"&&(u.callback=function(){Wu(s,a),typeof h!="function"&&(Xs===null?Xs=new Set([this]):Xs.add(this));var S=a.stack;this.componentDidCatch(a.value,{componentStack:S!==null?S:""})}),u}function bg(s,a,u){var h=s.pingCache;if(h===null){h=s.pingCache=new dx;var m=new Set;h.set(a,m)}else m=h.get(a),m===void 0&&(m=new Set,h.set(a,m));m.has(u)||(m.add(u),s=Cx.bind(null,s,a,u),a.then(s,s))}function wg(s){do{var a;if((a=s.tag===13)&&(a=s.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return s;s=s.return}while(s!==null);return null}function xg(s,a,u,h,m){return(s.mode&1)===0?(s===a?s.flags|=65536:(s.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(a=xs(-1,1),a.tag=2,Gs(u,a,1))),u.lanes|=1),s):(s.flags|=65536,s.lanes=m,s)}var hx=R.ReactCurrentOwner,Qt=!1;function $t(s,a,u,h){a.child=s===null?Bp(a,null,u,h):Jr(a,s.child,u,h)}function _g(s,a,u,h,m){u=u.render;var b=a.ref;return ei(a,m),h=Du(s,a,u,h,b,m),u=Ou(),s!==null&&!Qt?(a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~m,_s(s,a,m)):(qe&&u&&vu(a),a.flags|=1,$t(s,a,h,m),a.child)}function Sg(s,a,u,h,m){if(s===null){var b=u.type;return typeof b=="function"&&!hd(b)&&b.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(a.tag=15,a.type=b,Ag(s,a,b,h,m)):(s=ll(u.type,null,h,a,a.mode,m),s.ref=a.ref,s.return=a,a.child=s)}if(b=s.child,(s.lanes&m)===0){var S=b.memoizedProps;if(u=u.compare,u=u!==null?u:Gi,u(S,h)&&s.ref===a.ref)return _s(s,a,m)}return a.flags|=1,s=Js(b,h),s.ref=a.ref,s.return=a,a.child=s}function Ag(s,a,u,h,m){if(s!==null){var b=s.memoizedProps;if(Gi(b,h)&&s.ref===a.ref)if(Qt=!1,a.pendingProps=h=b,(s.lanes&m)!==0)(s.flags&131072)!==0&&(Qt=!0);else return a.lanes=s.lanes,_s(s,a,m)}return Vu(s,a,u,h,m)}function Cg(s,a,u){var h=a.pendingProps,m=h.children,b=s!==null?s.memoizedState:null;if(h.mode==="hidden")if((a.mode&1)===0)a.memoizedState={baseLanes:0,cachePool:null,transitions:null},We(ri,hn),hn|=u;else{if((u&1073741824)===0)return s=b!==null?b.baseLanes|u:u,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:s,cachePool:null,transitions:null},a.updateQueue=null,We(ri,hn),hn|=s,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=b!==null?b.baseLanes:u,We(ri,hn),hn|=h}else b!==null?(h=b.baseLanes|u,a.memoizedState=null):h=u,We(ri,hn),hn|=h;return $t(s,a,m,u),a.child}function Eg(s,a){var u=a.ref;(s===null&&u!==null||s!==null&&s.ref!==u)&&(a.flags|=512,a.flags|=2097152)}function Vu(s,a,u,h,m){var b=Yt(u)?hr:Nt.current;return b=Xr(a,b),ei(a,m),u=Du(s,a,u,h,b,m),h=Ou(),s!==null&&!Qt?(a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~m,_s(s,a,m)):(qe&&h&&vu(a),a.flags|=1,$t(s,a,u,m),a.child)}function kg(s,a,u,h,m){if(Yt(u)){var b=!0;Mo(a)}else b=!1;if(ei(a,m),a.stateNode===null)Qo(s,a),gg(a,u,h),Hu(a,u,h,m),h=!0;else if(s===null){var S=a.stateNode,T=a.memoizedProps;S.props=T;var N=S.context,z=u.contextType;typeof z=="object"&&z!==null?z=_n(z):(z=Yt(u)?hr:Nt.current,z=Xr(a,z));var G=u.getDerivedStateFromProps,q=typeof G=="function"||typeof S.getSnapshotBeforeUpdate=="function";q||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(T!==h||N!==z)&&mg(a,S,h,z),Vs=!1;var W=a.memoizedState;S.state=W,Ho(a,h,S,m),N=a.memoizedState,T!==h||W!==N||Kt.current||Vs?(typeof G=="function"&&(Bu(a,u,G,h),N=a.memoizedState),(T=Vs||pg(a,u,T,h,W,N,z))?(q||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(a.flags|=4194308)):(typeof S.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=h,a.memoizedState=N),S.props=h,S.state=N,S.context=z,h=T):(typeof S.componentDidMount=="function"&&(a.flags|=4194308),h=!1)}else{S=a.stateNode,Up(s,a),T=a.memoizedProps,z=a.type===a.elementType?T:Hn(a.type,T),S.props=z,q=a.pendingProps,W=S.context,N=u.contextType,typeof N=="object"&&N!==null?N=_n(N):(N=Yt(u)?hr:Nt.current,N=Xr(a,N));var ne=u.getDerivedStateFromProps;(G=typeof ne=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(T!==q||W!==N)&&mg(a,S,h,N),Vs=!1,W=a.memoizedState,S.state=W,Ho(a,h,S,m);var oe=a.memoizedState;T!==q||W!==oe||Kt.current||Vs?(typeof ne=="function"&&(Bu(a,u,ne,h),oe=a.memoizedState),(z=Vs||pg(a,u,z,h,W,oe,N)||!1)?(G||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(h,oe,N),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(h,oe,N)),typeof S.componentDidUpdate=="function"&&(a.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof S.componentDidUpdate!="function"||T===s.memoizedProps&&W===s.memoizedState||(a.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||T===s.memoizedProps&&W===s.memoizedState||(a.flags|=1024),a.memoizedProps=h,a.memoizedState=oe),S.props=h,S.state=oe,S.context=N,h=z):(typeof S.componentDidUpdate!="function"||T===s.memoizedProps&&W===s.memoizedState||(a.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||T===s.memoizedProps&&W===s.memoizedState||(a.flags|=1024),h=!1)}return Gu(s,a,u,h,b,m)}function Gu(s,a,u,h,m,b){Eg(s,a);var S=(a.flags&128)!==0;if(!h&&!S)return m&&Ip(a,u,!1),_s(s,a,b);h=a.stateNode,hx.current=a;var T=S&&typeof u.getDerivedStateFromError!="function"?null:h.render();return a.flags|=1,s!==null&&S?(a.child=Jr(a,s.child,null,b),a.child=Jr(a,null,T,b)):$t(s,a,T,b),a.memoizedState=h.state,m&&Ip(a,u,!0),a.child}function Rg(s){var a=s.stateNode;a.pendingContext?Pp(s,a.pendingContext,a.pendingContext!==a.context):a.context&&Pp(s,a.context,!1),Tu(s,a.containerInfo)}function Tg(s,a,u,h,m){return Qr(),_u(m),a.flags|=256,$t(s,a,u,h),a.child}var qu={dehydrated:null,treeContext:null,retryLane:0};function Xu(s){return{baseLanes:s,cachePool:null,transitions:null}}function Pg(s,a,u){var h=a.pendingProps,m=Je.current,b=!1,S=(a.flags&128)!==0,T;if((T=S)||(T=s!==null&&s.memoizedState===null?!1:(m&2)!==0),T?(b=!0,a.flags&=-129):(s===null||s.memoizedState!==null)&&(m|=1),We(Je,m&1),s===null)return xu(a),s=a.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?((a.mode&1)===0?a.lanes=1:s.data==="$!"?a.lanes=8:a.lanes=1073741824,null):(S=h.children,s=h.fallback,b?(h=a.mode,b=a.child,S={mode:"hidden",children:S},(h&1)===0&&b!==null?(b.childLanes=0,b.pendingProps=S):b=cl(S,h,0,null),s=_r(s,h,u,null),b.return=a,s.return=a,b.sibling=s,a.child=b,a.child.memoizedState=Xu(u),a.memoizedState=qu,s):Ku(a,S));if(m=s.memoizedState,m!==null&&(T=m.dehydrated,T!==null))return fx(s,a,S,h,T,m,u);if(b){b=h.fallback,S=a.mode,m=s.child,T=m.sibling;var N={mode:"hidden",children:h.children};return(S&1)===0&&a.child!==m?(h=a.child,h.childLanes=0,h.pendingProps=N,a.deletions=null):(h=Js(m,N),h.subtreeFlags=m.subtreeFlags&14680064),T!==null?b=Js(T,b):(b=_r(b,S,u,null),b.flags|=2),b.return=a,h.return=a,h.sibling=b,a.child=h,h=b,b=a.child,S=s.child.memoizedState,S=S===null?Xu(u):{baseLanes:S.baseLanes|u,cachePool:null,transitions:S.transitions},b.memoizedState=S,b.childLanes=s.childLanes&~u,a.memoizedState=qu,h}return b=s.child,s=b.sibling,h=Js(b,{mode:"visible",children:h.children}),(a.mode&1)===0&&(h.lanes=u),h.return=a,h.sibling=null,s!==null&&(u=a.deletions,u===null?(a.deletions=[s],a.flags|=16):u.push(s)),a.child=h,a.memoizedState=null,h}function Ku(s,a){return a=cl({mode:"visible",children:a},s.mode,0,null),a.return=s,s.child=a}function Yo(s,a,u,h){return h!==null&&_u(h),Jr(a,s.child,null,u),s=Ku(a,a.pendingProps.children),s.flags|=2,a.memoizedState=null,s}function fx(s,a,u,h,m,b,S){if(u)return a.flags&256?(a.flags&=-257,h=Uu(Error(t(422))),Yo(s,a,S,h)):a.memoizedState!==null?(a.child=s.child,a.flags|=128,null):(b=h.fallback,m=a.mode,h=cl({mode:"visible",children:h.children},m,0,null),b=_r(b,m,S,null),b.flags|=2,h.return=a,b.return=a,h.sibling=b,a.child=h,(a.mode&1)!==0&&Jr(a,s.child,null,S),a.child.memoizedState=Xu(S),a.memoizedState=qu,b);if((a.mode&1)===0)return Yo(s,a,S,null);if(m.data==="$!"){if(h=m.nextSibling&&m.nextSibling.dataset,h)var T=h.dgst;return h=T,b=Error(t(419)),h=Uu(b,h,void 0),Yo(s,a,S,h)}if(T=(S&s.childLanes)!==0,Qt||T){if(h=yt,h!==null){switch(S&-S){case 4:m=2;break;case 16:m=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:m=32;break;case 536870912:m=268435456;break;default:m=0}m=(m&(h.suspendedLanes|S))!==0?0:m,m!==0&&m!==b.retryLane&&(b.retryLane=m,ws(s,m),Vn(h,s,m,-1))}return dd(),h=Uu(Error(t(421))),Yo(s,a,S,h)}return m.data==="$?"?(a.flags|=128,a.child=s.child,a=Ex.bind(null,s),m._reactRetry=a,null):(s=b.treeContext,dn=Bs(m.nextSibling),un=a,qe=!0,Bn=null,s!==null&&(wn[xn++]=vs,wn[xn++]=bs,wn[xn++]=fr,vs=s.id,bs=s.overflow,fr=a),a=Ku(a,h.children),a.flags|=4096,a)}function Ng(s,a,u){s.lanes|=a;var h=s.alternate;h!==null&&(h.lanes|=a),Eu(s.return,a,u)}function Yu(s,a,u,h,m){var b=s.memoizedState;b===null?s.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:h,tail:u,tailMode:m}:(b.isBackwards=a,b.rendering=null,b.renderingStartTime=0,b.last=h,b.tail=u,b.tailMode=m)}function Ig(s,a,u){var h=a.pendingProps,m=h.revealOrder,b=h.tail;if($t(s,a,h.children,u),h=Je.current,(h&2)!==0)h=h&1|2,a.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=a.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Ng(s,u,a);else if(s.tag===19)Ng(s,u,a);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break e;for(;s.sibling===null;){if(s.return===null||s.return===a)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}h&=1}if(We(Je,h),(a.mode&1)===0)a.memoizedState=null;else switch(m){case"forwards":for(u=a.child,m=null;u!==null;)s=u.alternate,s!==null&&Uo(s)===null&&(m=u),u=u.sibling;u=m,u===null?(m=a.child,a.child=null):(m=u.sibling,u.sibling=null),Yu(a,!1,m,u,b);break;case"backwards":for(u=null,m=a.child,a.child=null;m!==null;){if(s=m.alternate,s!==null&&Uo(s)===null){a.child=m;break}s=m.sibling,m.sibling=u,u=m,m=s}Yu(a,!0,u,null,b);break;case"together":Yu(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function Qo(s,a){(a.mode&1)===0&&s!==null&&(s.alternate=null,a.alternate=null,a.flags|=2)}function _s(s,a,u){if(s!==null&&(a.dependencies=s.dependencies),vr|=a.lanes,(u&a.childLanes)===0)return null;if(s!==null&&a.child!==s.child)throw Error(t(153));if(a.child!==null){for(s=a.child,u=Js(s,s.pendingProps),a.child=u,u.return=a;s.sibling!==null;)s=s.sibling,u=u.sibling=Js(s,s.pendingProps),u.return=a;u.sibling=null}return a.child}function px(s,a,u){switch(a.tag){case 3:Rg(a),Qr();break;case 5:Gp(a);break;case 1:Yt(a.type)&&Mo(a);break;case 4:Tu(a,a.stateNode.containerInfo);break;case 10:var h=a.type._context,m=a.memoizedProps.value;We($o,h._currentValue),h._currentValue=m;break;case 13:if(h=a.memoizedState,h!==null)return h.dehydrated!==null?(We(Je,Je.current&1),a.flags|=128,null):(u&a.child.childLanes)!==0?Pg(s,a,u):(We(Je,Je.current&1),s=_s(s,a,u),s!==null?s.sibling:null);We(Je,Je.current&1);break;case 19:if(h=(u&a.childLanes)!==0,(s.flags&128)!==0){if(h)return Ig(s,a,u);a.flags|=128}if(m=a.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),We(Je,Je.current),h)break;return null;case 22:case 23:return a.lanes=0,Cg(s,a,u)}return _s(s,a,u)}var Mg,Qu,Lg,Dg;Mg=function(s,a){for(var u=a.child;u!==null;){if(u.tag===5||u.tag===6)s.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===a)break;for(;u.sibling===null;){if(u.return===null||u.return===a)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},Qu=function(){},Lg=function(s,a,u,h){var m=s.memoizedProps;if(m!==h){s=a.stateNode,mr(ss.current);var b=null;switch(u){case"input":m=on(s,m),h=on(s,h),b=[];break;case"select":m=ee({},m,{value:void 0}),h=ee({},h,{value:void 0}),b=[];break;case"textarea":m=Ns(s,m),h=Ns(s,h),b=[];break;default:typeof m.onClick!="function"&&typeof h.onClick=="function"&&(s.onclick=Po)}Fr(u,h);var S;u=null;for(z in m)if(!h.hasOwnProperty(z)&&m.hasOwnProperty(z)&&m[z]!=null)if(z==="style"){var T=m[z];for(S in T)T.hasOwnProperty(S)&&(u||(u={}),u[S]="")}else z!=="dangerouslySetInnerHTML"&&z!=="children"&&z!=="suppressContentEditableWarning"&&z!=="suppressHydrationWarning"&&z!=="autoFocus"&&(r.hasOwnProperty(z)?b||(b=[]):(b=b||[]).push(z,null));for(z in h){var N=h[z];if(T=m?.[z],h.hasOwnProperty(z)&&N!==T&&(N!=null||T!=null))if(z==="style")if(T){for(S in T)!T.hasOwnProperty(S)||N&&N.hasOwnProperty(S)||(u||(u={}),u[S]="");for(S in N)N.hasOwnProperty(S)&&T[S]!==N[S]&&(u||(u={}),u[S]=N[S])}else u||(b||(b=[]),b.push(z,u)),u=N;else z==="dangerouslySetInnerHTML"?(N=N?N.__html:void 0,T=T?T.__html:void 0,N!=null&&T!==N&&(b=b||[]).push(z,N)):z==="children"?typeof N!="string"&&typeof N!="number"||(b=b||[]).push(z,""+N):z!=="suppressContentEditableWarning"&&z!=="suppressHydrationWarning"&&(r.hasOwnProperty(z)?(N!=null&&z==="onScroll"&&Ve("scroll",s),b||T===N||(b=[])):(b=b||[]).push(z,N))}u&&(b=b||[]).push("style",u);var z=b;(a.updateQueue=z)&&(a.flags|=4)}},Dg=function(s,a,u,h){u!==h&&(a.flags|=4)};function oa(s,a){if(!qe)switch(s.tailMode){case"hidden":a=s.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?s.tail=null:u.sibling=null;break;case"collapsed":u=s.tail;for(var h=null;u!==null;)u.alternate!==null&&(h=u),u=u.sibling;h===null?a||s.tail===null?s.tail=null:s.tail.sibling=null:h.sibling=null}}function Mt(s){var a=s.alternate!==null&&s.alternate.child===s.child,u=0,h=0;if(a)for(var m=s.child;m!==null;)u|=m.lanes|m.childLanes,h|=m.subtreeFlags&14680064,h|=m.flags&14680064,m.return=s,m=m.sibling;else for(m=s.child;m!==null;)u|=m.lanes|m.childLanes,h|=m.subtreeFlags,h|=m.flags,m.return=s,m=m.sibling;return s.subtreeFlags|=h,s.childLanes=u,a}function gx(s,a,u){var h=a.pendingProps;switch(bu(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mt(a),null;case 1:return Yt(a.type)&&Io(),Mt(a),null;case 3:return h=a.stateNode,ti(),Ge(Kt),Ge(Nt),Iu(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(s===null||s.child===null)&&(Fo(a)?a.flags|=4:s===null||s.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Bn!==null&&(ld(Bn),Bn=null))),Qu(s,a),Mt(a),null;case 5:Pu(a);var m=mr(na.current);if(u=a.type,s!==null&&a.stateNode!=null)Lg(s,a,u,h,m),s.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!h){if(a.stateNode===null)throw Error(t(166));return Mt(a),null}if(s=mr(ss.current),Fo(a)){h=a.stateNode,u=a.type;var b=a.memoizedProps;switch(h[ns]=a,h[Qi]=b,s=(a.mode&1)!==0,u){case"dialog":Ve("cancel",h),Ve("close",h);break;case"iframe":case"object":case"embed":Ve("load",h);break;case"video":case"audio":for(m=0;m<Xi.length;m++)Ve(Xi[m],h);break;case"source":Ve("error",h);break;case"img":case"image":case"link":Ve("error",h),Ve("load",h);break;case"details":Ve("toggle",h);break;case"input":hs(h,b),Ve("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!b.multiple},Ve("invalid",h);break;case"textarea":ki(h,b),Ve("invalid",h)}Fr(u,b),m=null;for(var S in b)if(b.hasOwnProperty(S)){var T=b[S];S==="children"?typeof T=="string"?h.textContent!==T&&(b.suppressHydrationWarning!==!0&&To(h.textContent,T,s),m=["children",T]):typeof T=="number"&&h.textContent!==""+T&&(b.suppressHydrationWarning!==!0&&To(h.textContent,T,s),m=["children",""+T]):r.hasOwnProperty(S)&&T!=null&&S==="onScroll"&&Ve("scroll",h)}switch(u){case"input":Jn(h),Ei(h,b,!0);break;case"textarea":Jn(h),io(h);break;case"select":case"option":break;default:typeof b.onClick=="function"&&(h.onclick=Po)}h=m,a.updateQueue=h,h!==null&&(a.flags|=4)}else{S=m.nodeType===9?m:m.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=ao(u)),s==="http://www.w3.org/1999/xhtml"?u==="script"?(s=S.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof h.is=="string"?s=S.createElement(u,{is:h.is}):(s=S.createElement(u),u==="select"&&(S=s,h.multiple?S.multiple=!0:h.size&&(S.size=h.size))):s=S.createElementNS(s,u),s[ns]=a,s[Qi]=h,Mg(s,a,!1,!1),a.stateNode=s;e:{switch(S=Pi(u,h),u){case"dialog":Ve("cancel",s),Ve("close",s),m=h;break;case"iframe":case"object":case"embed":Ve("load",s),m=h;break;case"video":case"audio":for(m=0;m<Xi.length;m++)Ve(Xi[m],s);m=h;break;case"source":Ve("error",s),m=h;break;case"img":case"image":case"link":Ve("error",s),Ve("load",s),m=h;break;case"details":Ve("toggle",s),m=h;break;case"input":hs(s,h),m=on(s,h),Ve("invalid",s);break;case"option":m=h;break;case"select":s._wrapperState={wasMultiple:!!h.multiple},m=ee({},h,{value:void 0}),Ve("invalid",s);break;case"textarea":ki(s,h),m=Ns(s,h),Ve("invalid",s);break;default:m=h}Fr(u,m),T=m;for(b in T)if(T.hasOwnProperty(b)){var N=T[b];b==="style"?co(s,N):b==="dangerouslySetInnerHTML"?(N=N?N.__html:void 0,N!=null&&Is(s,N)):b==="children"?typeof N=="string"?(u!=="textarea"||N!=="")&&Ms(s,N):typeof N=="number"&&Ms(s,""+N):b!=="suppressContentEditableWarning"&&b!=="suppressHydrationWarning"&&b!=="autoFocus"&&(r.hasOwnProperty(b)?N!=null&&b==="onScroll"&&Ve("scroll",s):N!=null&&P(s,b,N,S))}switch(u){case"input":Jn(s),Ei(s,h,!1);break;case"textarea":Jn(s),io(s);break;case"option":h.value!=null&&s.setAttribute("value",""+Ee(h.value));break;case"select":s.multiple=!!h.multiple,b=h.value,b!=null?Ln(s,!!h.multiple,b,!1):h.defaultValue!=null&&Ln(s,!!h.multiple,h.defaultValue,!0);break;default:typeof m.onClick=="function"&&(s.onclick=Po)}switch(u){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return Mt(a),null;case 6:if(s&&a.stateNode!=null)Dg(s,a,s.memoizedProps,h);else{if(typeof h!="string"&&a.stateNode===null)throw Error(t(166));if(u=mr(na.current),mr(ss.current),Fo(a)){if(h=a.stateNode,u=a.memoizedProps,h[ns]=a,(b=h.nodeValue!==u)&&(s=un,s!==null))switch(s.tag){case 3:To(h.nodeValue,u,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&To(h.nodeValue,u,(s.mode&1)!==0)}b&&(a.flags|=4)}else h=(u.nodeType===9?u:u.ownerDocument).createTextNode(h),h[ns]=a,a.stateNode=h}return Mt(a),null;case 13:if(Ge(Je),h=a.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(qe&&dn!==null&&(a.mode&1)!==0&&(a.flags&128)===0)jp(),Qr(),a.flags|=98560,b=!1;else if(b=Fo(a),h!==null&&h.dehydrated!==null){if(s===null){if(!b)throw Error(t(318));if(b=a.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(t(317));b[ns]=a}else Qr(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Mt(a),b=!1}else Bn!==null&&(ld(Bn),Bn=null),b=!0;if(!b)return a.flags&65536?a:null}return(a.flags&128)!==0?(a.lanes=u,a):(h=h!==null,h!==(s!==null&&s.memoizedState!==null)&&h&&(a.child.flags|=8192,(a.mode&1)!==0&&(s===null||(Je.current&1)!==0?ut===0&&(ut=3):dd())),a.updateQueue!==null&&(a.flags|=4),Mt(a),null);case 4:return ti(),Qu(s,a),s===null&&Ki(a.stateNode.containerInfo),Mt(a),null;case 10:return Cu(a.type._context),Mt(a),null;case 17:return Yt(a.type)&&Io(),Mt(a),null;case 19:if(Ge(Je),b=a.memoizedState,b===null)return Mt(a),null;if(h=(a.flags&128)!==0,S=b.rendering,S===null)if(h)oa(b,!1);else{if(ut!==0||s!==null&&(s.flags&128)!==0)for(s=a.child;s!==null;){if(S=Uo(s),S!==null){for(a.flags|=128,oa(b,!1),h=S.updateQueue,h!==null&&(a.updateQueue=h,a.flags|=4),a.subtreeFlags=0,h=u,u=a.child;u!==null;)b=u,s=h,b.flags&=14680066,S=b.alternate,S===null?(b.childLanes=0,b.lanes=s,b.child=null,b.subtreeFlags=0,b.memoizedProps=null,b.memoizedState=null,b.updateQueue=null,b.dependencies=null,b.stateNode=null):(b.childLanes=S.childLanes,b.lanes=S.lanes,b.child=S.child,b.subtreeFlags=0,b.deletions=null,b.memoizedProps=S.memoizedProps,b.memoizedState=S.memoizedState,b.updateQueue=S.updateQueue,b.type=S.type,s=S.dependencies,b.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),u=u.sibling;return We(Je,Je.current&1|2),a.child}s=s.sibling}b.tail!==null&&tt()>ii&&(a.flags|=128,h=!0,oa(b,!1),a.lanes=4194304)}else{if(!h)if(s=Uo(S),s!==null){if(a.flags|=128,h=!0,u=s.updateQueue,u!==null&&(a.updateQueue=u,a.flags|=4),oa(b,!0),b.tail===null&&b.tailMode==="hidden"&&!S.alternate&&!qe)return Mt(a),null}else 2*tt()-b.renderingStartTime>ii&&u!==1073741824&&(a.flags|=128,h=!0,oa(b,!1),a.lanes=4194304);b.isBackwards?(S.sibling=a.child,a.child=S):(u=b.last,u!==null?u.sibling=S:a.child=S,b.last=S)}return b.tail!==null?(a=b.tail,b.rendering=a,b.tail=a.sibling,b.renderingStartTime=tt(),a.sibling=null,u=Je.current,We(Je,h?u&1|2:u&1),a):(Mt(a),null);case 22:case 23:return ud(),h=a.memoizedState!==null,s!==null&&s.memoizedState!==null!==h&&(a.flags|=8192),h&&(a.mode&1)!==0?(hn&1073741824)!==0&&(Mt(a),a.subtreeFlags&6&&(a.flags|=8192)):Mt(a),null;case 24:return null;case 25:return null}throw Error(t(156,a.tag))}function mx(s,a){switch(bu(a),a.tag){case 1:return Yt(a.type)&&Io(),s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 3:return ti(),Ge(Kt),Ge(Nt),Iu(),s=a.flags,(s&65536)!==0&&(s&128)===0?(a.flags=s&-65537|128,a):null;case 5:return Pu(a),null;case 13:if(Ge(Je),s=a.memoizedState,s!==null&&s.dehydrated!==null){if(a.alternate===null)throw Error(t(340));Qr()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 19:return Ge(Je),null;case 4:return ti(),null;case 10:return Cu(a.type._context),null;case 22:case 23:return ud(),null;case 24:return null;default:return null}}var Jo=!1,Lt=!1,yx=typeof WeakSet=="function"?WeakSet:Set,re=null;function si(s,a){var u=s.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(h){et(s,a,h)}else u.current=null}function Ju(s,a,u){try{u()}catch(h){et(s,a,h)}}var Og=!1;function vx(s,a){if(uu=vo,s=pp(),nu(s)){if("selectionStart"in s)var u={start:s.selectionStart,end:s.selectionEnd};else e:{u=(u=s.ownerDocument)&&u.defaultView||window;var h=u.getSelection&&u.getSelection();if(h&&h.rangeCount!==0){u=h.anchorNode;var m=h.anchorOffset,b=h.focusNode;h=h.focusOffset;try{u.nodeType,b.nodeType}catch{u=null;break e}var S=0,T=-1,N=-1,z=0,G=0,q=s,W=null;t:for(;;){for(var ne;q!==u||m!==0&&q.nodeType!==3||(T=S+m),q!==b||h!==0&&q.nodeType!==3||(N=S+h),q.nodeType===3&&(S+=q.nodeValue.length),(ne=q.firstChild)!==null;)W=q,q=ne;for(;;){if(q===s)break t;if(W===u&&++z===m&&(T=S),W===b&&++G===h&&(N=S),(ne=q.nextSibling)!==null)break;q=W,W=q.parentNode}q=ne}u=T===-1||N===-1?null:{start:T,end:N}}else u=null}u=u||{start:0,end:0}}else u=null;for(du={focusedElem:s,selectionRange:u},vo=!1,re=a;re!==null;)if(a=re,s=a.child,(a.subtreeFlags&1028)!==0&&s!==null)s.return=a,re=s;else for(;re!==null;){a=re;try{var oe=a.alternate;if((a.flags&1024)!==0)switch(a.tag){case 0:case 11:case 15:break;case 1:if(oe!==null){var le=oe.memoizedProps,nt=oe.memoizedState,F=a.stateNode,I=F.getSnapshotBeforeUpdate(a.elementType===a.type?le:Hn(a.type,le),nt);F.__reactInternalSnapshotBeforeUpdate=I}break;case 3:var j=a.stateNode.containerInfo;j.nodeType===1?j.textContent="":j.nodeType===9&&j.documentElement&&j.removeChild(j.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Q){et(a,a.return,Q)}if(s=a.sibling,s!==null){s.return=a.return,re=s;break}re=a.return}return oe=Og,Og=!1,oe}function la(s,a,u){var h=a.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var m=h=h.next;do{if((m.tag&s)===s){var b=m.destroy;m.destroy=void 0,b!==void 0&&Ju(a,u,b)}m=m.next}while(m!==h)}}function Zo(s,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var u=a=a.next;do{if((u.tag&s)===s){var h=u.create;u.destroy=h()}u=u.next}while(u!==a)}}function Zu(s){var a=s.ref;if(a!==null){var u=s.stateNode;switch(s.tag){case 5:s=u;break;default:s=u}typeof a=="function"?a(s):a.current=s}}function Fg(s){var a=s.alternate;a!==null&&(s.alternate=null,Fg(a)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(a=s.stateNode,a!==null&&(delete a[ns],delete a[Qi],delete a[gu],delete a[ex],delete a[tx])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function jg(s){return s.tag===5||s.tag===3||s.tag===4}function $g(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||jg(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function ed(s,a,u){var h=s.tag;if(h===5||h===6)s=s.stateNode,a?u.nodeType===8?u.parentNode.insertBefore(s,a):u.insertBefore(s,a):(u.nodeType===8?(a=u.parentNode,a.insertBefore(s,u)):(a=u,a.appendChild(s)),u=u._reactRootContainer,u!=null||a.onclick!==null||(a.onclick=Po));else if(h!==4&&(s=s.child,s!==null))for(ed(s,a,u),s=s.sibling;s!==null;)ed(s,a,u),s=s.sibling}function td(s,a,u){var h=s.tag;if(h===5||h===6)s=s.stateNode,a?u.insertBefore(s,a):u.appendChild(s);else if(h!==4&&(s=s.child,s!==null))for(td(s,a,u),s=s.sibling;s!==null;)td(s,a,u),s=s.sibling}var _t=null,Un=!1;function qs(s,a,u){for(u=u.child;u!==null;)zg(s,a,u),u=u.sibling}function zg(s,a,u){if(ts&&typeof ts.onCommitFiberUnmount=="function")try{ts.onCommitFiberUnmount(ho,u)}catch{}switch(u.tag){case 5:Lt||si(u,a);case 6:var h=_t,m=Un;_t=null,qs(s,a,u),_t=h,Un=m,_t!==null&&(Un?(s=_t,u=u.stateNode,s.nodeType===8?s.parentNode.removeChild(u):s.removeChild(u)):_t.removeChild(u.stateNode));break;case 18:_t!==null&&(Un?(s=_t,u=u.stateNode,s.nodeType===8?pu(s.parentNode,u):s.nodeType===1&&pu(s,u),zi(s)):pu(_t,u.stateNode));break;case 4:h=_t,m=Un,_t=u.stateNode.containerInfo,Un=!0,qs(s,a,u),_t=h,Un=m;break;case 0:case 11:case 14:case 15:if(!Lt&&(h=u.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){m=h=h.next;do{var b=m,S=b.destroy;b=b.tag,S!==void 0&&((b&2)!==0||(b&4)!==0)&&Ju(u,a,S),m=m.next}while(m!==h)}qs(s,a,u);break;case 1:if(!Lt&&(si(u,a),h=u.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=u.memoizedProps,h.state=u.memoizedState,h.componentWillUnmount()}catch(T){et(u,a,T)}qs(s,a,u);break;case 21:qs(s,a,u);break;case 22:u.mode&1?(Lt=(h=Lt)||u.memoizedState!==null,qs(s,a,u),Lt=h):qs(s,a,u);break;default:qs(s,a,u)}}function Bg(s){var a=s.updateQueue;if(a!==null){s.updateQueue=null;var u=s.stateNode;u===null&&(u=s.stateNode=new yx),a.forEach(function(h){var m=kx.bind(null,s,h);u.has(h)||(u.add(h),h.then(m,m))})}}function Wn(s,a){var u=a.deletions;if(u!==null)for(var h=0;h<u.length;h++){var m=u[h];try{var b=s,S=a,T=S;e:for(;T!==null;){switch(T.tag){case 5:_t=T.stateNode,Un=!1;break e;case 3:_t=T.stateNode.containerInfo,Un=!0;break e;case 4:_t=T.stateNode.containerInfo,Un=!0;break e}T=T.return}if(_t===null)throw Error(t(160));zg(b,S,m),_t=null,Un=!1;var N=m.alternate;N!==null&&(N.return=null),m.return=null}catch(z){et(m,a,z)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)Hg(a,s),a=a.sibling}function Hg(s,a){var u=s.alternate,h=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(Wn(a,s),is(s),h&4){try{la(3,s,s.return),Zo(3,s)}catch(le){et(s,s.return,le)}try{la(5,s,s.return)}catch(le){et(s,s.return,le)}}break;case 1:Wn(a,s),is(s),h&512&&u!==null&&si(u,u.return);break;case 5:if(Wn(a,s),is(s),h&512&&u!==null&&si(u,u.return),s.flags&32){var m=s.stateNode;try{Ms(m,"")}catch(le){et(s,s.return,le)}}if(h&4&&(m=s.stateNode,m!=null)){var b=s.memoizedProps,S=u!==null?u.memoizedProps:b,T=s.type,N=s.updateQueue;if(s.updateQueue=null,N!==null)try{T==="input"&&b.type==="radio"&&b.name!=null&&fs(m,b),Pi(T,S);var z=Pi(T,b);for(S=0;S<N.length;S+=2){var G=N[S],q=N[S+1];G==="style"?co(m,q):G==="dangerouslySetInnerHTML"?Is(m,q):G==="children"?Ms(m,q):P(m,G,q,z)}switch(T){case"input":Or(m,b);break;case"textarea":Ri(m,b);break;case"select":var W=m._wrapperState.wasMultiple;m._wrapperState.wasMultiple=!!b.multiple;var ne=b.value;ne!=null?Ln(m,!!b.multiple,ne,!1):W!==!!b.multiple&&(b.defaultValue!=null?Ln(m,!!b.multiple,b.defaultValue,!0):Ln(m,!!b.multiple,b.multiple?[]:"",!1))}m[Qi]=b}catch(le){et(s,s.return,le)}}break;case 6:if(Wn(a,s),is(s),h&4){if(s.stateNode===null)throw Error(t(162));m=s.stateNode,b=s.memoizedProps;try{m.nodeValue=b}catch(le){et(s,s.return,le)}}break;case 3:if(Wn(a,s),is(s),h&4&&u!==null&&u.memoizedState.isDehydrated)try{zi(a.containerInfo)}catch(le){et(s,s.return,le)}break;case 4:Wn(a,s),is(s);break;case 13:Wn(a,s),is(s),m=s.child,m.flags&8192&&(b=m.memoizedState!==null,m.stateNode.isHidden=b,!b||m.alternate!==null&&m.alternate.memoizedState!==null||(rd=tt())),h&4&&Bg(s);break;case 22:if(G=u!==null&&u.memoizedState!==null,s.mode&1?(Lt=(z=Lt)||G,Wn(a,s),Lt=z):Wn(a,s),is(s),h&8192){if(z=s.memoizedState!==null,(s.stateNode.isHidden=z)&&!G&&(s.mode&1)!==0)for(re=s,G=s.child;G!==null;){for(q=re=G;re!==null;){switch(W=re,ne=W.child,W.tag){case 0:case 11:case 14:case 15:la(4,W,W.return);break;case 1:si(W,W.return);var oe=W.stateNode;if(typeof oe.componentWillUnmount=="function"){h=W,u=W.return;try{a=h,oe.props=a.memoizedProps,oe.state=a.memoizedState,oe.componentWillUnmount()}catch(le){et(h,u,le)}}break;case 5:si(W,W.return);break;case 22:if(W.memoizedState!==null){Vg(q);continue}}ne!==null?(ne.return=W,re=ne):Vg(q)}G=G.sibling}e:for(G=null,q=s;;){if(q.tag===5){if(G===null){G=q;try{m=q.stateNode,z?(b=m.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none"):(T=q.stateNode,N=q.memoizedProps.style,S=N!=null&&N.hasOwnProperty("display")?N.display:null,T.style.display=lo("display",S))}catch(le){et(s,s.return,le)}}}else if(q.tag===6){if(G===null)try{q.stateNode.nodeValue=z?"":q.memoizedProps}catch(le){et(s,s.return,le)}}else if((q.tag!==22&&q.tag!==23||q.memoizedState===null||q===s)&&q.child!==null){q.child.return=q,q=q.child;continue}if(q===s)break e;for(;q.sibling===null;){if(q.return===null||q.return===s)break e;G===q&&(G=null),q=q.return}G===q&&(G=null),q.sibling.return=q.return,q=q.sibling}}break;case 19:Wn(a,s),is(s),h&4&&Bg(s);break;case 21:break;default:Wn(a,s),is(s)}}function is(s){var a=s.flags;if(a&2){try{e:{for(var u=s.return;u!==null;){if(jg(u)){var h=u;break e}u=u.return}throw Error(t(160))}switch(h.tag){case 5:var m=h.stateNode;h.flags&32&&(Ms(m,""),h.flags&=-33);var b=$g(s);td(s,b,m);break;case 3:case 4:var S=h.stateNode.containerInfo,T=$g(s);ed(s,T,S);break;default:throw Error(t(161))}}catch(N){et(s,s.return,N)}s.flags&=-3}a&4096&&(s.flags&=-4097)}function bx(s,a,u){re=s,Ug(s)}function Ug(s,a,u){for(var h=(s.mode&1)!==0;re!==null;){var m=re,b=m.child;if(m.tag===22&&h){var S=m.memoizedState!==null||Jo;if(!S){var T=m.alternate,N=T!==null&&T.memoizedState!==null||Lt;T=Jo;var z=Lt;if(Jo=S,(Lt=N)&&!z)for(re=m;re!==null;)S=re,N=S.child,S.tag===22&&S.memoizedState!==null?Gg(m):N!==null?(N.return=S,re=N):Gg(m);for(;b!==null;)re=b,Ug(b),b=b.sibling;re=m,Jo=T,Lt=z}Wg(s)}else(m.subtreeFlags&8772)!==0&&b!==null?(b.return=m,re=b):Wg(s)}}function Wg(s){for(;re!==null;){var a=re;if((a.flags&8772)!==0){var u=a.alternate;try{if((a.flags&8772)!==0)switch(a.tag){case 0:case 11:case 15:Lt||Zo(5,a);break;case 1:var h=a.stateNode;if(a.flags&4&&!Lt)if(u===null)h.componentDidMount();else{var m=a.elementType===a.type?u.memoizedProps:Hn(a.type,u.memoizedProps);h.componentDidUpdate(m,u.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var b=a.updateQueue;b!==null&&Vp(a,b,h);break;case 3:var S=a.updateQueue;if(S!==null){if(u=null,a.child!==null)switch(a.child.tag){case 5:u=a.child.stateNode;break;case 1:u=a.child.stateNode}Vp(a,S,u)}break;case 5:var T=a.stateNode;if(u===null&&a.flags&4){u=T;var N=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":N.autoFocus&&u.focus();break;case"img":N.src&&(u.src=N.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var z=a.alternate;if(z!==null){var G=z.memoizedState;if(G!==null){var q=G.dehydrated;q!==null&&zi(q)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Lt||a.flags&512&&Zu(a)}catch(W){et(a,a.return,W)}}if(a===s){re=null;break}if(u=a.sibling,u!==null){u.return=a.return,re=u;break}re=a.return}}function Vg(s){for(;re!==null;){var a=re;if(a===s){re=null;break}var u=a.sibling;if(u!==null){u.return=a.return,re=u;break}re=a.return}}function Gg(s){for(;re!==null;){var a=re;try{switch(a.tag){case 0:case 11:case 15:var u=a.return;try{Zo(4,a)}catch(N){et(a,u,N)}break;case 1:var h=a.stateNode;if(typeof h.componentDidMount=="function"){var m=a.return;try{h.componentDidMount()}catch(N){et(a,m,N)}}var b=a.return;try{Zu(a)}catch(N){et(a,b,N)}break;case 5:var S=a.return;try{Zu(a)}catch(N){et(a,S,N)}}}catch(N){et(a,a.return,N)}if(a===s){re=null;break}var T=a.sibling;if(T!==null){T.return=a.return,re=T;break}re=a.return}}var wx=Math.ceil,el=R.ReactCurrentDispatcher,nd=R.ReactCurrentOwner,An=R.ReactCurrentBatchConfig,Fe=0,yt=null,it=null,St=0,hn=0,ri=Hs(0),ut=0,ca=null,vr=0,tl=0,sd=0,ua=null,Jt=null,rd=0,ii=1/0,Ss=null,nl=!1,id=null,Xs=null,sl=!1,Ks=null,rl=0,da=0,ad=null,il=-1,al=0;function zt(){return(Fe&6)!==0?tt():il!==-1?il:il=tt()}function Ys(s){return(s.mode&1)===0?1:(Fe&2)!==0&&St!==0?St&-St:sx.transition!==null?(al===0&&(al=$f()),al):(s=ze,s!==0||(s=window.event,s=s===void 0?16:Xf(s.type)),s)}function Vn(s,a,u,h){if(50<da)throw da=0,ad=null,Error(t(185));Di(s,u,h),((Fe&2)===0||s!==yt)&&(s===yt&&((Fe&2)===0&&(tl|=u),ut===4&&Qs(s,St)),Zt(s,h),u===1&&Fe===0&&(a.mode&1)===0&&(ii=tt()+500,Lo&&Ws()))}function Zt(s,a){var u=s.callbackNode;sw(s,a);var h=go(s,s===yt?St:0);if(h===0)u!==null&&Of(u),s.callbackNode=null,s.callbackPriority=0;else if(a=h&-h,s.callbackPriority!==a){if(u!=null&&Of(u),a===1)s.tag===0?nx(Xg.bind(null,s)):Mp(Xg.bind(null,s)),Jw(function(){(Fe&6)===0&&Ws()}),u=null;else{switch(zf(h)){case 1:u=$c;break;case 4:u=Ff;break;case 16:u=uo;break;case 536870912:u=jf;break;default:u=uo}u=nm(u,qg.bind(null,s))}s.callbackPriority=a,s.callbackNode=u}}function qg(s,a){if(il=-1,al=0,(Fe&6)!==0)throw Error(t(327));var u=s.callbackNode;if(ai()&&s.callbackNode!==u)return null;var h=go(s,s===yt?St:0);if(h===0)return null;if((h&30)!==0||(h&s.expiredLanes)!==0||a)a=ol(s,h);else{a=h;var m=Fe;Fe|=2;var b=Yg();(yt!==s||St!==a)&&(Ss=null,ii=tt()+500,wr(s,a));do try{Sx();break}catch(T){Kg(s,T)}while(!0);Au(),el.current=b,Fe=m,it!==null?a=0:(yt=null,St=0,a=ut)}if(a!==0){if(a===2&&(m=zc(s),m!==0&&(h=m,a=od(s,m))),a===1)throw u=ca,wr(s,0),Qs(s,h),Zt(s,tt()),u;if(a===6)Qs(s,h);else{if(m=s.current.alternate,(h&30)===0&&!xx(m)&&(a=ol(s,h),a===2&&(b=zc(s),b!==0&&(h=b,a=od(s,b))),a===1))throw u=ca,wr(s,0),Qs(s,h),Zt(s,tt()),u;switch(s.finishedWork=m,s.finishedLanes=h,a){case 0:case 1:throw Error(t(345));case 2:xr(s,Jt,Ss);break;case 3:if(Qs(s,h),(h&130023424)===h&&(a=rd+500-tt(),10<a)){if(go(s,0)!==0)break;if(m=s.suspendedLanes,(m&h)!==h){zt(),s.pingedLanes|=s.suspendedLanes&m;break}s.timeoutHandle=fu(xr.bind(null,s,Jt,Ss),a);break}xr(s,Jt,Ss);break;case 4:if(Qs(s,h),(h&4194240)===h)break;for(a=s.eventTimes,m=-1;0<h;){var S=31-$n(h);b=1<<S,S=a[S],S>m&&(m=S),h&=~b}if(h=m,h=tt()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*wx(h/1960))-h,10<h){s.timeoutHandle=fu(xr.bind(null,s,Jt,Ss),h);break}xr(s,Jt,Ss);break;case 5:xr(s,Jt,Ss);break;default:throw Error(t(329))}}}return Zt(s,tt()),s.callbackNode===u?qg.bind(null,s):null}function od(s,a){var u=ua;return s.current.memoizedState.isDehydrated&&(wr(s,a).flags|=256),s=ol(s,a),s!==2&&(a=Jt,Jt=u,a!==null&&ld(a)),s}function ld(s){Jt===null?Jt=s:Jt.push.apply(Jt,s)}function xx(s){for(var a=s;;){if(a.flags&16384){var u=a.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var h=0;h<u.length;h++){var m=u[h],b=m.getSnapshot;m=m.value;try{if(!zn(b(),m))return!1}catch{return!1}}}if(u=a.child,a.subtreeFlags&16384&&u!==null)u.return=a,a=u;else{if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Qs(s,a){for(a&=~sd,a&=~tl,s.suspendedLanes|=a,s.pingedLanes&=~a,s=s.expirationTimes;0<a;){var u=31-$n(a),h=1<<u;s[u]=-1,a&=~h}}function Xg(s){if((Fe&6)!==0)throw Error(t(327));ai();var a=go(s,0);if((a&1)===0)return Zt(s,tt()),null;var u=ol(s,a);if(s.tag!==0&&u===2){var h=zc(s);h!==0&&(a=h,u=od(s,h))}if(u===1)throw u=ca,wr(s,0),Qs(s,a),Zt(s,tt()),u;if(u===6)throw Error(t(345));return s.finishedWork=s.current.alternate,s.finishedLanes=a,xr(s,Jt,Ss),Zt(s,tt()),null}function cd(s,a){var u=Fe;Fe|=1;try{return s(a)}finally{Fe=u,Fe===0&&(ii=tt()+500,Lo&&Ws())}}function br(s){Ks!==null&&Ks.tag===0&&(Fe&6)===0&&ai();var a=Fe;Fe|=1;var u=An.transition,h=ze;try{if(An.transition=null,ze=1,s)return s()}finally{ze=h,An.transition=u,Fe=a,(Fe&6)===0&&Ws()}}function ud(){hn=ri.current,Ge(ri)}function wr(s,a){s.finishedWork=null,s.finishedLanes=0;var u=s.timeoutHandle;if(u!==-1&&(s.timeoutHandle=-1,Qw(u)),it!==null)for(u=it.return;u!==null;){var h=u;switch(bu(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&Io();break;case 3:ti(),Ge(Kt),Ge(Nt),Iu();break;case 5:Pu(h);break;case 4:ti();break;case 13:Ge(Je);break;case 19:Ge(Je);break;case 10:Cu(h.type._context);break;case 22:case 23:ud()}u=u.return}if(yt=s,it=s=Js(s.current,null),St=hn=a,ut=0,ca=null,sd=tl=vr=0,Jt=ua=null,gr!==null){for(a=0;a<gr.length;a++)if(u=gr[a],h=u.interleaved,h!==null){u.interleaved=null;var m=h.next,b=u.pending;if(b!==null){var S=b.next;b.next=m,h.next=S}u.pending=h}gr=null}return s}function Kg(s,a){do{var u=it;try{if(Au(),Wo.current=Xo,Vo){for(var h=Ze.memoizedState;h!==null;){var m=h.queue;m!==null&&(m.pending=null),h=h.next}Vo=!1}if(yr=0,mt=ct=Ze=null,sa=!1,ra=0,nd.current=null,u===null||u.return===null){ut=1,ca=a,it=null;break}e:{var b=s,S=u.return,T=u,N=a;if(a=St,T.flags|=32768,N!==null&&typeof N=="object"&&typeof N.then=="function"){var z=N,G=T,q=G.tag;if((G.mode&1)===0&&(q===0||q===11||q===15)){var W=G.alternate;W?(G.updateQueue=W.updateQueue,G.memoizedState=W.memoizedState,G.lanes=W.lanes):(G.updateQueue=null,G.memoizedState=null)}var ne=wg(S);if(ne!==null){ne.flags&=-257,xg(ne,S,T,b,a),ne.mode&1&&bg(b,z,a),a=ne,N=z;var oe=a.updateQueue;if(oe===null){var le=new Set;le.add(N),a.updateQueue=le}else oe.add(N);break e}else{if((a&1)===0){bg(b,z,a),dd();break e}N=Error(t(426))}}else if(qe&&T.mode&1){var nt=wg(S);if(nt!==null){(nt.flags&65536)===0&&(nt.flags|=256),xg(nt,S,T,b,a),_u(ni(N,T));break e}}b=N=ni(N,T),ut!==4&&(ut=2),ua===null?ua=[b]:ua.push(b),b=S;do{switch(b.tag){case 3:b.flags|=65536,a&=-a,b.lanes|=a;var F=yg(b,N,a);Wp(b,F);break e;case 1:T=N;var I=b.type,j=b.stateNode;if((b.flags&128)===0&&(typeof I.getDerivedStateFromError=="function"||j!==null&&typeof j.componentDidCatch=="function"&&(Xs===null||!Xs.has(j)))){b.flags|=65536,a&=-a,b.lanes|=a;var Q=vg(b,T,a);Wp(b,Q);break e}}b=b.return}while(b!==null)}Jg(u)}catch(ue){a=ue,it===u&&u!==null&&(it=u=u.return);continue}break}while(!0)}function Yg(){var s=el.current;return el.current=Xo,s===null?Xo:s}function dd(){(ut===0||ut===3||ut===2)&&(ut=4),yt===null||(vr&268435455)===0&&(tl&268435455)===0||Qs(yt,St)}function ol(s,a){var u=Fe;Fe|=2;var h=Yg();(yt!==s||St!==a)&&(Ss=null,wr(s,a));do try{_x();break}catch(m){Kg(s,m)}while(!0);if(Au(),Fe=u,el.current=h,it!==null)throw Error(t(261));return yt=null,St=0,ut}function _x(){for(;it!==null;)Qg(it)}function Sx(){for(;it!==null&&!Xb();)Qg(it)}function Qg(s){var a=tm(s.alternate,s,hn);s.memoizedProps=s.pendingProps,a===null?Jg(s):it=a,nd.current=null}function Jg(s){var a=s;do{var u=a.alternate;if(s=a.return,(a.flags&32768)===0){if(u=gx(u,a,hn),u!==null){it=u;return}}else{if(u=mx(u,a),u!==null){u.flags&=32767,it=u;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{ut=6,it=null;return}}if(a=a.sibling,a!==null){it=a;return}it=a=s}while(a!==null);ut===0&&(ut=5)}function xr(s,a,u){var h=ze,m=An.transition;try{An.transition=null,ze=1,Ax(s,a,u,h)}finally{An.transition=m,ze=h}return null}function Ax(s,a,u,h){do ai();while(Ks!==null);if((Fe&6)!==0)throw Error(t(327));u=s.finishedWork;var m=s.finishedLanes;if(u===null)return null;if(s.finishedWork=null,s.finishedLanes=0,u===s.current)throw Error(t(177));s.callbackNode=null,s.callbackPriority=0;var b=u.lanes|u.childLanes;if(rw(s,b),s===yt&&(it=yt=null,St=0),(u.subtreeFlags&2064)===0&&(u.flags&2064)===0||sl||(sl=!0,nm(uo,function(){return ai(),null})),b=(u.flags&15990)!==0,(u.subtreeFlags&15990)!==0||b){b=An.transition,An.transition=null;var S=ze;ze=1;var T=Fe;Fe|=4,nd.current=null,vx(s,u),Hg(u,s),Ww(du),vo=!!uu,du=uu=null,s.current=u,bx(u),Kb(),Fe=T,ze=S,An.transition=b}else s.current=u;if(sl&&(sl=!1,Ks=s,rl=m),b=s.pendingLanes,b===0&&(Xs=null),Jb(u.stateNode),Zt(s,tt()),a!==null)for(h=s.onRecoverableError,u=0;u<a.length;u++)m=a[u],h(m.value,{componentStack:m.stack,digest:m.digest});if(nl)throw nl=!1,s=id,id=null,s;return(rl&1)!==0&&s.tag!==0&&ai(),b=s.pendingLanes,(b&1)!==0?s===ad?da++:(da=0,ad=s):da=0,Ws(),null}function ai(){if(Ks!==null){var s=zf(rl),a=An.transition,u=ze;try{if(An.transition=null,ze=16>s?16:s,Ks===null)var h=!1;else{if(s=Ks,Ks=null,rl=0,(Fe&6)!==0)throw Error(t(331));var m=Fe;for(Fe|=4,re=s.current;re!==null;){var b=re,S=b.child;if((re.flags&16)!==0){var T=b.deletions;if(T!==null){for(var N=0;N<T.length;N++){var z=T[N];for(re=z;re!==null;){var G=re;switch(G.tag){case 0:case 11:case 15:la(8,G,b)}var q=G.child;if(q!==null)q.return=G,re=q;else for(;re!==null;){G=re;var W=G.sibling,ne=G.return;if(Fg(G),G===z){re=null;break}if(W!==null){W.return=ne,re=W;break}re=ne}}}var oe=b.alternate;if(oe!==null){var le=oe.child;if(le!==null){oe.child=null;do{var nt=le.sibling;le.sibling=null,le=nt}while(le!==null)}}re=b}}if((b.subtreeFlags&2064)!==0&&S!==null)S.return=b,re=S;else e:for(;re!==null;){if(b=re,(b.flags&2048)!==0)switch(b.tag){case 0:case 11:case 15:la(9,b,b.return)}var F=b.sibling;if(F!==null){F.return=b.return,re=F;break e}re=b.return}}var I=s.current;for(re=I;re!==null;){S=re;var j=S.child;if((S.subtreeFlags&2064)!==0&&j!==null)j.return=S,re=j;else e:for(S=I;re!==null;){if(T=re,(T.flags&2048)!==0)try{switch(T.tag){case 0:case 11:case 15:Zo(9,T)}}catch(ue){et(T,T.return,ue)}if(T===S){re=null;break e}var Q=T.sibling;if(Q!==null){Q.return=T.return,re=Q;break e}re=T.return}}if(Fe=m,Ws(),ts&&typeof ts.onPostCommitFiberRoot=="function")try{ts.onPostCommitFiberRoot(ho,s)}catch{}h=!0}return h}finally{ze=u,An.transition=a}}return!1}function Zg(s,a,u){a=ni(u,a),a=yg(s,a,1),s=Gs(s,a,1),a=zt(),s!==null&&(Di(s,1,a),Zt(s,a))}function et(s,a,u){if(s.tag===3)Zg(s,s,u);else for(;a!==null;){if(a.tag===3){Zg(a,s,u);break}else if(a.tag===1){var h=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Xs===null||!Xs.has(h))){s=ni(u,s),s=vg(a,s,1),a=Gs(a,s,1),s=zt(),a!==null&&(Di(a,1,s),Zt(a,s));break}}a=a.return}}function Cx(s,a,u){var h=s.pingCache;h!==null&&h.delete(a),a=zt(),s.pingedLanes|=s.suspendedLanes&u,yt===s&&(St&u)===u&&(ut===4||ut===3&&(St&130023424)===St&&500>tt()-rd?wr(s,0):sd|=u),Zt(s,a)}function em(s,a){a===0&&((s.mode&1)===0?a=1:(a=po,po<<=1,(po&130023424)===0&&(po=4194304)));var u=zt();s=ws(s,a),s!==null&&(Di(s,a,u),Zt(s,u))}function Ex(s){var a=s.memoizedState,u=0;a!==null&&(u=a.retryLane),em(s,u)}function kx(s,a){var u=0;switch(s.tag){case 13:var h=s.stateNode,m=s.memoizedState;m!==null&&(u=m.retryLane);break;case 19:h=s.stateNode;break;default:throw Error(t(314))}h!==null&&h.delete(a),em(s,u)}var tm;tm=function(s,a,u){if(s!==null)if(s.memoizedProps!==a.pendingProps||Kt.current)Qt=!0;else{if((s.lanes&u)===0&&(a.flags&128)===0)return Qt=!1,px(s,a,u);Qt=(s.flags&131072)!==0}else Qt=!1,qe&&(a.flags&1048576)!==0&&Lp(a,Oo,a.index);switch(a.lanes=0,a.tag){case 2:var h=a.type;Qo(s,a),s=a.pendingProps;var m=Xr(a,Nt.current);ei(a,u),m=Du(null,a,h,s,m,u);var b=Ou();return a.flags|=1,typeof m=="object"&&m!==null&&typeof m.render=="function"&&m.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,Yt(h)?(b=!0,Mo(a)):b=!1,a.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,Ru(a),m.updater=Ko,a.stateNode=m,m._reactInternals=a,Hu(a,h,s,u),a=Gu(null,a,h,!0,b,u)):(a.tag=0,qe&&b&&vu(a),$t(null,a,m,u),a=a.child),a;case 16:h=a.elementType;e:{switch(Qo(s,a),s=a.pendingProps,m=h._init,h=m(h._payload),a.type=h,m=a.tag=Tx(h),s=Hn(h,s),m){case 0:a=Vu(null,a,h,s,u);break e;case 1:a=kg(null,a,h,s,u);break e;case 11:a=_g(null,a,h,s,u);break e;case 14:a=Sg(null,a,h,Hn(h.type,s),u);break e}throw Error(t(306,h,""))}return a;case 0:return h=a.type,m=a.pendingProps,m=a.elementType===h?m:Hn(h,m),Vu(s,a,h,m,u);case 1:return h=a.type,m=a.pendingProps,m=a.elementType===h?m:Hn(h,m),kg(s,a,h,m,u);case 3:e:{if(Rg(a),s===null)throw Error(t(387));h=a.pendingProps,b=a.memoizedState,m=b.element,Up(s,a),Ho(a,h,null,u);var S=a.memoizedState;if(h=S.element,b.isDehydrated)if(b={element:h,isDehydrated:!1,cache:S.cache,pendingSuspenseBoundaries:S.pendingSuspenseBoundaries,transitions:S.transitions},a.updateQueue.baseState=b,a.memoizedState=b,a.flags&256){m=ni(Error(t(423)),a),a=Tg(s,a,h,u,m);break e}else if(h!==m){m=ni(Error(t(424)),a),a=Tg(s,a,h,u,m);break e}else for(dn=Bs(a.stateNode.containerInfo.firstChild),un=a,qe=!0,Bn=null,u=Bp(a,null,h,u),a.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(Qr(),h===m){a=_s(s,a,u);break e}$t(s,a,h,u)}a=a.child}return a;case 5:return Gp(a),s===null&&xu(a),h=a.type,m=a.pendingProps,b=s!==null?s.memoizedProps:null,S=m.children,hu(h,m)?S=null:b!==null&&hu(h,b)&&(a.flags|=32),Eg(s,a),$t(s,a,S,u),a.child;case 6:return s===null&&xu(a),null;case 13:return Pg(s,a,u);case 4:return Tu(a,a.stateNode.containerInfo),h=a.pendingProps,s===null?a.child=Jr(a,null,h,u):$t(s,a,h,u),a.child;case 11:return h=a.type,m=a.pendingProps,m=a.elementType===h?m:Hn(h,m),_g(s,a,h,m,u);case 7:return $t(s,a,a.pendingProps,u),a.child;case 8:return $t(s,a,a.pendingProps.children,u),a.child;case 12:return $t(s,a,a.pendingProps.children,u),a.child;case 10:e:{if(h=a.type._context,m=a.pendingProps,b=a.memoizedProps,S=m.value,We($o,h._currentValue),h._currentValue=S,b!==null)if(zn(b.value,S)){if(b.children===m.children&&!Kt.current){a=_s(s,a,u);break e}}else for(b=a.child,b!==null&&(b.return=a);b!==null;){var T=b.dependencies;if(T!==null){S=b.child;for(var N=T.firstContext;N!==null;){if(N.context===h){if(b.tag===1){N=xs(-1,u&-u),N.tag=2;var z=b.updateQueue;if(z!==null){z=z.shared;var G=z.pending;G===null?N.next=N:(N.next=G.next,G.next=N),z.pending=N}}b.lanes|=u,N=b.alternate,N!==null&&(N.lanes|=u),Eu(b.return,u,a),T.lanes|=u;break}N=N.next}}else if(b.tag===10)S=b.type===a.type?null:b.child;else if(b.tag===18){if(S=b.return,S===null)throw Error(t(341));S.lanes|=u,T=S.alternate,T!==null&&(T.lanes|=u),Eu(S,u,a),S=b.sibling}else S=b.child;if(S!==null)S.return=b;else for(S=b;S!==null;){if(S===a){S=null;break}if(b=S.sibling,b!==null){b.return=S.return,S=b;break}S=S.return}b=S}$t(s,a,m.children,u),a=a.child}return a;case 9:return m=a.type,h=a.pendingProps.children,ei(a,u),m=_n(m),h=h(m),a.flags|=1,$t(s,a,h,u),a.child;case 14:return h=a.type,m=Hn(h,a.pendingProps),m=Hn(h.type,m),Sg(s,a,h,m,u);case 15:return Ag(s,a,a.type,a.pendingProps,u);case 17:return h=a.type,m=a.pendingProps,m=a.elementType===h?m:Hn(h,m),Qo(s,a),a.tag=1,Yt(h)?(s=!0,Mo(a)):s=!1,ei(a,u),gg(a,h,m),Hu(a,h,m,u),Gu(null,a,h,!0,s,u);case 19:return Ig(s,a,u);case 22:return Cg(s,a,u)}throw Error(t(156,a.tag))};function nm(s,a){return Df(s,a)}function Rx(s,a,u,h){this.tag=s,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cn(s,a,u,h){return new Rx(s,a,u,h)}function hd(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Tx(s){if(typeof s=="function")return hd(s)?1:0;if(s!=null){if(s=s.$$typeof,s===fe)return 11;if(s===De)return 14}return 2}function Js(s,a){var u=s.alternate;return u===null?(u=Cn(s.tag,a,s.key,s.mode),u.elementType=s.elementType,u.type=s.type,u.stateNode=s.stateNode,u.alternate=s,s.alternate=u):(u.pendingProps=a,u.type=s.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=s.flags&14680064,u.childLanes=s.childLanes,u.lanes=s.lanes,u.child=s.child,u.memoizedProps=s.memoizedProps,u.memoizedState=s.memoizedState,u.updateQueue=s.updateQueue,a=s.dependencies,u.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},u.sibling=s.sibling,u.index=s.index,u.ref=s.ref,u}function ll(s,a,u,h,m,b){var S=2;if(h=s,typeof s=="function")hd(s)&&(S=1);else if(typeof s=="string")S=5;else e:switch(s){case O:return _r(u.children,m,b,a);case H:S=8,m|=8;break;case U:return s=Cn(12,u,a,m|2),s.elementType=U,s.lanes=b,s;case we:return s=Cn(13,u,a,m),s.elementType=we,s.lanes=b,s;case be:return s=Cn(19,u,a,m),s.elementType=be,s.lanes=b,s;case J:return cl(u,m,b,a);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case K:S=10;break e;case V:S=9;break e;case fe:S=11;break e;case De:S=14;break e;case Z:S=16,h=null;break e}throw Error(t(130,s==null?s:typeof s,""))}return a=Cn(S,u,a,m),a.elementType=s,a.type=h,a.lanes=b,a}function _r(s,a,u,h){return s=Cn(7,s,h,a),s.lanes=u,s}function cl(s,a,u,h){return s=Cn(22,s,h,a),s.elementType=J,s.lanes=u,s.stateNode={isHidden:!1},s}function fd(s,a,u){return s=Cn(6,s,null,a),s.lanes=u,s}function pd(s,a,u){return a=Cn(4,s.children!==null?s.children:[],s.key,a),a.lanes=u,a.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},a}function Px(s,a,u,h,m){this.tag=a,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Bc(0),this.expirationTimes=Bc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bc(0),this.identifierPrefix=h,this.onRecoverableError=m,this.mutableSourceEagerHydrationData=null}function gd(s,a,u,h,m,b,S,T,N){return s=new Px(s,a,u,T,N),a===1?(a=1,b===!0&&(a|=8)):a=0,b=Cn(3,null,null,a),s.current=b,b.stateNode=s,b.memoizedState={element:h,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ru(b),s}function Nx(s,a,u){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:D,key:h==null?null:""+h,children:s,containerInfo:a,implementation:u}}function sm(s){if(!s)return Us;s=s._reactInternals;e:{if(ur(s)!==s||s.tag!==1)throw Error(t(170));var a=s;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(Yt(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(t(171))}if(s.tag===1){var u=s.type;if(Yt(u))return Np(s,u,a)}return a}function rm(s,a,u,h,m,b,S,T,N){return s=gd(u,h,!0,s,m,b,S,T,N),s.context=sm(null),u=s.current,h=zt(),m=Ys(u),b=xs(h,m),b.callback=a??null,Gs(u,b,m),s.current.lanes=m,Di(s,m,h),Zt(s,h),s}function ul(s,a,u,h){var m=a.current,b=zt(),S=Ys(m);return u=sm(u),a.context===null?a.context=u:a.pendingContext=u,a=xs(b,S),a.payload={element:s},h=h===void 0?null:h,h!==null&&(a.callback=h),s=Gs(m,a,S),s!==null&&(Vn(s,m,S,b),Bo(s,m,S)),S}function dl(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function im(s,a){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var u=s.retryLane;s.retryLane=u!==0&&u<a?u:a}}function md(s,a){im(s,a),(s=s.alternate)&&im(s,a)}function Ix(){return null}var am=typeof reportError=="function"?reportError:function(s){console.error(s)};function yd(s){this._internalRoot=s}hl.prototype.render=yd.prototype.render=function(s){var a=this._internalRoot;if(a===null)throw Error(t(409));ul(s,a,null,null)},hl.prototype.unmount=yd.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var a=s.containerInfo;br(function(){ul(null,s,null,null)}),a[ms]=null}};function hl(s){this._internalRoot=s}hl.prototype.unstable_scheduleHydration=function(s){if(s){var a=Uf();s={blockedOn:null,target:s,priority:a};for(var u=0;u<js.length&&a!==0&&a<js[u].priority;u++);js.splice(u,0,s),u===0&&Gf(s)}};function vd(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function fl(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function om(){}function Mx(s,a,u,h,m){if(m){if(typeof h=="function"){var b=h;h=function(){var z=dl(S);b.call(z)}}var S=rm(a,h,s,0,null,!1,!1,"",om);return s._reactRootContainer=S,s[ms]=S.current,Ki(s.nodeType===8?s.parentNode:s),br(),S}for(;m=s.lastChild;)s.removeChild(m);if(typeof h=="function"){var T=h;h=function(){var z=dl(N);T.call(z)}}var N=gd(s,0,!1,null,null,!1,!1,"",om);return s._reactRootContainer=N,s[ms]=N.current,Ki(s.nodeType===8?s.parentNode:s),br(function(){ul(a,N,u,h)}),N}function pl(s,a,u,h,m){var b=u._reactRootContainer;if(b){var S=b;if(typeof m=="function"){var T=m;m=function(){var N=dl(S);T.call(N)}}ul(a,S,s,m)}else S=Mx(u,a,s,m,h);return dl(S)}Bf=function(s){switch(s.tag){case 3:var a=s.stateNode;if(a.current.memoizedState.isDehydrated){var u=Li(a.pendingLanes);u!==0&&(Hc(a,u|1),Zt(a,tt()),(Fe&6)===0&&(ii=tt()+500,Ws()))}break;case 13:br(function(){var h=ws(s,1);if(h!==null){var m=zt();Vn(h,s,1,m)}}),md(s,1)}},Uc=function(s){if(s.tag===13){var a=ws(s,134217728);if(a!==null){var u=zt();Vn(a,s,134217728,u)}md(s,134217728)}},Hf=function(s){if(s.tag===13){var a=Ys(s),u=ws(s,a);if(u!==null){var h=zt();Vn(u,s,a,h)}md(s,a)}},Uf=function(){return ze},Wf=function(s,a){var u=ze;try{return ze=s,a()}finally{ze=u}},Ii=function(s,a,u){switch(a){case"input":if(Or(s,u),a=u.name,u.type==="radio"&&a!=null){for(u=s;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<u.length;a++){var h=u[a];if(h!==s&&h.form===s.form){var m=No(h);if(!m)throw Error(t(90));an(h),Or(h,m)}}}break;case"textarea":Ri(s,u);break;case"select":a=u.value,a!=null&&Ln(s,!!u.multiple,a,!1)}},jt=cd,Tt=br;var Lx={usingClientEntryPoint:!1,Events:[Ji,Gr,No,Rt,On,cd]},ha={findFiberByHostInstance:dr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Dx={bundleType:ha.bundleType,version:ha.version,rendererPackageName:ha.rendererPackageName,rendererConfig:ha.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:R.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=Mf(s),s===null?null:s.stateNode},findFiberByHostInstance:ha.findFiberByHostInstance||Ix,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var gl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!gl.isDisabled&&gl.supportsFiber)try{ho=gl.inject(Dx),ts=gl}catch{}}return en.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Lx,en.createPortal=function(s,a){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!vd(a))throw Error(t(200));return Nx(s,a,null,u)},en.createRoot=function(s,a){if(!vd(s))throw Error(t(299));var u=!1,h="",m=am;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onRecoverableError!==void 0&&(m=a.onRecoverableError)),a=gd(s,1,!1,null,null,u,!1,h,m),s[ms]=a.current,Ki(s.nodeType===8?s.parentNode:s),new yd(a)},en.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var a=s._reactInternals;if(a===void 0)throw typeof s.render=="function"?Error(t(188)):(s=Object.keys(s).join(","),Error(t(268,s)));return s=Mf(a),s=s===null?null:s.stateNode,s},en.flushSync=function(s){return br(s)},en.hydrate=function(s,a,u){if(!fl(a))throw Error(t(200));return pl(null,s,a,!0,u)},en.hydrateRoot=function(s,a,u){if(!vd(s))throw Error(t(405));var h=u!=null&&u.hydratedSources||null,m=!1,b="",S=am;if(u!=null&&(u.unstable_strictMode===!0&&(m=!0),u.identifierPrefix!==void 0&&(b=u.identifierPrefix),u.onRecoverableError!==void 0&&(S=u.onRecoverableError)),a=rm(a,null,s,1,u??null,m,!1,b,S),s[ms]=a.current,Ki(s),h)for(s=0;s<h.length;s++)u=h[s],m=u._getVersion,m=m(u._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[u,m]:a.mutableSourceEagerHydrationData.push(u,m);return new hl(a)},en.render=function(s,a,u){if(!fl(a))throw Error(t(200));return pl(null,s,a,!1,u)},en.unmountComponentAtNode=function(s){if(!fl(s))throw Error(t(40));return s._reactRootContainer?(br(function(){pl(null,null,s,!1,function(){s._reactRootContainer=null,s[ms]=null})}),!0):!1},en.unstable_batchedUpdates=cd,en.unstable_renderSubtreeIntoContainer=function(s,a,u,h){if(!fl(u))throw Error(t(200));if(s==null||s._reactInternals===void 0)throw Error(t(38));return pl(s,a,u,!1,h)},en.version="18.3.1-next-f1338f8080-20240426",en}var gm;function B0(){if(gm)return xd.exports;gm=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),xd.exports=Ux(),xd.exports}var mm;function Wx(){if(mm)return ml;mm=1;var i=B0();return ml.createRoot=i.createRoot,ml.hydrateRoot=i.hydrateRoot,ml}var Vx=Wx();/**
 * react-router v7.9.6
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var ym="popstate";function Gx(i={}){function e(r,o){let{pathname:l="/",search:c="",hash:d=""}=Lr(r.location.hash.substring(1));return!l.startsWith("/")&&!l.startsWith(".")&&(l="/"+l),Xd("",{pathname:l,search:c,hash:d},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(r,o){let l=r.document.querySelector("base"),c="";if(l&&l.getAttribute("href")){let d=r.location.href,f=d.indexOf("#");c=f===-1?d:d.slice(0,f)}return c+"#"+(typeof o=="string"?o:Ba(o))}function n(r,o){vn(r.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(o)})`)}return Xx(e,t,n,i)}function Ke(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function vn(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function qx(){return Math.random().toString(36).substring(2,10)}function vm(i,e){return{usr:i.state,key:i.key,idx:e}}function Xd(i,e,t=null,n){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof e=="string"?Lr(e):e,state:t,key:e&&e.key||n||qx()}}function Ba({pathname:i="/",search:e="",hash:t=""}){return e&&e!=="?"&&(i+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(i+=t.charAt(0)==="#"?t:"#"+t),i}function Lr(i){let e={};if(i){let t=i.indexOf("#");t>=0&&(e.hash=i.substring(t),i=i.substring(0,t));let n=i.indexOf("?");n>=0&&(e.search=i.substring(n),i=i.substring(0,n)),i&&(e.pathname=i)}return e}function Xx(i,e,t,n={}){let{window:r=document.defaultView,v5Compat:o=!1}=n,l=r.history,c="POP",d=null,f=p();f==null&&(f=0,l.replaceState({...l.state,idx:f},""));function p(){return(l.state||{idx:null}).idx}function g(){c="POP";let A=p(),C=A==null?null:A-f;f=A,d&&d({action:c,location:_.location,delta:C})}function y(A,C){c="PUSH";let E=Xd(_.location,A,C);t&&t(E,A),f=p()+1;let P=vm(E,f),R=_.createHref(E);try{l.pushState(P,"",R)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;r.location.assign(R)}o&&d&&d({action:c,location:_.location,delta:1})}function v(A,C){c="REPLACE";let E=Xd(_.location,A,C);t&&t(E,A),f=p();let P=vm(E,f),R=_.createHref(E);l.replaceState(P,"",R),o&&d&&d({action:c,location:_.location,delta:0})}function x(A){return Kx(A)}let _={get action(){return c},get location(){return i(r,l)},listen(A){if(d)throw new Error("A history only accepts one active listener");return r.addEventListener(ym,g),d=A,()=>{r.removeEventListener(ym,g),d=null}},createHref(A){return e(r,A)},createURL:x,encodeLocation(A){let C=x(A);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:y,replace:v,go(A){return l.go(A)}};return _}function Kx(i,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Ke(t,"No window.location.(origin|href) available to create URL");let n=typeof i=="string"?i:Ba(i);return n=n.replace(/ $/,"%20"),!e&&n.startsWith("//")&&(n=t+n),new URL(n,t)}function H0(i,e,t="/"){return Yx(i,e,t,!1)}function Yx(i,e,t,n){let r=typeof e=="string"?Lr(e):e,o=Ts(r.pathname||"/",t);if(o==null)return null;let l=U0(i);Qx(l);let c=null;for(let d=0;c==null&&d<l.length;++d){let f=l_(o);c=a_(l[d],f,n)}return c}function U0(i,e=[],t=[],n="",r=!1){let o=(l,c,d=r,f)=>{let p={relativePath:f===void 0?l.path||"":f,caseSensitive:l.caseSensitive===!0,childrenIndex:c,route:l};if(p.relativePath.startsWith("/")){if(!p.relativePath.startsWith(n)&&d)return;Ke(p.relativePath.startsWith(n),`Absolute route path "${p.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(n.length)}let g=Rs([n,p.relativePath]),y=t.concat(p);l.children&&l.children.length>0&&(Ke(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),U0(l.children,e,y,g,d)),!(l.path==null&&!l.index)&&e.push({path:g,score:r_(g,l.index),routesMeta:y})};return i.forEach((l,c)=>{if(l.path===""||!l.path?.includes("?"))o(l,c);else for(let d of W0(l.path))o(l,c,!0,d)}),e}function W0(i){let e=i.split("/");if(e.length===0)return[];let[t,...n]=e,r=t.endsWith("?"),o=t.replace(/\?$/,"");if(n.length===0)return r?[o,""]:[o];let l=W0(n.join("/")),c=[];return c.push(...l.map(d=>d===""?o:[o,d].join("/"))),r&&c.push(...l),c.map(d=>i.startsWith("/")&&d===""?"/":d)}function Qx(i){i.sort((e,t)=>e.score!==t.score?t.score-e.score:i_(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}var Jx=/^:[\w-]+$/,Zx=3,e_=2,t_=1,n_=10,s_=-2,bm=i=>i==="*";function r_(i,e){let t=i.split("/"),n=t.length;return t.some(bm)&&(n+=s_),e&&(n+=e_),t.filter(r=>!bm(r)).reduce((r,o)=>r+(Jx.test(o)?Zx:o===""?t_:n_),n)}function i_(i,e){return i.length===e.length&&i.slice(0,-1).every((n,r)=>n===e[r])?i[i.length-1]-e[e.length-1]:0}function a_(i,e,t=!1){let{routesMeta:n}=i,r={},o="/",l=[];for(let c=0;c<n.length;++c){let d=n[c],f=c===n.length-1,p=o==="/"?e:e.slice(o.length)||"/",g=Gl({path:d.relativePath,caseSensitive:d.caseSensitive,end:f},p),y=d.route;if(!g&&f&&t&&!n[n.length-1].route.index&&(g=Gl({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},p)),!g)return null;Object.assign(r,g.params),l.push({params:r,pathname:Rs([o,g.pathname]),pathnameBase:f_(Rs([o,g.pathnameBase])),route:y}),g.pathnameBase!=="/"&&(o=Rs([o,g.pathnameBase]))}return l}function Gl(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[t,n]=o_(i.path,i.caseSensitive,i.end),r=e.match(t);if(!r)return null;let o=r[0],l=o.replace(/(.)\/+$/,"$1"),c=r.slice(1);return{params:n.reduce((f,{paramName:p,isOptional:g},y)=>{if(p==="*"){let x=c[y]||"";l=o.slice(0,o.length-x.length).replace(/(.)\/+$/,"$1")}const v=c[y];return g&&!v?f[p]=void 0:f[p]=(v||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:l,pattern:i}}function o_(i,e=!1,t=!0){vn(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let n=[],r="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,c,d)=>(n.push({paramName:c,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return i.endsWith("*")?(n.push({paramName:"*"}),r+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?r+="\\/*$":i!==""&&i!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),n]}function l_(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return vn(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),i}}function Ts(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=i.charAt(t);return n&&n!=="/"?null:i.slice(t)||"/"}var c_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,u_=i=>c_.test(i);function d_(i,e="/"){let{pathname:t,search:n="",hash:r=""}=typeof i=="string"?Lr(i):i,o;if(t)if(u_(t))o=t;else{if(t.includes("//")){let l=t;t=t.replace(/\/\/+/g,"/"),vn(!1,`Pathnames cannot have embedded double slashes - normalizing ${l} -> ${t}`)}t.startsWith("/")?o=wm(t.substring(1),"/"):o=wm(t,e)}else o=e;return{pathname:o,search:p_(n),hash:g_(r)}}function wm(i,e){let t=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(r=>{r===".."?t.length>1&&t.pop():r!=="."&&t.push(r)}),t.length>1?t.join("/"):"/"}function Ad(i,e,t,n){return`Cannot include a '${i}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function h_(i){return i.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Ph(i){let e=h_(i);return e.map((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)}function Nh(i,e,t,n=!1){let r;typeof i=="string"?r=Lr(i):(r={...i},Ke(!r.pathname||!r.pathname.includes("?"),Ad("?","pathname","search",r)),Ke(!r.pathname||!r.pathname.includes("#"),Ad("#","pathname","hash",r)),Ke(!r.search||!r.search.includes("#"),Ad("#","search","hash",r)));let o=i===""||r.pathname==="",l=o?"/":r.pathname,c;if(l==null)c=t;else{let g=e.length-1;if(!n&&l.startsWith("..")){let y=l.split("/");for(;y[0]==="..";)y.shift(),g-=1;r.pathname=y.join("/")}c=g>=0?e[g]:"/"}let d=d_(r,c),f=l&&l!=="/"&&l.endsWith("/"),p=(o||l===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(f||p)&&(d.pathname+="/"),d}var Rs=i=>i.join("/").replace(/\/\/+/g,"/"),f_=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),p_=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,g_=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function m_(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var V0=["POST","PUT","PATCH","DELETE"];new Set(V0);var y_=["GET",...V0];new Set(y_);var bi=k.createContext(null);bi.displayName="DataRouter";var uc=k.createContext(null);uc.displayName="DataRouterState";k.createContext(!1);var G0=k.createContext({isTransitioning:!1});G0.displayName="ViewTransition";var v_=k.createContext(new Map);v_.displayName="Fetchers";var b_=k.createContext(null);b_.displayName="Await";var Qn=k.createContext(null);Qn.displayName="Navigation";var qa=k.createContext(null);qa.displayName="Location";var Nn=k.createContext({outlet:null,matches:[],isDataRoute:!1});Nn.displayName="Route";var Ih=k.createContext(null);Ih.displayName="RouteError";function w_(i,{relative:e}={}){Ke(wi(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:n}=k.useContext(Qn),{hash:r,pathname:o,search:l}=Xa(i,{relative:e}),c=o;return t!=="/"&&(c=o==="/"?t:Rs([t,o])),n.createHref({pathname:c,search:l,hash:r})}function wi(){return k.useContext(qa)!=null}function Ps(){return Ke(wi(),"useLocation() may be used only in the context of a <Router> component."),k.useContext(qa).location}var q0="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function X0(i){k.useContext(Qn).static||k.useLayoutEffect(i)}function Mh(){let{isDataRoute:i}=k.useContext(Nn);return i?O_():x_()}function x_(){Ke(wi(),"useNavigate() may be used only in the context of a <Router> component.");let i=k.useContext(bi),{basename:e,navigator:t}=k.useContext(Qn),{matches:n}=k.useContext(Nn),{pathname:r}=Ps(),o=JSON.stringify(Ph(n)),l=k.useRef(!1);return X0(()=>{l.current=!0}),k.useCallback((d,f={})=>{if(vn(l.current,q0),!l.current)return;if(typeof d=="number"){t.go(d);return}let p=Nh(d,JSON.parse(o),r,f.relative==="path");i==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:Rs([e,p.pathname])),(f.replace?t.replace:t.push)(p,f.state,f)},[e,t,o,r,i])}var __=k.createContext(null);function S_(i){let e=k.useContext(Nn).outlet;return k.useMemo(()=>e&&k.createElement(__.Provider,{value:i},e),[e,i])}function A_(){let{matches:i}=k.useContext(Nn),e=i[i.length-1];return e?e.params:{}}function Xa(i,{relative:e}={}){let{matches:t}=k.useContext(Nn),{pathname:n}=Ps(),r=JSON.stringify(Ph(t));return k.useMemo(()=>Nh(i,JSON.parse(r),n,e==="path"),[i,r,n,e])}function C_(i,e){return K0(i,e)}function K0(i,e,t,n,r){Ke(wi(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=k.useContext(Qn),{matches:l}=k.useContext(Nn),c=l[l.length-1],d=c?c.params:{},f=c?c.pathname:"/",p=c?c.pathnameBase:"/",g=c&&c.route;{let E=g&&g.path||"";Y0(f,!g||E.endsWith("*")||E.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${E}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${E}"> to <Route path="${E==="/"?"*":`${E}/*`}">.`)}let y=Ps(),v;if(e){let E=typeof e=="string"?Lr(e):e;Ke(p==="/"||E.pathname?.startsWith(p),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${E.pathname}" was given in the \`location\` prop.`),v=E}else v=y;let x=v.pathname||"/",_=x;if(p!=="/"){let E=p.replace(/^\//,"").split("/");_="/"+x.replace(/^\//,"").split("/").slice(E.length).join("/")}let A=H0(i,{pathname:_});vn(g||A!=null,`No routes matched location "${v.pathname}${v.search}${v.hash}" `),vn(A==null||A[A.length-1].route.element!==void 0||A[A.length-1].route.Component!==void 0||A[A.length-1].route.lazy!==void 0,`Matched leaf route at location "${v.pathname}${v.search}${v.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let C=P_(A&&A.map(E=>Object.assign({},E,{params:Object.assign({},d,E.params),pathname:Rs([p,o.encodeLocation?o.encodeLocation(E.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?p:Rs([p,o.encodeLocation?o.encodeLocation(E.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:E.pathnameBase])})),l,t,n,r);return e&&C?k.createElement(qa.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...v},navigationType:"POP"}},C):C}function E_(){let i=D_(),e=m_(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),t=i instanceof Error?i.stack:null,n="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:n},o={padding:"2px 4px",backgroundColor:n},l=null;return console.error("Error handled by React Router default ErrorBoundary:",i),l=k.createElement(k.Fragment,null,k.createElement("p",null," Hey developer "),k.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",k.createElement("code",{style:o},"ErrorBoundary")," or"," ",k.createElement("code",{style:o},"errorElement")," prop on your route.")),k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},e),t?k.createElement("pre",{style:r},t):null,l)}var k_=k.createElement(E_,null),R_=class extends k.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,e){return e.location!==i.location||e.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:e.error,location:e.location,revalidation:i.revalidation||e.revalidation}}componentDidCatch(i,e){this.props.onError?this.props.onError(i,e):console.error("React Router caught the following error during render",i)}render(){return this.state.error!==void 0?k.createElement(Nn.Provider,{value:this.props.routeContext},k.createElement(Ih.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function T_({routeContext:i,match:e,children:t}){let n=k.useContext(bi);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),k.createElement(Nn.Provider,{value:i},t)}function P_(i,e=[],t=null,n=null,r=null){if(i==null){if(!t)return null;if(t.errors)i=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)i=t.matches;else return null}let o=i,l=t?.errors;if(l!=null){let p=o.findIndex(g=>g.route.id&&l?.[g.route.id]!==void 0);Ke(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),o=o.slice(0,Math.min(o.length,p+1))}let c=!1,d=-1;if(t)for(let p=0;p<o.length;p++){let g=o[p];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(d=p),g.route.id){let{loaderData:y,errors:v}=t,x=g.route.loader&&!y.hasOwnProperty(g.route.id)&&(!v||v[g.route.id]===void 0);if(g.route.lazy||x){c=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}let f=t&&n?(p,g)=>{n(p,{location:t.location,params:t.matches?.[0]?.params??{},errorInfo:g})}:void 0;return o.reduceRight((p,g,y)=>{let v,x=!1,_=null,A=null;t&&(v=l&&g.route.id?l[g.route.id]:void 0,_=g.route.errorElement||k_,c&&(d<0&&y===0?(Y0("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),x=!0,A=null):d===y&&(x=!0,A=g.route.hydrateFallbackElement||null)));let C=e.concat(o.slice(0,y+1)),E=()=>{let P;return v?P=_:x?P=A:g.route.Component?P=k.createElement(g.route.Component,null):g.route.element?P=g.route.element:P=p,k.createElement(T_,{match:g,routeContext:{outlet:p,matches:C,isDataRoute:t!=null},children:P})};return t&&(g.route.ErrorBoundary||g.route.errorElement||y===0)?k.createElement(R_,{location:t.location,revalidation:t.revalidation,component:_,error:v,children:E(),routeContext:{outlet:null,matches:C,isDataRoute:!0},onError:f}):E()},null)}function Lh(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function N_(i){let e=k.useContext(bi);return Ke(e,Lh(i)),e}function I_(i){let e=k.useContext(uc);return Ke(e,Lh(i)),e}function M_(i){let e=k.useContext(Nn);return Ke(e,Lh(i)),e}function Dh(i){let e=M_(i),t=e.matches[e.matches.length-1];return Ke(t.route.id,`${i} can only be used on routes that contain a unique "id"`),t.route.id}function L_(){return Dh("useRouteId")}function D_(){let i=k.useContext(Ih),e=I_("useRouteError"),t=Dh("useRouteError");return i!==void 0?i:e.errors?.[t]}function O_(){let{router:i}=N_("useNavigate"),e=Dh("useNavigate"),t=k.useRef(!1);return X0(()=>{t.current=!0}),k.useCallback(async(r,o={})=>{vn(t.current,q0),t.current&&(typeof r=="number"?i.navigate(r):await i.navigate(r,{fromRouteId:e,...o}))},[i,e])}var xm={};function Y0(i,e,t){!e&&!xm[i]&&(xm[i]=!0,vn(!1,t))}k.memo(F_);function F_({routes:i,future:e,state:t,unstable_onError:n}){return K0(i,void 0,t,n,e)}function j_({to:i,replace:e,state:t,relative:n}){Ke(wi(),"<Navigate> may be used only in the context of a <Router> component.");let{static:r}=k.useContext(Qn);vn(!r,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=k.useContext(Nn),{pathname:l}=Ps(),c=Mh(),d=Nh(i,Ph(o),l,n==="path"),f=JSON.stringify(d);return k.useEffect(()=>{c(JSON.parse(f),{replace:e,state:t,relative:n})},[c,f,n,e,t]),null}function $_(i){return S_(i.context)}function Sr(i){Ke(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function z_({basename:i="/",children:e=null,location:t,navigationType:n="POP",navigator:r,static:o=!1}){Ke(!wi(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=i.replace(/^\/*/,"/"),c=k.useMemo(()=>({basename:l,navigator:r,static:o,future:{}}),[l,r,o]);typeof t=="string"&&(t=Lr(t));let{pathname:d="/",search:f="",hash:p="",state:g=null,key:y="default"}=t,v=k.useMemo(()=>{let x=Ts(d,l);return x==null?null:{location:{pathname:x,search:f,hash:p,state:g,key:y},navigationType:n}},[l,d,f,p,g,y,n]);return vn(v!=null,`<Router basename="${l}"> is not able to match the URL "${d}${f}${p}" because it does not start with the basename, so the <Router> won't render anything.`),v==null?null:k.createElement(Qn.Provider,{value:c},k.createElement(qa.Provider,{children:e,value:v}))}function B_({children:i,location:e}){return C_(Kd(i),e)}function Kd(i,e=[]){let t=[];return k.Children.forEach(i,(n,r)=>{if(!k.isValidElement(n))return;let o=[...e,r];if(n.type===k.Fragment){t.push.apply(t,Kd(n.props.children,o));return}Ke(n.type===Sr,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ke(!n.props.index||!n.props.children,"An index route cannot have child routes.");let l={id:n.props.id||o.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(l.children=Kd(n.props.children,o)),t.push(l)}),t}var Ml="get",Ll="application/x-www-form-urlencoded";function dc(i){return i!=null&&typeof i.tagName=="string"}function H_(i){return dc(i)&&i.tagName.toLowerCase()==="button"}function U_(i){return dc(i)&&i.tagName.toLowerCase()==="form"}function W_(i){return dc(i)&&i.tagName.toLowerCase()==="input"}function V_(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function G_(i,e){return i.button===0&&(!e||e==="_self")&&!V_(i)}var yl=null;function q_(){if(yl===null)try{new FormData(document.createElement("form"),0),yl=!1}catch{yl=!0}return yl}var X_=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Cd(i){return i!=null&&!X_.has(i)?(vn(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ll}"`),null):i}function K_(i,e){let t,n,r,o,l;if(U_(i)){let c=i.getAttribute("action");n=c?Ts(c,e):null,t=i.getAttribute("method")||Ml,r=Cd(i.getAttribute("enctype"))||Ll,o=new FormData(i)}else if(H_(i)||W_(i)&&(i.type==="submit"||i.type==="image")){let c=i.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=i.getAttribute("formaction")||c.getAttribute("action");if(n=d?Ts(d,e):null,t=i.getAttribute("formmethod")||c.getAttribute("method")||Ml,r=Cd(i.getAttribute("formenctype"))||Cd(c.getAttribute("enctype"))||Ll,o=new FormData(c,i),!q_()){let{name:f,type:p,value:g}=i;if(p==="image"){let y=f?`${f}.`:"";o.append(`${y}x`,"0"),o.append(`${y}y`,"0")}else f&&o.append(f,g)}}else{if(dc(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Ml,n=null,r=Ll,l=i}return o&&r==="text/plain"&&(l=o,o=void 0),{action:n,method:t.toLowerCase(),encType:r,formData:o,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Oh(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function Y_(i,e,t){let n=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return n.pathname==="/"?n.pathname=`_root.${t}`:e&&Ts(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${t}`,n}async function Q_(i,e){if(i.id in e)return e[i.id];try{let t=await import(i.module);return e[i.id]=t,t}catch(t){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function J_(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function Z_(i,e,t){let n=await Promise.all(i.map(async r=>{let o=e.routes[r.route.id];if(o){let l=await Q_(o,t);return l.links?l.links():[]}return[]}));return sS(n.flat(1).filter(J_).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function _m(i,e,t,n,r,o){let l=(d,f)=>t[f]?d.route.id!==t[f].route.id:!0,c=(d,f)=>t[f].pathname!==d.pathname||t[f].route.path?.endsWith("*")&&t[f].params["*"]!==d.params["*"];return o==="assets"?e.filter((d,f)=>l(d,f)||c(d,f)):o==="data"?e.filter((d,f)=>{let p=n.routes[d.route.id];if(!p||!p.hasLoader)return!1;if(l(d,f)||c(d,f))return!0;if(d.route.shouldRevalidate){let g=d.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(i,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function eS(i,e,{includeHydrateFallback:t}={}){return tS(i.map(n=>{let r=e.routes[n.route.id];if(!r)return[];let o=[r.module];return r.clientActionModule&&(o=o.concat(r.clientActionModule)),r.clientLoaderModule&&(o=o.concat(r.clientLoaderModule)),t&&r.hydrateFallbackModule&&(o=o.concat(r.hydrateFallbackModule)),r.imports&&(o=o.concat(r.imports)),o}).flat(1))}function tS(i){return[...new Set(i)]}function nS(i){let e={},t=Object.keys(i).sort();for(let n of t)e[n]=i[n];return e}function sS(i,e){let t=new Set;return new Set(e),i.reduce((n,r)=>{let o=JSON.stringify(nS(r));return t.has(o)||(t.add(o),n.push({key:o,link:r})),n},[])}function Q0(){let i=k.useContext(bi);return Oh(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function rS(){let i=k.useContext(uc);return Oh(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var Fh=k.createContext(void 0);Fh.displayName="FrameworkContext";function J0(){let i=k.useContext(Fh);return Oh(i,"You must render this element inside a <HydratedRouter> element"),i}function iS(i,e){let t=k.useContext(Fh),[n,r]=k.useState(!1),[o,l]=k.useState(!1),{onFocus:c,onBlur:d,onMouseEnter:f,onMouseLeave:p,onTouchStart:g}=e,y=k.useRef(null);k.useEffect(()=>{if(i==="render"&&l(!0),i==="viewport"){let _=C=>{C.forEach(E=>{l(E.isIntersecting)})},A=new IntersectionObserver(_,{threshold:.5});return y.current&&A.observe(y.current),()=>{A.disconnect()}}},[i]),k.useEffect(()=>{if(n){let _=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(_)}}},[n]);let v=()=>{r(!0)},x=()=>{r(!1),l(!1)};return t?i!=="intent"?[o,y,{}]:[o,y,{onFocus:pa(c,v),onBlur:pa(d,x),onMouseEnter:pa(f,v),onMouseLeave:pa(p,x),onTouchStart:pa(g,v)}]:[!1,y,{}]}function pa(i,e){return t=>{i&&i(t),t.defaultPrevented||e(t)}}function aS({page:i,...e}){let{router:t}=Q0(),n=k.useMemo(()=>H0(t.routes,i,t.basename),[t.routes,i,t.basename]);return n?k.createElement(lS,{page:i,matches:n,...e}):null}function oS(i){let{manifest:e,routeModules:t}=J0(),[n,r]=k.useState([]);return k.useEffect(()=>{let o=!1;return Z_(i,e,t).then(l=>{o||r(l)}),()=>{o=!0}},[i,e,t]),n}function lS({page:i,matches:e,...t}){let n=Ps(),{manifest:r,routeModules:o}=J0(),{basename:l}=Q0(),{loaderData:c,matches:d}=rS(),f=k.useMemo(()=>_m(i,e,d,r,n,"data"),[i,e,d,r,n]),p=k.useMemo(()=>_m(i,e,d,r,n,"assets"),[i,e,d,r,n]),g=k.useMemo(()=>{if(i===n.pathname+n.search+n.hash)return[];let x=new Set,_=!1;if(e.forEach(C=>{let E=r.routes[C.route.id];!E||!E.hasLoader||(!f.some(P=>P.route.id===C.route.id)&&C.route.id in c&&o[C.route.id]?.shouldRevalidate||E.hasClientLoader?_=!0:x.add(C.route.id))}),x.size===0)return[];let A=Y_(i,l,"data");return _&&x.size>0&&A.searchParams.set("_routes",e.filter(C=>x.has(C.route.id)).map(C=>C.route.id).join(",")),[A.pathname+A.search]},[l,c,n,r,f,e,i,o]),y=k.useMemo(()=>eS(p,r),[p,r]),v=oS(p);return k.createElement(k.Fragment,null,g.map(x=>k.createElement("link",{key:x,rel:"prefetch",as:"fetch",href:x,...t})),y.map(x=>k.createElement("link",{key:x,rel:"modulepreload",href:x,...t})),v.map(({key:x,link:_})=>k.createElement("link",{key:x,nonce:t.nonce,..._})))}function cS(...i){return e=>{i.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var Z0=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Z0&&(window.__reactRouterVersion="7.9.6")}catch{}function uS({basename:i,children:e,window:t}){let n=k.useRef();n.current==null&&(n.current=Gx({window:t,v5Compat:!0}));let r=n.current,[o,l]=k.useState({action:r.action,location:r.location}),c=k.useCallback(d=>{k.startTransition(()=>l(d))},[l]);return k.useLayoutEffect(()=>r.listen(c),[r,c]),k.createElement(z_,{basename:i,children:e,location:o.location,navigationType:o.action,navigator:r})}var ey=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Er=k.forwardRef(function({onClick:e,discover:t="render",prefetch:n="none",relative:r,reloadDocument:o,replace:l,state:c,target:d,to:f,preventScrollReset:p,viewTransition:g,...y},v){let{basename:x}=k.useContext(Qn),_=typeof f=="string"&&ey.test(f),A,C=!1;if(typeof f=="string"&&_&&(A=f,Z0))try{let U=new URL(window.location.href),K=f.startsWith("//")?new URL(U.protocol+f):new URL(f),V=Ts(K.pathname,x);K.origin===U.origin&&V!=null?f=V+K.search+K.hash:C=!0}catch{vn(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let E=w_(f,{relative:r}),[P,R,M]=iS(n,y),D=pS(f,{replace:l,state:c,target:d,preventScrollReset:p,relative:r,viewTransition:g});function O(U){e&&e(U),U.defaultPrevented||D(U)}let H=k.createElement("a",{...y,...M,href:A||E,onClick:C||o?e:O,ref:cS(v,R),target:d,"data-discover":!_&&t==="render"?"true":void 0});return P&&!_?k.createElement(k.Fragment,null,H,k.createElement(aS,{page:E})):H});Er.displayName="Link";var dS=k.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:n="",end:r=!1,style:o,to:l,viewTransition:c,children:d,...f},p){let g=Xa(l,{relative:f.relative}),y=Ps(),v=k.useContext(uc),{navigator:x,basename:_}=k.useContext(Qn),A=v!=null&&bS(g)&&c===!0,C=x.encodeLocation?x.encodeLocation(g).pathname:g.pathname,E=y.pathname,P=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;t||(E=E.toLowerCase(),P=P?P.toLowerCase():null,C=C.toLowerCase()),P&&_&&(P=Ts(P,_)||P);const R=C!=="/"&&C.endsWith("/")?C.length-1:C.length;let M=E===C||!r&&E.startsWith(C)&&E.charAt(R)==="/",D=P!=null&&(P===C||!r&&P.startsWith(C)&&P.charAt(C.length)==="/"),O={isActive:M,isPending:D,isTransitioning:A},H=M?e:void 0,U;typeof n=="function"?U=n(O):U=[n,M?"active":null,D?"pending":null,A?"transitioning":null].filter(Boolean).join(" ");let K=typeof o=="function"?o(O):o;return k.createElement(Er,{...f,"aria-current":H,className:U,ref:p,style:K,to:l,viewTransition:c},typeof d=="function"?d(O):d)});dS.displayName="NavLink";var hS=k.forwardRef(({discover:i="render",fetcherKey:e,navigate:t,reloadDocument:n,replace:r,state:o,method:l=Ml,action:c,onSubmit:d,relative:f,preventScrollReset:p,viewTransition:g,...y},v)=>{let x=yS(),_=vS(c,{relative:f}),A=l.toLowerCase()==="get"?"get":"post",C=typeof c=="string"&&ey.test(c),E=P=>{if(d&&d(P),P.defaultPrevented)return;P.preventDefault();let R=P.nativeEvent.submitter,M=R?.getAttribute("formmethod")||l;x(R||P.currentTarget,{fetcherKey:e,method:M,navigate:t,replace:r,state:o,relative:f,preventScrollReset:p,viewTransition:g})};return k.createElement("form",{ref:v,method:A,action:_,onSubmit:n?d:E,...y,"data-discover":!C&&i==="render"?"true":void 0})});hS.displayName="Form";function fS(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ty(i){let e=k.useContext(bi);return Ke(e,fS(i)),e}function pS(i,{target:e,replace:t,state:n,preventScrollReset:r,relative:o,viewTransition:l}={}){let c=Mh(),d=Ps(),f=Xa(i,{relative:o});return k.useCallback(p=>{if(G_(p,e)){p.preventDefault();let g=t!==void 0?t:Ba(d)===Ba(f);c(i,{replace:g,state:n,preventScrollReset:r,relative:o,viewTransition:l})}},[d,c,f,t,n,e,i,r,o,l])}var gS=0,mS=()=>`__${String(++gS)}__`;function yS(){let{router:i}=ty("useSubmit"),{basename:e}=k.useContext(Qn),t=L_();return k.useCallback(async(n,r={})=>{let{action:o,method:l,encType:c,formData:d,body:f}=K_(n,e);if(r.navigate===!1){let p=r.fetcherKey||mS();await i.fetch(p,t,r.action||o,{preventScrollReset:r.preventScrollReset,formData:d,body:f,formMethod:r.method||l,formEncType:r.encType||c,flushSync:r.flushSync})}else await i.navigate(r.action||o,{preventScrollReset:r.preventScrollReset,formData:d,body:f,formMethod:r.method||l,formEncType:r.encType||c,replace:r.replace,state:r.state,fromRouteId:t,flushSync:r.flushSync,viewTransition:r.viewTransition})},[i,e,t])}function vS(i,{relative:e}={}){let{basename:t}=k.useContext(Qn),n=k.useContext(Nn);Ke(n,"useFormAction must be used inside a RouteContext");let[r]=n.matches.slice(-1),o={...Xa(i||".",{relative:e})},l=Ps();if(i==null){o.search=l.search;let c=new URLSearchParams(o.search),d=c.getAll("index");if(d.some(p=>p==="")){c.delete("index"),d.filter(g=>g).forEach(g=>c.append("index",g));let p=c.toString();o.search=p?`?${p}`:""}}return(!i||i===".")&&r.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(o.pathname=o.pathname==="/"?t:Rs([t,o.pathname])),Ba(o)}function bS(i,{relative:e}={}){let t=k.useContext(G0);Ke(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=ty("useViewTransitionState"),r=Xa(i,{relative:e});if(!t.isTransitioning)return!1;let o=Ts(t.currentLocation.pathname,n)||t.currentLocation.pathname,l=Ts(t.nextLocation.pathname,n)||t.nextLocation.pathname;return Gl(r.pathname,l)!=null||Gl(r.pathname,o)!=null}var wa=B0();/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wS=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),xS=i=>i.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()),Sm=i=>{const e=xS(i);return e.charAt(0).toUpperCase()+e.slice(1)},ny=(...i)=>i.filter((e,t,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===t).join(" ").trim(),_S=i=>{for(const e in i)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var SS={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AS=k.forwardRef(({color:i="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:n,className:r="",children:o,iconNode:l,...c},d)=>k.createElement("svg",{ref:d,...SS,width:e,height:e,stroke:i,strokeWidth:n?Number(t)*24/Number(e):t,className:ny("lucide",r),...!o&&!_S(c)&&{"aria-hidden":"true"},...c},[...l.map(([f,p])=>k.createElement(f,p)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=(i,e)=>{const t=k.forwardRef(({className:n,...r},o)=>k.createElement(AS,{ref:o,iconNode:e,className:ny(`lucide-${wS(Sm(i))}`,`lucide-${i}`,n),...r}));return t.displayName=Sm(i),t};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CS=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],ES=Be("book",CS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kS=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],Am=Be("bot",kS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RS=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],TS=Be("calendar",RS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PS=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],NS=Be("check",PS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IS=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],MS=Be("chevron-down",IS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],DS=Be("circle-alert",LS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],FS=Be("circle-question-mark",OS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jS=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],$S=Be("copy",jS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zS=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],sy=Be("download",zS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BS=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],HS=Be("external-link",BS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const US=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],WS=Be("file-text",US);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VS=[["path",{d:"M5 3v14",key:"9nsxs2"}],["path",{d:"M12 3v8",key:"1h2ygw"}],["path",{d:"M19 3v18",key:"1sk56x"}]],GS=Be("kanban",VS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qS=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],XS=Be("layout-dashboard",qS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KS=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}],["path",{d:"M14 4h7",key:"3xa0d5"}],["path",{d:"M14 9h7",key:"1icrd9"}],["path",{d:"M14 15h7",key:"1mj8o2"}],["path",{d:"M14 20h7",key:"11slyb"}]],YS=Be("layout-list",KS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QS=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],JS=Be("message-circle",QS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZS=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],jh=Be("message-square",ZS);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eA=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],tA=Be("phone",eA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nA=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Yd=Be("plus",nA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sA=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Ed=Be("refresh-cw",sA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rA=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],ry=Be("save",rA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iA=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Qd=Be("search",iA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aA=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],oA=Be("send",aA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lA=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],iy=Be("settings",lA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cA=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],ay=Be("star",cA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uA=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],oy=Be("trash-2",uA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dA=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Jd=Be("upload",dA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hA=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Cm=Be("user",hA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fA=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],hc=Be("x",fA),Em=i=>{let e;const t=new Set,n=(f,p)=>{const g=typeof f=="function"?f(e):f;if(!Object.is(g,e)){const y=e;e=p??(typeof g!="object"||g===null)?g:Object.assign({},e,g),t.forEach(v=>v(e,y))}},r=()=>e,c={setState:n,getState:r,getInitialState:()=>d,subscribe:f=>(t.add(f),()=>t.delete(f))},d=e=i(n,r,c);return c},pA=(i=>i?Em(i):Em),gA=i=>i;function mA(i,e=gA){const t=He.useSyncExternalStore(i.subscribe,He.useCallback(()=>e(i.getState()),[i,e]),He.useCallback(()=>e(i.getInitialState()),[i,e]));return He.useDebugValue(t),t}const km=i=>{const e=pA(i),t=n=>mA(e,n);return Object.assign(t,e),t},yA=(i=>i?km(i):km),Zd=(i,e)=>e.some(t=>i instanceof t);let Rm,Tm;function vA(){return Rm||(Rm=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function bA(){return Tm||(Tm=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const eh=new WeakMap,kd=new WeakMap,fc=new WeakMap;function wA(i){const e=new Promise((t,n)=>{const r=()=>{i.removeEventListener("success",o),i.removeEventListener("error",l)},o=()=>{t(Pr(i.result)),r()},l=()=>{n(i.error),r()};i.addEventListener("success",o),i.addEventListener("error",l)});return fc.set(e,i),e}function xA(i){if(eh.has(i))return;const e=new Promise((t,n)=>{const r=()=>{i.removeEventListener("complete",o),i.removeEventListener("error",l),i.removeEventListener("abort",l)},o=()=>{t(),r()},l=()=>{n(i.error||new DOMException("AbortError","AbortError")),r()};i.addEventListener("complete",o),i.addEventListener("error",l),i.addEventListener("abort",l)});eh.set(i,e)}let th={get(i,e,t){if(i instanceof IDBTransaction){if(e==="done")return eh.get(i);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Pr(i[e])},set(i,e,t){return i[e]=t,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function ly(i){th=i(th)}function _A(i){return bA().includes(i)?function(...e){return i.apply(nh(this),e),Pr(this.request)}:function(...e){return Pr(i.apply(nh(this),e))}}function SA(i){return typeof i=="function"?_A(i):(i instanceof IDBTransaction&&xA(i),Zd(i,vA())?new Proxy(i,th):i)}function Pr(i){if(i instanceof IDBRequest)return wA(i);if(kd.has(i))return kd.get(i);const e=SA(i);return e!==i&&(kd.set(i,e),fc.set(e,i)),e}const nh=i=>fc.get(i);function AA(i,e,{blocked:t,upgrade:n,blocking:r,terminated:o}={}){const l=indexedDB.open(i,e),c=Pr(l);return n&&l.addEventListener("upgradeneeded",d=>{n(Pr(l.result),d.oldVersion,d.newVersion,Pr(l.transaction),d)}),t&&l.addEventListener("blocked",d=>t(d.oldVersion,d.newVersion,d)),c.then(d=>{o&&d.addEventListener("close",()=>o()),r&&d.addEventListener("versionchange",f=>r(f.oldVersion,f.newVersion,f))}).catch(()=>{}),c}const CA=["get","getKey","getAll","getAllKeys","count"],EA=["put","add","delete","clear"],Rd=new Map;function Pm(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(Rd.get(e))return Rd.get(e);const t=e.replace(/FromIndex$/,""),n=e!==t,r=EA.includes(t);if(!(t in(n?IDBIndex:IDBObjectStore).prototype)||!(r||CA.includes(t)))return;const o=async function(l,...c){const d=this.transaction(l,r?"readwrite":"readonly");let f=d.store;return n&&(f=f.index(c.shift())),(await Promise.all([f[t](...c),r&&d.done]))[0]};return Rd.set(e,o),o}ly(i=>({...i,get:(e,t,n)=>Pm(e,t)||i.get(e,t,n),has:(e,t)=>!!Pm(e,t)||i.has(e,t)}));const kA=["continue","continuePrimaryKey","advance"],Nm={},sh=new WeakMap,cy=new WeakMap,RA={get(i,e){if(!kA.includes(e))return i[e];let t=Nm[e];return t||(t=Nm[e]=function(...n){sh.set(this,cy.get(this)[e](...n))}),t}};async function*TA(...i){let e=this;if(e instanceof IDBCursor||(e=await e.openCursor(...i)),!e)return;e=e;const t=new Proxy(e,RA);for(cy.set(t,e),fc.set(t,nh(e));e;)yield t,e=await(sh.get(t)||e.continue()),sh.delete(t)}function Im(i,e){return e===Symbol.asyncIterator&&Zd(i,[IDBIndex,IDBObjectStore,IDBCursor])||e==="iterate"&&Zd(i,[IDBIndex,IDBObjectStore])}ly(i=>({...i,get(e,t,n){return Im(e,t)?TA:i.get(e,t,n)},has(e,t){return Im(e,t)||i.has(e,t)}}));const PA="cv-screener-db",NA=1;class IA{db;constructor(){this.db=AA(PA,NA,{upgrade(e){e.createObjectStore("searches",{keyPath:"id",autoIncrement:!0}).createIndex("by-status","status");const n=e.createObjectStore("candidates",{keyPath:"id"});n.createIndex("by-search","searchId"),n.createIndex("by-status","status"),n.createIndex("by-email","email"),e.createObjectStore("settings")}})}async getAllSearches(){return(await this.db).getAll("searches")}async getSearch(e){return(await this.db).get("searches",e)}async saveSearch(e){return await(await this.db).put("searches",e)}async deleteSearch(e){return(await this.db).delete("searches",e)}async getCandidatesBySearch(e){return(await this.db).getAllFromIndex("candidates","by-search",e)}async saveCandidate(e){return(await this.db).put("candidates",e)}async deleteCandidate(e){return(await this.db).delete("candidates",e)}async getSettings(){return(await this.db).get("settings","app-settings")}async saveSettings(e){return(await this.db).put("settings",e,"app-settings")}}const En=new IA,Mm={apiKey:"",selectedModel:"gpt-4o-mini",theme:"light"},In=yA((i,e)=>({searches:[],currentSearch:null,candidates:[],settings:Mm,isLoading:!1,error:null,init:async()=>{i({isLoading:!0});try{const t=await En.getSettings(),n=await En.getAllSearches();i({settings:t||Mm,searches:n||[]});const r=localStorage.getItem("lastSearchId");r&&await e().selectSearch(parseInt(r))}catch(t){console.error("Failed to initialize app:",t),i({error:"Failed to load application data"})}finally{i({isLoading:!1})}},setSettings:async t=>{await En.saveSettings(t),i({settings:t})},loadSearches:async()=>{const t=await En.getAllSearches();i({searches:t})},createSearch:async t=>{const n=new Date().toISOString(),o=e().settings.defaultEvaluationCriteria||{relevance:{name:"Relevancia del Perfil al Puesto",desc:"Compara el contenido del CV con el contexto del puesto de trabajo. Considera habilidades, experiencia y ajuste general."},education:{name:"Nivel Educativo",desc:"Evala el prestigio de las instituciones educativas. El ttulo principal cuenta el 80% del valor, certificaciones adicionales, programas de intercambio, etc. cuentan el 20%."},previousJobs:{name:"Trabajos Previos",desc:"Evala el prestigio de empleadores anteriores y del nivel del ltimo puesto ocupado."},proactivity:{name:"Proactividad",desc:"Evala actividades extracurriculares, certificaciones, aprendizaje continuo e iniciativa mostrada ms all de los requisitos bsicos del trabajo."}},l={...t,evaluationCriteria:o,status:"active",createdAt:n,updatedAt:n},c=await En.saveSearch(l);return l.id=c,i(d=>({searches:[...d.searches,l],currentSearch:l,candidates:[]})),localStorage.setItem("lastSearchId",c.toString()),c},selectSearch:async t=>{i({isLoading:!0});try{const n=await En.getSearch(t);if(n){const r=await En.getCandidatesBySearch(t);i({currentSearch:n,candidates:r}),localStorage.setItem("lastSearchId",t.toString())}}catch(n){console.error("Failed to select search:",n),i({error:"Failed to load search"})}finally{i({isLoading:!1})}},updateSearch:async t=>{const n={...t,updatedAt:new Date().toISOString()};await En.saveSearch(n),i(r=>({searches:r.searches.map(o=>o.id===t.id?n:o),currentSearch:r.currentSearch?.id===t.id?n:r.currentSearch}))},addCandidate:async t=>{await En.saveCandidate(t),i(n=>({candidates:[...n.candidates,t]}))},updateCandidate:async t=>{const n={...t,updatedAt:new Date().toISOString()};await En.saveCandidate(n),i(r=>({candidates:r.candidates.map(o=>o.id===t.id?n:o)}))},deleteCandidate:async t=>{await En.deleteCandidate(t),i(n=>({candidates:n.candidates.filter(r=>r.id!==t)}))},moveCandidate:async(t,n)=>{const r=e().candidates.find(o=>o.id===t);if(r){const o={...r,status:n,updatedAt:new Date().toISOString()};await e().updateCandidate(o)}},toggleFavorite:async t=>{const r=e().candidates.find(o=>o.id===t);if(r){const o={...r,isFavorite:!r.isFavorite,updatedAt:new Date().toISOString()};await En.saveCandidate(o),i(l=>({candidates:l.candidates.map(c=>c.id===t?o:c)}))}}}));function MA({isOpen:i,onClose:e}){return i?w.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:w.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl w-full max-w-2xl max-h-[90vh] overflow-hidden flex flex-col animate-in fade-in zoom-in duration-200",children:[w.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 rounded-lg",children:w.jsx(ES,{size:24})}),w.jsxs("div",{children:[w.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Gua de Uso"}),w.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Aprende a sacar el mximo provecho de CV Screener"})]})]}),w.jsx("button",{onClick:e,className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:w.jsx(hc,{size:20})})]}),w.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-8",children:[w.jsxs("section",{children:[w.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[w.jsx("span",{className:"flex items-center justify-center w-6 h-6 rounded-full bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 text-xs",children:"1"}),"Crear una Bsqueda"]}),w.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/30 rounded-xl p-4 border border-gray-100 dark:border-gray-700",children:[w.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-3",children:["En el Dashboard, haz clic en ",w.jsx("span",{className:"font-medium text-blue-600 dark:text-blue-400",children:'"Nueva Bsqueda"'}),". Debers proporcionar:"]}),w.jsxs("ul",{className:"space-y-2 text-sm text-gray-600 dark:text-gray-300 ml-4 list-disc",children:[w.jsxs("li",{children:[w.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:"Nombre del puesto:"}),' El ttulo del trabajo (ej. "Senior React Developer").']}),w.jsxs("li",{children:[w.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:"Descripcin:"})," Los requisitos y responsabilidades del puesto."]}),w.jsxs("li",{children:[w.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:"CVs:"})," Sube los archivos PDF de los candidatos."]})]})]})]}),w.jsxs("section",{children:[w.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[w.jsx("span",{className:"flex items-center justify-center w-6 h-6 rounded-full bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 text-xs",children:"2"}),"Anlisis Inteligente"]}),w.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[w.jsxs("div",{className:"p-4 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800",children:[w.jsxs("div",{className:"flex items-center gap-2 mb-2 text-blue-600 dark:text-blue-400",children:[w.jsx(Qd,{size:18}),w.jsx("span",{className:"font-medium",children:"Evaluacin Automtica"})]}),w.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"La IA analiza cada CV frente a tus criterios personalizados, asignando puntuaciones y generando resmenes."})]}),w.jsxs("div",{className:"p-4 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800",children:[w.jsxs("div",{className:"flex items-center gap-2 mb-2 text-purple-600 dark:text-purple-400",children:[w.jsx(jh,{size:18}),w.jsx("span",{className:"font-medium",children:"Chat Contextual"})]}),w.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Haz preguntas especficas sobre cualquier candidato o compara perfiles usando el chat integrado."})]})]})]}),w.jsxs("section",{children:[w.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[w.jsx("span",{className:"flex items-center justify-center w-6 h-6 rounded-full bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 text-xs",children:"3"}),"Personalizacin"]}),w.jsxs("div",{className:"flex items-start gap-4 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-xl border border-blue-100 dark:border-blue-800/30",children:[w.jsx(iy,{className:"text-blue-600 dark:text-blue-400 mt-1",size:20}),w.jsxs("div",{children:[w.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-1",children:"Configura tus Criterios"}),w.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:["En la seccin de ",w.jsx("span",{className:"font-medium",children:"Settings"}),', puedes definir exactamente qu aspectos evaluar (ej. "Experiencia en React", "Ingls Avanzado", etc.) para adaptar el anlisis a tus necesidades.']})]})]})]})]}),w.jsx("div",{className:"p-6 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50 flex justify-end",children:w.jsx("button",{onClick:e,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors",children:"Entendido"})})]})}):null}function LA(){const i=Ps(),{currentSearch:e}=In(),[t,n]=k.useState(!1);return w.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900 transition-colors",children:[w.jsxs("div",{className:"w-64 bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 flex flex-col transition-colors",children:[w.jsx("div",{className:"p-6",children:w.jsxs("h1",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400 flex items-center gap-2",children:[w.jsx("span",{className:"text-3xl",children:""})," CV Screener"]})}),w.jsxs("nav",{className:"flex-1 px-4 space-y-2",children:[w.jsxs(Er,{to:"/",className:`flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${i.pathname==="/"?"bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[w.jsx(XS,{size:20}),w.jsx("span",{className:"font-medium",children:"Dashboard"})]}),e&&w.jsxs("div",{className:"mt-8",children:[w.jsx("div",{className:"px-4 text-xs font-semibold text-gray-400 dark:text-gray-500 uppercase tracking-wider mb-2",children:"Active Search"}),w.jsxs(Er,{to:`/search/${e.id}`,className:`flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${i.pathname.startsWith("/search")?"bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[w.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"}),w.jsx("span",{className:"font-medium truncate",children:e.name})]}),w.jsxs(Er,{to:"/chat",className:`flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${i.pathname==="/chat"?"bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[w.jsx(jh,{size:20}),w.jsx("span",{className:"font-medium",children:"Chat con IA"})]})]})]}),w.jsxs("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 space-y-2",children:[w.jsxs("button",{onClick:()=>n(!0),className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700",children:[w.jsx(FS,{size:20}),w.jsx("span",{className:"font-medium",children:"Ayuda"})]}),w.jsxs(Er,{to:"/settings",className:`flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${i.pathname==="/settings"?"bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[w.jsx(iy,{size:20}),w.jsx("span",{className:"font-medium",children:"Settings"})]})]})]}),w.jsx("div",{className:"flex-1 overflow-auto",children:w.jsx($_,{})}),w.jsx(MA,{isOpen:t,onClose:()=>n(!1)})]})}const DA={relevance:{name:"Relevancia del Perfil al Puesto",desc:"Compara el contenido del CV con el contexto del puesto de trabajo. Considera habilidades, experiencia y ajuste general."},education:{name:"Nivel Educativo",desc:"Evala el prestigio de las instituciones educativas. El ttulo principal cuenta el 80% del valor, certificaciones adicionales, programas de intercambio, etc. cuentan el 20%."},previousJobs:{name:"Trabajos Previos",desc:"Evala el prestigio de empleadores anteriores y del nivel del ltimo puesto ocupado."},proactivity:{name:"Proactividad",desc:"Evala actividades extracurriculares, certificaciones, aprendizaje continuo e iniciativa mostrada ms all de los requisitos bsicos del trabajo."}};function OA({isOpen:i,onClose:e}){const t=Mh(),{createSearch:n}=In(),[r,o]=k.useState(""),[l,c]=k.useState(""),[d,f]=k.useState(""),[p,g]=k.useState(!1);if(!i)return null;const y=async v=>{if(v.preventDefault(),!(!r||!l)){g(!0);try{const x=await n({name:r,jobDescription:l,personalizedInstructions:d,evaluationCriteria:DA,status:"active"});e(),t(`/search/${x}`)}catch(x){console.error("Failed to create search:",x)}finally{g(!1)}}};return w.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:w.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[w.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-100",children:[w.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Nueva Bsqueda"}),w.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:w.jsx(hc,{size:24})})]}),w.jsxs("form",{onSubmit:y,className:"p-6 space-y-6",children:[w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre de la Bsqueda"}),w.jsx("input",{type:"text",value:r,onChange:v=>o(v.target.value),placeholder:"Ej. Frontend Developer Senior",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripcin del Puesto"}),w.jsx("textarea",{value:l,onChange:v=>c(v.target.value),placeholder:"Pega aqu la descripcin completa del puesto...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent h-40",required:!0})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Instrucciones Adicionales (Opcional)"}),w.jsx("textarea",{value:d,onChange:v=>f(v.target.value),placeholder:"Instrucciones especficas para la IA (ej. 'Dar prioridad a candidatos con experiencia en Fintech')",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent h-24"})]}),w.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[w.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg font-medium",children:"Cancelar"}),w.jsx("button",{type:"submit",disabled:p,className:"px-4 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 disabled:opacity-50",children:p?"Creando...":"Crear Bsqueda"})]})]})]})})}function FA(){const{searches:i,loadSearches:e,selectSearch:t}=In(),[n,r]=k.useState(!1),[o,l]=k.useState("");k.useEffect(()=>{e()},[e]);const c=i.filter(d=>d.name.toLowerCase().includes(o.toLowerCase()));return w.jsxs("div",{className:"p-4 md:p-8 max-w-7xl mx-auto",children:[w.jsxs("div",{className:"flex items-center justify-between mb-8",children:[w.jsxs("div",{children:[w.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Dashboard"}),w.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:"Gestiona tus procesos de seleccin"})]}),w.jsxs("button",{onClick:()=>r(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium shadow-sm",children:[w.jsx(Yd,{size:20}),"Nueva Bsqueda"]})]}),w.jsxs("div",{className:"mb-6 relative",children:[w.jsx(Qd,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),w.jsx("input",{type:"text",placeholder:"Buscar procesos...",value:o,onChange:d=>l(d.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent shadow-sm bg-white dark:bg-gray-800 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500"})]}),i.length===0?w.jsxs("div",{className:"text-center py-20 bg-white dark:bg-gray-800 rounded-2xl border border-dashed border-gray-300 dark:border-gray-700",children:[w.jsx("div",{className:"w-16 h-16 bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 rounded-full flex items-center justify-center mx-auto mb-4",children:w.jsx(Yd,{size:32})}),w.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"No hay bsquedas activas"}),w.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6 max-w-md mx-auto",children:"Comienza creando tu primera bsqueda para empezar a evaluar candidatos con IA."}),w.jsx("button",{onClick:()=>r(!0),className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium",children:"Crear Primera Bsqueda"})]}):w.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:c.map(d=>w.jsxs(Er,{to:`/search/${d.id}`,onClick:()=>t(d.id),className:"group block bg-white dark:bg-gray-800 p-6 rounded-xl border border-gray-200 dark:border-gray-700 hover:border-blue-300 dark:hover:border-blue-500 hover:shadow-md transition-all",children:[w.jsxs("div",{className:"flex justify-between items-start mb-4",children:[w.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 flex items-center justify-center group-hover:bg-blue-600 group-hover:text-white transition-colors",children:w.jsx(Qd,{size:20})}),w.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${d.status==="active"?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300"}`,children:d.status==="active"?"Activa":"Archivada"})]}),w.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",children:d.name}),w.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm line-clamp-2 mb-4 h-10",children:d.jobDescription}),w.jsx("div",{className:"flex items-center justify-between text-sm text-gray-400 dark:text-gray-500 pt-4 border-t border-gray-100 dark:border-gray-700",children:w.jsxs("span",{children:["Creada: ",new Date(d.createdAt).toLocaleDateString()]})})]},d.id))}),w.jsx(OA,{isOpen:n,onClose:()=>r(!1)})]})}var Ia={};Ia.d=(i,e)=>{for(var t in e)Ia.o(e,t)&&!Ia.o(i,t)&&Object.defineProperty(i,t,{enumerable:!0,get:e[t]})};Ia.o=(i,e)=>Object.prototype.hasOwnProperty.call(i,e);var Ce=globalThis.pdfjsLib={};Ia.d(Ce,{AbortException:()=>ir,AnnotationEditorLayer:()=>ks,AnnotationEditorParamsType:()=>Oe,AnnotationEditorType:()=>Pe,AnnotationEditorUIManager:()=>ar,AnnotationLayer:()=>IC,AnnotationMode:()=>sr,ColorPicker:()=>Rn,DOMSVGFactory:()=>Yh,DrawLayer:()=>Bt,FeatureTest:()=>Wt,GlobalWorkerOptions:()=>La,ImageKind:()=>Dl,InvalidPDFException:()=>ih,MissingPDFException:()=>Ha,OPS:()=>Gn,OutputScale:()=>ah,PDFDataRangeTransport:()=>Ry,PDFDateString:()=>hy,PDFWorker:()=>wt,PasswordResponses:()=>BA,PermissionFlag:()=>zA,PixelsPerInch:()=>vi,RenderingCancelledException:()=>Bh,TextLayer:()=>Ut,TouchManager:()=>wc,UnexpectedResponseException:()=>ql,Util:()=>de,VerbosityLevel:()=>pc,XfaLayer:()=>Py,build:()=>hC,createValidAbsoluteUrl:()=>VA,fetchData:()=>vc,getDocument:()=>sC,getFilenameFromUrl:()=>e1,getPdfFilenameFromUrl:()=>t1,getXfaPageViewport:()=>n1,isDataScheme:()=>bc,isPdfFile:()=>Hh,noContextMenu:()=>Xn,normalizeUnicode:()=>QA,setLayerDimensions:()=>Nr,shadow:()=>Me,stopEvent:()=>yn,version:()=>dC});const Ft=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),uy=[1,0,0,1,0,0],rh=[.001,0,0,.001,0,0],jA=1e7,Td=1.35,mn={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},sr={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},$A="pdfjs_internal_editor_",Pe={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},Oe={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},zA={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Dt={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Dl={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},ht={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,WIDGET:20},ga={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},pc={ERRORS:0,WARNINGS:1,INFOS:5},Gn={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},BA={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let gc=pc.WARNINGS;function HA(i){Number.isInteger(i)&&(gc=i)}function UA(){return gc}function mc(i){gc>=pc.INFOS&&console.log(`Info: ${i}`)}function Ne(i){gc>=pc.WARNINGS&&console.log(`Warning: ${i}`)}function Ue(i){throw new Error(i)}function ot(i,e){i||Ue(e)}function WA(i){switch(i?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function VA(i,e=null,t=null){if(!i)return null;try{if(t&&typeof i=="string"&&(t.addDefaultProtocol&&i.startsWith("www.")&&i.match(/\./g)?.length>=2&&(i=`http://${i}`),t.tryConvertEncoding))try{i=YA(i)}catch{}const n=e?new URL(i,e):new URL(i);if(WA(n))return n}catch{}return null}function Me(i,e,t,n=!1){return Object.defineProperty(i,e,{value:t,enumerable:!n,configurable:!0,writable:!1}),t}const lr=(function(){function e(t,n){this.message=t,this.name=n}return e.prototype=new Error,e.constructor=e,e})();class Lm extends lr{constructor(e,t){super(e,"PasswordException"),this.code=t}}class Pd extends lr{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class ih extends lr{constructor(e){super(e,"InvalidPDFException")}}class Ha extends lr{constructor(e){super(e,"MissingPDFException")}}class ql extends lr{constructor(e,t){super(e,"UnexpectedResponseException"),this.status=t}}class GA extends lr{constructor(e){super(e,"FormatError")}}class ir extends lr{constructor(e){super(e,"AbortException")}}function dy(i){(typeof i!="object"||i?.length===void 0)&&Ue("Invalid argument for bytesToString");const e=i.length,t=8192;if(e<t)return String.fromCharCode.apply(null,i);const n=[];for(let r=0;r<e;r+=t){const o=Math.min(r+t,e),l=i.subarray(r,o);n.push(String.fromCharCode.apply(null,l))}return n.join("")}function yc(i){typeof i!="string"&&Ue("Invalid argument for stringToBytes");const e=i.length,t=new Uint8Array(e);for(let n=0;n<e;++n)t[n]=i.charCodeAt(n)&255;return t}function qA(i){return String.fromCharCode(i>>24&255,i>>16&255,i>>8&255,i&255)}function $h(i){const e=Object.create(null);for(const[t,n]of i)e[t]=n;return e}function XA(){const i=new Uint8Array(4);return i[0]=1,new Uint32Array(i.buffer,0,1)[0]===1}function KA(){try{return new Function(""),!0}catch{return!1}}class Wt{static get isLittleEndian(){return Me(this,"isLittleEndian",XA())}static get isEvalSupported(){return Me(this,"isEvalSupported",KA())}static get isOffscreenCanvasSupported(){return Me(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Me(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){return typeof navigator<"u"&&typeof navigator?.platform=="string"?Me(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:typeof navigator?.userAgent=="string"&&navigator.userAgent.includes("Firefox")}):Me(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){return Me(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const Nd=Array.from(Array(256).keys(),i=>i.toString(16).padStart(2,"0"));class de{static makeHexColor(e,t,n){return`#${Nd[e]}${Nd[t]}${Nd[n]}`}static scaleMinMax(e,t){let n;e[0]?(e[0]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[3],t[3]*=e[3]):(n=t[0],t[0]=t[1],t[1]=n,n=t[2],t[2]=t[3],t[3]=n,e[1]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){const n=e[0]*t[0]+e[1]*t[2]+t[4],r=e[0]*t[1]+e[1]*t[3]+t[5];return[n,r]}static applyInverseTransform(e,t){const n=t[0]*t[3]-t[1]*t[2],r=(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/n,o=(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/n;return[r,o]}static getAxialAlignedBoundingBox(e,t){const n=this.applyTransform(e,t),r=this.applyTransform(e.slice(2,4),t),o=this.applyTransform([e[0],e[3]],t),l=this.applyTransform([e[2],e[1]],t);return[Math.min(n[0],r[0],o[0],l[0]),Math.min(n[1],r[1],o[1],l[1]),Math.max(n[0],r[0],o[0],l[0]),Math.max(n[1],r[1],o[1],l[1])]}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e){const t=[e[0],e[2],e[1],e[3]],n=e[0]*t[0]+e[1]*t[2],r=e[0]*t[1]+e[1]*t[3],o=e[2]*t[0]+e[3]*t[2],l=e[2]*t[1]+e[3]*t[3],c=(n+l)/2,d=Math.sqrt((n+l)**2-4*(n*l-o*r))/2,f=c+d||1,p=c-d||1;return[Math.sqrt(f),Math.sqrt(p)]}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const n=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),r=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(n>r)return null;const o=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),l=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return o>l?null:[n,o,r,l]}static#e(e,t,n,r,o,l,c,d,f,p){if(f<=0||f>=1)return;const g=1-f,y=f*f,v=y*f,x=g*(g*(g*e+3*f*t)+3*y*n)+v*r,_=g*(g*(g*o+3*f*l)+3*y*c)+v*d;p[0]=Math.min(p[0],x),p[1]=Math.min(p[1],_),p[2]=Math.max(p[2],x),p[3]=Math.max(p[3],_)}static#t(e,t,n,r,o,l,c,d,f,p,g,y){if(Math.abs(f)<1e-12){Math.abs(p)>=1e-12&&this.#e(e,t,n,r,o,l,c,d,-g/p,y);return}const v=p**2-4*g*f;if(v<0)return;const x=Math.sqrt(v),_=2*f;this.#e(e,t,n,r,o,l,c,d,(-p+x)/_,y),this.#e(e,t,n,r,o,l,c,d,(-p-x)/_,y)}static bezierBoundingBox(e,t,n,r,o,l,c,d,f){return f?(f[0]=Math.min(f[0],e,c),f[1]=Math.min(f[1],t,d),f[2]=Math.max(f[2],e,c),f[3]=Math.max(f[3],t,d)):f=[Math.min(e,c),Math.min(t,d),Math.max(e,c),Math.max(t,d)],this.#t(e,n,o,c,t,r,l,d,3*(-e+3*(n-o)+c),6*(e-2*n+o),3*(n-e),f),this.#t(e,n,o,c,t,r,l,d,3*(-t+3*(r-l)+d),6*(t-2*r+l),3*(r-t),f),f}}function YA(i){return decodeURIComponent(escape(i))}let Id=null,Dm=null;function QA(i){return Id||(Id=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Dm=new Map([["","t"]])),i.replaceAll(Id,(e,t,n)=>t?t.normalize("NFKC"):Dm.get(n))}function JA(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const i=new Uint8Array(32);return crypto.getRandomValues(i),dy(i)}const zh="pdfjs_internal_id_";function ZA(i){return Uint8Array.prototype.toBase64?i.toBase64():btoa(dy(i))}typeof Promise.try!="function"&&(Promise.try=function(i,...e){return new Promise(t=>{t(i(...e))})});const Cs="http://www.w3.org/2000/svg";class vi{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function vc(i,e="text"){if(xa(i,document.baseURI)){const t=await fetch(i);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,n)=>{const r=new XMLHttpRequest;r.open("GET",i,!0),r.responseType=e,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(r.response);return}t(r.responseText);return}n(new Error(r.statusText))}},r.send(null)})}class Ka{constructor({viewBox:e,userUnit:t,scale:n,rotation:r,offsetX:o=0,offsetY:l=0,dontFlip:c=!1}){this.viewBox=e,this.userUnit=t,this.scale=n,this.rotation=r,this.offsetX=o,this.offsetY=l,n*=t;const d=(e[2]+e[0])/2,f=(e[3]+e[1])/2;let p,g,y,v;switch(r%=360,r<0&&(r+=360),r){case 180:p=-1,g=0,y=0,v=1;break;case 90:p=0,g=1,y=1,v=0;break;case 270:p=0,g=-1,y=-1,v=0;break;case 0:p=1,g=0,y=0,v=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}c&&(y=-y,v=-v);let x,_,A,C;p===0?(x=Math.abs(f-e[1])*n+o,_=Math.abs(d-e[0])*n+l,A=(e[3]-e[1])*n,C=(e[2]-e[0])*n):(x=Math.abs(d-e[0])*n+o,_=Math.abs(f-e[1])*n+l,A=(e[2]-e[0])*n,C=(e[3]-e[1])*n),this.transform=[p*n,g*n,y*n,v*n,x-p*n*d-y*n*f,_-g*n*d-v*n*f],this.width=A,this.height=C}get rawDims(){const{userUnit:e,viewBox:t}=this,n=t.map(r=>r*e);return Me(this,"rawDims",{pageWidth:n[2]-n[0],pageHeight:n[3]-n[1],pageX:n[0],pageY:n[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:n=this.offsetX,offsetY:r=this.offsetY,dontFlip:o=!1}={}){return new Ka({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:r,dontFlip:o})}convertToViewportPoint(e,t){return de.applyTransform([e,t],this.transform)}convertToViewportRectangle(e){const t=de.applyTransform([e[0],e[1]],this.transform),n=de.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],n[0],n[1]]}convertToPdfPoint(e,t){return de.applyInverseTransform([e,t],this.transform)}}class Bh extends lr{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function bc(i){const e=i.length;let t=0;for(;t<e&&i[t].trim()==="";)t++;return i.substring(t,t+5).toLowerCase()==="data:"}function Hh(i){return typeof i=="string"&&/\.pdf$/i.test(i)}function e1(i){return[i]=i.split(/[#?]/,1),i.substring(i.lastIndexOf("/")+1)}function t1(i,e="document.pdf"){if(typeof i!="string")return e;if(bc(i))return Ne('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const t=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,n=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,r=t.exec(i);let o=n.exec(r[1])||n.exec(r[2])||n.exec(r[3]);if(o&&(o=o[0],o.includes("%")))try{o=n.exec(decodeURIComponent(o))[0]}catch{}return o||e}class Om{started=Object.create(null);times=[];time(e){e in this.started&&Ne(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||Ne(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:n}of this.times)t=Math.max(n.length,t);for(const{name:n,start:r,end:o}of this.times)e.push(`${n.padEnd(t)} ${o-r}ms
`);return e.join("")}}function xa(i,e){try{const{protocol:t}=e?new URL(i,e):new URL(i);return t==="http:"||t==="https:"}catch{return!1}}function Xn(i){i.preventDefault()}function yn(i){i.preventDefault(),i.stopPropagation()}class hy{static#e;static toDateObject(e){if(!e||typeof e!="string")return null;this.#e||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const t=this.#e.exec(e);if(!t)return null;const n=parseInt(t[1],10);let r=parseInt(t[2],10);r=r>=1&&r<=12?r-1:0;let o=parseInt(t[3],10);o=o>=1&&o<=31?o:1;let l=parseInt(t[4],10);l=l>=0&&l<=23?l:0;let c=parseInt(t[5],10);c=c>=0&&c<=59?c:0;let d=parseInt(t[6],10);d=d>=0&&d<=59?d:0;const f=t[7]||"Z";let p=parseInt(t[8],10);p=p>=0&&p<=23?p:0;let g=parseInt(t[9],10)||0;return g=g>=0&&g<=59?g:0,f==="-"?(l+=p,c+=g):f==="+"&&(l-=p,c-=g),new Date(Date.UTC(n,r,o,l,c,d))}}function n1(i,{scale:e=1,rotation:t=0}){const{width:n,height:r}=i.attributes.style,o=[0,0,parseInt(n),parseInt(r)];return new Ka({viewBox:o,userUnit:1,scale:e,rotation:t})}function Uh(i){if(i.startsWith("#")){const e=parseInt(i.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return i.startsWith("rgb(")?i.slice(4,-1).split(",").map(e=>parseInt(e)):i.startsWith("rgba(")?i.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(Ne(`Not a valid color format: "${i}"`),[0,0,0])}function s1(i){const e=document.createElement("span");e.style.visibility="hidden",document.body.append(e);for(const t of i.keys()){e.style.color=t;const n=window.getComputedStyle(e).color;i.set(t,Uh(n))}e.remove()}function Xe(i){const{a:e,b:t,c:n,d:r,e:o,f:l}=i.getTransform();return[e,t,n,r,o,l]}function as(i){const{a:e,b:t,c:n,d:r,e:o,f:l}=i.getTransform().invertSelf();return[e,t,n,r,o,l]}function Nr(i,e,t=!1,n=!0){if(e instanceof Ka){const{pageWidth:r,pageHeight:o}=e.rawDims,{style:l}=i,c=Wt.isCSSRoundSupported,d=`var(--scale-factor) * ${r}px`,f=`var(--scale-factor) * ${o}px`,p=c?`round(down, ${d}, var(--scale-round-x, 1px))`:`calc(${d})`,g=c?`round(down, ${f}, var(--scale-round-y, 1px))`:`calc(${f})`;!t||e.rotation%180===0?(l.width=p,l.height=g):(l.width=g,l.height=p)}n&&i.setAttribute("data-main-rotation",e.rotation)}class ah{constructor(){const e=window.devicePixelRatio||1;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}}class Ma{#e=null;#t=null;#n;#s=null;#i=null;static#r=null;constructor(e){this.#n=e,Ma.#r||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"})}render(){const e=this.#e=document.createElement("div");e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=this.#n._uiManager._signal;e.addEventListener("contextmenu",Xn,{signal:t}),e.addEventListener("pointerdown",Ma.#l,{signal:t});const n=this.#s=document.createElement("div");n.className="buttons",e.append(n);const r=this.#n.toolbarPosition;if(r){const{style:o}=e,l=this.#n._uiManager.direction==="ltr"?1-r[0]:r[0];o.insetInlineEnd=`${100*l}%`,o.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return this.#h(),e}get div(){return this.#e}static#l(e){e.stopPropagation()}#o(e){this.#n._focusEventsAllowed=!1,yn(e)}#u(e){this.#n._focusEventsAllowed=!0,yn(e)}#c(e){const t=this.#n._uiManager._signal;e.addEventListener("focusin",this.#o.bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",this.#u.bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",Xn,{signal:t})}hide(){this.#e.classList.add("hidden"),this.#t?.hideDropdown()}show(){this.#e.classList.remove("hidden"),this.#i?.shown()}#h(){const{editorType:e,_uiManager:t}=this.#n,n=document.createElement("button");n.className="delete",n.tabIndex=0,n.setAttribute("data-l10n-id",Ma.#r[e]),this.#c(n),n.addEventListener("click",r=>{t.delete()},{signal:t._signal}),this.#s.append(n)}get#d(){const e=document.createElement("div");return e.className="divider",e}async addAltText(e){const t=await e.render();this.#c(t),this.#s.prepend(t,this.#d),this.#i=e}addColorPicker(e){this.#t=e;const t=e.renderButton();this.#c(t),this.#s.prepend(t,this.#d)}remove(){this.#e.remove(),this.#t?.destroy(),this.#t=null}}class r1{#e=null;#t=null;#n;constructor(e){this.#n=e}#s(){const e=this.#t=document.createElement("div");e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",Xn,{signal:this.#n._signal});const t=this.#e=document.createElement("div");return t.className="buttons",e.append(t),this.#r(),e}#i(e,t){let n=0,r=0;for(const o of e){const l=o.y+o.height;if(l<n)continue;const c=o.x+(t?o.width:0);if(l>n){r=c,n=l;continue}t?c>r&&(r=c):c<r&&(r=c)}return[t?1-r:r,n]}show(e,t,n){const[r,o]=this.#i(t,n),{style:l}=this.#t||=this.#s();e.append(this.#t),l.insetInlineEnd=`${100*r}%`,l.top=`calc(${100*o}% + var(--editor-toolbar-vert-offset))`}hide(){this.#t.remove()}#r(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const n=this.#n._signal;e.addEventListener("contextmenu",Xn,{signal:n}),e.addEventListener("click",()=>{this.#n.highlightSelection("floating_button")},{signal:n}),this.#e.append(e)}}function Xl(i,e,t){for(const n of t)e.addEventListener(n,i[n].bind(i))}class i1{#e=0;get id(){return`${$A}${this.#e++}`}}class Wh{#e=JA();#t=0;#n=null;static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),r=new Image;r.src=e;const o=r.decode().then(()=>(n.drawImage(r,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return Me(this,"_isSVGFittingCanvas",o)}async#s(e,t){this.#n||=new Map;let n=this.#n.get(e);if(n===null)return null;if(n?.bitmap)return n.refCounter+=1,n;try{n||={bitmap:null,id:`image_${this.#e}_${this.#t++}`,refCounter:0,isSvg:!1};let r;if(typeof t=="string"?(n.url=t,r=await vc(t,"blob")):t instanceof File?r=n.file=t:t instanceof Blob&&(r=t),r.type==="image/svg+xml"){const o=Wh._isSVGFittingCanvas,l=new FileReader,c=new Image,d=new Promise((f,p)=>{c.onload=()=>{n.bitmap=c,n.isSvg=!0,f()},l.onload=async()=>{const g=n.svgUrl=l.result;c.src=await o?`${g}#svgView(preserveAspectRatio(none))`:g},c.onerror=l.onerror=p});l.readAsDataURL(r),await d}else n.bitmap=await createImageBitmap(r);n.refCounter=1}catch(r){Ne(r),n=null}return this.#n.set(e,n),n&&this.#n.set(n.id,n),n}async getFromFile(e){const{lastModified:t,name:n,size:r,type:o}=e;return this.#s(`${t}_${n}_${r}_${o}`,e)}async getFromUrl(e){return this.#s(e,e)}async getFromBlob(e,t){const n=await t;return this.#s(e,n)}async getFromId(e){this.#n||=new Map;const t=this.#n.get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:n}=t;return delete t.blobPromise,this.getFromBlob(t.id,n)}return this.getFromUrl(t.url)}getFromCanvas(e,t){this.#n||=new Map;let n=this.#n.get(e);if(n?.bitmap)return n.refCounter+=1,n;const r=new OffscreenCanvas(t.width,t.height);return r.getContext("2d").drawImage(t,0,0),n={bitmap:r.transferToImageBitmap(),id:`image_${this.#e}_${this.#t++}`,refCounter:1,isSvg:!1},this.#n.set(e,n),this.#n.set(n.id,n),n}getSvgUrl(e){const t=this.#n.get(e);return t?.isSvg?t.svgUrl:null}deleteId(e){this.#n||=new Map;const t=this.#n.get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:n}=t;if(!t.url&&!t.file){const r=new OffscreenCanvas(n.width,n.height);r.getContext("bitmaprenderer").transferFromImageBitmap(n),t.blobPromise=r.convertToBlob()}n.close?.(),t.bitmap=null}isValidId(e){return e.startsWith(`image_${this.#e}_`)}}class a1{#e=[];#t=!1;#n;#s=-1;constructor(e=128){this.#n=e}add({cmd:e,undo:t,post:n,mustExec:r,type:o=NaN,overwriteIfSameType:l=!1,keepUndo:c=!1}){if(r&&e(),this.#t)return;const d={cmd:e,undo:t,post:n,type:o};if(this.#s===-1){this.#e.length>0&&(this.#e.length=0),this.#s=0,this.#e.push(d);return}if(l&&this.#e[this.#s].type===o){c&&(d.undo=this.#e[this.#s].undo),this.#e[this.#s]=d;return}const f=this.#s+1;f===this.#n?this.#e.splice(0,1):(this.#s=f,f<this.#e.length&&this.#e.splice(f)),this.#e.push(d)}undo(){if(this.#s===-1)return;this.#t=!0;const{undo:e,post:t}=this.#e[this.#s];e(),t?.(),this.#t=!1,this.#s-=1}redo(){if(this.#s<this.#e.length-1){this.#s+=1,this.#t=!0;const{cmd:e,post:t}=this.#e[this.#s];e(),t?.(),this.#t=!1}}hasSomethingToUndo(){return this.#s!==-1}hasSomethingToRedo(){return this.#s<this.#e.length-1}cleanType(e){if(this.#s!==-1){for(let t=this.#s;t>=0;t--)if(this.#e[t].type!==e){this.#e.splice(t+1,this.#s-t),this.#s=t;return}this.#e.length=0,this.#s=-1}}destroy(){this.#e=null}}class Ya{constructor(e){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=Wt.platform;for(const[n,r,o={}]of e)for(const l of n){const c=l.startsWith("mac+");t&&c?(this.callbacks.set(l.slice(4),{callback:r,options:o}),this.allKeys.add(l.split("+").at(-1))):!t&&!c&&(this.callbacks.set(l,{callback:r,options:o}),this.allKeys.add(l.split("+").at(-1)))}}#e(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t}exec(e,t){if(!this.allKeys.has(t.key))return;const n=this.callbacks.get(this.#e(t));if(!n)return;const{callback:r,options:{bubbles:o=!1,args:l=[],checker:c=null}}=n;c&&!c(e,t)||(r.bind(e,...l,t)(),o||yn(t))}}class Vh{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return s1(e),Me(this,"_colors",e)}convert(e){const t=Uh(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[n,r]of this._colors)if(r.every((o,l)=>o===t[l]))return Vh._colorsMapping.get(n);return t}getHexCode(e){const t=this._colors.get(e);return t?de.makeHexColor(...t):e}}class ar{#e=new AbortController;#t=null;#n=new Map;#s=new Map;#i=null;#r=null;#l=null;#o=new a1;#u=null;#c=null;#h=0;#d=new Set;#f=null;#a=null;#p=new Set;_editorUndoBar=null;#m=!1;#g=!1;#y=!1;#w=null;#v=null;#x=null;#S=null;#C=!1;#k=null;#T=new i1;#_=!1;#R=!1;#E=null;#N=null;#L=null;#O=null;#A=Pe.NONE;#b=new Set;#M=null;#B=null;#H=null;#U={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#F=[0,0];#D=null;#j=null;#W=null;#I=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const e=ar.prototype,t=l=>l.#j.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&l.hasSomethingToControl(),n=(l,{target:c})=>{if(c instanceof HTMLInputElement){const{type:d}=c;return d!=="text"&&d!=="number"}return!0},r=this.TRANSLATE_SMALL,o=this.TRANSLATE_BIG;return Me(this,"_keyboardManager",new Ya([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],e.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:n}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(l,{target:c})=>!(c instanceof HTMLButtonElement)&&l.#j.contains(c)&&!l.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(l,{target:c})=>!(c instanceof HTMLButtonElement)&&l.#j.contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-o,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[o,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-o],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,o],checker:t}]]))}constructor(e,t,n,r,o,l,c,d,f,p,g,y,v){const x=this._signal=this.#e.signal;this.#j=e,this.#W=t,this.#i=n,this._eventBus=r,r._on("editingaction",this.onEditingAction.bind(this),{signal:x}),r._on("pagechanging",this.onPageChanging.bind(this),{signal:x}),r._on("scalechanging",this.onScaleChanging.bind(this),{signal:x}),r._on("rotationchanging",this.onRotationChanging.bind(this),{signal:x}),r._on("setpreference",this.onSetPreference.bind(this),{signal:x}),r._on("switchannotationeditorparams",_=>this.updateParams(_.type,_.value),{signal:x}),this.#te(),this.#ie(),this.#X(),this.#r=o.annotationStorage,this.#w=o.filterFactory,this.#B=l,this.#S=c||null,this.#m=d,this.#g=f,this.#y=p,this.#O=g||null,this.viewParameters={realScale:vi.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=y||null,this._supportsPinchToZoom=v!==!1}destroy(){this.#I?.resolve(),this.#I=null,this.#e?.abort(),this.#e=null,this._signal=null;for(const e of this.#s.values())e.destroy();this.#s.clear(),this.#n.clear(),this.#p.clear(),this.#t=null,this.#b.clear(),this.#o.destroy(),this.#i?.destroy(),this.#k?.hide(),this.#k=null,this.#v&&(clearTimeout(this.#v),this.#v=null),this.#D&&(clearTimeout(this.#D),this.#D=null),this._editorUndoBar?.destroy()}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return this.#O}get useNewAltTextFlow(){return this.#g}get useNewAltTextWhenAddingImage(){return this.#y}get hcmFilter(){return Me(this,"hcmFilter",this.#B?this.#w.addHCMFilter(this.#B.foreground,this.#B.background):"none")}get direction(){return Me(this,"direction",getComputedStyle(this.#j).direction)}get highlightColors(){return Me(this,"highlightColors",this.#S?new Map(this.#S.split(",").map(e=>e.split("=").map(t=>t.trim()))):null)}get highlightColorNames(){return Me(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#c=e}setMainHighlightColorPicker(e){this.#L=e}editAltText(e,t=!1){this.#i?.editAltText(this,e,t)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":this.#y=t;break}}onPageChanging({pageNumber:e}){this.#h=e-1}focusMainContainer(){this.#j.focus()}findParent(e,t){for(const n of this.#s.values()){const{x:r,y:o,width:l,height:c}=n.div.getBoundingClientRect();if(e>=r&&e<=r+l&&t>=o&&t<=o+c)return n}return null}disableUserSelect(e=!1){this.#W.classList.toggle("noUserSelect",e)}addShouldRescale(e){this.#p.add(e)}removeShouldRescale(e){this.#p.delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*vi.PDF_TO_CSS_UNITS;for(const t of this.#p)t.onScaleChanging();this.#c?.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}#$({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e}#q(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const n of this.#s.values())if(n.hasTextLayer(e))return n;return null}highlightSelection(e=""){const t=document.getSelection();if(!t||t.isCollapsed)return;const{anchorNode:n,anchorOffset:r,focusNode:o,focusOffset:l}=t,c=t.toString(),f=this.#$(t).closest(".textLayer"),p=this.getSelectionBoxes(f);if(!p)return;t.empty();const g=this.#q(f),y=this.#A===Pe.NONE,v=()=>{g?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:p,anchorNode:n,anchorOffset:r,focusNode:o,focusOffset:l,text:c}),y&&this.showAllEditors("highlight",!0,!0)};if(y){this.switchToMode(Pe.HIGHLIGHT,v);return}v()}#Z(){const e=document.getSelection();if(!e||e.isCollapsed)return;const n=this.#$(e).closest(".textLayer"),r=this.getSelectionBoxes(n);r&&(this.#k||=new r1(this),this.#k.show(n,r,this.direction==="ltr"))}addToAnnotationStorage(e){!e.isEmpty()&&this.#r&&!this.#r.has(e.id)&&this.#r.setValue(e.id,e)}#ee(){const e=document.getSelection();if(!e||e.isCollapsed){this.#M&&(this.#k?.hide(),this.#M=null,this.#P({hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===this.#M)return;const r=this.#$(e).closest(".textLayer");if(!r){this.#M&&(this.#k?.hide(),this.#M=null,this.#P({hasSelectedText:!1}));return}if(this.#k?.hide(),this.#M=t,this.#P({hasSelectedText:!0}),!(this.#A!==Pe.HIGHLIGHT&&this.#A!==Pe.NONE)&&(this.#A===Pe.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#C=this.isShiftKeyDown,!this.isShiftKeyDown)){const o=this.#A===Pe.HIGHLIGHT?this.#q(r):null;o?.toggleDrawing();const l=new AbortController,c=this.combinedSignal(l),d=f=>{f.type==="pointerup"&&f.button!==0||(l.abort(),o?.toggleDrawing(!0),f.type==="pointerup"&&this.#G("main_toolbar"))};window.addEventListener("pointerup",d,{signal:c}),window.addEventListener("blur",d,{signal:c})}}#G(e=""){this.#A===Pe.HIGHLIGHT?this.highlightSelection(e):this.#m&&this.#Z()}#te(){document.addEventListener("selectionchange",this.#ee.bind(this),{signal:this._signal})}#ne(){if(this.#x)return;this.#x=new AbortController;const e=this.combinedSignal(this.#x);window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})}#se(){this.#x?.abort(),this.#x=null}blur(){if(this.isShiftKeyDown=!1,this.#C&&(this.#C=!1,this.#G("main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of this.#b)if(t.div.contains(e)){this.#N=[t,e],t._focusEventsAllowed=!1;break}}focus(){if(!this.#N)return;const[e,t]=this.#N;this.#N=null,t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}#X(){if(this.#E)return;this.#E=new AbortController;const e=this.combinedSignal(this.#E);window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})}#re(){this.#E?.abort(),this.#E=null}#K(){if(this.#u)return;this.#u=new AbortController;const e=this.combinedSignal(this.#u);document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})}#Y(){this.#u?.abort(),this.#u=null}#ie(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})}addEditListeners(){this.#X(),this.#K()}removeEditListeners(){this.#re(),this.#Y()}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const n of this.#a)if(n.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const n of this.#a)if(n.isHandlingMimeForPasting(t.type)){n.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){if(e.preventDefault(),this.#t?.commitOrRemove(),!this.hasSelection)return;const t=[];for(const n of this.#b){const r=n.serialize(!0);r&&t.push(r)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const o of t.items)for(const l of this.#a)if(l.isHandlingMimeForPasting(o.type)){l.paste(o,this.currentLayer);return}let n=t.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(o){Ne(`paste: "${o.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const r=this.currentLayer;try{const o=[];for(const d of n){const f=await r.deserialize(d);if(!f)return;o.push(f)}const l=()=>{for(const d of o)this.#Q(d);this.#J(o)},c=()=>{for(const d of o)d.remove()};this.addCommands({cmd:l,undo:c,mustExec:!0})}catch(o){Ne(`paste: "${o.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),this.#A!==Pe.NONE&&!this.isEditorHandlingKeyboard&&ar._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,this.#C&&(this.#C=!1,this.#G("main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}#P(e){Object.entries(e).some(([n,r])=>this.#U[n]!==r)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#U,e)}),this.#A===Pe.HIGHLIGHT&&e.hasSelectedEditor===!1&&this.#z([[Oe.HIGHLIGHT_FREE,!0]]))}#z(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})}setEditingState(e){e?(this.#ne(),this.#K(),this.#P({isEditing:this.#A!==Pe.NONE,isEmpty:this.#V(),hasSomethingToUndo:this.#o.hasSomethingToUndo(),hasSomethingToRedo:this.#o.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#se(),this.#Y(),this.#P({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!this.#a){this.#a=e;for(const t of this.#a)this.#z(t.defaultPropertiesToUpdate)}}getId(){return this.#T.id}get currentLayer(){return this.#s.get(this.#h)}getLayer(e){return this.#s.get(e)}get currentPageIndex(){return this.#h}addLayer(e){this.#s.set(e.pageIndex,e),this.#_?e.enable():e.disable()}removeLayer(e){this.#s.delete(e.pageIndex)}async updateMode(e,t=null,n=!1){if(this.#A!==e&&!(this.#I&&(await this.#I.promise,!this.#I))){if(this.#I=Promise.withResolvers(),this.#A=e,e===Pe.NONE){this.setEditingState(!1),this.#oe(),this._editorUndoBar?.hide(),this.#I.resolve();return}this.setEditingState(!0),await this.#ae(),this.unselectAll();for(const r of this.#s.values())r.updateMode(e);if(!t){n&&this.addNewEditorFromKeyboard(),this.#I.resolve();return}for(const r of this.#n.values())r.annotationElementId===t?(this.setSelected(r),r.enterInEditMode()):r.unselect();this.#I.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e!==this.#A&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,t){if(this.#a){switch(e){case Oe.CREATE:this.currentLayer.addNewEditor();return;case Oe.HIGHLIGHT_DEFAULT_COLOR:this.#L?.updateColor(t);break;case Oe.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#H||=new Map).set(e,t),this.showAllEditors("highlight",t);break}for(const n of this.#b)n.updateParams(e,t);for(const n of this.#a)n.updateDefaultParams(e,t)}}showAllEditors(e,t,n=!1){for(const o of this.#n.values())o.editorType===e&&o.show(t);(this.#H?.get(Oe.HIGHLIGHT_SHOW_ALL)??!0)!==t&&this.#z([[Oe.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(this.#R!==e){this.#R=e;for(const t of this.#s.values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}async#ae(){if(!this.#_){this.#_=!0;const e=[];for(const t of this.#s.values())e.push(t.enable());await Promise.all(e);for(const t of this.#n.values())t.enable()}}#oe(){if(this.unselectAll(),this.#_){this.#_=!1;for(const e of this.#s.values())e.disable();for(const e of this.#n.values())e.disable()}}getEditors(e){const t=[];for(const n of this.#n.values())n.pageIndex===e&&t.push(n);return t}getEditor(e){return this.#n.get(e)}addEditor(e){this.#n.set(e.id,e)}removeEditor(e){e.div.contains(document.activeElement)&&(this.#v&&clearTimeout(this.#v),this.#v=setTimeout(()=>{this.focusMainContainer(),this.#v=null},0)),this.#n.delete(e.id),this.unselect(e),(!e.annotationElementId||!this.#d.has(e.annotationElementId))&&this.#r?.remove(e.id)}addDeletedAnnotationElement(e){this.#d.add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return this.#d.has(e)}removeDeletedAnnotationElement(e){this.#d.delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}#Q(e){const t=this.#s.get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))}setActiveEditor(e){this.#t!==e&&(this.#t=e,e&&this.#z(e.propertiesToUpdate))}get#le(){let e=null;for(e of this.#b);return e}updateUI(e){this.#le===e&&this.#z(e.propertiesToUpdate)}updateUIForDefaultProperties(e){this.#z(e.defaultPropertiesToUpdate)}toggleSelected(e){if(this.#b.has(e)){this.#b.delete(e),e.unselect(),this.#P({hasSelectedEditor:this.hasSelection});return}this.#b.add(e),e.select(),this.#z(e.propertiesToUpdate),this.#P({hasSelectedEditor:!0})}setSelected(e){this.#c?.commitOrRemove();for(const t of this.#b)t!==e&&t.unselect();this.#b.clear(),this.#b.add(e),e.select(),this.#z(e.propertiesToUpdate),this.#P({hasSelectedEditor:!0})}isSelected(e){return this.#b.has(e)}get firstSelectedEditor(){return this.#b.values().next().value}unselect(e){e.unselect(),this.#b.delete(e),this.#P({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#b.size!==0}get isEnterHandled(){return this.#b.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#o.undo(),this.#P({hasSomethingToUndo:this.#o.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#V()}),this._editorUndoBar?.hide()}redo(){this.#o.redo(),this.#P({hasSomethingToUndo:!0,hasSomethingToRedo:this.#o.hasSomethingToRedo(),isEmpty:this.#V()})}addCommands(e){this.#o.add(e),this.#P({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#V()})}cleanUndoStack(e){this.#o.cleanType(e)}#V(){if(this.#n.size===0)return!0;if(this.#n.size===1)for(const e of this.#n.values())return e.isEmpty();return!1}delete(){this.commitOrRemove();const e=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...this.#b],n=()=>{this._editorUndoBar?.show(r,t.length===1?t[0].editorType:t.length);for(const o of t)o.remove()},r=()=>{for(const o of t)this.#Q(o)};this.addCommands({cmd:n,undo:r,mustExec:!0})}commitOrRemove(){this.#t?.commitOrRemove()}hasSomethingToControl(){return this.#t||this.hasSelection}#J(e){for(const t of this.#b)t.unselect();this.#b.clear();for(const t of e)t.isEmpty()||(this.#b.add(t),t.select());this.#P({hasSelectedEditor:this.hasSelection})}selectAll(){for(const e of this.#b)e.commit();this.#J(this.#n.values())}unselectAll(){if(!(this.#t&&(this.#t.commitOrRemove(),this.#A!==Pe.NONE))&&!this.#c?.commitOrRemove()&&this.hasSelection){for(const e of this.#b)e.unselect();this.#b.clear(),this.#P({hasSelectedEditor:!1})}}translateSelectedEditors(e,t,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;this.#F[0]+=e,this.#F[1]+=t;const[r,o]=this.#F,l=[...this.#b],c=1e3;this.#D&&clearTimeout(this.#D),this.#D=setTimeout(()=>{this.#D=null,this.#F[0]=this.#F[1]=0,this.addCommands({cmd:()=>{for(const d of l)this.#n.has(d.id)&&d.translateInPage(r,o)},undo:()=>{for(const d of l)this.#n.has(d.id)&&d.translateInPage(-r,-o)},mustExec:!1})},c);for(const d of l)d.translateInPage(e,t)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#f=new Map;for(const e of this.#b)this.#f.set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#f)return!1;this.disableUserSelect(!1);const e=this.#f;this.#f=null;let t=!1;for(const[{x:r,y:o,pageIndex:l},c]of e)c.newX=r,c.newY=o,c.newPageIndex=l,t||=r!==c.savedX||o!==c.savedY||l!==c.savedPageIndex;if(!t)return!1;const n=(r,o,l,c)=>{if(this.#n.has(r.id)){const d=this.#s.get(c);d?r._setParentAndPosition(d,o,l):(r.pageIndex=c,r.x=o,r.y=l)}};return this.addCommands({cmd:()=>{for(const[r,{newX:o,newY:l,newPageIndex:c}]of e)n(r,o,l,c)},undo:()=>{for(const[r,{savedX:o,savedY:l,savedPageIndex:c}]of e)n(r,o,l,c)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(this.#f)for(const n of this.#f.keys())n.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#b.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return this.#t===e}getActive(){return this.#t}getMode(){return this.#A}get imageManager(){return Me(this,"imageManager",new Wh)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let f=0,p=t.rangeCount;f<p;f++)if(!e.contains(t.getRangeAt(f).commonAncestorContainer))return null;const{x:n,y:r,width:o,height:l}=e.getBoundingClientRect();let c;switch(e.getAttribute("data-main-rotation")){case"90":c=(f,p,g,y)=>({x:(p-r)/l,y:1-(f+g-n)/o,width:y/l,height:g/o});break;case"180":c=(f,p,g,y)=>({x:1-(f+g-n)/o,y:1-(p+y-r)/l,width:g/o,height:y/l});break;case"270":c=(f,p,g,y)=>({x:1-(p+y-r)/l,y:(f-n)/o,width:y/l,height:g/o});break;default:c=(f,p,g,y)=>({x:(f-n)/o,y:(p-r)/l,width:g/o,height:y/l});break}const d=[];for(let f=0,p=t.rangeCount;f<p;f++){const g=t.getRangeAt(f);if(!g.collapsed)for(const{x:y,y:v,width:x,height:_}of g.getClientRects())x===0||_===0||d.push(c(y,v,x,_))}return d.length===0?null:d}addChangedExistingAnnotation({annotationElementId:e,id:t}){(this.#l||=new Map).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){this.#l?.delete(e)}renderAnnotationElement(e){const t=this.#l?.get(e.data.id);if(!t)return;const n=this.#r.getRawValue(t);n&&(this.#A===Pe.NONE&&!n.hasBeenModified||n.renderAnnotationElement(e))}}class cs{#e=null;#t=!1;#n=null;#s=null;#i=null;#r=null;#l=!1;#o=null;#u=null;#c=null;#h=null;#d=!1;static#f=null;static _l10n=null;constructor(e){this.#u=e,this.#d=e._uiManager.useNewAltTextFlow,cs.#f||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(e){cs._l10n??=e}async render(){const e=this.#n=document.createElement("button");e.className="altText",e.tabIndex="0";const t=this.#s=document.createElement("span");e.append(t),this.#d?(e.classList.add("new"),e.setAttribute("data-l10n-id",cs.#f.missing),t.setAttribute("data-l10n-id",cs.#f["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=this.#u._uiManager._signal;e.addEventListener("contextmenu",Xn,{signal:n}),e.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:n});const r=o=>{o.preventDefault(),this.#u._uiManager.editAltText(this.#u),this.#d&&this.#u._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#a}})};return e.addEventListener("click",r,{capture:!0,signal:n}),e.addEventListener("keydown",o=>{o.target===e&&o.key==="Enter"&&(this.#l=!0,r(o))},{signal:n}),await this.#p(),e}get#a(){return this.#e&&"added"||this.#e===null&&this.guessedText&&"review"||"missing"}finish(){this.#n&&(this.#n.focus({focusVisible:this.#l}),this.#l=!1)}isEmpty(){return this.#d?this.#e===null:!this.#e&&!this.#t}hasData(){return this.#d?this.#e!==null||!!this.#c:this.isEmpty()}get guessedText(){return this.#c}async setGuessedText(e){this.#e===null&&(this.#c=e,this.#h=await cs._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e}),this.#p())}toggleAltTextBadge(e=!1){if(!this.#d||this.#e){this.#o?.remove(),this.#o=null;return}if(!this.#o){const t=this.#o=document.createElement("div");t.className="noAltTextBadge",this.#u.div.append(t)}this.#o.classList.toggle("hidden",!e)}serialize(e){let t=this.#e;return!e&&this.#c===t&&(t=this.#h),{altText:t,decorative:this.#t,guessedText:this.#c,textWithDisclaimer:this.#h}}get data(){return{altText:this.#e,decorative:this.#t}}set data({altText:e,decorative:t,guessedText:n,textWithDisclaimer:r,cancel:o=!1}){n&&(this.#c=n,this.#h=r),!(this.#e===e&&this.#t===t)&&(o||(this.#e=e,this.#t=t),this.#p())}toggle(e=!1){this.#n&&(!e&&this.#r&&(clearTimeout(this.#r),this.#r=null),this.#n.disabled=!e)}shown(){this.#u._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#a}})}destroy(){this.#n?.remove(),this.#n=null,this.#s=null,this.#i=null,this.#o?.remove(),this.#o=null}async#p(){const e=this.#n;if(!e)return;if(this.#d){if(e.classList.toggle("done",!!this.#e),e.setAttribute("data-l10n-id",cs.#f[this.#a]),this.#s?.setAttribute("data-l10n-id",cs.#f[`${this.#a}-label`]),!this.#e){this.#i?.remove();return}}else{if(!this.#e&&!this.#t){e.classList.remove("done"),this.#i?.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=this.#i;if(!t){this.#i=t=document.createElement("span"),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${this.#u.id}`;const r=100,o=this.#u._uiManager._signal;o.addEventListener("abort",()=>{clearTimeout(this.#r),this.#r=null},{once:!0}),e.addEventListener("mouseenter",()=>{this.#r=setTimeout(()=>{this.#r=null,this.#i.classList.add("show"),this.#u._reportTelemetry({action:"alt_text_tooltip"})},r)},{signal:o}),e.addEventListener("mouseleave",()=>{this.#r&&(clearTimeout(this.#r),this.#r=null),this.#i?.classList.remove("show")},{signal:o})}this.#t?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=this.#e),t.parentNode||e.append(t),this.#u.getImageForAltText()?.setAttribute("aria-describedby",t.id)}}class wc{#e;#t=!1;#n=null;#s;#i;#r;#l;#o;#u=null;#c;#h=null;constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:n=null,onPinchStart:r=null,onPinching:o=null,onPinchEnd:l=null,signal:c}){this.#e=e,this.#n=n,this.#s=t,this.#i=r,this.#r=o,this.#l=l,this.#c=new AbortController,this.#o=AbortSignal.any([c,this.#c.signal]),e.addEventListener("touchstart",this.#d.bind(this),{passive:!1,signal:this.#o})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return Me(this,"MIN_TOUCH_DISTANCE_TO_PINCH",35/(window.devicePixelRatio||1))}#d(e){if(this.#s?.()||e.touches.length<2)return;if(!this.#h){this.#h=new AbortController;const r=AbortSignal.any([this.#o,this.#h.signal]),o=this.#e,l={signal:r,passive:!1};o.addEventListener("touchmove",this.#f.bind(this),l),o.addEventListener("touchend",this.#a.bind(this),l),o.addEventListener("touchcancel",this.#a.bind(this),l),this.#i?.()}if(yn(e),e.touches.length!==2||this.#n?.()){this.#u=null;return}let[t,n]=e.touches;t.identifier>n.identifier&&([t,n]=[n,t]),this.#u={touch0X:t.screenX,touch0Y:t.screenY,touch1X:n.screenX,touch1Y:n.screenY}}#f(e){if(!this.#u||e.touches.length!==2)return;let[t,n]=e.touches;t.identifier>n.identifier&&([t,n]=[n,t]);const{screenX:r,screenY:o}=t,{screenX:l,screenY:c}=n,d=this.#u,{touch0X:f,touch0Y:p,touch1X:g,touch1Y:y}=d,v=g-f,x=y-p,_=l-r,A=c-o,C=Math.hypot(_,A)||1,E=Math.hypot(v,x)||1;if(!this.#t&&Math.abs(E-C)<=wc.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(d.touch0X=r,d.touch0Y=o,d.touch1X=l,d.touch1Y=c,e.preventDefault(),!this.#t){this.#t=!0;return}const P=[(r+l)/2,(o+c)/2];this.#r?.(P,E,C)}#a(e){this.#h.abort(),this.#h=null,this.#l?.(),this.#u&&(e.preventDefault(),this.#u=null,this.#t=!1)}destroy(){this.#c?.abort(),this.#c=null}}class _e{#e=null;#t=null;#n=null;#s=!1;#i=null;#r="";#l=!1;#o=null;#u=null;#c=null;#h=null;#d="";#f=!1;#a=null;#p=!1;#m=!1;#g=!1;#y=null;#w=0;#v=0;#x=null;#S=null;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#C=!1;#k=_e._zIndex++;static _borderLineWidth=-1;static _colorManager=new Vh;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const e=_e.prototype._resizeWithKeyboard,t=ar.TRANSLATE_SMALL,n=ar.TRANSLATE_BIG;return Me(this,"_resizerKeyboardManager",new Ya([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,n]}],[["Escape","mac+Escape"],_e.prototype._stopResizingWithKeyboard]]))}constructor(e){this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;const{rotation:t,rawDims:{pageWidth:n,pageHeight:r,pageX:o,pageY:l}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,r],this.pageTranslation=[o,l];const[c,d]=this.parentDimensions;this.x=e.x/c,this.y=e.y/d,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get isDrawer(){return!1}static get _defaultLineColor(){return Me(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new o1({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(_e._l10n??=e,_e._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),_e._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);_e._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){Ue("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#C}set _isDraggable(e){this.#C=e,this.div?.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#k}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):this.#$(),this.parent=e}focusin(e){this._focusEventsAllowed&&(this.#f?this.#f=!1:this.parent.setSelected(this))}focusout(e){!this._focusEventsAllowed||!this.isAttachedToDOM||e.relatedTarget?.closest(`#${this.id}`)||(e.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,n,r){const[o,l]=this.parentDimensions;[n,r]=this.screenToPageTranslation(n,r),this.x=(e+n)/o,this.y=(t+r)/l,this.fixAndSetPosition()}#T([e,t],n,r){[n,r]=this.screenToPageTranslation(n,r),this.x+=n/e,this.y+=r/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(e,t){this.#T(this.parentDimensions,e,t)}translateInPage(e,t){this.#a||=[this.x,this.y,this.width,this.height],this.#T(this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}drag(e,t){this.#a||=[this.x,this.y,this.width,this.height];const{div:n,parentDimensions:[r,o]}=this;if(this.x+=e/r,this.y+=t/o,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:g,y}=this.div.getBoundingClientRect();this.parent.findNewParent(this,g,y)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:l,y:c}=this;const[d,f]=this.getBaseTranslation();l+=d,c+=f;const{style:p}=n;p.left=`${(100*l).toFixed(2)}%`,p.top=`${(100*c).toFixed(2)}%`,this._onTranslating(l,c),n.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!this.#a&&(this.#a[0]!==this.x||this.#a[1]!==this.y)}get _hasBeenResized(){return!!this.#a&&(this.#a[2]!==this.width||this.#a[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:n}=_e,r=n/e,o=n/t;switch(this.rotation){case 90:return[-r,o];case 180:return[r,o];case 270:return[r,-o];default:return[-r,-o]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[n,r]}=this;let{x:o,y:l,width:c,height:d}=this;if(c*=n,d*=r,o*=n,l*=r,this._mustFixPosition)switch(e){case 0:o=Math.max(0,Math.min(n-c,o)),l=Math.max(0,Math.min(r-d,l));break;case 90:o=Math.max(0,Math.min(n-d,o)),l=Math.min(r,Math.max(c,l));break;case 180:o=Math.min(n,Math.max(c,o)),l=Math.min(r,Math.max(d,l));break;case 270:o=Math.min(n,Math.max(d,o)),l=Math.max(0,Math.min(r-c,l));break}this.x=o/=n,this.y=l/=r;const[f,p]=this.getBaseTranslation();o+=f,l+=p,t.left=`${(100*o).toFixed(2)}%`,t.top=`${(100*l).toFixed(2)}%`,this.moveInDOM()}static#_(e,t,n){switch(n){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}}screenToPageTranslation(e,t){return _e.#_(e,t,this.parentRotation)}pageTranslationToScreen(e,t){return _e.#_(e,t,360-this.parentRotation)}#R(e){switch(e){case 90:{const[t,n]=this.pageDimensions;return[0,-t/n,n/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,n]=this.pageDimensions;return[0,t/n,-n/t,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,n]}=this;return[t*e,n*e]}setDims(e,t){const[n,r]=this.parentDimensions,{style:o}=this.div;o.width=`${(100*e/n).toFixed(2)}%`,this.#l||(o.height=`${(100*t/r).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:t,width:n}=e,r=n.endsWith("%"),o=!this.#l&&t.endsWith("%");if(r&&o)return;const[l,c]=this.parentDimensions;r||(e.width=`${(100*parseFloat(n)/l).toFixed(2)}%`),!this.#l&&!o&&(e.height=`${(100*parseFloat(t)/c).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#E(){if(this.#o)return;this.#o=document.createElement("div"),this.#o.classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const n of e){const r=document.createElement("div");this.#o.append(r),r.classList.add("resizer",n),r.setAttribute("data-resizer-name",n),r.addEventListener("pointerdown",this.#N.bind(this,n),{signal:t}),r.addEventListener("contextmenu",Xn,{signal:t}),r.tabIndex=-1}this.div.prepend(this.#o)}#N(e,t){t.preventDefault();const{isMac:n}=Wt.platform;if(t.button!==0||t.ctrlKey&&n)return;this.#n?.toggle(!1);const r=this._isDraggable;this._isDraggable=!1,this.#u=[t.screenX,t.screenY];const o=new AbortController,l=this._uiManager.combinedSignal(o);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#A.bind(this,e),{passive:!0,capture:!0,signal:l}),window.addEventListener("touchmove",yn,{passive:!1,signal:l}),window.addEventListener("contextmenu",Xn,{signal:l}),this.#c={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const c=this.parent.div.style.cursor,d=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const f=()=>{o.abort(),this.parent.togglePointerEvents(!0),this.#n?.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=c,this.div.style.cursor=d,this.#O()};window.addEventListener("pointerup",f,{signal:l}),window.addEventListener("blur",f,{signal:l})}#L(e,t,n,r){this.width=n,this.height=r,this.x=e,this.y=t;const[o,l]=this.parentDimensions;this.setDims(o*n,l*r),this.fixAndSetPosition(),this._onResized()}_onResized(){}#O(){if(!this.#c)return;const{savedX:e,savedY:t,savedWidth:n,savedHeight:r}=this.#c;this.#c=null;const o=this.x,l=this.y,c=this.width,d=this.height;o===e&&l===t&&c===n&&d===r||this.addCommands({cmd:this.#L.bind(this,o,l,c,d),undo:this.#L.bind(this,e,t,n,r),mustExec:!0})}static _round(e){return Math.round(e*1e4)/1e4}#A(e,t){const[n,r]=this.parentDimensions,o=this.x,l=this.y,c=this.width,d=this.height,f=_e.MIN_SIZE/n,p=_e.MIN_SIZE/r,g=this.#R(this.rotation),y=(Z,J)=>[g[0]*Z+g[2]*J,g[1]*Z+g[3]*J],v=this.#R(360-this.rotation),x=(Z,J)=>[v[0]*Z+v[2]*J,v[1]*Z+v[3]*J];let _,A,C=!1,E=!1;switch(e){case"topLeft":C=!0,_=(Z,J)=>[0,0],A=(Z,J)=>[Z,J];break;case"topMiddle":_=(Z,J)=>[Z/2,0],A=(Z,J)=>[Z/2,J];break;case"topRight":C=!0,_=(Z,J)=>[Z,0],A=(Z,J)=>[0,J];break;case"middleRight":E=!0,_=(Z,J)=>[Z,J/2],A=(Z,J)=>[0,J/2];break;case"bottomRight":C=!0,_=(Z,J)=>[Z,J],A=(Z,J)=>[0,0];break;case"bottomMiddle":_=(Z,J)=>[Z/2,J],A=(Z,J)=>[Z/2,0];break;case"bottomLeft":C=!0,_=(Z,J)=>[0,J],A=(Z,J)=>[Z,0];break;case"middleLeft":E=!0,_=(Z,J)=>[0,J/2],A=(Z,J)=>[Z,J/2];break}const P=_(c,d),R=A(c,d);let M=y(...R);const D=_e._round(o+M[0]),O=_e._round(l+M[1]);let H=1,U=1,K,V;if(t.fromKeyboard)({deltaX:K,deltaY:V}=t);else{const{screenX:Z,screenY:J}=t,[Y,te]=this.#u;[K,V]=this.screenToPageTranslation(Z-Y,J-te),this.#u[0]=Z,this.#u[1]=J}if([K,V]=x(K/n,V/r),C){const Z=Math.hypot(c,d);H=U=Math.max(Math.min(Math.hypot(R[0]-P[0]-K,R[1]-P[1]-V)/Z,1/c,1/d),f/c,p/d)}else E?H=Math.max(f,Math.min(1,Math.abs(R[0]-P[0]-K)))/c:U=Math.max(p,Math.min(1,Math.abs(R[1]-P[1]-V)))/d;const fe=_e._round(c*H),we=_e._round(d*U);M=y(...A(fe,we));const be=D-M[0],De=O-M[1];this.#a||=[this.x,this.y,this.width,this.height],this.width=fe,this.height=we,this.x=be,this.y=De,this.setDims(n*fe,r*we),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#n?.finish()}async addEditToolbar(){return this._editToolbar||this.#m?this._editToolbar:(this._editToolbar=new Ma(this),this.div.append(this._editToolbar.render()),this.#n&&await this._editToolbar.addAltText(this.#n),this._editToolbar)}removeEditToolbar(){this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,this.#n?.destroy())}addContainer(e){const t=this._editToolbar?.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){this.#n||(cs.initialize(_e._l10n),this.#n=new cs(this),this.#e&&(this.#n.data=this.#e,this.#e=null),await this.addEditToolbar())}get altTextData(){return this.#n?.data}set altTextData(e){this.#n&&(this.#n.data=e)}get guessedAltText(){return this.#n?.guessedText}async setGuessedAltText(e){await this.#n?.setGuessedText(e)}serializeAltText(e){return this.#n?.serialize(e)}hasAltText(){return!!this.#n&&!this.#n.isEmpty()}hasAltTextData(){return this.#n?.hasData()??!1}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=this.#s?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),this.#F();const[e,t]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*t/e).toFixed(2)}%`,this.div.style.maxHeight=`${(100*e/t).toFixed(2)}%`);const[n,r]=this.getInitialTranslation();return this.translate(n,r),Xl(this,this.div,["pointerdown"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#S||=new wc({container:this.div,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#b.bind(this),onPinching:this.#M.bind(this),onPinchEnd:this.#B.bind(this),signal:this._uiManager._signal})),this._uiManager._editorUndoBar?.hide(),this.div}#b(){this.#c={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#n?.toggle(!1),this.parent.togglePointerEvents(!1)}#M(e,t,n){let o=.7*(n/t)+1-.7;if(o===1)return;const l=this.#R(this.rotation),c=(D,O)=>[l[0]*D+l[2]*O,l[1]*D+l[3]*O],[d,f]=this.parentDimensions,p=this.x,g=this.y,y=this.width,v=this.height,x=_e.MIN_SIZE/d,_=_e.MIN_SIZE/f;o=Math.max(Math.min(o,1/y,1/v),x/y,_/v);const A=_e._round(y*o),C=_e._round(v*o);if(A===y&&C===v)return;this.#a||=[p,g,y,v];const E=c(y/2,v/2),P=_e._round(p+E[0]),R=_e._round(g+E[1]),M=c(A/2,C/2);this.x=P-M[0],this.y=R-M[1],this.width=A,this.height=C,this.setDims(d*A,f*C),this.fixAndSetPosition(),this._onResizing()}#B(){this.#n?.toggle(!0),this.parent.togglePointerEvents(!0),this.#O()}pointerdown(e){const{isMac:t}=Wt.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(this.#f=!0,this._isDraggable){this.#U(e);return}this.#H(e)}get isSelected(){return this._uiManager.isSelected(this)}#H(e){const{isMac:t}=Wt.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)}#U(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let n=!1;const r=new AbortController,o=this._uiManager.combinedSignal(r),l={capture:!0,passive:!1,signal:o},c=f=>{r.abort(),this.#i=null,this.#f=!1,this._uiManager.endDragSession()||this.#H(f),n&&this._onStopDragging()};t&&(this.#w=e.clientX,this.#v=e.clientY,this.#i=e.pointerId,this.#r=e.pointerType,window.addEventListener("pointermove",f=>{n||(n=!0,this._onStartDragging());const{clientX:p,clientY:g,pointerId:y}=f;if(y!==this.#i){yn(f);return}const[v,x]=this.screenToPageTranslation(p-this.#w,g-this.#v);this.#w=p,this.#v=g,this._uiManager.dragSelectedEditors(v,x)},l),window.addEventListener("touchmove",yn,l),window.addEventListener("pointerdown",f=>{f.pointerType===this.#r&&(this.#S||f.isPrimary)&&c(f),yn(f)},l));const d=f=>{if(!this.#i||this.#i===f.pointerId){c(f);return}yn(f)};window.addEventListener("pointerup",d,{signal:o}),window.addEventListener("blur",d,{signal:o})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#y&&clearTimeout(this.#y),this.#y=setTimeout(()=>{this.#y=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(e,t,n){e.changeParent(this),this.x=t,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,n=this.rotation){const r=this.parentScale,[o,l]=this.pageDimensions,[c,d]=this.pageTranslation,f=e/r,p=t/r,g=this.x*o,y=this.y*l,v=this.width*o,x=this.height*l;switch(n){case 0:return[g+f+c,l-y-p-x+d,g+f+v+c,l-y-p+d];case 90:return[g+p+c,l-y+f+d,g+p+x+c,l-y+f+v+d];case 180:return[g-f-v+c,l-y+p+d,g-f+c,l-y+p+x+d];case 270:return[g-p-x+c,l-y-f-v+d,g-p+c,l-y-f+d];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[n,r,o,l]=e,c=o-n,d=l-r;switch(this.rotation){case 0:return[n,t-l,c,d];case 90:return[n,t-r,d,c];case 180:return[o,t-r,c,d];case 270:return[o,t-l,d,c];default:throw new Error("Invalid rotation")}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){this.#m=!0}disableEditMode(){this.#m=!1}isInEditMode(){return this.#m}shouldGetKeyboardEvents(){return this.#g}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:n,right:r}=this.getClientDimensions(),{innerHeight:o,innerWidth:l}=window;return t<l&&r>0&&e<o&&n>0}#F(){if(this.#h||!this.div)return;this.#h=new AbortController;const e=this._uiManager.combinedSignal(this.#h);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})}rebuild(){this.#F()}rotate(e){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(e=!1,t=null){Ue("An editor must be serializable")}static async deserialize(e,t,n){const r=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:n});r.rotation=e.rotation,r.#e=e.accessibilityData;const[o,l]=r.pageDimensions,[c,d,f,p]=r.getRectInCurrentCoords(e.rect,l);return r.x=c/o,r.y=d/l,r.width=f/o,r.height=p/l,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#h?.abort(),this.#h=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#y&&(clearTimeout(this.#y),this.#y=null),this.#$(),this.removeEditToolbar(),this.#x){for(const e of this.#x.values())clearTimeout(e);this.#x=null}this.parent=null,this.#S?.destroy(),this.#S=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#E(),this.#o.classList.remove("hidden"),Xl(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),this.#c={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const t=this.#o.children;if(!this.#t){this.#t=Array.from(t);const l=this.#D.bind(this),c=this.#j.bind(this),d=this._uiManager._signal;for(const f of this.#t){const p=f.getAttribute("data-resizer-name");f.setAttribute("role","spinbutton"),f.addEventListener("keydown",l,{signal:d}),f.addEventListener("blur",c,{signal:d}),f.addEventListener("focus",this.#W.bind(this,p),{signal:d}),f.setAttribute("data-l10n-id",_e._l10nResizer[p])}}const n=this.#t[0];let r=0;for(const l of t){if(l===n)break;r++}const o=(360-this.rotation+this.parentRotation)%360/90*(this.#t.length/4);if(o!==r){if(o<r)for(let c=0;c<r-o;c++)this.#o.append(this.#o.firstChild);else if(o>r)for(let c=0;c<o-r;c++)this.#o.firstChild.before(this.#o.lastChild);let l=0;for(const c of t){const f=this.#t[l++].getAttribute("data-resizer-name");c.setAttribute("data-l10n-id",_e._l10nResizer[f])}}this.#I(0),this.#g=!0,this.#o.firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}#D(e){_e._resizerKeyboardManager.exec(this,e)}#j(e){this.#g&&e.relatedTarget?.parentNode!==this.#o&&this.#$()}#W(e){this.#d=this.#g?e:""}#I(e){if(this.#t)for(const t of this.#t)t.tabIndex=e}_resizeWithKeyboard(e,t){this.#g&&this.#A(this.#d,{deltaX:e,deltaY:t,fromKeyboard:!0})}#$(){this.#g=!1,this.#I(-1),this.#O()}_stopResizingWithKeyboard(){this.#$(),this.div.focus()}select(){if(this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#n?.toggleAltTextBadge(!1)}unselect(){this.#o?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#n?.toggleAltTextBadge(!0)}updateParams(e,t){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return this.#p}set isEditing(e){this.#p=e,this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){this.#l=!0;const n=e/t,{style:r}=this.div;r.aspectRatio=n,r.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){this.#x||=new Map;const{action:n}=e;let r=this.#x.get(n);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(e),this.#x.delete(n),this.#x.size===0&&(this.#x=null)},_e._telemetryTimeout),this.#x.set(n,r);return}e.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),this.#s=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#s=!0}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const n=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),n.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;t?.nodeName==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}}class o1 extends _e{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const Fm=3285377520,kn=4294901760,os=65535;class fy{constructor(e){this.h1=e?e&4294967295:Fm,this.h2=e?e&4294967295:Fm}update(e){let t,n;if(typeof e=="string"){t=new Uint8Array(e.length*2),n=0;for(let _=0,A=e.length;_<A;_++){const C=e.charCodeAt(_);C<=255?t[n++]=C:(t[n++]=C>>>8,t[n++]=C&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),n=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const r=n>>2,o=n-r*4,l=new Uint32Array(t.buffer,0,r);let c=0,d=0,f=this.h1,p=this.h2;const g=3432918353,y=461845907,v=g&os,x=y&os;for(let _=0;_<r;_++)_&1?(c=l[_],c=c*g&kn|c*v&os,c=c<<15|c>>>17,c=c*y&kn|c*x&os,f^=c,f=f<<13|f>>>19,f=f*5+3864292196):(d=l[_],d=d*g&kn|d*v&os,d=d<<15|d>>>17,d=d*y&kn|d*x&os,p^=d,p=p<<13|p>>>19,p=p*5+3864292196);switch(c=0,o){case 3:c^=t[r*4+2]<<16;case 2:c^=t[r*4+1]<<8;case 1:c^=t[r*4],c=c*g&kn|c*v&os,c=c<<15|c>>>17,c=c*y&kn|c*x&os,r&1?f^=c:p^=c}this.h1=f,this.h2=p}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&kn|e*36045&os,t=t*4283543511&kn|((t<<16|e>>>16)*2950163797&kn)>>>16,e^=t>>>1,e=e*444984403&kn|e*60499&os,t=t*3301882366&kn|((t<<16|e>>>16)*3120437893&kn)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const oh=Object.freeze({map:null,hash:"",transfer:void 0});class Gh{#e=!1;#t=null;#n=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const n=this.#n.get(e);return n===void 0?t:Object.assign(t,n)}getRawValue(e){return this.#n.get(e)}remove(e){if(this.#n.delete(e),this.#n.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const t of this.#n.values())if(t instanceof _e)return;this.onAnnotationEditor(null)}}setValue(e,t){const n=this.#n.get(e);let r=!1;if(n!==void 0)for(const[o,l]of Object.entries(t))n[o]!==l&&(r=!0,n[o]=l);else r=!0,this.#n.set(e,t);r&&this.#s(),t instanceof _e&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type)}has(e){return this.#n.has(e)}getAll(){return this.#n.size>0?$h(this.#n):null}setAll(e){for(const[t,n]of Object.entries(e))this.setValue(t,n)}get size(){return this.#n.size}#s(){this.#e||(this.#e=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#e&&(this.#e=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new py(this)}get serializable(){if(this.#n.size===0)return oh;const e=new Map,t=new fy,n=[],r=Object.create(null);let o=!1;for(const[l,c]of this.#n){const d=c instanceof _e?c.serialize(!1,r):c;d&&(e.set(l,d),t.update(`${l}:${JSON.stringify(d)}`),o||=!!d.bitmap)}if(o)for(const l of e.values())l.bitmap&&n.push(l.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:n}:oh}get editorStats(){let e=null;const t=new Map;for(const n of this.#n.values()){if(!(n instanceof _e))continue;const r=n.telemetryFinalData;if(!r)continue;const{type:o}=r;t.has(o)||t.set(o,Object.getPrototypeOf(n).constructor),e||=Object.create(null);const l=e[o]||=new Map;for(const[c,d]of Object.entries(r)){if(c==="type")continue;let f=l.get(c);f||(f=new Map,l.set(c,f));const p=f.get(d)??0;f.set(d,p+1)}}for(const[n,r]of t)e[n]=r.computeTelemetryFinalData(e[n]);return e}resetModifiedIds(){this.#t=null}get modifiedIds(){if(this.#t)return this.#t;const e=[];for(const t of this.#n.values())!(t instanceof _e)||!t.annotationElementId||!t.serialize()||e.push(t.annotationElementId);return this.#t={ids:new Set(e),hash:e.join(",")}}}class py extends Gh{#e;constructor(e){super();const{map:t,hash:n,transfer:r}=e.serializable,o=structuredClone(t,r?{transfer:r}:null);this.#e={map:o,hash:n,transfer:r}}get print(){Ue("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#e}get modifiedIds(){return Me(this,"modifiedIds",{ids:new Set,hash:""})}}class l1{#e=new Set;constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),this.#e.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,_inspectFont:t}){if(!(!e||this.#e.has(e.loadedName))){if(ot(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:n,src:r,style:o}=e,l=new FontFace(n,r,o);this.addNativeFontFace(l);try{await l.load(),this.#e.add(n),t?.(e)}catch{Ne(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(l)}return}Ue("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const n=e.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(r){throw Ne(`Failed to load font '${n.family}': '${r}'.`),e.disableFontFace=!0,r}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const r=this._queueLoadingCallback(n);this._prepareFontLoadEvent(e,r)})}}get isFontLoadingAPISupported(){const e=!!this._document?.fonts;return Me(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){let e=!1;return(Ft||typeof navigator<"u"&&typeof navigator?.userAgent=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(e=!0),Me(this,"isSyncFontLoadingSupported",e)}_queueLoadingCallback(e){function t(){for(ot(!r.done,"completeRequest() cannot be called twice."),r.done=!0;n.length>0&&n[0].done;){const o=n.shift();setTimeout(o.callback,0)}}const{loadingRequests:n}=this,r={done:!1,complete:t,callback:e};return n.push(r),r}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Me(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function n(R,M){return R.charCodeAt(M)<<24|R.charCodeAt(M+1)<<16|R.charCodeAt(M+2)<<8|R.charCodeAt(M+3)&255}function r(R,M,D,O){const H=R.substring(0,M),U=R.substring(M+D);return H+O+U}let o,l;const c=this._document.createElement("canvas");c.width=1,c.height=1;const d=c.getContext("2d");let f=0;function p(R,M){if(++f>30){Ne("Load test font never loaded."),M();return}if(d.font="30px "+R,d.fillText(".",0,20),d.getImageData(0,0,1,1).data[3]>0){M();return}setTimeout(p.bind(null,R,M))}const g=`lt${Date.now()}${this.loadTestFontId++}`;let y=this._loadTestFont;y=r(y,976,g.length,g);const x=16,_=1482184792;let A=n(y,x);for(o=0,l=g.length-3;o<l;o+=4)A=A-_+n(g,o)|0;o<g.length&&(A=A-_+n(g+"XXX",o)|0),y=r(y,x,4,qA(A));const C=`url(data:font/opentype;base64,${btoa(y)});`,E=`@font-face {font-family:"${g}";src:${C}}`;this.insertRule(E);const P=this._document.createElement("div");P.style.visibility="hidden",P.style.width=P.style.height="10px",P.style.position="absolute",P.style.top=P.style.left="0px";for(const R of[e.loadedName,g]){const M=this._document.createElement("span");M.textContent="Hi",M.style.fontFamily=R,P.append(M)}this._document.body.append(P),p(g,()=>{P.remove(),t.complete()})}}class c1{constructor(e,{disableFontFace:t=!1,fontExtraProperties:n=!1,inspectFont:r=null}){this.compiledGlyphs=Object.create(null);for(const o in e)this[o]=e[o];this.disableFontFace=t===!0,this.fontExtraProperties=n===!0,this._inspectFont=r}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const t={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(t.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,t)}return this._inspectFont?.(this),e}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${ZA(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let n=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(n+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${n}src:${e}}`}return this._inspectFont?.(this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const n=this.loadedName+"_path_"+t;let r;try{r=e.get(n)}catch(l){Ne(`getPathGenerator - ignoring character: "${l}".`)}const o=new Path2D(r||"");return this.fontExtraProperties||e.delete(n),this.compiledGlyphs[t]=o}}const vl={DATA:1,ERROR:2},at={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function jm(){}function nn(i){if(i instanceof ir||i instanceof ih||i instanceof Ha||i instanceof Lm||i instanceof ql||i instanceof Pd)return i;switch(i instanceof Error||typeof i=="object"&&i!==null||Ue('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),i.name){case"AbortException":return new ir(i.message);case"InvalidPDFException":return new ih(i.message);case"MissingPDFException":return new Ha(i.message);case"PasswordException":return new Lm(i.message,i.code);case"UnexpectedResponseException":return new ql(i.message,i.status);case"UnknownErrorException":return new Pd(i.message,i.details)}return new Pd(i.message,i.toString())}class _a{#e=new AbortController;constructor(e,t,n){this.sourceName=e,this.targetName=t,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",this.#t.bind(this),{signal:this.#e.signal})}#t({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){this.#s(e);return}if(e.callback){const n=e.callbackId,r=this.callbackCapabilities[n];if(!r)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],e.callback===vl.DATA)r.resolve(e.data);else if(e.callback===vl.ERROR)r.reject(nn(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const n=this.sourceName,r=e.sourceName,o=this.comObj;Promise.try(t,e.data).then(function(l){o.postMessage({sourceName:n,targetName:r,callback:vl.DATA,callbackId:e.callbackId,data:l})},function(l){o.postMessage({sourceName:n,targetName:r,callback:vl.ERROR,callbackId:e.callbackId,reason:nn(l)})});return}if(e.streamId){this.#n(e);return}t(e.data)}on(e,t){const n=this.actionHandler;if(n[e])throw new Error(`There is already an actionName called "${e}"`);n[e]=t}send(e,t,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},n)}sendWithPromise(e,t,n){const r=this.callbackId++,o=Promise.withResolvers();this.callbackCapabilities[r]=o;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:r,data:t},n)}catch(l){o.reject(l)}return o.promise}sendWithStream(e,t,n,r){const o=this.streamId++,l=this.sourceName,c=this.targetName,d=this.comObj;return new ReadableStream({start:f=>{const p=Promise.withResolvers();return this.streamControllers[o]={controller:f,startCall:p,pullCall:null,cancelCall:null,isClosed:!1},d.postMessage({sourceName:l,targetName:c,action:e,streamId:o,data:t,desiredSize:f.desiredSize},r),p.promise},pull:f=>{const p=Promise.withResolvers();return this.streamControllers[o].pullCall=p,d.postMessage({sourceName:l,targetName:c,stream:at.PULL,streamId:o,desiredSize:f.desiredSize}),p.promise},cancel:f=>{ot(f instanceof Error,"cancel must have a valid reason");const p=Promise.withResolvers();return this.streamControllers[o].cancelCall=p,this.streamControllers[o].isClosed=!0,d.postMessage({sourceName:l,targetName:c,stream:at.CANCEL,streamId:o,reason:nn(f)}),p.promise}},n)}#n(e){const t=e.streamId,n=this.sourceName,r=e.sourceName,o=this.comObj,l=this,c=this.actionHandler[e.action],d={enqueue(f,p=1,g){if(this.isCancelled)return;const y=this.desiredSize;this.desiredSize-=p,y>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),o.postMessage({sourceName:n,targetName:r,stream:at.ENQUEUE,streamId:t,chunk:f},g)},close(){this.isCancelled||(this.isCancelled=!0,o.postMessage({sourceName:n,targetName:r,stream:at.CLOSE,streamId:t}),delete l.streamSinks[t])},error(f){ot(f instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,o.postMessage({sourceName:n,targetName:r,stream:at.ERROR,streamId:t,reason:nn(f)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};d.sinkCapability.resolve(),d.ready=d.sinkCapability.promise,this.streamSinks[t]=d,Promise.try(c,e.data,d).then(function(){o.postMessage({sourceName:n,targetName:r,stream:at.START_COMPLETE,streamId:t,success:!0})},function(f){o.postMessage({sourceName:n,targetName:r,stream:at.START_COMPLETE,streamId:t,reason:nn(f)})})}#s(e){const t=e.streamId,n=this.sourceName,r=e.sourceName,o=this.comObj,l=this.streamControllers[t],c=this.streamSinks[t];switch(e.stream){case at.START_COMPLETE:e.success?l.startCall.resolve():l.startCall.reject(nn(e.reason));break;case at.PULL_COMPLETE:e.success?l.pullCall.resolve():l.pullCall.reject(nn(e.reason));break;case at.PULL:if(!c){o.postMessage({sourceName:n,targetName:r,stream:at.PULL_COMPLETE,streamId:t,success:!0});break}c.desiredSize<=0&&e.desiredSize>0&&c.sinkCapability.resolve(),c.desiredSize=e.desiredSize,Promise.try(c.onPull||jm).then(function(){o.postMessage({sourceName:n,targetName:r,stream:at.PULL_COMPLETE,streamId:t,success:!0})},function(f){o.postMessage({sourceName:n,targetName:r,stream:at.PULL_COMPLETE,streamId:t,reason:nn(f)})});break;case at.ENQUEUE:if(ot(l,"enqueue should have stream controller"),l.isClosed)break;l.controller.enqueue(e.chunk);break;case at.CLOSE:if(ot(l,"close should have stream controller"),l.isClosed)break;l.isClosed=!0,l.controller.close(),this.#i(l,t);break;case at.ERROR:ot(l,"error should have stream controller"),l.controller.error(nn(e.reason)),this.#i(l,t);break;case at.CANCEL_COMPLETE:e.success?l.cancelCall.resolve():l.cancelCall.reject(nn(e.reason)),this.#i(l,t);break;case at.CANCEL:if(!c)break;const d=nn(e.reason);Promise.try(c.onCancel||jm,d).then(function(){o.postMessage({sourceName:n,targetName:r,stream:at.CANCEL_COMPLETE,streamId:t,success:!0})},function(f){o.postMessage({sourceName:n,targetName:r,stream:at.CANCEL_COMPLETE,streamId:t,reason:nn(f)})}),c.sinkCapability.reject(d),c.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}}async#i(e,t){await Promise.allSettled([e.startCall?.promise,e.pullCall?.promise,e.cancelCall?.promise]),delete this.streamControllers[t]}destroy(){this.#e?.abort(),this.#e=null}}class gy{#e=!1;constructor({enableHWA:e=!1}){this.#e=e}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(e,t);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!this.#e})}}reset(e,t,n){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||n<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=n}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){Ue("Abstract method `_createCanvas` called.")}}class u1 extends gy{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const n=this._document.createElement("canvas");return n.width=e,n.height=t,n}}class my{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){Ue("Abstract method `_fetch` called.")}}class yy extends my{async _fetch(e){const t=await vc(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):yc(t)}}class vy{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,n,r,o){return"none"}destroy(e=!1){}}class d1 extends vy{#e;#t;#n;#s;#i;#r;#l=0;constructor({docId:e,ownerDocument:t=globalThis.document}){super(),this.#s=e,this.#i=t}get#o(){return this.#t||=new Map}get#u(){return this.#r||=new Map}get#c(){if(!this.#n){const e=this.#i.createElement("div"),{style:t}=e;t.visibility="hidden",t.contain="strict",t.width=t.height=0,t.position="absolute",t.top=t.left=0,t.zIndex=-1;const n=this.#i.createElementNS(Cs,"svg");n.setAttribute("width",0),n.setAttribute("height",0),this.#n=this.#i.createElementNS(Cs,"defs"),e.append(n),n.append(this.#n),this.#i.body.append(e)}return this.#n}#h(e){if(e.length===1){const d=e[0],f=new Array(256);for(let g=0;g<256;g++)f[g]=d[g]/255;const p=f.join(",");return[p,p,p]}const[t,n,r]=e,o=new Array(256),l=new Array(256),c=new Array(256);for(let d=0;d<256;d++)o[d]=t[d]/255,l[d]=n[d]/255,c[d]=r[d]/255;return[o.join(","),l.join(","),c.join(",")]}#d(e){if(this.#e===void 0){this.#e="";const t=this.#i.URL;t!==this.#i.baseURI&&(bc(t)?Ne('#createUrl: ignore "data:"-URL for performance reasons.'):this.#e=t.split("#",1)[0])}return`url(${this.#e}#${e})`}addFilter(e){if(!e)return"none";let t=this.#o.get(e);if(t)return t;const[n,r,o]=this.#h(e),l=e.length===1?n:`${n}${r}${o}`;if(t=this.#o.get(l),t)return this.#o.set(e,t),t;const c=`g_${this.#s}_transfer_map_${this.#l++}`,d=this.#d(c);this.#o.set(e,d),this.#o.set(l,d);const f=this.#p(c);return this.#g(n,r,o,f),d}addHCMFilter(e,t){const n=`${e}-${t}`,r="base";let o=this.#u.get(r);if(o?.key===n||(o?(o.filter?.remove(),o.key=n,o.url="none",o.filter=null):(o={key:n,url:"none",filter:null},this.#u.set(r,o)),!e||!t))return o.url;const l=this.#w(e);e=de.makeHexColor(...l);const c=this.#w(t);if(t=de.makeHexColor(...c),this.#c.style.color="",e==="#000000"&&t==="#ffffff"||e===t)return o.url;const d=new Array(256);for(let v=0;v<=255;v++){const x=v/255;d[v]=x<=.03928?x/12.92:((x+.055)/1.055)**2.4}const f=d.join(","),p=`g_${this.#s}_hcm_filter`,g=o.filter=this.#p(p);this.#g(f,f,f,g),this.#a(g);const y=(v,x)=>{const _=l[v]/255,A=c[v]/255,C=new Array(x+1);for(let E=0;E<=x;E++)C[E]=_+E/x*(A-_);return C.join(",")};return this.#g(y(0,5),y(1,5),y(2,5),g),o.url=this.#d(p),o.url}addAlphaFilter(e){let t=this.#o.get(e);if(t)return t;const[n]=this.#h([e]),r=`alpha_${n}`;if(t=this.#o.get(r),t)return this.#o.set(e,t),t;const o=`g_${this.#s}_alpha_map_${this.#l++}`,l=this.#d(o);this.#o.set(e,l),this.#o.set(r,l);const c=this.#p(o);return this.#y(n,c),l}addLuminosityFilter(e){let t=this.#o.get(e||"luminosity");if(t)return t;let n,r;if(e?([n]=this.#h([e]),r=`luminosity_${n}`):r="luminosity",t=this.#o.get(r),t)return this.#o.set(e,t),t;const o=`g_${this.#s}_luminosity_map_${this.#l++}`,l=this.#d(o);this.#o.set(e,l),this.#o.set(r,l);const c=this.#p(o);return this.#f(c),e&&this.#y(n,c),l}addHighlightHCMFilter(e,t,n,r,o){const l=`${t}-${n}-${r}-${o}`;let c=this.#u.get(e);if(c?.key===l||(c?(c.filter?.remove(),c.key=l,c.url="none",c.filter=null):(c={key:l,url:"none",filter:null},this.#u.set(e,c)),!t||!n))return c.url;const[d,f]=[t,n].map(this.#w.bind(this));let p=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),g=Math.round(.2126*f[0]+.7152*f[1]+.0722*f[2]),[y,v]=[r,o].map(this.#w.bind(this));g<p&&([p,g,y,v]=[g,p,v,y]),this.#c.style.color="";const x=(C,E,P)=>{const R=new Array(256),M=(g-p)/P,D=C/255,O=(E-C)/(255*P);let H=0;for(let U=0;U<=P;U++){const K=Math.round(p+U*M),V=D+U*O;for(let fe=H;fe<=K;fe++)R[fe]=V;H=K+1}for(let U=H;U<256;U++)R[U]=R[H-1];return R.join(",")},_=`g_${this.#s}_hcm_${e}_filter`,A=c.filter=this.#p(_);return this.#a(A),this.#g(x(y[0],v[0],5),x(y[1],v[1],5),x(y[2],v[2],5),A),c.url=this.#d(_),c.url}destroy(e=!1){e&&this.#r?.size||(this.#n?.parentNode.parentNode.remove(),this.#n=null,this.#t?.clear(),this.#t=null,this.#r?.clear(),this.#r=null,this.#l=0)}#f(e){const t=this.#i.createElementNS(Cs,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(t)}#a(e){const t=this.#i.createElementNS(Cs,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(t)}#p(e){const t=this.#i.createElementNS(Cs,"filter");return t.setAttribute("color-interpolation-filters","sRGB"),t.setAttribute("id",e),this.#c.append(t),t}#m(e,t,n){const r=this.#i.createElementNS(Cs,t);r.setAttribute("type","discrete"),r.setAttribute("tableValues",n),e.append(r)}#g(e,t,n,r){const o=this.#i.createElementNS(Cs,"feComponentTransfer");r.append(o),this.#m(o,"feFuncR",e),this.#m(o,"feFuncG",t),this.#m(o,"feFuncB",n)}#y(e,t){const n=this.#i.createElementNS(Cs,"feComponentTransfer");t.append(n),this.#m(n,"feFuncA",e)}#w(e){return this.#c.style.color=e,Uh(getComputedStyle(this.#c).getPropertyValue("color"))}}class by{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(n=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){Ue("Abstract method `_fetch` called.")}}class wy extends by{async _fetch(e){const t=await vc(e,"arraybuffer");return new Uint8Array(t)}}Ft&&Ne("Please use the `legacy` build in Node.js environments.");async function xy(i){const t=await process.getBuiltinModule("fs").promises.readFile(i);return new Uint8Array(t)}class h1 extends vy{}class f1 extends gy{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class p1 extends my{async _fetch(e){return xy(e)}}class g1 extends by{async _fetch(e){return xy(e)}}const Ot={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function lh(i,e){if(!e)return;const t=e[2]-e[0],n=e[3]-e[1],r=new Path2D;r.rect(e[0],e[1],t,n),i.clip(r)}class qh{getPattern(){Ue("Abstract method `getPattern` called.")}}class m1 extends qh{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)t.addColorStop(n[0],n[1]);return t}getPattern(e,t,n,r){let o;if(r===Ot.STROKE||r===Ot.FILL){const l=t.current.getClippedPathBoundingBox(r,Xe(e))||[0,0,0,0],c=Math.ceil(l[2]-l[0])||1,d=Math.ceil(l[3]-l[1])||1,f=t.cachedCanvases.getCanvas("pattern",c,d),p=f.context;p.clearRect(0,0,p.canvas.width,p.canvas.height),p.beginPath(),p.rect(0,0,p.canvas.width,p.canvas.height),p.translate(-l[0],-l[1]),n=de.transform(n,[1,0,0,1,l[0],l[1]]),p.transform(...t.baseTransform),this.matrix&&p.transform(...this.matrix),lh(p,this._bbox),p.fillStyle=this._createGradient(p),p.fill(),o=e.createPattern(f.canvas,"no-repeat");const g=new DOMMatrix(n);o.setTransform(g)}else lh(e,this._bbox),o=this._createGradient(e);return o}}function Md(i,e,t,n,r,o,l,c){const d=e.coords,f=e.colors,p=i.data,g=i.width*4;let y;d[t+1]>d[n+1]&&(y=t,t=n,n=y,y=o,o=l,l=y),d[n+1]>d[r+1]&&(y=n,n=r,r=y,y=l,l=c,c=y),d[t+1]>d[n+1]&&(y=t,t=n,n=y,y=o,o=l,l=y);const v=(d[t]+e.offsetX)*e.scaleX,x=(d[t+1]+e.offsetY)*e.scaleY,_=(d[n]+e.offsetX)*e.scaleX,A=(d[n+1]+e.offsetY)*e.scaleY,C=(d[r]+e.offsetX)*e.scaleX,E=(d[r+1]+e.offsetY)*e.scaleY;if(x>=E)return;const P=f[o],R=f[o+1],M=f[o+2],D=f[l],O=f[l+1],H=f[l+2],U=f[c],K=f[c+1],V=f[c+2],fe=Math.round(x),we=Math.round(E);let be,De,Z,J,Y,te,ee,L;for(let B=fe;B<=we;B++){if(B<A){const pe=B<x?0:(x-B)/(x-A);be=v-(v-_)*pe,De=P-(P-D)*pe,Z=R-(R-O)*pe,J=M-(M-H)*pe}else{let pe;B>E?pe=1:A===E?pe=0:pe=(A-B)/(A-E),be=_-(_-C)*pe,De=D-(D-U)*pe,Z=O-(O-K)*pe,J=H-(H-V)*pe}let se;B<x?se=0:B>E?se=1:se=(x-B)/(x-E),Y=v-(v-C)*se,te=P-(P-U)*se,ee=R-(R-K)*se,L=M-(M-V)*se;const me=Math.round(Math.min(be,Y)),ke=Math.round(Math.max(be,Y));let ce=g*B+me*4;for(let pe=me;pe<=ke;pe++)se=(be-pe)/(be-Y),se<0?se=0:se>1&&(se=1),p[ce++]=De-(De-te)*se|0,p[ce++]=Z-(Z-ee)*se|0,p[ce++]=J-(J-L)*se|0,p[ce++]=255}}function y1(i,e,t){const n=e.coords,r=e.colors;let o,l;switch(e.type){case"lattice":const c=e.verticesPerRow,d=Math.floor(n.length/c)-1,f=c-1;for(o=0;o<d;o++){let p=o*c;for(let g=0;g<f;g++,p++)Md(i,t,n[p],n[p+1],n[p+c],r[p],r[p+1],r[p+c]),Md(i,t,n[p+c+1],n[p+1],n[p+c],r[p+c+1],r[p+1],r[p+c])}break;case"triangles":for(o=0,l=n.length;o<l;o+=3)Md(i,t,n[o],n[o+1],n[o+2],r[o],r[o+1],r[o+2]);break;default:throw new Error("illegal figure")}}class v1 extends qh{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[7],this._background=e[8],this.matrix=null}_createMeshCanvas(e,t,n){const c=Math.floor(this._bounds[0]),d=Math.floor(this._bounds[1]),f=Math.ceil(this._bounds[2])-c,p=Math.ceil(this._bounds[3])-d,g=Math.min(Math.ceil(Math.abs(f*e[0]*1.1)),3e3),y=Math.min(Math.ceil(Math.abs(p*e[1]*1.1)),3e3),v=f/g,x=p/y,_={coords:this._coords,colors:this._colors,offsetX:-c,offsetY:-d,scaleX:1/v,scaleY:1/x},A=g+4,C=y+4,E=n.getCanvas("mesh",A,C),P=E.context,R=P.createImageData(g,y);if(t){const D=R.data;for(let O=0,H=D.length;O<H;O+=4)D[O]=t[0],D[O+1]=t[1],D[O+2]=t[2],D[O+3]=255}for(const D of this._figures)y1(R,D,_);return P.putImageData(R,2,2),{canvas:E.canvas,offsetX:c-2*v,offsetY:d-2*x,scaleX:v,scaleY:x}}getPattern(e,t,n,r){lh(e,this._bbox);let o;if(r===Ot.SHADING)o=de.singularValueDecompose2dScale(Xe(e));else if(o=de.singularValueDecompose2dScale(t.baseTransform),this.matrix){const c=de.singularValueDecompose2dScale(this.matrix);o=[o[0]*c[0],o[1]*c[1]]}const l=this._createMeshCanvas(o,r===Ot.SHADING?null:this._background,t.cachedCanvases);return r!==Ot.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(l.offsetX,l.offsetY),e.scale(l.scaleX,l.scaleY),e.createPattern(l.canvas,"no-repeat")}}class b1 extends qh{getPattern(){return"hotpink"}}function w1(i){switch(i[0]){case"RadialAxial":return new m1(i);case"Mesh":return new v1(i);case"Dummy":return new b1}throw new Error(`Unknown IR type: ${i[0]}`)}const $m={COLORED:1,UNCOLORED:2};class Xh{static MAX_PATTERN_SIZE=3e3;constructor(e,t,n,r,o){this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=t,this.ctx=n,this.canvasGraphicsFactory=r,this.baseTransform=o}createPatternCanvas(e){const{bbox:t,operatorList:n,paintType:r,tilingType:o,color:l,canvasGraphicsFactory:c}=this;let{xstep:d,ystep:f}=this;d=Math.abs(d),f=Math.abs(f),mc("TilingType: "+o);const p=t[0],g=t[1],y=t[2],v=t[3],x=y-p,_=v-g,A=de.singularValueDecompose2dScale(this.matrix),C=de.singularValueDecompose2dScale(this.baseTransform),E=A[0]*C[0],P=A[1]*C[1];let R=x,M=_,D=!1,O=!1;const H=Math.ceil(d*E),U=Math.ceil(f*P),K=Math.ceil(x*E),V=Math.ceil(_*P);H>=K?R=d:D=!0,U>=V?M=f:O=!0;const fe=this.getSizeAndScale(R,this.ctx.canvas.width,E),we=this.getSizeAndScale(M,this.ctx.canvas.height,P),be=e.cachedCanvases.getCanvas("pattern",fe.size,we.size),De=be.context,Z=c.createCanvasGraphics(De);if(Z.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(Z,r,l),De.translate(-fe.scale*p,-we.scale*g),Z.transform(fe.scale,0,0,we.scale,0,0),De.save(),this.clipBbox(Z,p,g,y,v),Z.baseTransform=Xe(Z.ctx),Z.executeOperatorList(n),Z.endDrawing(),De.restore(),D||O){const J=be.canvas;D&&(R=d),O&&(M=f);const Y=this.getSizeAndScale(R,this.ctx.canvas.width,E),te=this.getSizeAndScale(M,this.ctx.canvas.height,P),ee=Y.size,L=te.size,B=e.cachedCanvases.getCanvas("pattern-workaround",ee,L),se=B.context,me=D?Math.floor(x/d):0,ke=O?Math.floor(_/f):0;for(let ce=0;ce<=me;ce++)for(let pe=0;pe<=ke;pe++)se.drawImage(J,ee*ce,L*pe,ee,L,0,0,ee,L);return{canvas:B.canvas,scaleX:Y.scale,scaleY:te.scale,offsetX:p,offsetY:g}}return{canvas:be.canvas,scaleX:fe.scale,scaleY:we.scale,offsetX:p,offsetY:g}}getSizeAndScale(e,t,n){const r=Math.max(Xh.MAX_PATTERN_SIZE,t);let o=Math.ceil(e*n);return o>=r?o=r:n=o/e,{scale:n,size:o}}clipBbox(e,t,n,r,o){const l=r-t,c=o-n;e.ctx.rect(t,n,l,c),e.current.updateRectMinMax(Xe(e.ctx),[t,n,r,o]),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,n){const r=e.ctx,o=e.current;switch(t){case $m.COLORED:const l=this.ctx;r.fillStyle=l.fillStyle,r.strokeStyle=l.strokeStyle,o.fillColor=l.fillStyle,o.strokeColor=l.strokeStyle;break;case $m.UNCOLORED:const c=de.makeHexColor(n[0],n[1],n[2]);r.fillStyle=c,r.strokeStyle=c,o.fillColor=c,o.strokeColor=c;break;default:throw new GA(`Unsupported paint type: ${t}`)}}getPattern(e,t,n,r){let o=n;r!==Ot.SHADING&&(o=de.transform(o,t.baseTransform),this.matrix&&(o=de.transform(o,this.matrix)));const l=this.createPatternCanvas(t);let c=new DOMMatrix(o);c=c.translate(l.offsetX,l.offsetY),c=c.scale(1/l.scaleX,1/l.scaleY);const d=e.createPattern(l.canvas,"repeat");return d.setTransform(c),d}}function x1({src:i,srcPos:e=0,dest:t,width:n,height:r,nonBlackColor:o=4294967295,inverseDecode:l=!1}){const c=Wt.isLittleEndian?4278190080:255,[d,f]=l?[o,c]:[c,o],p=n>>3,g=n&7,y=i.length;t=new Uint32Array(t.buffer);let v=0;for(let x=0;x<r;x++){for(const A=e+p;e<A;e++){const C=e<y?i[e]:255;t[v++]=C&128?f:d,t[v++]=C&64?f:d,t[v++]=C&32?f:d,t[v++]=C&16?f:d,t[v++]=C&8?f:d,t[v++]=C&4?f:d,t[v++]=C&2?f:d,t[v++]=C&1?f:d}if(g===0)continue;const _=e<y?i[e++]:255;for(let A=0;A<g;A++)t[v++]=_&1<<7-A?f:d}return{srcPos:e,destPos:v}}const zm=16,Bm=100,_1=15,Hm=10,Um=1e3,sn=16;function S1(i,e){if(i._removeMirroring)throw new Error("Context is already forwarding operations.");i.__originalSave=i.save,i.__originalRestore=i.restore,i.__originalRotate=i.rotate,i.__originalScale=i.scale,i.__originalTranslate=i.translate,i.__originalTransform=i.transform,i.__originalSetTransform=i.setTransform,i.__originalResetTransform=i.resetTransform,i.__originalClip=i.clip,i.__originalMoveTo=i.moveTo,i.__originalLineTo=i.lineTo,i.__originalBezierCurveTo=i.bezierCurveTo,i.__originalRect=i.rect,i.__originalClosePath=i.closePath,i.__originalBeginPath=i.beginPath,i._removeMirroring=()=>{i.save=i.__originalSave,i.restore=i.__originalRestore,i.rotate=i.__originalRotate,i.scale=i.__originalScale,i.translate=i.__originalTranslate,i.transform=i.__originalTransform,i.setTransform=i.__originalSetTransform,i.resetTransform=i.__originalResetTransform,i.clip=i.__originalClip,i.moveTo=i.__originalMoveTo,i.lineTo=i.__originalLineTo,i.bezierCurveTo=i.__originalBezierCurveTo,i.rect=i.__originalRect,i.closePath=i.__originalClosePath,i.beginPath=i.__originalBeginPath,delete i._removeMirroring},i.save=function(){e.save(),this.__originalSave()},i.restore=function(){e.restore(),this.__originalRestore()},i.translate=function(n,r){e.translate(n,r),this.__originalTranslate(n,r)},i.scale=function(n,r){e.scale(n,r),this.__originalScale(n,r)},i.transform=function(n,r,o,l,c,d){e.transform(n,r,o,l,c,d),this.__originalTransform(n,r,o,l,c,d)},i.setTransform=function(n,r,o,l,c,d){e.setTransform(n,r,o,l,c,d),this.__originalSetTransform(n,r,o,l,c,d)},i.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},i.rotate=function(n){e.rotate(n),this.__originalRotate(n)},i.clip=function(n){e.clip(n),this.__originalClip(n)},i.moveTo=function(t,n){e.moveTo(t,n),this.__originalMoveTo(t,n)},i.lineTo=function(t,n){e.lineTo(t,n),this.__originalLineTo(t,n)},i.bezierCurveTo=function(t,n,r,o,l,c){e.bezierCurveTo(t,n,r,o,l,c),this.__originalBezierCurveTo(t,n,r,o,l,c)},i.rect=function(t,n,r,o){e.rect(t,n,r,o),this.__originalRect(t,n,r,o)},i.closePath=function(){e.closePath(),this.__originalClosePath()},i.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class A1{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,n){let r;return this.cache[e]!==void 0?(r=this.cache[e],this.canvasFactory.reset(r,t,n)):(r=this.canvasFactory.create(t,n),this.cache[e]=r),r}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function bl(i,e,t,n,r,o,l,c,d,f){const[p,g,y,v,x,_]=Xe(i);if(g===0&&y===0){const E=l*p+x,P=Math.round(E),R=c*v+_,M=Math.round(R),D=(l+d)*p+x,O=Math.abs(Math.round(D)-P)||1,H=(c+f)*v+_,U=Math.abs(Math.round(H)-M)||1;return i.setTransform(Math.sign(p),0,0,Math.sign(v),P,M),i.drawImage(e,t,n,r,o,0,0,O,U),i.setTransform(p,g,y,v,x,_),[O,U]}if(p===0&&v===0){const E=c*y+x,P=Math.round(E),R=l*g+_,M=Math.round(R),D=(c+f)*y+x,O=Math.abs(Math.round(D)-P)||1,H=(l+d)*g+_,U=Math.abs(Math.round(H)-M)||1;return i.setTransform(0,Math.sign(g),Math.sign(y),0,P,M),i.drawImage(e,t,n,r,o,0,0,U,O),i.setTransform(p,g,y,v,x,_),[U,O]}i.drawImage(e,t,n,r,o,l,c,d,f);const A=Math.hypot(p,g),C=Math.hypot(y,v);return[A*d,C*f]}function C1(i){const{width:e,height:t}=i;if(e>Um||t>Um)return null;const n=1e3,r=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),o=e+1;let l=new Uint8Array(o*(t+1)),c,d,f;const p=e+7&-8;let g=new Uint8Array(p*t),y=0;for(const C of i.data){let E=128;for(;E>0;)g[y++]=C&E?0:255,E>>=1}let v=0;for(y=0,g[y]!==0&&(l[0]=1,++v),d=1;d<e;d++)g[y]!==g[y+1]&&(l[d]=g[y]?2:1,++v),y++;for(g[y]!==0&&(l[d]=2,++v),c=1;c<t;c++){y=c*p,f=c*o,g[y-p]!==g[y]&&(l[f]=g[y]?1:8,++v);let C=(g[y]?4:0)+(g[y-p]?8:0);for(d=1;d<e;d++)C=(C>>2)+(g[y+1]?4:0)+(g[y-p+1]?8:0),r[C]&&(l[f+d]=r[C],++v),y++;if(g[y-p]!==g[y]&&(l[f+d]=g[y]?2:4,++v),v>n)return null}for(y=p*(t-1),f=c*o,g[y]!==0&&(l[f]=8,++v),d=1;d<e;d++)g[y]!==g[y+1]&&(l[f+d]=g[y]?4:8,++v),y++;if(g[y]!==0&&(l[f+d]=4,++v),v>n)return null;const x=new Int32Array([0,o,-1,0,-o,0,0,0,1]),_=new Path2D;for(c=0;v&&c<=t;c++){let C=c*o;const E=C+e;for(;C<E&&!l[C];)C++;if(C===E)continue;_.moveTo(C%o,c);const P=C;let R=l[C];do{const M=x[R];do C+=M;while(!l[C]);const D=l[C];D!==5&&D!==10?(R=D,l[C]=0):(R=D&51*R>>4,l[C]&=R>>2|R<<2),_.lineTo(C%o,C/o|0),l[C]||--v}while(P!==C);--c}return g=null,l=null,function(C){C.save(),C.scale(1/e,-1/t),C.translate(0,-t),C.fill(_),C.beginPath(),C.restore()}}class Wm{constructor(e,t){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=uy,this.textMatrixScale=1,this.fontMatrix=rh,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=Dt.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.patternStroke=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,e,t])}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e}setCurrentPoint(e,t){this.x=e,this.y=t}updatePathMinMax(e,t,n){[t,n]=de.applyTransform([t,n],e),this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,n),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,n)}updateRectMinMax(e,t){const n=de.applyTransform(t,e),r=de.applyTransform(t.slice(2),e),o=de.applyTransform([t[0],t[3]],e),l=de.applyTransform([t[2],t[1]],e);this.minX=Math.min(this.minX,n[0],r[0],o[0],l[0]),this.minY=Math.min(this.minY,n[1],r[1],o[1],l[1]),this.maxX=Math.max(this.maxX,n[0],r[0],o[0],l[0]),this.maxY=Math.max(this.maxY,n[1],r[1],o[1],l[1])}updateScalingPathMinMax(e,t){de.scaleMinMax(e,t),this.minX=Math.min(this.minX,t[0]),this.minY=Math.min(this.minY,t[1]),this.maxX=Math.max(this.maxX,t[2]),this.maxY=Math.max(this.maxY,t[3])}updateCurvePathMinMax(e,t,n,r,o,l,c,d,f,p){const g=de.bezierBoundingBox(t,n,r,o,l,c,d,f,p);p||this.updateRectMinMax(e,g)}getPathBoundingBox(e=Ot.FILL,t=null){const n=[this.minX,this.minY,this.maxX,this.maxY];if(e===Ot.STROKE){t||Ue("Stroke bounding box must include transform.");const r=de.singularValueDecompose2dScale(t),o=r[0]*this.lineWidth/2,l=r[1]*this.lineWidth/2;n[0]-=o,n[1]-=l,n[2]+=o,n[3]+=l}return n}updateClipFromPath(){const e=de.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(e){this.clipBox=e,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(e=Ot.FILL,t=null){return de.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function Vm(i,e){if(e instanceof ImageData){i.putImageData(e,0,0);return}const t=e.height,n=e.width,r=t%sn,o=(t-r)/sn,l=r===0?o:o+1,c=i.createImageData(n,sn);let d=0,f;const p=e.data,g=c.data;let y,v,x,_;if(e.kind===Dl.GRAYSCALE_1BPP){const A=p.byteLength,C=new Uint32Array(g.buffer,0,g.byteLength>>2),E=C.length,P=n+7>>3,R=4294967295,M=Wt.isLittleEndian?4278190080:255;for(y=0;y<l;y++){for(x=y<o?sn:r,f=0,v=0;v<x;v++){const D=A-d;let O=0;const H=D>P?n:D*8-7,U=H&-8;let K=0,V=0;for(;O<U;O+=8)V=p[d++],C[f++]=V&128?R:M,C[f++]=V&64?R:M,C[f++]=V&32?R:M,C[f++]=V&16?R:M,C[f++]=V&8?R:M,C[f++]=V&4?R:M,C[f++]=V&2?R:M,C[f++]=V&1?R:M;for(;O<H;O++)K===0&&(V=p[d++],K=128),C[f++]=V&K?R:M,K>>=1}for(;f<E;)C[f++]=0;i.putImageData(c,0,y*sn)}}else if(e.kind===Dl.RGBA_32BPP){for(v=0,_=n*sn*4,y=0;y<o;y++)g.set(p.subarray(d,d+_)),d+=_,i.putImageData(c,0,v),v+=sn;y<l&&(_=n*r*4,g.set(p.subarray(d,d+_)),i.putImageData(c,0,v))}else if(e.kind===Dl.RGB_24BPP)for(x=sn,_=n*x,y=0;y<l;y++){for(y>=o&&(x=r,_=n*x),f=0,v=_;v--;)g[f++]=p[d++],g[f++]=p[d++],g[f++]=p[d++],g[f++]=255;i.putImageData(c,0,y*sn)}else throw new Error(`bad image kind: ${e.kind}`)}function Gm(i,e){if(e.bitmap){i.drawImage(e.bitmap,0,0);return}const t=e.height,n=e.width,r=t%sn,o=(t-r)/sn,l=r===0?o:o+1,c=i.createImageData(n,sn);let d=0;const f=e.data,p=c.data;for(let g=0;g<l;g++){const y=g<o?sn:r;({srcPos:d}=x1({src:f,srcPos:d,dest:p,width:n,height:y,nonBlackColor:0})),i.putImageData(c,0,g*sn)}}function ma(i,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of t)i[n]!==void 0&&(e[n]=i[n]);i.setLineDash!==void 0&&(e.setLineDash(i.getLineDash()),e.lineDashOffset=i.lineDashOffset)}function wl(i){if(i.strokeStyle=i.fillStyle="#000000",i.fillRule="nonzero",i.globalAlpha=1,i.lineWidth=1,i.lineCap="butt",i.lineJoin="miter",i.miterLimit=10,i.globalCompositeOperation="source-over",i.font="10px sans-serif",i.setLineDash!==void 0&&(i.setLineDash([]),i.lineDashOffset=0),!Ft){const{filter:e}=i;e!=="none"&&e!==""&&(i.filter="none")}}function qm(i,e){if(e)return!0;const t=de.singularValueDecompose2dScale(i);t[0]=Math.fround(t[0]),t[1]=Math.fround(t[1]);const n=Math.fround((globalThis.devicePixelRatio||1)*vi.PDF_TO_CSS_UNITS);return t[0]<=n&&t[1]<=n}const E1=["butt","round","square"],k1=["miter","round","bevel"],R1={},Xm={};class mi{constructor(e,t,n,r,o,{optionalContentConfig:l,markedContentStack:c=null},d,f){this.ctx=e,this.current=new Wm(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=n,this.canvasFactory=r,this.filterFactory=o,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=c||[],this.optionalContentConfig=l,this.cachedCanvases=new A1(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=d,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=f,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:n=!1,background:r=null}){const o=this.ctx.canvas.width,l=this.ctx.canvas.height,c=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,o,l),this.ctx.fillStyle=c,n){const d=this.cachedCanvases.getCanvas("transparent",o,l);this.compositeCtx=this.ctx,this.transparentCanvas=d.canvas,this.ctx=d.context,this.ctx.save(),this.ctx.transform(...Xe(this.compositeCtx))}this.ctx.save(),wl(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=Xe(this.ctx)}executeOperatorList(e,t,n,r){const o=e.argsArray,l=e.fnArray;let c=t||0;const d=o.length;if(d===c)return c;const f=d-c>Hm&&typeof n=="function",p=f?Date.now()+_1:0;let g=0;const y=this.commonObjs,v=this.objs;let x;for(;;){if(r!==void 0&&c===r.nextBreakPoint)return r.breakIt(c,n),c;if(x=l[c],x!==Gn.dependency)this[x].apply(this,o[c]);else for(const _ of o[c]){const A=_.startsWith("g_")?y:v;if(!A.has(_))return A.get(_,n),c}if(c++,c===d)return c;if(f&&++g>Hm){if(Date.now()>p)return n(),c;g=0}}}#e(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#e(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),this.#t()}#t(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}}_scaleImage(e,t){const n=e.width??e.displayWidth,r=e.height??e.displayHeight;let o=Math.max(Math.hypot(t[0],t[1]),1),l=Math.max(Math.hypot(t[2],t[3]),1),c=n,d=r,f="prescale1",p,g;for(;o>2&&c>1||l>2&&d>1;){let y=c,v=d;o>2&&c>1&&(y=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c/2),o/=c/y),l>2&&d>1&&(v=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d)/2,l/=d/v),p=this.cachedCanvases.getCanvas(f,y,v),g=p.context,g.clearRect(0,0,y,v),g.drawImage(e,0,0,c,d,0,0,y,v),e=p.canvas,c=y,d=v,f=f==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:c,paintHeight:d}}_createMaskCanvas(e){const t=this.ctx,{width:n,height:r}=e,o=this.current.fillColor,l=this.current.patternFill,c=Xe(t);let d,f,p,g;if((e.bitmap||e.data)&&e.count>1){const H=e.bitmap||e.data.buffer;f=JSON.stringify(l?c:[c.slice(0,4),o]),d=this._cachedBitmapsMap.get(H),d||(d=new Map,this._cachedBitmapsMap.set(H,d));const U=d.get(f);if(U&&!l){const K=Math.round(Math.min(c[0],c[2])+c[4]),V=Math.round(Math.min(c[1],c[3])+c[5]);return{canvas:U,offsetX:K,offsetY:V}}p=U}p||(g=this.cachedCanvases.getCanvas("maskCanvas",n,r),Gm(g.context,e));let y=de.transform(c,[1/n,0,0,-1/r,0,0]);y=de.transform(y,[1,0,0,1,0,-r]);const[v,x,_,A]=de.getAxialAlignedBoundingBox([0,0,n,r],y),C=Math.round(_-v)||1,E=Math.round(A-x)||1,P=this.cachedCanvases.getCanvas("fillCanvas",C,E),R=P.context,M=v,D=x;R.translate(-M,-D),R.transform(...y),p||(p=this._scaleImage(g.canvas,as(R)),p=p.img,d&&l&&d.set(f,p)),R.imageSmoothingEnabled=qm(Xe(R),e.interpolate),bl(R,p,0,0,p.width,p.height,0,0,n,r),R.globalCompositeOperation="source-in";const O=de.transform(as(R),[1,0,0,1,-M,-D]);return R.fillStyle=l?o.getPattern(t,this,O,Ot.FILL):o,R.fillRect(0,0,n,r),d&&!l&&(this.cachedCanvases.delete("fillCanvas"),d.set(f,P.canvas)),{canvas:P.canvas,offsetX:Math.round(M),offsetY:Math.round(D)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=E1[e]}setLineJoin(e){this.ctx.lineJoin=k1[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const n=this.ctx;n.setLineDash!==void 0&&(n.setLineDash(e),n.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,n]of e)switch(t){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n[0],n[1]);break;case"CA":this.current.strokeAlpha=n;break;case"ca":this.current.fillAlpha=n,this.ctx.globalAlpha=n;break;case"BM":this.ctx.globalCompositeOperation=n;break;case"SMask":this.current.activeSMask=n?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(n);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,n="smaskGroupAt"+this.groupLevel,r=this.cachedCanvases.getCanvas(n,e,t);this.suspendedCtx=this.ctx,this.ctx=r.context;const o=this.ctx;o.setTransform(...Xe(this.suspendedCtx)),ma(this.suspendedCtx,o),S1(o,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),ma(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,n,r){const o=r[0],l=r[1],c=r[2]-o,d=r[3]-l;c===0||d===0||(this.genericComposeSMask(t.context,n,c,d,t.subtype,t.backdrop,t.transferMap,o,l,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(n.canvas,0,0),e.restore())}genericComposeSMask(e,t,n,r,o,l,c,d,f,p,g){let y=e.canvas,v=d-p,x=f-g;if(l){const A=de.makeHexColor(...l);if(v<0||x<0||v+n>y.width||x+r>y.height){const C=this.cachedCanvases.getCanvas("maskExtension",n,r),E=C.context;E.drawImage(y,-v,-x),E.globalCompositeOperation="destination-atop",E.fillStyle=A,E.fillRect(0,0,n,r),E.globalCompositeOperation="source-over",y=C.canvas,v=x=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const C=new Path2D;C.rect(v,x,n,r),e.clip(C),e.globalCompositeOperation="destination-atop",e.fillStyle=A,e.fillRect(v,x,n,r),e.restore()}}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),o==="Alpha"&&c?t.filter=this.filterFactory.addAlphaFilter(c):o==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(c));const _=new Path2D;_.rect(d,f,n,r),t.clip(_),t.globalCompositeOperation="destination-in",t.drawImage(y,v,x,n,r,d,f,n,r),t.restore()}save(){this.inSMaskMode?(ma(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),ma(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(e,t,n,r,o,l){this.ctx.transform(e,t,n,r,o,l),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,n){const r=this.ctx,o=this.current;let l=o.x,c=o.y,d,f;const p=Xe(r),g=p[0]===0&&p[3]===0||p[1]===0&&p[2]===0,y=g?n.slice(0):null;for(let v=0,x=0,_=e.length;v<_;v++)switch(e[v]|0){case Gn.rectangle:l=t[x++],c=t[x++];const A=t[x++],C=t[x++],E=l+A,P=c+C;r.moveTo(l,c),A===0||C===0?r.lineTo(E,P):(r.lineTo(E,c),r.lineTo(E,P),r.lineTo(l,P)),g||o.updateRectMinMax(p,[l,c,E,P]),r.closePath();break;case Gn.moveTo:l=t[x++],c=t[x++],r.moveTo(l,c),g||o.updatePathMinMax(p,l,c);break;case Gn.lineTo:l=t[x++],c=t[x++],r.lineTo(l,c),g||o.updatePathMinMax(p,l,c);break;case Gn.curveTo:d=l,f=c,l=t[x+4],c=t[x+5],r.bezierCurveTo(t[x],t[x+1],t[x+2],t[x+3],l,c),o.updateCurvePathMinMax(p,d,f,t[x],t[x+1],t[x+2],t[x+3],l,c,y),x+=6;break;case Gn.curveTo2:d=l,f=c,r.bezierCurveTo(l,c,t[x],t[x+1],t[x+2],t[x+3]),o.updateCurvePathMinMax(p,d,f,l,c,t[x],t[x+1],t[x+2],t[x+3],y),l=t[x+2],c=t[x+3],x+=4;break;case Gn.curveTo3:d=l,f=c,l=t[x+2],c=t[x+3],r.bezierCurveTo(t[x],t[x+1],l,c,l,c),o.updateCurvePathMinMax(p,d,f,t[x],t[x+1],l,c,l,c,y),x+=4;break;case Gn.closePath:r.closePath();break}g&&o.updateScalingPathMinMax(p,y),o.setCurrentPoint(l,c)}closePath(){this.ctx.closePath()}stroke(e=!0){const t=this.ctx,n=this.current.strokeColor;t.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof n=="object"&&n?.getPattern?(t.save(),t.strokeStyle=n.getPattern(t,this,as(t),Ot.STROKE),this.rescaleAndStroke(!1),t.restore()):this.rescaleAndStroke(!0)),e&&this.consumePath(this.current.getClippedPathBoundingBox()),t.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(e=!0){const t=this.ctx,n=this.current.fillColor,r=this.current.patternFill;let o=!1;r&&(t.save(),t.fillStyle=n.getPattern(t,this,as(t),Ot.FILL),o=!0);const l=this.current.getClippedPathBoundingBox();this.contentVisible&&l!==null&&(this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill()),o&&t.restore(),e&&this.consumePath(l)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=R1}eoClip(){this.pendingClip=Xm}beginText(){this.current.textMatrix=uy,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(e===void 0){t.beginPath();return}const n=new Path2D,r=t.getTransform().invertSelf();for(const{transform:o,x:l,y:c,fontSize:d,path:f}of e)n.addPath(f,new DOMMatrix(o).preMultiplySelf(r).translate(l,c).scale(d,-d));t.clip(n),t.beginPath(),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){const n=this.commonObjs.get(e),r=this.current;if(!n)throw new Error(`Can't find font for ${e}`);if(r.fontMatrix=n.fontMatrix||rh,(r.fontMatrix[0]===0||r.fontMatrix[3]===0)&&Ne("Invalid font matrix for font "+e),t<0?(t=-t,r.fontDirection=-1):r.fontDirection=1,this.current.font=n,this.current.fontSize=t,n.isType3Font)return;const o=n.loadedName||"sans-serif",l=n.systemFontInfo?.css||`"${o}", ${n.fallbackName}`;let c="normal";n.black?c="900":n.bold&&(c="bold");const d=n.italic?"italic":"normal";let f=t;t<zm?f=zm:t>Bm&&(f=Bm),this.current.fontSizeScale=t/f,this.ctx.font=`${d} ${c} ${f}px ${l}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e,t,n,r,o,l){this.current.textMatrix=[e,t,n,r,o,l],this.current.textMatrixScale=Math.hypot(e,t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}#n(e,t,n){const r=new Path2D;return r.addPath(e,new DOMMatrix(n).invertSelf().multiplySelf(t)),r}paintChar(e,t,n,r,o){const l=this.ctx,c=this.current,d=c.font,f=c.textRenderingMode,p=c.fontSize/c.fontSizeScale,g=f&Dt.FILL_STROKE_MASK,y=!!(f&Dt.ADD_TO_PATH_FLAG),v=c.patternFill&&!d.missingFile,x=c.patternStroke&&!d.missingFile;let _;if((d.disableFontFace||y||v||x)&&(_=d.getPathGenerator(this.commonObjs,e)),d.disableFontFace||v||x){if(l.save(),l.translate(t,n),l.scale(p,-p),g===Dt.FILL||g===Dt.FILL_STROKE)if(r){const A=l.getTransform();l.setTransform(...r),l.fill(this.#n(_,A,r))}else l.fill(_);if(g===Dt.STROKE||g===Dt.FILL_STROKE)if(o){const A=l.getTransform();l.setTransform(...o),l.stroke(this.#n(_,A,o))}else l.lineWidth/=p,l.stroke(_);l.restore()}else(g===Dt.FILL||g===Dt.FILL_STROKE)&&l.fillText(e,t,n),(g===Dt.STROKE||g===Dt.FILL_STROKE)&&l.strokeText(e,t,n);y&&(this.pendingTextPaths||=[]).push({transform:Xe(l),x:t,y:n,fontSize:p,path:_})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let n=!1;for(let r=3;r<t.length;r+=4)if(t[r]>0&&t[r]<255){n=!0;break}return Me(this,"isFontSubpixelAAEnabled",n)}showText(e){const t=this.current,n=t.font;if(n.isType3Font)return this.showType3Text(e);const r=t.fontSize;if(r===0)return;const o=this.ctx,l=t.fontSizeScale,c=t.charSpacing,d=t.wordSpacing,f=t.fontDirection,p=t.textHScale*f,g=e.length,y=n.vertical,v=y?1:-1,x=n.defaultVMetrics,_=r*t.fontMatrix[0],A=t.textRenderingMode===Dt.FILL&&!n.disableFontFace&&!t.patternFill;o.save(),o.transform(...t.textMatrix),o.translate(t.x,t.y+t.textRise),f>0?o.scale(p,-1):o.scale(p,1);let C,E;if(t.patternFill){o.save();const O=t.fillColor.getPattern(o,this,as(o),Ot.FILL);C=Xe(o),o.restore(),o.fillStyle=O}if(t.patternStroke){o.save();const O=t.strokeColor.getPattern(o,this,as(o),Ot.STROKE);E=Xe(o),o.restore(),o.strokeStyle=O}let P=t.lineWidth;const R=t.textMatrixScale;if(R===0||P===0){const O=t.textRenderingMode&Dt.FILL_STROKE_MASK;(O===Dt.STROKE||O===Dt.FILL_STROKE)&&(P=this.getSinglePixelWidth())}else P/=R;if(l!==1&&(o.scale(l,l),P/=l),o.lineWidth=P,n.isInvalidPDFjsFont){const O=[];let H=0;for(const U of e)O.push(U.unicode),H+=U.width;o.fillText(O.join(""),0,0),t.x+=H*_*p,o.restore(),this.compose();return}let M=0,D;for(D=0;D<g;++D){const O=e[D];if(typeof O=="number"){M+=v*O*r/1e3;continue}let H=!1;const U=(O.isSpace?d:0)+c,K=O.fontChar,V=O.accent;let fe,we,be=O.width;if(y){const Z=O.vmetric||x,J=-(O.vmetric?Z[1]:be*.5)*_,Y=Z[2]*_;be=Z?-Z[0]:be,fe=J/l,we=(M+Y)/l}else fe=M/l,we=0;if(n.remeasure&&be>0){const Z=o.measureText(K).width*1e3/r*l;if(be<Z&&this.isFontSubpixelAAEnabled){const J=be/Z;H=!0,o.save(),o.scale(J,1),fe/=J}else be!==Z&&(fe+=(be-Z)/2e3*r/l)}if(this.contentVisible&&(O.isInFont||n.missingFile)){if(A&&!V)o.fillText(K,fe,we);else if(this.paintChar(K,fe,we,C,E),V){const Z=fe+r*V.offset.x/l,J=we-r*V.offset.y/l;this.paintChar(V.fontChar,Z,J,C,E)}}const De=y?be*_-U*f:be*_+U*f;M+=De,H&&o.restore()}y?t.y-=M:t.x+=M*p,o.restore(),this.compose()}showType3Text(e){const t=this.ctx,n=this.current,r=n.font,o=n.fontSize,l=n.fontDirection,c=r.vertical?1:-1,d=n.charSpacing,f=n.wordSpacing,p=n.textHScale*l,g=n.fontMatrix||rh,y=e.length,v=n.textRenderingMode===Dt.INVISIBLE;let x,_,A,C;if(!(v||o===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),t.transform(...n.textMatrix),t.translate(n.x,n.y),t.scale(p,l),x=0;x<y;++x){if(_=e[x],typeof _=="number"){C=c*_*o/1e3,this.ctx.translate(C,0),n.x+=C*p;continue}const E=(_.isSpace?f:0)+d,P=r.charProcOperatorList[_.operatorListId];if(!P){Ne(`Type3 character "${_.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=_,this.save(),t.scale(o,o),t.transform(...g),this.executeOperatorList(P),this.restore()),A=de.applyTransform([_.width,0],g)[0]*o+E,t.translate(A,0),n.x+=A*p}t.restore(),this.processingType3=null}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,n,r,o,l){this.ctx.rect(n,r,o-n,l-r),this.ctx.clip(),this.endPath()}getColorN_Pattern(e){let t;if(e[0]==="TilingPattern"){const n=e[1],r=this.baseTransform||Xe(this.ctx),o={createCanvasGraphics:l=>new mi(l,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new Xh(e,n,this.ctx,o,r)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e,t,n){this.ctx.strokeStyle=this.current.strokeColor=de.makeHexColor(e,t,n),this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,t,n){this.ctx.fillStyle=this.current.fillColor=de.makeHexColor(e,t,n),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t=null){let n;return this.cachedPatterns.has(e)?n=this.cachedPatterns.get(e):(n=w1(this.getObject(e)),this.cachedPatterns.set(e,n)),t&&(n.matrix=t),n}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const n=this._getPattern(e);t.fillStyle=n.getPattern(t,this,as(t),Ot.SHADING);const r=as(t);if(r){const{width:o,height:l}=t.canvas,[c,d,f,p]=de.getAxialAlignedBoundingBox([0,0,o,l],r);this.ctx.fillRect(c,d,f-c,p-d)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){Ue("Should not call beginInlineImage")}beginImageData(){Ue("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=Xe(this.ctx),t)){const n=t[2]-t[0],r=t[3]-t[1];this.ctx.rect(t[0],t[1],n,r),this.current.updateRectMinMax(Xe(this.ctx),t),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||mc("TODO: Support non-isolated groups."),e.knockout&&Ne("Knockout groups not supported.");const n=Xe(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let r=de.getAxialAlignedBoundingBox(e.bbox,Xe(t));const o=[0,0,t.canvas.width,t.canvas.height];r=de.intersect(r,o)||[0,0,0,0];const l=Math.floor(r[0]),c=Math.floor(r[1]),d=Math.max(Math.ceil(r[2])-l,1),f=Math.max(Math.ceil(r[3])-c,1);this.current.startNewPathAndClipBox([0,0,d,f]);let p="groupAt"+this.groupLevel;e.smask&&(p+="_smask_"+this.smaskCounter++%2);const g=this.cachedCanvases.getCanvas(p,d,f),y=g.context;y.translate(-l,-c),y.transform(...n),e.smask?this.smaskStack.push({canvas:g.canvas,context:y,offsetX:l,offsetY:c,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(l,c),t.save()),ma(t,y),this.ctx=y,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,n=this.groupStack.pop();if(this.ctx=n,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const r=Xe(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...r);const o=de.getAxialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],r);this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(o)}}beginAnnotation(e,t,n,r,o){if(this.#e(),wl(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){const l=t[2]-t[0],c=t[3]-t[1];if(o&&this.annotationCanvasMap){n=n.slice(),n[4]-=t[0],n[5]-=t[1],t=t.slice(),t[0]=t[1]=0,t[2]=l,t[3]=c;const[d,f]=de.singularValueDecompose2dScale(Xe(this.ctx)),{viewportScale:p}=this,g=Math.ceil(l*this.outputScaleX*p),y=Math.ceil(c*this.outputScaleY*p);this.annotationCanvas=this.canvasFactory.create(g,y);const{canvas:v,context:x}=this.annotationCanvas;this.annotationCanvasMap.set(e,v),this.annotationCanvas.savedCtx=this.ctx,this.ctx=x,this.ctx.save(),this.ctx.setTransform(d,0,0,-f,0,c*f),wl(this.ctx)}else wl(this.ctx),this.endPath(),this.ctx.rect(t[0],t[1],l,c),this.ctx.clip(),this.ctx.beginPath()}this.current=new Wm(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...n),this.transform(...r)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#t(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;e=this.getObject(e.data,e),e.count=t;const n=this.ctx,r=this.processingType3;if(r&&(r.compiled===void 0&&(r.compiled=C1(e)),r.compiled)){r.compiled(n);return}const o=this._createMaskCanvas(e),l=o.canvas;n.save(),n.setTransform(1,0,0,1,0,0),n.drawImage(l,o.offsetX,o.offsetY),n.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,n=0,r=0,o,l){if(!this.contentVisible)return;e=this.getObject(e.data,e);const c=this.ctx;c.save();const d=Xe(c);c.transform(t,n,r,o,0,0);const f=this._createMaskCanvas(e);c.setTransform(1,0,0,1,f.offsetX-d[4],f.offsetY-d[5]);for(let p=0,g=l.length;p<g;p+=2){const y=de.transform(d,[t,n,r,o,l[p],l[p+1]]),[v,x]=de.applyTransform([0,0],y);c.drawImage(f.canvas,v,x)}c.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,n=this.current.fillColor,r=this.current.patternFill;for(const o of e){const{data:l,width:c,height:d,transform:f}=o,p=this.cachedCanvases.getCanvas("maskCanvas",c,d),g=p.context;g.save();const y=this.getObject(l,o);Gm(g,y),g.globalCompositeOperation="source-in",g.fillStyle=r?n.getPattern(g,this,as(t),Ot.FILL):n,g.fillRect(0,0,c,d),g.restore(),t.save(),t.transform(...f),t.scale(1,-1),bl(t,p.canvas,0,0,c,d,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);if(!t){Ne("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t)}paintImageXObjectRepeat(e,t,n,r){if(!this.contentVisible)return;const o=this.getObject(e);if(!o){Ne("Dependent image isn't ready yet");return}const l=o.width,c=o.height,d=[];for(let f=0,p=r.length;f<p;f+=2)d.push({transform:[t,0,0,n,r[f],r[f+1]],x:0,y:0,w:l,h:c});this.paintInlineImageXObjectGroup(o,d)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:n,height:r}=e,o=this.cachedCanvases.getCanvas("inlineImage",n,r),l=o.context;return l.filter=this.current.transferMaps,l.drawImage(t,0,0),l.filter="none",o.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,n=e.height,r=this.ctx;if(this.save(),!Ft){const{filter:c}=r;c!=="none"&&c!==""&&(r.filter="none")}r.scale(1/t,-1/n);let o;if(e.bitmap)o=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)o=e;else{const d=this.cachedCanvases.getCanvas("inlineImage",t,n).context;Vm(d,e),o=this.applyTransferMapsToCanvas(d)}const l=this._scaleImage(o,as(r));r.imageSmoothingEnabled=qm(Xe(r),e.interpolate),bl(r,l.img,0,0,l.paintWidth,l.paintHeight,0,-n,t,n),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const n=this.ctx;let r;if(e.bitmap)r=e.bitmap;else{const o=e.width,l=e.height,d=this.cachedCanvases.getCanvas("inlineImage",o,l).context;Vm(d,e),r=this.applyTransferMapsToCanvas(d)}for(const o of t)n.save(),n.transform(...o.transform),n.scale(1,-1),bl(n,r,o.x,o.y,o.w,o.h,0,-1,1,1),n.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e){const t=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const n=this.ctx;this.pendingClip&&(t||(this.pendingClip===Xm?n.clip("evenodd"):n.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),n.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=Xe(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),n=Math.hypot(e[0],e[2]),r=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(n,r)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:n,c:r,d:o}=this.ctx.getTransform();let l,c;if(n===0&&r===0){const d=Math.abs(t),f=Math.abs(o);if(d===f)if(e===0)l=c=1/d;else{const p=d*e;l=c=p<1?1/p:1}else if(e===0)l=1/d,c=1/f;else{const p=d*e,g=f*e;l=p<1?1/p:1,c=g<1?1/g:1}}else{const d=Math.abs(t*o-n*r),f=Math.hypot(t,n),p=Math.hypot(r,o);if(e===0)l=p/d,c=f/d;else{const g=e*d;l=p>g?p/g:1,c=f>g?f/g:1}}this._cachedScaleForStroking[0]=l,this._cachedScaleForStroking[1]=c}return this._cachedScaleForStroking}rescaleAndStroke(e){const{ctx:t}=this,{lineWidth:n}=this.current,[r,o]=this.getScaleForStroking();if(t.lineWidth=n||1,r===1&&o===1){t.stroke();return}const l=t.getLineDash();if(e&&t.save(),t.scale(r,o),l.length>0){const c=Math.max(r,o);t.setLineDash(l.map(d=>d/c)),t.lineDashOffset/=c}t.stroke(),e&&t.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}}for(const i in Gn)mi.prototype[i]!==void 0&&(mi.prototype[Gn[i]]=mi.prototype[i]);class La{static#e=null;static#t="";static get workerPort(){return this.#e}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");this.#e=e}static get workerSrc(){return this.#t}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");this.#t=e}}class T1{#e;#t;constructor({parsedData:e,rawData:t}){this.#e=e,this.#t=t}getRaw(){return this.#t}get(e){return this.#e.get(e)??null}getAll(){return $h(this.#e)}has(e){return this.#e.has(e)}}const ui=Symbol("INTERNAL");class P1{#e=!1;#t=!1;#n=!1;#s=!0;constructor(e,{name:t,intent:n,usage:r,rbGroups:o}){this.#e=!!(e&mn.DISPLAY),this.#t=!!(e&mn.PRINT),this.name=t,this.intent=n,this.usage=r,this.rbGroups=o}get visible(){if(this.#n)return this.#s;if(!this.#s)return!1;const{print:e,view:t}=this.usage;return this.#e?t?.viewState!=="OFF":this.#t?e?.printState!=="OFF":!0}_setVisible(e,t,n=!1){e!==ui&&Ue("Internal method `_setVisible` called."),this.#n=n,this.#s=t}}class N1{#e=null;#t=new Map;#n=null;#s=null;constructor(e,t=mn.DISPLAY){if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,this.#s=e.order;for(const n of e.groups)this.#t.set(n.id,new P1(t,n));if(e.baseState==="OFF")for(const n of this.#t.values())n._setVisible(ui,!1);for(const n of e.on)this.#t.get(n)._setVisible(ui,!0);for(const n of e.off)this.#t.get(n)._setVisible(ui,!1);this.#n=this.getHash()}}#i(e){const t=e.length;if(t<2)return!0;const n=e[0];for(let r=1;r<t;r++){const o=e[r];let l;if(Array.isArray(o))l=this.#i(o);else if(this.#t.has(o))l=this.#t.get(o).visible;else return Ne(`Optional content group not found: ${o}`),!0;switch(n){case"And":if(!l)return!1;break;case"Or":if(l)return!0;break;case"Not":return!l;default:return!0}}return n==="And"}isVisible(e){if(this.#t.size===0)return!0;if(!e)return mc("Optional content group not defined."),!0;if(e.type==="OCG")return this.#t.has(e.id)?this.#t.get(e.id).visible:(Ne(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return this.#i(e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!this.#t.has(t))return Ne(`Optional content group not found: ${t}`),!0;if(this.#t.get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!this.#t.has(t))return Ne(`Optional content group not found: ${t}`),!0;if(!this.#t.get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!this.#t.has(t))return Ne(`Optional content group not found: ${t}`),!0;if(!this.#t.get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!this.#t.has(t))return Ne(`Optional content group not found: ${t}`),!0;if(this.#t.get(t).visible)return!1}return!0}return Ne(`Unknown optional content policy ${e.policy}.`),!0}return Ne(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,n=!0){const r=this.#t.get(e);if(!r){Ne(`Optional content group not found: ${e}`);return}if(n&&t&&r.rbGroups.length)for(const o of r.rbGroups)for(const l of o)l!==e&&this.#t.get(l)?._setVisible(ui,!1,!0);r._setVisible(ui,!!t,!0),this.#e=null}setOCGState({state:e,preserveRB:t}){let n;for(const r of e){switch(r){case"ON":case"OFF":case"Toggle":n=r;continue}const o=this.#t.get(r);if(o)switch(n){case"ON":this.setVisibility(r,!0,t);break;case"OFF":this.setVisibility(r,!1,t);break;case"Toggle":this.setVisibility(r,!o.visible,t);break}}this.#e=null}get hasInitialVisibility(){return this.#n===null||this.getHash()===this.#n}getOrder(){return this.#t.size?this.#s?this.#s.slice():[...this.#t.keys()]:null}getGroups(){return this.#t.size>0?$h(this.#t):null}getGroup(e){return this.#t.get(e)||null}getHash(){if(this.#e!==null)return this.#e;const e=new fy;for(const[t,n]of this.#t)e.update(`${t}:${n.visible}`);return this.#e=e.hexdigest()}}class I1{constructor(e,{disableRange:t=!1,disableStream:n=!1}){ot(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:r,initialData:o,progressiveDone:l,contentDispositionFilename:c}=e;if(this._queuedChunks=[],this._progressiveDone=l,this._contentDispositionFilename=c,o?.length>0){const d=o instanceof Uint8Array&&o.byteLength===o.buffer.byteLength?o.buffer:new Uint8Array(o).buffer;this._queuedChunks.push(d)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!n,this._isRangeSupported=!t,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((d,f)=>{this._onReceiveData({begin:d,chunk:f})}),e.addProgressListener((d,f)=>{this._onProgress({loaded:d,total:f})}),e.addProgressiveReadListener(d=>{this._onReceiveData({chunk:d})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const n=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const r=this._rangeReaders.some(function(o){return o._begin!==e?!1:(o._enqueue(n),!0)});ot(r,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(e){e.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:e.loaded}):this._fullRequestReader?.onProgress?.({loaded:e.loaded,total:e.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){ot(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new M1(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new L1(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(n),n}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeReaders.slice(0))t.cancel(e);this._pdfDataRangeTransport.abort()}}class M1{constructor(e,t,n=!1,r=null){this._stream=e,this._done=n||!1,this._filename=Hh(r)?r:null,this._queuedChunks=t||[],this._loaded=0;for(const o of this._queuedChunks)this._loaded+=o.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class L1{constructor(e,t,n){this._stream=e,this._begin=t,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function D1(i){let e=!0,t=n("filename\\*","i").exec(i);if(t){t=t[1];let p=c(t);return p=unescape(p),p=d(p),p=f(p),o(p)}if(t=l(i),t){const p=f(t);return o(p)}if(t=n("filename","i").exec(i),t){t=t[1];let p=c(t);return p=f(p),o(p)}function n(p,g){return new RegExp("(?:^|;)\\s*"+p+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',g)}function r(p,g){if(p){if(!/^[\x00-\xFF]+$/.test(g))return g;try{const y=new TextDecoder(p,{fatal:!0}),v=yc(g);g=y.decode(v),e=!1}catch{}}return g}function o(p){return e&&/[\x80-\xff]/.test(p)&&(p=r("utf-8",p),e&&(p=r("iso-8859-1",p))),p}function l(p){const g=[];let y;const v=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(y=v.exec(p))!==null;){let[,_,A,C]=y;if(_=parseInt(_,10),_ in g){if(_===0)break;continue}g[_]=[A,C]}const x=[];for(let _=0;_<g.length&&_ in g;++_){let[A,C]=g[_];C=c(C),A&&(C=unescape(C),_===0&&(C=d(C))),x.push(C)}return x.join("")}function c(p){if(p.startsWith('"')){const g=p.slice(1).split('\\"');for(let y=0;y<g.length;++y){const v=g[y].indexOf('"');v!==-1&&(g[y]=g[y].slice(0,v),g.length=y+1),g[y]=g[y].replaceAll(/\\(.)/g,"$1")}p=g.join('"')}return p}function d(p){const g=p.indexOf("'");if(g===-1)return p;const y=p.slice(0,g),x=p.slice(g+1).replace(/^[^']*'/,"");return r(y,x)}function f(p){return!p.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(p)?p:p.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(g,y,v,x){if(v==="q"||v==="Q")return x=x.replaceAll("_"," "),x=x.replaceAll(/=([0-9a-fA-F]{2})/g,function(_,A){return String.fromCharCode(parseInt(A,16))}),r(y,x);try{x=atob(x)}catch{}return r(y,x)})}return""}function _y(i,e){const t=new Headers;if(!i||!e||typeof e!="object")return t;for(const n in e){const r=e[n];r!==void 0&&t.append(n,r)}return t}function xc(i){try{return new URL(i).origin}catch{}return null}function Sy({responseHeaders:i,isHttp:e,rangeChunkSize:t,disableRange:n}){const r={allowRangeRequests:!1,suggestedLength:void 0},o=parseInt(i.get("Content-Length"),10);return!Number.isInteger(o)||(r.suggestedLength=o,o<=2*t)||n||!e||i.get("Accept-Ranges")!=="bytes"||(i.get("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function Ay(i){const e=i.get("Content-Disposition");if(e){let t=D1(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(Hh(t))return t}return null}function _c(i,e){return i===404||i===0&&e.startsWith("file:")?new Ha('Missing PDF "'+e+'".'):new ql(`Unexpected server response (${i}) while retrieving PDF "${e}".`,i)}function Cy(i){return i===200||i===206}function Ey(i,e,t){return{method:"GET",headers:i,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function ky(i){return i instanceof Uint8Array?i.buffer:i instanceof ArrayBuffer?i:(Ne(`getArrayBuffer - unexpected data format: ${i}`),new Uint8Array(i).buffer)}class Km{_responseOrigin=null;constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=_y(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return ot(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new O1(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new F1(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class O1{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const n=new Headers(e.headers),r=t.url;fetch(r,Ey(n,this._withCredentials,this._abortController)).then(o=>{if(e._responseOrigin=xc(o.url),!Cy(o.status))throw _c(o.status,r);this._reader=o.body.getReader(),this._headersCapability.resolve();const l=o.headers,{allowRangeRequests:c,suggestedLength:d}=Sy({responseHeaders:l,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=c,this._contentLength=d||this._contentLength,this._filename=Ay(l),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new ir("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:ky(e),done:!1})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}class F1{constructor(e,t,n){this._stream=e,this._reader=null,this._loaded=0;const r=e.source;this._withCredentials=r.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController;const o=new Headers(e.headers);o.append("Range",`bytes=${t}-${n-1}`);const l=r.url;fetch(l,Ey(o,this._withCredentials,this._abortController)).then(c=>{const d=xc(c.url);if(d!==e._responseOrigin)throw new Error(`Expected range response-origin "${d}" to match "${e._responseOrigin}".`);if(!Cy(c.status))throw _c(c.status,l);this._readCapability.resolve(),this._reader=c.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded}),{value:ky(e),done:!1})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}const Ld=200,Dd=206;function j1(i){const e=i.response;return typeof e!="string"?e:yc(e).buffer}class $1{_responseOrigin=null;constructor({url:e,httpHeaders:t,withCredentials:n}){this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=_y(this.isHttp,t),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,n=this.currXhrId++,r=this.pendingRequests[n]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[o,l]of this.headers)t.setRequestHeader(o,l);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),r.expectedStatus=Dd):r.expectedStatus=Ld,t.responseType="arraybuffer",ot(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,n),t.onprogress=this.onProgress.bind(this,n),r.onHeadersReceived=e.onHeadersReceived,r.onDone=e.onDone,r.onError=e.onError,r.onProgress=e.onProgress,t.send(null),n}onProgress(e,t){const n=this.pendingRequests[e];n&&n.onProgress?.(t)}onStateChange(e,t){const n=this.pendingRequests[e];if(!n)return;const r=n.xhr;if(r.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),r.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],r.status===0&&this.isHttp){n.onError(r.status);return}const o=r.status||Ld;if(!(o===Ld&&n.expectedStatus===Dd)&&o!==n.expectedStatus){n.onError(r.status);return}const c=j1(r);if(o===Dd){const d=r.getResponseHeader("Content-Range"),f=/bytes (\d+)-(\d+)\/(\d+)/.exec(d);f?n.onDone({begin:parseInt(f[1],10),chunk:c}):(Ne('Missing or invalid "Content-Range" header.'),n.onError(0))}else c?n.onDone({begin:0,chunk:c}):n.onError(r.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class z1{constructor(e){this._source=e,this._manager=new $1(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return ot(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new B1(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const n=new H1(this._manager,e,t);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class B1{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=xc(t.responseURL);const n=t.getAllResponseHeaders(),r=new Headers(n?n.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(c=>{const[d,...f]=c.split(": ");return[d,f.join(": ")]}):[]),{allowRangeRequests:o,suggestedLength:l}=Sy({responseHeaders:r,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});o&&(this._isRangeSupported=!0),this._contentLength=l||this._contentLength,this._filename=Ay(r),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=_c(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){this.onProgress?.({loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class H1{constructor(e,t,n){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:n,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){const e=xc(this._manager.getRequestXhr(this._requestId)?.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??=_c(e,this._url);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){this.isStreamingSupported||this.onProgress?.({loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const U1=/^[a-z][a-z0-9\-+.]+:/i;function W1(i){if(U1.test(i))return new URL(i);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(i))}class V1{constructor(e){this.source=e,this.url=W1(e.url),ot(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return ot(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new G1(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new q1(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class G1{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const n=process.getBuiltinModule("fs");n.promises.lstat(this._url).then(r=>{this._contentLength=r.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},r=>{r.code==="ENOENT"&&(r=new Ha(`Missing PDF "${this._url}".`)),this._storedError=r,this._headersCapability.reject(r)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new ir("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class q1{constructor(e,t,n){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const r=e.source;this._isStreamingSupported=!r.disableStream;const o=process.getBuiltinModule("fs");this._setReadableStream(o.createReadStream(this._url,{start:t,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const X1=1e5,tn=30,K1=.8;class Ut{#e=Promise.withResolvers();#t=null;#n=!1;#s=!!globalThis.FontInspector?.enabled;#i=null;#r=null;#l=0;#o=0;#u=null;#c=null;#h=0;#d=0;#f=Object.create(null);#a=[];#p=null;#m=[];#g=new WeakMap;#y=null;static#w=new Map;static#v=new Map;static#x=new WeakMap;static#S=null;static#C=new Set;constructor({textContentSource:e,container:t,viewport:n}){if(e instanceof ReadableStream)this.#p=e;else if(typeof e=="object")this.#p=new ReadableStream({start(d){d.enqueue(e),d.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#t=this.#c=t,this.#d=n.scale*(globalThis.devicePixelRatio||1),this.#h=n.rotation,this.#r={div:null,properties:null,ctx:null};const{pageWidth:r,pageHeight:o,pageX:l,pageY:c}=n.rawDims;this.#y=[1,0,0,-1,-l,c+o],this.#o=r,this.#l=o,Ut.#N(),Nr(t,n),this.#e.promise.finally(()=>{Ut.#C.delete(this),this.#r=null,this.#f=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=Wt.platform;return Me(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{this.#u.read().then(({value:t,done:n})=>{if(n){this.#e.resolve();return}this.#i??=t.lang,Object.assign(this.#f,t.styles),this.#k(t.items),e()},this.#e.reject)};return this.#u=this.#p.getReader(),Ut.#C.add(this),e(),this.#e.promise}update({viewport:e,onBefore:t=null}){const n=e.scale*(globalThis.devicePixelRatio||1),r=e.rotation;if(r!==this.#h&&(t?.(),this.#h=r,Nr(this.#c,{rotation:r})),n!==this.#d){t?.(),this.#d=n;const o={div:null,properties:null,ctx:Ut.#R(this.#i)};for(const l of this.#m)o.properties=this.#g.get(l),o.div=l,this.#_(o)}}cancel(){const e=new ir("TextLayer task cancelled.");this.#u?.cancel(e).catch(()=>{}),this.#u=null,this.#e.reject(e)}get textDivs(){return this.#m}get textContentItemsStr(){return this.#a}#k(e){if(this.#n)return;this.#r.ctx??=Ut.#R(this.#i);const t=this.#m,n=this.#a;for(const r of e){if(t.length>X1){Ne("Ignoring additional textDivs for performance reasons."),this.#n=!0;return}if(r.str===void 0){if(r.type==="beginMarkedContentProps"||r.type==="beginMarkedContent"){const o=this.#t;this.#t=document.createElement("span"),this.#t.classList.add("markedContent"),r.id!==null&&this.#t.setAttribute("id",`${r.id}`),o.append(this.#t)}else r.type==="endMarkedContent"&&(this.#t=this.#t.parentNode);continue}n.push(r.str),this.#T(r)}}#T(e){const t=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};this.#m.push(t);const r=de.transform(this.#y,e.transform);let o=Math.atan2(r[1],r[0]);const l=this.#f[e.fontName];l.vertical&&(o+=Math.PI/2);let c=this.#s&&l.fontSubstitution||l.fontFamily;c=Ut.fontFamilyMap.get(c)||c;const d=Math.hypot(r[2],r[3]),f=d*Ut.#L(c,this.#i);let p,g;o===0?(p=r[4],g=r[5]-f):(p=r[4]+f*Math.sin(o),g=r[5]-f*Math.cos(o));const y="calc(var(--scale-factor)*",v=t.style;this.#t===this.#c?(v.left=`${(100*p/this.#o).toFixed(2)}%`,v.top=`${(100*g/this.#l).toFixed(2)}%`):(v.left=`${y}${p.toFixed(2)}px)`,v.top=`${y}${g.toFixed(2)}px)`),v.fontSize=`${y}${(Ut.#S*d).toFixed(2)}px)`,v.fontFamily=c,n.fontSize=d,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,this.#s&&(t.dataset.fontName=l.fontSubstitutionLoadedName||e.fontName),o!==0&&(n.angle=o*(180/Math.PI));let x=!1;if(e.str.length>1)x=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const _=Math.abs(e.transform[0]),A=Math.abs(e.transform[3]);_!==A&&Math.max(_,A)/Math.min(_,A)>1.5&&(x=!0)}if(x&&(n.canvasWidth=l.vertical?e.height:e.width),this.#g.set(t,n),this.#r.div=t,this.#r.properties=n,this.#_(this.#r),n.hasText&&this.#t.append(t),n.hasEOL){const _=document.createElement("br");_.setAttribute("role","presentation"),this.#t.append(_)}}#_(e){const{div:t,properties:n,ctx:r}=e,{style:o}=t;let l="";if(Ut.#S>1&&(l=`scale(${1/Ut.#S})`),n.canvasWidth!==0&&n.hasText){const{fontFamily:c}=o,{canvasWidth:d,fontSize:f}=n;Ut.#E(r,f*this.#d,c);const{width:p}=r.measureText(t.textContent);p>0&&(l=`scaleX(${d*this.#d/p}) ${l}`)}n.angle!==0&&(l=`rotate(${n.angle}deg) ${l}`),l.length>0&&(o.transform=l)}static cleanup(){if(!(this.#C.size>0)){this.#w.clear();for(const{canvas:e}of this.#v.values())e.remove();this.#v.clear()}}static#R(e=null){let t=this.#v.get(e||="");if(!t){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=e,document.body.append(n),t=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#v.set(e,t),this.#x.set(t,{size:0,family:""})}return t}static#E(e,t,n){const r=this.#x.get(e);t===r.size&&n===r.family||(e.font=`${t}px ${n}`,r.size=t,r.family=n)}static#N(){if(this.#S!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),this.#S=e.getBoundingClientRect().height,e.remove()}static#L(e,t){const n=this.#w.get(e);if(n)return n;const r=this.#R(t);r.canvas.width=r.canvas.height=tn,this.#E(r,tn,e);const o=r.measureText("");let l=o.fontBoundingBoxAscent,c=Math.abs(o.fontBoundingBoxDescent);if(l){const p=l/(l+c);return this.#w.set(e,p),r.canvas.width=r.canvas.height=0,p}r.strokeStyle="red",r.clearRect(0,0,tn,tn),r.strokeText("g",0,0);let d=r.getImageData(0,0,tn,tn).data;c=0;for(let p=d.length-1-3;p>=0;p-=4)if(d[p]>0){c=Math.ceil(p/4/tn);break}r.clearRect(0,0,tn,tn),r.strokeText("A",0,tn),d=r.getImageData(0,0,tn,tn).data,l=0;for(let p=0,g=d.length;p<g;p+=4)if(d[p]>0){l=tn-Math.floor(p/4/tn);break}r.canvas.width=r.canvas.height=0;const f=l?l/(l+c):K1;return this.#w.set(e,f),f}}class Ua{static textContent(e){const t=[],n={items:t,styles:Object.create(null)};function r(o){if(!o)return;let l=null;const c=o.name;if(c==="#text")l=o.value;else if(Ua.shouldBuildText(c))o?.attributes?.textContent?l=o.attributes.textContent:o.value&&(l=o.value);else return;if(l!==null&&t.push({str:l}),!!o.children)for(const d of o.children)r(d)}return r(e),n}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const Y1=65536,Q1=100,J1=5e3,Z1=Ft?f1:u1,eC=Ft?p1:yy,tC=Ft?h1:d1,nC=Ft?g1:wy;function sC(i={}){typeof i=="string"||i instanceof URL?i={url:i}:(i instanceof ArrayBuffer||ArrayBuffer.isView(i))&&(i={data:i});const e=new Kh,{docId:t}=e,n=i.url?rC(i.url):null,r=i.data?iC(i.data):null,o=i.httpHeaders||null,l=i.withCredentials===!0,c=i.password??null,d=i.range instanceof Ry?i.range:null,f=Number.isInteger(i.rangeChunkSize)&&i.rangeChunkSize>0?i.rangeChunkSize:Y1;let p=i.worker instanceof wt?i.worker:null;const g=i.verbosity,y=typeof i.docBaseUrl=="string"&&!bc(i.docBaseUrl)?i.docBaseUrl:null,v=typeof i.cMapUrl=="string"?i.cMapUrl:null,x=i.cMapPacked!==!1,_=i.CMapReaderFactory||eC,A=typeof i.standardFontDataUrl=="string"?i.standardFontDataUrl:null,C=i.StandardFontDataFactory||nC,E=i.stopAtErrors!==!0,P=Number.isInteger(i.maxImageSize)&&i.maxImageSize>-1?i.maxImageSize:-1,R=i.isEvalSupported!==!1,M=typeof i.isOffscreenCanvasSupported=="boolean"?i.isOffscreenCanvasSupported:!Ft,D=typeof i.isImageDecoderSupported=="boolean"?i.isImageDecoderSupported:!Ft&&(Wt.platform.isFirefox||!globalThis.chrome),O=Number.isInteger(i.canvasMaxAreaInBytes)?i.canvasMaxAreaInBytes:-1,H=typeof i.disableFontFace=="boolean"?i.disableFontFace:Ft,U=i.fontExtraProperties===!0,K=i.enableXfa===!0,V=i.ownerDocument||globalThis.document,fe=i.disableRange===!0,we=i.disableStream===!0,be=i.disableAutoFetch===!0,De=i.pdfBug===!0,Z=i.CanvasFactory||Z1,J=i.FilterFactory||tC,Y=i.enableHWA===!0,te=d?d.length:i.length??NaN,ee=typeof i.useSystemFonts=="boolean"?i.useSystemFonts:!Ft&&!H,L=typeof i.useWorkerFetch=="boolean"?i.useWorkerFetch:_===yy&&C===wy&&v&&A&&xa(v,document.baseURI)&&xa(A,document.baseURI),B=null;HA(g);const se={canvasFactory:new Z({ownerDocument:V,enableHWA:Y}),filterFactory:new J({docId:t,ownerDocument:V}),cMapReaderFactory:L?null:new _({baseUrl:v,isCompressed:x}),standardFontDataFactory:L?null:new C({baseUrl:A})};if(!p){const ce={verbosity:g,port:La.workerPort};p=ce.port?wt.fromPort(ce):new wt(ce),e._worker=p}const me={docId:t,apiVersion:"4.10.38",data:r,password:c,disableAutoFetch:be,rangeChunkSize:f,length:te,docBaseUrl:y,enableXfa:K,evaluatorOptions:{maxImageSize:P,disableFontFace:H,ignoreErrors:E,isEvalSupported:R,isOffscreenCanvasSupported:M,isImageDecoderSupported:D,canvasMaxAreaInBytes:O,fontExtraProperties:U,useSystemFonts:ee,cMapUrl:L?v:null,standardFontDataUrl:L?A:null}},ke={disableFontFace:H,fontExtraProperties:U,ownerDocument:V,pdfBug:De,styleElement:B,loadingParams:{disableAutoFetch:be,enableXfa:K}};return p.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(p.destroyed)throw new Error("Worker was destroyed");const ce=p.messageHandler.sendWithPromise("GetDocRequest",me,r?[r.buffer]:null);let pe;if(d)pe=new I1(d,{disableRange:fe,disableStream:we});else if(!r){if(!n)throw new Error("getDocument - no `url` parameter provided.");let Ee;if(Ft)if(xa(n)){if(typeof fetch>"u"||typeof Response>"u"||!("body"in Response.prototype))throw new Error("getDocument - the Fetch API was disabled in Node.js, see `--no-experimental-fetch`.");Ee=Km}else Ee=V1;else Ee=xa(n)?Km:z1;pe=new Ee({url:n,length:te,httpHeaders:o,withCredentials:l,rangeChunkSize:f,disableRange:fe,disableStream:we})}return ce.then(Ee=>{if(e.destroyed)throw new Error("Loading aborted");if(p.destroyed)throw new Error("Worker was destroyed");const Le=new _a(t,Ee,p.port),Re=new cC(Le,e,pe,ke,se);e._transport=Re,Le.send("Ready",null)})}).catch(e._capability.reject),e}function rC(i){if(i instanceof URL)return i.href;try{return new URL(i,window.location).href}catch{if(Ft&&typeof i=="string")return i}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function iC(i){if(Ft&&typeof Buffer<"u"&&i instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength)return i;if(typeof i=="string")return yc(i);if(i instanceof ArrayBuffer||ArrayBuffer.isView(i)||typeof i=="object"&&!isNaN(i?.length))return new Uint8Array(i);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Ym(i){return typeof i=="object"&&Number.isInteger(i?.num)&&i.num>=0&&Number.isInteger(i?.gen)&&i.gen>=0}class Kh{static#e=0;constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${Kh.#e++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(e){throw this._worker?.port&&delete this._worker._pendingDestroy,e}this._transport=null,this._worker?.destroy(),this._worker=null}}class Ry{constructor(e,t,n=!1,r=null){this.length=e,this.initialData=t,this.progressiveDone=n,this.contentDispositionFilename=r,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,t){for(const n of this._rangeListeners)n(e,t)}onDataProgress(e,t){this._readyCapability.promise.then(()=>{for(const n of this._progressListeners)n(e,t)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(const t of this._progressiveReadListeners)t(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,t){Ue("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class aC{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Me(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class oC{#e=null;#t=!1;constructor(e,t,n,r=!1){this._pageIndex=e,this._pageInfo=t,this._transport=n,this._stats=r?new Om:null,this._pdfBug=r,this.commonObjs=n.commonObjs,this.objs=new Ty,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:n=0,offsetY:r=0,dontFlip:o=!1}={}){return new Ka({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:r,dontFlip:o})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Me(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:e,viewport:t,intent:n="display",annotationMode:r=sr.ENABLE,transform:o=null,background:l=null,optionalContentConfigPromise:c=null,annotationCanvasMap:d=null,pageColors:f=null,printAnnotationStorage:p=null,isEditing:g=!1}){this._stats?.time("Overall");const y=this._transport.getRenderingIntent(n,r,p,g),{renderingIntent:v,cacheKey:x}=y;this.#t=!1,this.#s(),c||=this._transport.getOptionalContentConfig(v);let _=this._intentStates.get(x);_||(_=Object.create(null),this._intentStates.set(x,_)),_.streamReaderCancelTimeout&&(clearTimeout(_.streamReaderCancelTimeout),_.streamReaderCancelTimeout=null);const A=!!(v&mn.PRINT);_.displayReadyCapability||(_.displayReadyCapability=Promise.withResolvers(),_.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(y));const C=R=>{_.renderTasks.delete(E),(this._maybeCleanupAfterRender||A)&&(this.#t=!0),this.#n(!A),R?(E.capability.reject(R),this._abortOperatorList({intentState:_,reason:R instanceof Error?R:new Error(R)})):E.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},E=new pi({callback:C,params:{canvasContext:e,viewport:t,transform:o,background:l},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:d,operatorList:_.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!A,pdfBug:this._pdfBug,pageColors:f});(_.renderTasks||=new Set).add(E);const P=E.task;return Promise.all([_.displayReadyCapability.promise,c]).then(([R,M])=>{if(this.destroyed){C();return}if(this._stats?.time("Rendering"),!(M.renderingIntent&v))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");E.initializeGraphics({transparency:R,optionalContentConfig:M}),E.operatorListChanged()}).catch(C),P}getOperatorList({intent:e="display",annotationMode:t=sr.ENABLE,printAnnotationStorage:n=null,isEditing:r=!1}={}){function o(){c.operatorList.lastChunk&&(c.opListReadCapability.resolve(c.operatorList),c.renderTasks.delete(d))}const l=this._transport.getRenderingIntent(e,t,n,r,!0);let c=this._intentStates.get(l.cacheKey);c||(c=Object.create(null),this._intentStates.set(l.cacheKey,c));let d;return c.opListReadCapability||(d=Object.create(null),d.operatorListChanged=o,c.opListReadCapability=Promise.withResolvers(),(c.renderTasks||=new Set).add(d),c.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(l)),c.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(r){return r.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>Ua.textContent(n));const t=this.streamTextContent(e);return new Promise(function(n,r){function o(){l.read().then(function({value:d,done:f}){if(f){n(c);return}c.lang??=d.lang,Object.assign(c.styles,d.styles),c.items.push(...d.items),o()},r)}const l=t.getReader(),c={items:[],styles:Object.create(null),lang:null};o()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const n of t.renderTasks)e.push(n.completed),n.cancel();return this.objs.clear(),this.#t=!1,this.#s(),Promise.all(e)}cleanup(e=!1){this.#t=!0;const t=this.#n(!1);return e&&t&&(this._stats&&=new Om),t}#n(e=!1){if(this.#s(),!this.#t||this.destroyed)return!1;if(e)return this.#e=setTimeout(()=>{this.#e=null,this.#n(!1)},J1),!1;for(const{renderTasks:t,operatorList:n}of this._intentStates.values())if(t.size>0||!n.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}#s(){this.#e&&(clearTimeout(this.#e),this.#e=null)}_startRenderPage(e,t){const n=this._intentStates.get(t);n&&(this._stats?.timeEnd("Page Request"),n.displayReadyCapability?.resolve(e))}_renderPageChunk(e,t){for(let n=0,r=e.length;n<r;n++)t.operatorList.fnArray.push(e.fnArray[n]),t.operatorList.argsArray.push(e.argsArray[n]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const n of t.renderTasks)n.operatorListChanged();e.lastChunk&&this.#n(!0)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:n,modifiedIds:r}){const{map:o,transfer:l}=n,d=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:o,modifiedIds:r},l).getReader(),f=this._intentStates.get(t);f.streamReader=d;const p=()=>{d.read().then(({value:g,done:y})=>{if(y){f.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(g,f),p())},g=>{if(f.streamReader=null,!this._transport.destroyed){if(f.operatorList){f.operatorList.lastChunk=!0;for(const y of f.renderTasks)y.operatorListChanged();this.#n(!0)}if(f.displayReadyCapability)f.displayReadyCapability.reject(g);else if(f.opListReadCapability)f.opListReadCapability.reject(g);else throw g}})};p()}_abortOperatorList({intentState:e,reason:t,force:n=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!n){if(e.renderTasks.size>0)return;if(t instanceof Bh){let r=Q1;t.extraDelay>0&&t.extraDelay<1e3&&(r+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},r);return}}if(e.streamReader.cancel(new ir(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[r,o]of this._intentStates)if(o===e){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}class lC{#e=new Map;#t=Promise.resolve();postMessage(e,t){const n={data:structuredClone(e,t?{transfer:t}:null)};this.#t.then(()=>{for(const[r]of this.#e)r.call(this,n)})}addEventListener(e,t,n=null){let r=null;if(n?.signal instanceof AbortSignal){const{signal:o}=n;if(o.aborted){Ne("LoopbackPort - cannot use an `aborted` signal.");return}const l=()=>this.removeEventListener(e,t);r=()=>o.removeEventListener("abort",l),o.addEventListener("abort",l)}this.#e.set(t,r)}removeEventListener(e,t){this.#e.get(t)?.(),this.#e.delete(t)}terminate(){for(const[,e]of this.#e)e?.();this.#e.clear()}}class wt{static#e=0;static#t=!1;static#n;static{Ft&&(this.#t=!0,La.workerSrc||="./pdf.worker.mjs"),this._isSameOrigin=(e,t)=>{let n;try{if(n=new URL(e),!n.origin||n.origin==="null")return!1}catch{return!1}const r=new URL(t,n);return n.origin===r.origin},this._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))}}constructor({name:e=null,port:t=null,verbosity:n=UA()}={}){if(this.name=e,this.destroyed=!1,this.verbosity=n,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,t){if(wt.#n?.has(t))throw new Error("Cannot use more than one PDFWorker per port.");(wt.#n||=new WeakMap).set(t,this),this._initializeFromPort(t);return}this._initialize()}get promise(){return this._readyCapability.promise}#s(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new _a("main","worker",e),this._messageHandler.on("ready",function(){}),this.#s()}_initialize(){if(wt.#t||wt.#i){this._setupFakeWorker();return}let{workerSrc:e}=wt;try{wt._isSameOrigin(window.location.href,e)||(e=wt._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),n=new _a("main","worker",t),r=()=>{o.abort(),n.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},o=new AbortController;t.addEventListener("error",()=>{this._webWorker||r()},{signal:o.signal}),n.on("test",c=>{if(o.abort(),this.destroyed||!c){r();return}this._messageHandler=n,this._port=t,this._webWorker=t,this.#s()}),n.on("ready",c=>{if(o.abort(),this.destroyed){r();return}try{l()}catch{this._setupFakeWorker()}});const l=()=>{const c=new Uint8Array;n.send("test",c,[c.buffer])};l();return}catch{mc("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){wt.#t||(Ne("Setting up fake worker."),wt.#t=!0),wt._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const t=new lC;this._port=t;const n=`fake${wt.#e++}`,r=new _a(n+"_worker",n,t);e.setup(r,t),this._messageHandler=new _a(n,n+"_worker",t),this.#s()}).catch(e=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${e.message}".`))})}destroy(){this.destroyed=!0,this._webWorker?.terminate(),this._webWorker=null,wt.#n?.delete(this._port),this._port=null,this._messageHandler?.destroy(),this._messageHandler=null}static fromPort(e){if(!e?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");const t=this.#n?.get(e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new wt(e)}static get workerSrc(){if(La.workerSrc)return La.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get#i(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}}static get _setupFakeWorkerGlobal(){return Me(this,"_setupFakeWorkerGlobal",(async()=>this.#i?this.#i:(await import(this.workerSrc)).WorkerMessageHandler)())}}class cC{#e=new Map;#t=new Map;#n=new Map;#s=new Map;#i=null;constructor(e,t,n,r,o){this.messageHandler=e,this.loadingTask=t,this.commonObjs=new Ty,this.fontLoader=new l1({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=o.canvasFactory,this.filterFactory=o.filterFactory,this.cMapReaderFactory=o.cMapReaderFactory,this.standardFontDataFactory=o.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}#r(e,t=null){const n=this.#e.get(e);if(n)return n;const r=this.messageHandler.sendWithPromise(e,t);return this.#e.set(e,r),r}get annotationStorage(){return Me(this,"annotationStorage",new Gh)}getRenderingIntent(e,t=sr.ENABLE,n=null,r=!1,o=!1){let l=mn.DISPLAY,c=oh;switch(e){case"any":l=mn.ANY;break;case"display":break;case"print":l=mn.PRINT;break;default:Ne(`getRenderingIntent - invalid intent: ${e}`)}const d=l&mn.PRINT&&n instanceof py?n:this.annotationStorage;switch(t){case sr.DISABLE:l+=mn.ANNOTATIONS_DISABLE;break;case sr.ENABLE:break;case sr.ENABLE_FORMS:l+=mn.ANNOTATIONS_FORMS;break;case sr.ENABLE_STORAGE:l+=mn.ANNOTATIONS_STORAGE,c=d.serializable;break;default:Ne(`getRenderingIntent - invalid annotationMode: ${t}`)}r&&(l+=mn.IS_EDITING),o&&(l+=mn.OPLIST);const{ids:f,hash:p}=d.modifiedIds,g=[l,c.hash,p];return{renderingIntent:l,cacheKey:g.join("_"),annotationStorageSerializable:c,modifiedIds:f}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#i?.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const n of this.#t.values())e.push(n._destroy());this.#t.clear(),this.#n.clear(),this.#s.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(),Ut.cleanup(),this._networkStream?.cancelAllRequests(new ir("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(n,r)=>{ot(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=o=>{this._lastProgress={loaded:o.loaded,total:o.total}},r.onPull=()=>{this._fullReader.read().then(function({value:o,done:l}){if(l){r.close();return}ot(o instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{r.error(o)})},r.onCancel=o=>{this._fullReader.cancel(o),r.ready.catch(l=>{if(!this.destroyed)throw l})}}),e.on("ReaderHeadersReady",async n=>{await this._fullReader.headersReady;const{isStreamingSupported:r,isRangeSupported:o,contentLength:l}=this._fullReader;return(!r||!o)&&(this._lastProgress&&t.onProgress?.(this._lastProgress),this._fullReader.onProgress=c=>{t.onProgress?.({loaded:c.loaded,total:c.total})}),{isStreamingSupported:r,isRangeSupported:o,contentLength:l}}),e.on("GetRangeReader",(n,r)=>{ot(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const o=this._networkStream.getRangeReader(n.begin,n.end);if(!o){r.close();return}r.onPull=()=>{o.read().then(function({value:l,done:c}){if(c){r.close();return}ot(l instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(l),1,[l])}).catch(l=>{r.error(l)})},r.onCancel=l=>{o.cancel(l),r.ready.catch(c=>{if(!this.destroyed)throw c})}}),e.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,t._capability.resolve(new aC(n,this))}),e.on("DocException",n=>{t._capability.reject(nn(n))}),e.on("PasswordRequest",n=>{this.#i=Promise.withResolvers();try{if(!t.onPassword)throw nn(n);const r=o=>{o instanceof Error?this.#i.reject(o):this.#i.resolve({password:o})};t.onPassword(r,n.code)}catch(r){this.#i.reject(r)}return this.#i.promise}),e.on("DataLoaded",n=>{t.onProgress?.({loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),e.on("StartRenderPage",n=>{if(this.destroyed)return;this.#t.get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),e.on("commonobj",([n,r,o])=>{if(this.destroyed||this.commonObjs.has(n))return null;switch(r){case"Font":const{disableFontFace:l,fontExtraProperties:c,pdfBug:d}=this._params;if("error"in o){const y=o.error;Ne(`Error during font loading: ${y}`),this.commonObjs.resolve(n,y);break}const f=d&&globalThis.FontInspector?.enabled?(y,v)=>globalThis.FontInspector.fontAdded(y,v):null,p=new c1(o,{disableFontFace:l,fontExtraProperties:c,inspectFont:f});this.fontLoader.bind(p).catch(()=>e.sendWithPromise("FontFallback",{id:n})).finally(()=>{!c&&p.data&&(p.data=null),this.commonObjs.resolve(n,p)});break;case"CopyLocalImage":const{imageRef:g}=o;ot(g,"The imageRef must be defined.");for(const y of this.#t.values())for(const[,v]of y.objs)if(v?.ref===g)return v.dataLen?(this.commonObjs.resolve(n,structuredClone(v)),v.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(n,o);break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),e.on("obj",([n,r,o,l])=>{if(this.destroyed)return;const c=this.#t.get(r);if(!c.objs.has(n)){if(c._intentStates.size===0){l?.bitmap?.close();return}switch(o){case"Image":c.objs.resolve(n,l),l?.dataLen>jA&&(c._maybeCleanupAfterRender=!0);break;case"Pattern":c.objs.resolve(n,l);break;default:throw new Error(`Got unknown object type ${o}`)}}}),e.on("DocProgress",n=>{this.destroyed||t.onProgress?.({loaded:n.loaded,total:n.total})}),e.on("FetchBuiltInCMap",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.cMapReaderFactory)throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return this.cMapReaderFactory.fetch(n)}),e.on("FetchStandardFontData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.standardFontDataFactory)throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return this.standardFontDataFactory.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&Ne("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:this._fullReader?.filename??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,n=this.#n.get(t);if(n)return n;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(o=>{if(this.destroyed)throw new Error("Transport destroyed");o.refStr&&this.#s.set(o.refStr,e);const l=new oC(t,o,this,this._params.pdfBug);return this.#t.set(t,l),l});return this.#n.set(t,r),r}getPageIndex(e){return Ym(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return this.#r("GetFieldObjects")}hasJSActions(){return this.#r("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return this.#r("GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return this.#r("GetOptionalContentConfig").then(t=>new N1(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=this.#e.get(e);if(t)return t;const n=this.messageHandler.sendWithPromise(e,null).then(r=>({info:r[0],metadata:r[1]?new T1(r[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#e.set(e,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of this.#t.values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(!0),Ut.cleanup()}}cachedPageNumber(e){if(!Ym(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return this.#s.get(t)??null}}const ya=Symbol("INITIAL_DATA");class Ty{#e=Object.create(null);#t(e){return this.#e[e]||={...Promise.withResolvers(),data:ya}}get(e,t=null){if(t){const r=this.#t(e);return r.promise.then(()=>t(r.data)),null}const n=this.#e[e];if(!n||n.data===ya)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return n.data}has(e){const t=this.#e[e];return!!t&&t.data!==ya}delete(e){const t=this.#e[e];return!t||t.data===ya?!1:(delete this.#e[e],!0)}resolve(e,t=null){const n=this.#t(e);n.data=t,n.resolve()}clear(){for(const e in this.#e){const{data:t}=this.#e[e];t?.bitmap?.close()}this.#e=Object.create(null)}*[Symbol.iterator](){for(const e in this.#e){const{data:t}=this.#e[e];t!==ya&&(yield[e,t])}}}class uC{#e=null;constructor(e){this.#e=e,this.onContinue=null}get promise(){return this.#e.capability.promise}cancel(e=0){this.#e.cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=this.#e.operatorList;if(!e)return!1;const{annotationCanvasMap:t}=this.#e;return e.form||e.canvas&&t?.size>0}}class pi{#e=null;static#t=new WeakSet;constructor({callback:e,params:t,objs:n,commonObjs:r,annotationCanvasMap:o,operatorList:l,pageIndex:c,canvasFactory:d,filterFactory:f,useRequestAnimationFrame:p=!1,pdfBug:g=!1,pageColors:y=null}){this.callback=e,this.params=t,this.objs=n,this.commonObjs=r,this.annotationCanvasMap=o,this.operatorListIdx=null,this.operatorList=l,this._pageIndex=c,this.canvasFactory=d,this.filterFactory=f,this._pdfBug=g,this.pageColors=y,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=p===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new uC(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){if(this.cancelled)return;if(this._canvas){if(pi.#t.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");pi.#t.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:n,viewport:r,transform:o,background:l}=this.params;this.gfx=new mi(n,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:o,viewport:r,transparency:e,background:l}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(e=null,t=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#e&&(window.cancelAnimationFrame(this.#e),this.#e=null),pi.#t.delete(this._canvas),this.callback(e||new Bh(`Rendering cancelled, page ${this._pageIndex+1}`,t))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#e=window.requestAnimationFrame(()=>{this.#e=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),pi.#t.delete(this._canvas),this.callback())))}}const dC="4.10.38",hC="f9bea397f";function Qm(i){return Math.floor(Math.max(0,Math.min(1,i))*255).toString(16).padStart(2,"0")}function va(i){return Math.max(0,Math.min(255,255*i))}class Jm{static CMYK_G([e,t,n,r]){return["G",1-Math.min(1,.3*e+.59*n+.11*t+r)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=va(e),[e,e,e]}static G_HTML([e]){const t=Qm(e);return`#${t}${t}${t}`}static RGB_G([e,t,n]){return["G",.3*e+.59*t+.11*n]}static RGB_rgb(e){return e.map(va)}static RGB_HTML(e){return`#${e.map(Qm).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,n,r]){return["RGB",1-Math.min(1,e+r),1-Math.min(1,n+r),1-Math.min(1,t+r)]}static CMYK_rgb([e,t,n,r]){return[va(1-Math.min(1,e+r)),va(1-Math.min(1,n+r)),va(1-Math.min(1,t+r))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,n]){const r=1-e,o=1-t,l=1-n,c=Math.min(r,o,l);return["CMYK",r,o,l,c]}}class fC{create(e,t,n=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),n||(r.setAttribute("width",`${e}px`),r.setAttribute("height",`${t}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${e} ${t}`),r}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){Ue("Abstract method `_createSVG` called.")}}class Yh extends fC{_createSVG(e){return document.createElementNS(Cs,e)}}class Py{static setupStorage(e,t,n,r,o){const l=r.getValue(t,{value:null});switch(n.name){case"textarea":if(l.value!==null&&(e.textContent=l.value),o==="print")break;e.addEventListener("input",c=>{r.setValue(t,{value:c.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(l.value===n.attributes.xfaOn?e.setAttribute("checked",!0):l.value===n.attributes.xfaOff&&e.removeAttribute("checked"),o==="print")break;e.addEventListener("change",c=>{r.setValue(t,{value:c.target.checked?c.target.getAttribute("xfaOn"):c.target.getAttribute("xfaOff")})})}else{if(l.value!==null&&e.setAttribute("value",l.value),o==="print")break;e.addEventListener("input",c=>{r.setValue(t,{value:c.target.value})})}break;case"select":if(l.value!==null){e.setAttribute("value",l.value);for(const c of n.children)c.attributes.value===l.value?c.attributes.selected=!0:c.attributes.hasOwnProperty("selected")&&delete c.attributes.selected}e.addEventListener("input",c=>{const d=c.target.options,f=d.selectedIndex===-1?"":d[d.selectedIndex].value;r.setValue(t,{value:f})});break}}static setAttributes({html:e,element:t,storage:n=null,intent:r,linkService:o}){const{attributes:l}=t,c=e instanceof HTMLAnchorElement;l.type==="radio"&&(l.name=`${l.name}-${r}`);for(const[d,f]of Object.entries(l))if(f!=null)switch(d){case"class":f.length&&e.setAttribute(d,f.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",f);break;case"style":Object.assign(e.style,f);break;case"textContent":e.textContent=f;break;default:(!c||d!=="href"&&d!=="newWindow")&&e.setAttribute(d,f)}c&&o.addLinkAttributes(e,l.href,l.newWindow),n&&l.dataId&&this.setupStorage(e,l.dataId,t,n)}static render(e){const t=e.annotationStorage,n=e.linkService,r=e.xfaHtml,o=e.intent||"display",l=document.createElement(r.name);r.attributes&&this.setAttributes({html:l,element:r,intent:o,linkService:n});const c=o!=="richText",d=e.div;if(d.append(l),e.viewport){const g=`matrix(${e.viewport.transform.join(",")})`;d.style.transform=g}c&&d.setAttribute("class","xfaLayer xfaFont");const f=[];if(r.children.length===0){if(r.value){const g=document.createTextNode(r.value);l.append(g),c&&Ua.shouldBuildText(r.name)&&f.push(g)}return{textDivs:f}}const p=[[r,-1,l]];for(;p.length>0;){const[g,y,v]=p.at(-1);if(y+1===g.children.length){p.pop();continue}const x=g.children[++p.at(-1)[1]];if(x===null)continue;const{name:_}=x;if(_==="#text"){const C=document.createTextNode(x.value);f.push(C),v.append(C);continue}const A=x?.attributes?.xmlns?document.createElementNS(x.attributes.xmlns,_):document.createElement(_);if(v.append(A),x.attributes&&this.setAttributes({html:A,element:x,storage:t,intent:o,linkService:n}),x.children?.length>0)p.push([x,-1,A]);else if(x.value){const C=document.createTextNode(x.value);c&&Ua.shouldBuildText(_)&&f.push(C),A.append(C)}}for(const g of d.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))g.setAttribute("readOnly",!0);return{textDivs:f}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const Qa=1e3,pC=9,Ir=new WeakSet;function rr(i){return{width:i[2]-i[0],height:i[3]-i[1]}}class gC{static create(e){switch(e.data.annotationType){case ht.LINK:return new Ny(e);case ht.TEXT:return new mC(e);case ht.WIDGET:switch(e.data.fieldType){case"Tx":return new yC(e);case"Btn":return e.data.radioButton?new Iy(e):e.data.checkBox?new bC(e):new wC(e);case"Ch":return new xC(e);case"Sig":return new vC(e)}return new Dr(e);case ht.POPUP:return new ch(e);case ht.FREETEXT:return new My(e);case ht.LINE:return new SC(e);case ht.SQUARE:return new AC(e);case ht.CIRCLE:return new CC(e);case ht.POLYLINE:return new Ly(e);case ht.CARET:return new kC(e);case ht.INK:return new Qh(e);case ht.POLYGON:return new EC(e);case ht.HIGHLIGHT:return new Dy(e);case ht.UNDERLINE:return new RC(e);case ht.SQUIGGLY:return new TC(e);case ht.STRIKEOUT:return new PC(e);case ht.STAMP:return new Oy(e);case ht.FILEATTACHMENT:return new NC(e);default:return new rt(e)}}}class rt{#e=null;#t=!1;#n=null;constructor(e,{isRenderable:t=!1,ignoreBorder:n=!1,createQuadrilaterals:r=!1}={}){this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(n)),r&&this._createQuadrilaterals()}static _hasPopupData({titleObj:e,contentsObj:t,richText:n}){return!!(e?.str||t?.str||n?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return rt._hasPopupData(this.data)}updateEdited(e){if(!this.container)return;this.#e||={rect:this.data.rect.slice(0)};const{rect:t}=e;t&&this.#s(t),this.#n?.popup.updateEdited(e)}resetEdited(){this.#e&&(this.#s(this.#e.rect),this.#n?.popup.resetEdited(),this.#e=null)}#s(e){const{container:{style:t},data:{rect:n,rotation:r},parent:{viewport:{rawDims:{pageWidth:o,pageHeight:l,pageX:c,pageY:d}}}}=this;n?.splice(0,4,...e);const{width:f,height:p}=rr(e);t.left=`${100*(e[0]-c)/o}%`,t.top=`${100*(l-e[3]+d)/l}%`,r===0?(t.width=`${100*f/o}%`,t.height=`${100*p/l}%`):this.setRotation(r)}_createContainer(e){const{data:t,parent:{page:n,viewport:r}}=this,o=document.createElement("section");o.setAttribute("data-annotation-id",t.id),this instanceof Dr||(o.tabIndex=Qa);const{style:l}=o;if(l.zIndex=this.parent.zIndex++,t.alternativeText&&(o.title=t.alternativeText),t.noRotate&&o.classList.add("norotate"),!t.rect||this instanceof ch){const{rotation:_}=t;return!t.hasOwnCanvas&&_!==0&&this.setRotation(_,o),o}const{width:c,height:d}=rr(t.rect);if(!e&&t.borderStyle.width>0){l.borderWidth=`${t.borderStyle.width}px`;const _=t.borderStyle.horizontalCornerRadius,A=t.borderStyle.verticalCornerRadius;if(_>0||A>0){const E=`calc(${_}px * var(--scale-factor)) / calc(${A}px * var(--scale-factor))`;l.borderRadius=E}else if(this instanceof Iy){const E=`calc(${c}px * var(--scale-factor)) / calc(${d}px * var(--scale-factor))`;l.borderRadius=E}switch(t.borderStyle.style){case ga.SOLID:l.borderStyle="solid";break;case ga.DASHED:l.borderStyle="dashed";break;case ga.BEVELED:Ne("Unimplemented border style: beveled");break;case ga.INSET:Ne("Unimplemented border style: inset");break;case ga.UNDERLINE:l.borderBottomStyle="solid";break}const C=t.borderColor||null;C?(this.#t=!0,l.borderColor=de.makeHexColor(C[0]|0,C[1]|0,C[2]|0)):l.borderWidth=0}const f=de.normalizeRect([t.rect[0],n.view[3]-t.rect[1]+n.view[1],t.rect[2],n.view[3]-t.rect[3]+n.view[1]]),{pageWidth:p,pageHeight:g,pageX:y,pageY:v}=r.rawDims;l.left=`${100*(f[0]-y)/p}%`,l.top=`${100*(f[1]-v)/g}%`;const{rotation:x}=t;return t.hasOwnCanvas||x===0?(l.width=`${100*c/p}%`,l.height=`${100*d/g}%`):this.setRotation(x,o),o}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:r}=this.parent.viewport.rawDims,{width:o,height:l}=rr(this.data.rect);let c,d;e%180===0?(c=100*o/n,d=100*l/r):(c=100*l/n,d=100*o/r),t.style.width=`${c}%`,t.style.height=`${d}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,n,r)=>{const o=r.detail[t],l=o[0],c=o.slice(1);r.target.style[n]=Jm[`${l}_HTML`](c),this.annotationStorage.setValue(this.data.id,{[n]:Jm[`${l}_rgb`](c)})};return Me(this,"_commonActions",{display:t=>{const{display:n}=t.detail,r=n%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:n===1||n===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:n}=t.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const n=t.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(e,t){const n=this._commonActions;for(const r of Object.keys(t.detail))(e[r]||n[r])?.(t)}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const n=this._commonActions;for(const[r,o]of Object.entries(t)){const l=n[r];if(l){const c={detail:{[r]:o},target:e};l(c),delete t[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,n,r,o]=this.data.rect.map(_=>Math.fround(_));if(e.length===8){const[_,A,C,E]=e.subarray(2,6);if(r===_&&o===A&&t===C&&n===E)return}const{style:l}=this.container;let c;if(this.#t){const{borderColor:_,borderWidth:A}=l;l.borderWidth=0,c=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${_}" stroke-width="${A}">`],this.container.classList.add("hasBorder")}const d=r-t,f=o-n,{svgFactory:p}=this,g=p.createElement("svg");g.classList.add("quadrilateralsContainer"),g.setAttribute("width",0),g.setAttribute("height",0);const y=p.createElement("defs");g.append(y);const v=p.createElement("clipPath"),x=`clippath_${this.data.id}`;v.setAttribute("id",x),v.setAttribute("clipPathUnits","objectBoundingBox"),y.append(v);for(let _=2,A=e.length;_<A;_+=8){const C=e[_],E=e[_+1],P=e[_+2],R=e[_+3],M=p.createElement("rect"),D=(P-t)/d,O=(o-E)/f,H=(C-P)/d,U=(E-R)/f;M.setAttribute("x",D),M.setAttribute("y",O),M.setAttribute("width",H),M.setAttribute("height",U),v.append(M),c?.push(`<rect vector-effect="non-scaling-stroke" x="${D}" y="${O}" width="${H}" height="${U}"/>`)}this.#t&&(c.push("</g></svg>')"),l.backgroundImage=c.join("")),this.container.append(g),this.container.style.clipPath=`url(#${x})`}_createPopup(){const{data:e}=this,t=this.#n=new ch({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation},parent:this.parent,elements:[this]});this.parent.div.append(t.render())}render(){Ue("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const n=[];if(this._fieldObjects){const r=this._fieldObjects[e];if(r)for(const{page:o,id:l,exportValues:c}of r){if(o===-1||l===t)continue;const d=typeof c=="string"?c:null,f=document.querySelector(`[data-element-id="${l}"]`);if(f&&!Ir.has(f)){Ne(`_getElementsByName - element not allowed: ${l}`);continue}n.push({id:l,exportValue:d,domElement:f})}return n}for(const r of document.getElementsByName(e)){const{exportValue:o}=r,l=r.getAttribute("data-element-id");l!==t&&Ir.has(r)&&n.push({id:l,exportValue:o,domElement:r})}return n}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t})})}}class Ny extends rt{constructor(e,t=null){super(e,{isRenderable:!0,ignoreBorder:!!t?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:t}=this,n=document.createElement("a");n.setAttribute("data-element-id",e.id);let r=!1;return e.url?(t.addLinkAttributes(n,e.url,e.newWindow),r=!0):e.action?(this._bindNamedAction(n,e.action),r=!0):e.attachment?(this.#t(n,e.attachment,e.attachmentDest),r=!0):e.setOCGState?(this.#n(n,e.setOCGState),r=!0):e.dest?(this._bindLink(n,e.dest),r=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(n,e),r=!0),e.resetForm?(this._bindResetFormAction(n,e.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(n,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&this.container.append(n),this.container}#e(){this.container.setAttribute("data-internal-link","")}_bindLink(e,t){e.href=this.linkService.getDestinationHash(t),e.onclick=()=>(t&&this.linkService.goToDestination(t),!1),(t||t==="")&&this.#e()}_bindNamedAction(e,t){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(t),!1),this.#e()}#t(e,t,n=null){e.href=this.linkService.getAnchorUrl(""),t.description&&(e.title=t.description),e.onclick=()=>(this.downloadManager?.openOrDownloadData(t.content,t.filename,n),!1),this.#e()}#n(e,t){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(t),!1),this.#e()}_bindJSAction(e,t){e.href=this.linkService.getAnchorUrl("");const n=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(t.actions)){const o=n.get(r);o&&(e[o]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t.id,name:r}}),!1))}e.onclick||(e.onclick=()=>!1),this.#e()}_bindResetFormAction(e,t){const n=e.onclick;if(n||(e.href=this.linkService.getAnchorUrl("")),this.#e(),!this._fieldObjects){Ne('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),n||(e.onclick=()=>!1);return}e.onclick=()=>{n?.();const{fields:r,refs:o,include:l}=t,c=[];if(r.length!==0||o.length!==0){const p=new Set(o);for(const g of r){const y=this._fieldObjects[g]||[];for(const{id:v}of y)p.add(v)}for(const g of Object.values(this._fieldObjects))for(const y of g)p.has(y.id)===l&&c.push(y)}else for(const p of Object.values(this._fieldObjects))c.push(...p);const d=this.annotationStorage,f=[];for(const p of c){const{id:g}=p;switch(f.push(g),p.type){case"text":{const v=p.defaultValue||"";d.setValue(g,{value:v});break}case"checkbox":case"radiobutton":{const v=p.defaultValue===p.exportValues;d.setValue(g,{value:v});break}case"combobox":case"listbox":{const v=p.defaultValue||"";d.setValue(g,{value:v});break}default:continue}const y=document.querySelector(`[data-element-id="${g}"]`);if(y){if(!Ir.has(y)){Ne(`_bindResetFormAction - element not allowed: ${g}`);continue}}else continue;y.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:f,name:"ResetForm"}}),!1}}}class mC extends rt{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class Dr extends rt{render(){return this.container}showElementAndHideCanvas(e){this.data.hasOwnCanvas&&(e.previousSibling?.nodeName==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return Wt.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,n,r,o){n.includes("mouse")?e.addEventListener(n,l=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:o(l),shift:l.shiftKey,modifier:this._getKeyModifier(l)}})}):e.addEventListener(n,l=>{if(n==="blur"){if(!t.focused||!l.relatedTarget)return;t.focused=!1}else if(n==="focus"){if(t.focused)return;t.focused=!0}o&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:o(l)}})})}_setEventListeners(e,t,n,r){for(const[o,l]of n)(l==="Action"||this.data.actions?.[l])&&((l==="Focus"||l==="Blur")&&(t||={focused:!1}),this._setEventListener(e,t,o,l,r),l==="Focus"&&!this.data.actions?.Blur?this._setEventListener(e,t,"blur","Blur",null):l==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":de.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||pC,o=e.style;let l;const c=2,d=f=>Math.round(10*f)/10;if(this.data.multiLine){const f=Math.abs(this.data.rect[3]-this.data.rect[1]-c),p=Math.round(f/(Td*r))||1,g=f/p;l=Math.min(r,d(g/Td))}else{const f=Math.abs(this.data.rect[3]-this.data.rect[1]-c);l=Math.min(r,d(f/Td))}o.fontSize=`calc(${l}px * var(--scale-factor))`,o.color=de.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(o.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class yC extends Dr{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,n,r){const o=this.annotationStorage;for(const l of this._getElementsByName(e.name,e.id))l.domElement&&(l.domElement[t]=n),o.setValue(l.id,{[r]:n})}render(){const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const r=e.getValue(t,{value:this.data.fieldValue});let o=r.value||"";const l=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;l&&o.length>l&&(o=o.slice(0,l));let c=r.formattedValue||this.data.textContent?.join(`
`)||null;c&&this.data.comb&&(c=c.replaceAll(/\s+/g,""));const d={userValue:o,formattedValue:c,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=c??o,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type="text",n.setAttribute("value",c??o),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),Ir.add(n),n.setAttribute("data-element-id",t),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=Qa,this._setRequired(n,this.data.required),l&&(n.maxLength=l),n.addEventListener("input",p=>{e.setValue(t,{value:p.target.value}),this.setPropertyOnSiblings(n,"value",p.target.value,"value"),d.formattedValue=null}),n.addEventListener("resetform",p=>{const g=this.data.defaultFieldValue??"";n.value=d.userValue=g,d.formattedValue=null});let f=p=>{const{formattedValue:g}=d;g!=null&&(p.target.value=g),p.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",g=>{if(d.focused)return;const{target:y}=g;d.userValue&&(y.value=d.userValue),d.lastCommittedValue=y.value,d.commitKey=1,this.data.actions?.Focus||(d.focused=!0)}),n.addEventListener("updatefromsandbox",g=>{this.showElementAndHideCanvas(g.target);const y={value(v){d.userValue=v.detail.value??"",e.setValue(t,{value:d.userValue.toString()}),v.target.value=d.userValue},formattedValue(v){const{formattedValue:x}=v.detail;d.formattedValue=x,x!=null&&v.target!==document.activeElement&&(v.target.value=x),e.setValue(t,{formattedValue:x})},selRange(v){v.target.setSelectionRange(...v.detail.selRange)},charLimit:v=>{const{charLimit:x}=v.detail,{target:_}=v;if(x===0){_.removeAttribute("maxLength");return}_.setAttribute("maxLength",x);let A=d.userValue;!A||A.length<=x||(A=A.slice(0,x),_.value=d.userValue=A,e.setValue(t,{value:A}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:A,willCommit:!0,commitKey:1,selStart:_.selectionStart,selEnd:_.selectionEnd}}))}};this._dispatchEventFromSandbox(y,g)}),n.addEventListener("keydown",g=>{d.commitKey=1;let y=-1;if(g.key==="Escape"?y=0:g.key==="Enter"&&!this.data.multiLine?y=2:g.key==="Tab"&&(d.commitKey=3),y===-1)return;const{value:v}=g.target;d.lastCommittedValue!==v&&(d.lastCommittedValue=v,d.userValue=v,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:v,willCommit:!0,commitKey:y,selStart:g.target.selectionStart,selEnd:g.target.selectionEnd}}))});const p=f;f=null,n.addEventListener("blur",g=>{if(!d.focused||!g.relatedTarget)return;this.data.actions?.Blur||(d.focused=!1);const{value:y}=g.target;d.userValue=y,d.lastCommittedValue!==y&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:y,willCommit:!0,commitKey:d.commitKey,selStart:g.target.selectionStart,selEnd:g.target.selectionEnd}}),p(g)}),this.data.actions?.Keystroke&&n.addEventListener("beforeinput",g=>{d.lastCommittedValue=null;const{data:y,target:v}=g,{value:x,selectionStart:_,selectionEnd:A}=v;let C=_,E=A;switch(g.inputType){case"deleteWordBackward":{const P=x.substring(0,_).match(/\w*[^\w]*$/);P&&(C-=P[0].length);break}case"deleteWordForward":{const P=x.substring(_).match(/^[^\w]*\w*/);P&&(E+=P[0].length);break}case"deleteContentBackward":_===A&&(C-=1);break;case"deleteContentForward":_===A&&(E+=1);break}g.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:x,change:y||"",willCommit:!1,selStart:C,selEnd:E}})}),this._setEventListeners(n,d,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],g=>g.target.value)}if(f&&n.addEventListener("blur",f),this.data.comb){const g=(this.data.rect[2]-this.data.rect[0])/l;n.classList.add("comb"),n.style.letterSpacing=`calc(${g}px * var(--scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class vC extends Dr{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class bC extends Dr{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,n=t.id;let r=e.getValue(n,{value:t.exportValue===t.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",e.setValue(n,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const o=document.createElement("input");return Ir.add(o),o.setAttribute("data-element-id",n),o.disabled=t.readOnly,this._setRequired(o,this.data.required),o.type="checkbox",o.name=t.fieldName,r&&o.setAttribute("checked",!0),o.setAttribute("exportValue",t.exportValue),o.tabIndex=Qa,o.addEventListener("change",l=>{const{name:c,checked:d}=l.target;for(const f of this._getElementsByName(c,n)){const p=d&&f.exportValue===t.exportValue;f.domElement&&(f.domElement.checked=p),e.setValue(f.id,{value:p})}e.setValue(n,{value:d})}),o.addEventListener("resetform",l=>{const c=t.defaultFieldValue||"Off";l.target.checked=c===t.exportValue}),this.enableScripting&&this.hasJSActions&&(o.addEventListener("updatefromsandbox",l=>{const c={value(d){d.target.checked=d.detail.value!=="Off",e.setValue(n,{value:d.target.checked})}};this._dispatchEventFromSandbox(c,l)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)),this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class Iy extends Dr{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,n=t.id;let r=e.getValue(n,{value:t.fieldValue===t.buttonValue}).value;if(typeof r=="string"&&(r=r!==t.buttonValue,e.setValue(n,{value:r})),r)for(const l of this._getElementsByName(t.fieldName,n))e.setValue(l.id,{value:!1});const o=document.createElement("input");if(Ir.add(o),o.setAttribute("data-element-id",n),o.disabled=t.readOnly,this._setRequired(o,this.data.required),o.type="radio",o.name=t.fieldName,r&&o.setAttribute("checked",!0),o.tabIndex=Qa,o.addEventListener("change",l=>{const{name:c,checked:d}=l.target;for(const f of this._getElementsByName(c,n))e.setValue(f.id,{value:!1});e.setValue(n,{value:d})}),o.addEventListener("resetform",l=>{const c=t.defaultFieldValue;l.target.checked=c!=null&&c===t.buttonValue}),this.enableScripting&&this.hasJSActions){const l=t.buttonValue;o.addEventListener("updatefromsandbox",c=>{const d={value:f=>{const p=l===f.detail.value;for(const g of this._getElementsByName(f.target.name)){const y=p&&g.id===n;g.domElement&&(g.domElement.checked=y),e.setValue(g.id,{value:y})}}};this._dispatchEventFromSandbox(d,c)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],c=>c.target.checked)}return this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class wC extends Ny{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),e}}class xC extends Dr{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,n=e.getValue(t,{value:this.data.fieldValue}),r=document.createElement("select");Ir.add(r),r.setAttribute("data-element-id",t),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=Qa;let o=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",p=>{const g=this.data.defaultFieldValue;for(const y of r.options)y.selected=y.value===g});for(const p of this.data.options){const g=document.createElement("option");g.textContent=p.displayValue,g.value=p.exportValue,n.value.includes(p.exportValue)&&(g.setAttribute("selected",!0),o=!1),r.append(g)}let l=null;if(o){const p=document.createElement("option");p.value=" ",p.setAttribute("hidden",!0),p.setAttribute("selected",!0),r.prepend(p),l=()=>{p.remove(),r.removeEventListener("input",l),l=null},r.addEventListener("input",l)}const c=p=>{const g=p?"value":"textContent",{options:y,multiple:v}=r;return v?Array.prototype.filter.call(y,x=>x.selected).map(x=>x[g]):y.selectedIndex===-1?null:y[y.selectedIndex][g]};let d=c(!1);const f=p=>{const g=p.target.options;return Array.prototype.map.call(g,y=>({displayValue:y.textContent,exportValue:y.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",p=>{const g={value(y){l?.();const v=y.detail.value,x=new Set(Array.isArray(v)?v:[v]);for(const _ of r.options)_.selected=x.has(_.value);e.setValue(t,{value:c(!0)}),d=c(!1)},multipleSelection(y){r.multiple=!0},remove(y){const v=r.options,x=y.detail.remove;v[x].selected=!1,r.remove(x),v.length>0&&Array.prototype.findIndex.call(v,A=>A.selected)===-1&&(v[0].selected=!0),e.setValue(t,{value:c(!0),items:f(y)}),d=c(!1)},clear(y){for(;r.length!==0;)r.remove(0);e.setValue(t,{value:null,items:[]}),d=c(!1)},insert(y){const{index:v,displayValue:x,exportValue:_}=y.detail.insert,A=r.children[v],C=document.createElement("option");C.textContent=x,C.value=_,A?A.before(C):r.append(C),e.setValue(t,{value:c(!0),items:f(y)}),d=c(!1)},items(y){const{items:v}=y.detail;for(;r.length!==0;)r.remove(0);for(const x of v){const{displayValue:_,exportValue:A}=x,C=document.createElement("option");C.textContent=_,C.value=A,r.append(C)}r.options.length>0&&(r.options[0].selected=!0),e.setValue(t,{value:c(!0),items:f(y)}),d=c(!1)},indices(y){const v=new Set(y.detail.indices);for(const x of y.target.options)x.selected=v.has(x.index);e.setValue(t,{value:c(!0)}),d=c(!1)},editable(y){y.target.disabled=!y.detail.editable}};this._dispatchEventFromSandbox(g,p)}),r.addEventListener("input",p=>{const g=c(!0),y=c(!1);e.setValue(t,{value:g}),p.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:d,change:y,changeEx:g,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],p=>p.target.value)):r.addEventListener("input",function(p){e.setValue(t,{value:c(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class ch extends rt{constructor(e){const{data:t,elements:n}=e;super(e,{isRenderable:rt._hasPopupData(t)}),this.elements=n,this.popup=null}render(){this.container.classList.add("popupAnnotation");const e=this.popup=new _C({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),t=[];for(const n of this.elements)n.popup=e,n.container.ariaHasPopup="dialog",t.push(n.data.id),n.addHighlightArea();return this.container.setAttribute("aria-controls",t.map(n=>`${zh}${n}`).join(",")),this.container}}class _C{#e=this.#k.bind(this);#t=this.#E.bind(this);#n=this.#R.bind(this);#s=this.#_.bind(this);#i=null;#r=null;#l=null;#o=null;#u=null;#c=null;#h=null;#d=!1;#f=null;#a=null;#p=null;#m=null;#g=null;#y=null;#w=!1;constructor({container:e,color:t,elements:n,titleObj:r,modificationDate:o,contentsObj:l,richText:c,parent:d,rect:f,parentRect:p,open:g}){this.#r=e,this.#g=r,this.#l=l,this.#m=c,this.#c=d,this.#i=t,this.#p=f,this.#h=p,this.#u=n,this.#o=hy.toDateObject(o),this.trigger=n.flatMap(y=>y.getElementsToTriggerPopup());for(const y of this.trigger)y.addEventListener("click",this.#s),y.addEventListener("mouseenter",this.#n),y.addEventListener("mouseleave",this.#t),y.classList.add("popupTriggerArea");for(const y of n)y.container?.addEventListener("keydown",this.#e);this.#r.hidden=!0,g&&this.#_()}render(){if(this.#f)return;const e=this.#f=document.createElement("div");if(e.className="popup",this.#i){const o=e.style.outlineColor=de.makeHexColor(...this.#i);CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?e.style.backgroundColor=`color-mix(in srgb, ${o} 30%, white)`:e.style.backgroundColor=de.makeHexColor(...this.#i.map(c=>Math.floor(.7*(255-c)+c)))}const t=document.createElement("span");t.className="header";const n=document.createElement("h1");if(t.append(n),{dir:n.dir,str:n.textContent}=this.#g,e.append(t),this.#o){const o=document.createElement("span");o.classList.add("popupDate"),o.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),o.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#o.valueOf()})),t.append(o)}const r=this.#v;if(r)Py.render({xfaHtml:r,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const o=this._formatContents(this.#l);e.append(o)}this.#r.append(e)}get#v(){const e=this.#m,t=this.#l;return e?.str&&(!t?.str||t.str===e.str)&&this.#m.html||null}get#x(){return this.#v?.attributes?.style?.fontSize||0}get#S(){return this.#v?.attributes?.style?.color||null}#C(e){const t=[],n={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},r={style:{color:this.#S,fontSize:this.#x?`calc(${this.#x}px * var(--scale-factor))`:""}};for(const o of e.split(`
`))t.push({name:"span",value:o,attributes:r});return n}_formatContents({str:e,dir:t}){const n=document.createElement("p");n.classList.add("popupContent"),n.dir=t;const r=e.split(/(?:\r\n?|\n)/);for(let o=0,l=r.length;o<l;++o){const c=r[o];n.append(document.createTextNode(c)),o<l-1&&n.append(document.createElement("br"))}return n}#k(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&this.#d)&&this.#_()}updateEdited({rect:e,popupContent:t}){this.#y||={contentsObj:this.#l,richText:this.#m},e&&(this.#a=null),t&&(this.#m=this.#C(t),this.#l=null),this.#f?.remove(),this.#f=null}resetEdited(){this.#y&&({contentsObj:this.#l,richText:this.#m}=this.#y,this.#y=null,this.#f?.remove(),this.#f=null,this.#a=null)}#T(){if(this.#a!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:n,pageX:r,pageY:o}}}=this.#c;let l=!!this.#h,c=l?this.#h:this.#p;for(const x of this.#u)if(!c||de.intersect(x.data.rect,c)!==null){c=x.data.rect,l=!0;break}const d=de.normalizeRect([c[0],e[3]-c[1]+e[1],c[2],e[3]-c[3]+e[1]]),p=l?c[2]-c[0]+5:0,g=d[0]+p,y=d[1];this.#a=[100*(g-r)/t,100*(y-o)/n];const{style:v}=this.#r;v.left=`${this.#a[0]}%`,v.top=`${this.#a[1]}%`}#_(){this.#d=!this.#d,this.#d?(this.#R(),this.#r.addEventListener("click",this.#s),this.#r.addEventListener("keydown",this.#e)):(this.#E(),this.#r.removeEventListener("click",this.#s),this.#r.removeEventListener("keydown",this.#e))}#R(){this.#f||this.render(),this.isVisible?this.#d&&this.#r.classList.add("focused"):(this.#T(),this.#r.hidden=!1,this.#r.style.zIndex=parseInt(this.#r.style.zIndex)+1e3)}#E(){this.#r.classList.remove("focused"),!(this.#d||!this.isVisible)&&(this.#r.hidden=!0,this.#r.style.zIndex=parseInt(this.#r.style.zIndex)-1e3)}forceHide(){this.#w=this.isVisible,this.#w&&(this.#r.hidden=!0)}maybeShow(){this.#w&&(this.#f||this.#R(),this.#w=!1,this.#r.hidden=!1)}get isVisible(){return this.#r.hidden===!1}}class My extends rt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=Pe.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const n=document.createElement("span");n.textContent=t,e.append(n)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class SC extends rt{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const e=this.data,{width:t,height:n}=rr(e.rect),r=this.svgFactory.create(t,n,!0),o=this.#e=this.svgFactory.createElement("svg:line");return o.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),o.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),o.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),o.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),o.setAttribute("stroke-width",e.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.append(o),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class AC extends rt{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const e=this.data,{width:t,height:n}=rr(e.rect),r=this.svgFactory.create(t,n,!0),o=e.borderStyle.width,l=this.#e=this.svgFactory.createElement("svg:rect");return l.setAttribute("x",o/2),l.setAttribute("y",o/2),l.setAttribute("width",t-o),l.setAttribute("height",n-o),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),r.append(l),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class CC extends rt{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const e=this.data,{width:t,height:n}=rr(e.rect),r=this.svgFactory.create(t,n,!0),o=e.borderStyle.width,l=this.#e=this.svgFactory.createElement("svg:ellipse");return l.setAttribute("cx",t/2),l.setAttribute("cy",n/2),l.setAttribute("rx",t/2-o/2),l.setAttribute("ry",n/2-o/2),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),r.append(l),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class Ly extends rt{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:t,borderStyle:n,popupRef:r}}=this;if(!t)return this.container;const{width:o,height:l}=rr(e),c=this.svgFactory.create(o,l,!0);let d=[];for(let p=0,g=t.length;p<g;p+=2){const y=t[p]-e[0],v=e[3]-t[p+1];d.push(`${y},${v}`)}d=d.join(" ");const f=this.#e=this.svgFactory.createElement(this.svgElementName);return f.setAttribute("points",d),f.setAttribute("stroke-width",n.width||1),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),c.append(f),this.container.append(c),!r&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class EC extends Ly{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class kC extends rt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class Qh extends rt{#e=null;#t=[];constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Pe.HIGHLIGHT:Pe.INK}#n(e,t){switch(e){case 90:return{transform:`rotate(90) translate(${-t[0]},${t[1]}) scale(1,-1)`,width:t[3]-t[1],height:t[2]-t[0]};case 180:return{transform:`rotate(180) translate(${-t[2]},${t[1]}) scale(1,-1)`,width:t[2]-t[0],height:t[3]-t[1]};case 270:return{transform:`rotate(270) translate(${-t[2]},${t[3]}) scale(1,-1)`,width:t[3]-t[1],height:t[2]-t[0]};default:return{transform:`translate(${-t[0]},${t[3]}) scale(1,-1)`,width:t[2]-t[0],height:t[3]-t[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:t,inkLists:n,borderStyle:r,popupRef:o}}=this,{transform:l,width:c,height:d}=this.#n(t,e),f=this.svgFactory.create(c,d,!0),p=this.#e=this.svgFactory.createElement("svg:g");f.append(p),p.setAttribute("stroke-width",r.width||1),p.setAttribute("stroke-linecap","round"),p.setAttribute("stroke-linejoin","round"),p.setAttribute("stroke-miterlimit",10),p.setAttribute("stroke","transparent"),p.setAttribute("fill","transparent"),p.setAttribute("transform",l);for(let g=0,y=n.length;g<y;g++){const v=this.svgFactory.createElement(this.svgElementName);this.#t.push(v),v.setAttribute("points",n[g].join(",")),p.append(v)}return!o&&this.hasPopupData&&this._createPopup(),this.container.append(f),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:t,points:n,rect:r}=e,o=this.#e;if(t>=0&&o.setAttribute("stroke-width",t||1),n)for(let l=0,c=this.#t.length;l<c;l++)this.#t[l].setAttribute("points",n[l].join(","));if(r){const{transform:l,width:c,height:d}=this.#n(this.data.rotation,r);o.parentElement.setAttribute("viewBox",`0 0 ${c} ${d}`),o.setAttribute("transform",l)}}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class Dy extends rt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Pe.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class RC extends rt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class TC extends rt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class PC extends rt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class Oy extends rt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Pe.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class NC extends rt{#e=null;constructor(e){super(e,{isRenderable:!0});const{file:t}=this.data;this.filename=t.filename,this.content=t.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...t})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:t}=this;let n;t.hasAppearance||t.fillAlpha===0?n=document.createElement("div"):(n=document.createElement("img"),n.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(t.name)?"paperclip":"pushpin"}.svg`,t.fillAlpha&&t.fillAlpha<1&&(n.style=`filter: opacity(${Math.round(t.fillAlpha*100)}%);`)),n.addEventListener("dblclick",this.#t.bind(this)),this.#e=n;const{isMac:r}=Wt.platform;return e.addEventListener("keydown",o=>{o.key==="Enter"&&(r?o.metaKey:o.ctrlKey)&&this.#t()}),!t.popupRef&&this.hasPopupData?this._createPopup():n.classList.add("popupTriggerArea"),e.append(n),e}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}#t(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}class IC{#e=null;#t=null;#n=new Map;#s=null;constructor({div:e,accessibilityManager:t,annotationCanvasMap:n,annotationEditorUIManager:r,page:o,viewport:l,structTreeLayer:c}){this.div=e,this.#e=t,this.#t=n,this.#s=c||null,this.page=o,this.viewport=l,this.zIndex=0,this._annotationEditorUIManager=r}hasEditableAnnotations(){return this.#n.size>0}async#i(e,t){const n=e.firstChild||e,r=n.id=`${zh}${t}`,o=await this.#s?.getAriaAttributes(r);if(o)for(const[l,c]of o)n.setAttribute(l,c);this.div.append(e),this.#e?.moveElementInDOM(this.div,e,n,!1)}async render(e){const{annotations:t}=e,n=this.div;Nr(n,this.viewport);const r=new Map,o={data:null,layer:n,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new Yh,annotationStorage:e.annotationStorage||new Gh,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const l of t){if(l.noHTML)continue;const c=l.annotationType===ht.POPUP;if(c){const p=r.get(l.id);if(!p)continue;o.elements=p}else{const{width:p,height:g}=rr(l.rect);if(p<=0||g<=0)continue}o.data=l;const d=gC.create(o);if(!d.isRenderable)continue;if(!c&&l.popupRef){const p=r.get(l.popupRef);p?p.push(d):r.set(l.popupRef,[d])}const f=d.render();l.hidden&&(f.style.visibility="hidden"),await this.#i(f,l.id),d._isEditable&&(this.#n.set(d.data.id,d),this._annotationEditorUIManager?.renderAnnotationElement(d))}this.#r()}update({viewport:e}){const t=this.div;this.viewport=e,Nr(t,{rotation:e.rotation}),this.#r(),t.hidden=!1}#r(){if(!this.#t)return;const e=this.div;for(const[t,n]of this.#t){const r=e.querySelector(`[data-annotation-id="${t}"]`);if(!r)continue;n.className="annotationContent";const{firstChild:o}=r;o?o.nodeName==="CANVAS"?o.replaceWith(n):o.classList.contains("annotationContent")?o.after(n):o.before(n):r.append(n)}this.#t.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(e){return this.#n.get(e)}}const xl=/\r\n?|\n/g;class ft extends _e{#e;#t="";#n=`${this.id}-editor`;#s=null;#i;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const e=ft.prototype,t=o=>o.isEmpty(),n=ar.TRANSLATE_SMALL,r=ar.TRANSLATE_BIG;return Me(this,"_keyboardManager",new Ya([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-n,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-r,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[n,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[r,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-n],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-r],checker:t}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,n],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,r],checker:t}]]))}static _type="freetext";static _editorType=Pe.FREETEXT;constructor(e){super({...e,name:"freeTextEditor"}),this.#e=e.color||ft._defaultColor||_e._defaultLineColor,this.#i=e.fontSize||ft._defaultFontSize}static initialize(e,t){_e.initialize(e,t);const n=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(n.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,t){switch(e){case Oe.FREETEXT_SIZE:ft._defaultFontSize=t;break;case Oe.FREETEXT_COLOR:ft._defaultColor=t;break}}updateParams(e,t){switch(e){case Oe.FREETEXT_SIZE:this.#r(t);break;case Oe.FREETEXT_COLOR:this.#l(t);break}}static get defaultPropertiesToUpdate(){return[[Oe.FREETEXT_SIZE,ft._defaultFontSize],[Oe.FREETEXT_COLOR,ft._defaultColor||_e._defaultLineColor]]}get propertiesToUpdate(){return[[Oe.FREETEXT_SIZE,this.#i],[Oe.FREETEXT_COLOR,this.#e]]}#r(e){const t=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--scale-factor))`,this.translate(0,-(r-this.#i)*this.parentScale),this.#i=r,this.#u()},n=this.#i;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Oe.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#l(e){const t=r=>{this.#e=this.editorDiv.style.color=r},n=this.#e;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Oe.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(e,t){this._uiManager.translateSelectedEditors(e,t,!0)}getInitialTranslation(){const e=this.parentScale;return[-ft._internalPadding*e,-(ft._internalPadding+this.#i)*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(Pe.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#s=new AbortController;const e=this._uiManager.combinedSignal(this.#s);this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e})}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#n),this._isDraggable=!0,this.#s?.abort(),this.#s=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#o(){const e=[];this.editorDiv.normalize();let t=null;for(const n of this.editorDiv.childNodes)t?.nodeType===Node.TEXT_NODE&&n.nodeName==="BR"||(e.push(ft.#c(n)),t=n);return e.join(`
`)}#u(){const[e,t]=this.parentDimensions;let n;if(this.isAttachedToDOM)n=this.div.getBoundingClientRect();else{const{currentLayer:r,div:o}=this,l=o.style.display,c=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",r.div.append(this.div),n=o.getBoundingClientRect(),o.remove(),o.style.display=l,o.classList.toggle("hidden",c)}this.rotation%180===this.parentRotation%180?(this.width=n.width/e,this.height=n.height/t):(this.width=n.height/e,this.height=n.width/t),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=this.#t,t=this.#t=this.#o().trimEnd();if(e===t)return;const n=r=>{if(this.#t=r,!r){this.remove();return}this.#h(),this._uiManager.rebuild(this),this.#u()};this.addCommands({cmd:()=>{n(t)},undo:()=>{n(e)},mustExec:!1}),this.#u()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(e){this.enterInEditMode()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){ft._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let e,t;this.width&&(e=this.x,t=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#n),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:n}=this.editorDiv;if(n.fontSize=`calc(${this.#i}px * var(--scale-factor))`,n.color=this.#e,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),Xl(this,this.div,["dblclick","keydown"]),this.width){const[r,o]=this.parentDimensions;if(this.annotationElementId){const{position:l}=this._initialData;let[c,d]=this.getInitialTranslation();[c,d]=this.pageTranslationToScreen(c,d);const[f,p]=this.pageDimensions,[g,y]=this.pageTranslation;let v,x;switch(this.rotation){case 0:v=e+(l[0]-g)/f,x=t+this.height-(l[1]-y)/p;break;case 90:v=e+(l[0]-g)/f,x=t-(l[1]-y)/p,[c,d]=[d,-c];break;case 180:v=e-this.width+(l[0]-g)/f,x=t-(l[1]-y)/p,[c,d]=[-c,-d];break;case 270:v=e+(l[0]-g-this.height*p)/f,x=t+(l[1]-y-this.width*f)/p,[c,d]=[-d,c];break}this.setAt(v*r,x*o,c,d)}else this.setAt(e*r,t*o,this.width*r,this.height*o);this.#h(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#c(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(xl,"")}editorDivPaste(e){const t=e.clipboardData||window.clipboardData,{types:n}=t;if(n.length===1&&n[0]==="text/plain")return;e.preventDefault();const r=ft.#f(t.getData("text")||"").replaceAll(xl,`
`);if(!r)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const l=o.getRangeAt(0);if(!r.includes(`
`)){l.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:c,startOffset:d}=l,f=[],p=[];if(c.nodeType===Node.TEXT_NODE){const v=c.parentElement;if(p.push(c.nodeValue.slice(d).replaceAll(xl,"")),v!==this.editorDiv){let x=f;for(const _ of this.editorDiv.childNodes){if(_===v){x=p;continue}x.push(ft.#c(_))}}f.push(c.nodeValue.slice(0,d).replaceAll(xl,""))}else if(c===this.editorDiv){let v=f,x=0;for(const _ of this.editorDiv.childNodes)x++===d&&(v=p),v.push(ft.#c(_))}this.#t=`${f.join(`
`)}${r}${p.join(`
`)}`,this.#h();const g=new Range;let y=f.reduce((v,x)=>v+x.length,0);for(const{firstChild:v}of this.editorDiv.childNodes)if(v.nodeType===Node.TEXT_NODE){const x=v.nodeValue.length;if(y<=x){g.setStart(v,y),g.setEnd(v,y);break}y-=x}o.removeAllRanges(),o.addRange(g)}#h(){if(this.editorDiv.replaceChildren(),!!this.#t)for(const e of this.#t.split(`
`)){const t=document.createElement("div");t.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(t)}}#d(){return this.#t.replaceAll(""," ")}static#f(e){return e.replaceAll(" ","")}get contentDiv(){return this.editorDiv}static async deserialize(e,t,n){let r=null;if(e instanceof My){const{data:{defaultAppearanceData:{fontSize:l,fontColor:c},rect:d,rotation:f,id:p,popupRef:g},textContent:y,textPosition:v,parent:{page:{pageNumber:x}}}=e;if(!y||y.length===0)return null;r=e={annotationType:Pe.FREETEXT,color:Array.from(c),fontSize:l,value:y.join(`
`),position:v,pageIndex:x-1,rect:d.slice(0),rotation:f,id:p,deleted:!1,popupRef:g}}const o=await super.deserialize(e,t,n);return o.#i=e.fontSize,o.#e=de.makeHexColor(...e.color),o.#t=ft.#f(e.value),o.annotationElementId=e.id||null,o._initialData=r,o}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const t=ft._internalPadding*this.parentScale,n=this.getRect(t,t),r=_e._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#e),o={annotationType:Pe.FREETEXT,color:r,fontSize:this.#i,value:this.#d(),pageIndex:this.pageIndex,rect:n,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?o:this.annotationElementId&&!this.#a(o)?null:(o.id=this.annotationElementId,o)}#a(e){const{value:t,fontSize:n,color:r,pageIndex:o}=this._initialData;return this._hasBeenMoved||e.value!==t||e.fontSize!==n||e.color.some((l,c)=>l!==r[c])||e.pageIndex!==o}renderAnnotationElement(e){const t=super.renderAnnotationElement(e);if(this.deleted)return t;const{style:n}=t;n.fontSize=`calc(${this.#i}px * var(--scale-factor))`,n.color=this.#e,t.replaceChildren();for(const o of this.#t.split(`
`)){const l=document.createElement("div");l.append(o?document.createTextNode(o):document.createElement("br")),t.append(l)}const r=ft._internalPadding*this.parentScale;return e.updateEdited({rect:this.getRect(r,r),popupContent:this.#t}),t}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}}class ie{static PRECISION=1e-4;toSVGPath(){Ue("Abstract method `toSVGPath` must be implemented.")}get box(){Ue("Abstract getter `box` must be implemented.")}serialize(e,t){Ue("Abstract method `serialize` must be implemented.")}static _rescale(e,t,n,r,o,l){l||=new Float32Array(e.length);for(let c=0,d=e.length;c<d;c+=2)l[c]=t+e[c]*r,l[c+1]=n+e[c+1]*o;return l}static _rescaleAndSwap(e,t,n,r,o,l){l||=new Float32Array(e.length);for(let c=0,d=e.length;c<d;c+=2)l[c]=t+e[c+1]*r,l[c+1]=n+e[c]*o;return l}static _translate(e,t,n,r){r||=new Float32Array(e.length);for(let o=0,l=e.length;o<l;o+=2)r[o]=t+e[o],r[o+1]=n+e[o+1];return r}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,n,r,o){switch(o){case 90:return[1-t/n,e/r];case 180:return[1-e/n,1-t/r];case 270:return[t/n,1-e/r];default:return[e/n,t/r]}}static _normalizePagePoint(e,t,n){switch(n){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,n,r,o,l){return[(e+5*n)/6,(t+5*r)/6,(5*n+o)/6,(5*r+l)/6,(n+o)/2,(r+l)/2]}}class kr{#e;#t=[];#n;#s;#i=[];#r=new Float32Array(18);#l;#o;#u;#c;#h;#d;#f=[];static#a=8;static#p=2;static#m=kr.#a+kr.#p;constructor({x:e,y:t},n,r,o,l,c=0){this.#e=n,this.#d=o*r,this.#s=l,this.#r.set([NaN,NaN,NaN,NaN,e,t],6),this.#n=c,this.#c=kr.#a*r,this.#u=kr.#m*r,this.#h=r,this.#f.push(e,t)}isEmpty(){return isNaN(this.#r[8])}#g(){const e=this.#r.subarray(4,6),t=this.#r.subarray(16,18),[n,r,o,l]=this.#e;return[(this.#l+(e[0]-t[0])/2-n)/o,(this.#o+(e[1]-t[1])/2-r)/l,(this.#l+(t[0]-e[0])/2-n)/o,(this.#o+(t[1]-e[1])/2-r)/l]}add({x:e,y:t}){this.#l=e,this.#o=t;const[n,r,o,l]=this.#e;let[c,d,f,p]=this.#r.subarray(8,12);const g=e-f,y=t-p,v=Math.hypot(g,y);if(v<this.#u)return!1;const x=v-this.#c,_=x/v,A=_*g,C=_*y;let E=c,P=d;c=f,d=p,f+=A,p+=C,this.#f?.push(e,t);const R=-C/x,M=A/x,D=R*this.#d,O=M*this.#d;return this.#r.set(this.#r.subarray(2,8),0),this.#r.set([f+D,p+O],4),this.#r.set(this.#r.subarray(14,18),12),this.#r.set([f-D,p-O],16),isNaN(this.#r[6])?(this.#i.length===0&&(this.#r.set([c+D,d+O],2),this.#i.push(NaN,NaN,NaN,NaN,(c+D-n)/o,(d+O-r)/l),this.#r.set([c-D,d-O],14),this.#t.push(NaN,NaN,NaN,NaN,(c-D-n)/o,(d-O-r)/l)),this.#r.set([E,P,c,d,f,p],6),!this.isEmpty()):(this.#r.set([E,P,c,d,f,p],6),Math.abs(Math.atan2(P-d,E-c)-Math.atan2(C,A))<Math.PI/2?([c,d,f,p]=this.#r.subarray(2,6),this.#i.push(NaN,NaN,NaN,NaN,((c+f)/2-n)/o,((d+p)/2-r)/l),[c,d,E,P]=this.#r.subarray(14,18),this.#t.push(NaN,NaN,NaN,NaN,((E+c)/2-n)/o,((P+d)/2-r)/l),!0):([E,P,c,d,f,p]=this.#r.subarray(0,6),this.#i.push(((E+5*c)/6-n)/o,((P+5*d)/6-r)/l,((5*c+f)/6-n)/o,((5*d+p)/6-r)/l,((c+f)/2-n)/o,((d+p)/2-r)/l),[f,p,c,d,E,P]=this.#r.subarray(12,18),this.#t.push(((E+5*c)/6-n)/o,((P+5*d)/6-r)/l,((5*c+f)/6-n)/o,((5*d+p)/6-r)/l,((c+f)/2-n)/o,((d+p)/2-r)/l),!0))}toSVGPath(){if(this.isEmpty())return"";const e=this.#i,t=this.#t;if(isNaN(this.#r[6])&&!this.isEmpty())return this.#y();const n=[];n.push(`M${e[4]} ${e[5]}`);for(let r=6;r<e.length;r+=6)isNaN(e[r])?n.push(`L${e[r+4]} ${e[r+5]}`):n.push(`C${e[r]} ${e[r+1]} ${e[r+2]} ${e[r+3]} ${e[r+4]} ${e[r+5]}`);this.#v(n);for(let r=t.length-6;r>=6;r-=6)isNaN(t[r])?n.push(`L${t[r+4]} ${t[r+5]}`):n.push(`C${t[r]} ${t[r+1]} ${t[r+2]} ${t[r+3]} ${t[r+4]} ${t[r+5]}`);return this.#w(n),n.join(" ")}#y(){const[e,t,n,r]=this.#e,[o,l,c,d]=this.#g();return`M${(this.#r[2]-e)/n} ${(this.#r[3]-t)/r} L${(this.#r[4]-e)/n} ${(this.#r[5]-t)/r} L${o} ${l} L${c} ${d} L${(this.#r[16]-e)/n} ${(this.#r[17]-t)/r} L${(this.#r[14]-e)/n} ${(this.#r[15]-t)/r} Z`}#w(e){const t=this.#t;e.push(`L${t[4]} ${t[5]} Z`)}#v(e){const[t,n,r,o]=this.#e,l=this.#r.subarray(4,6),c=this.#r.subarray(16,18),[d,f,p,g]=this.#g();e.push(`L${(l[0]-t)/r} ${(l[1]-n)/o} L${d} ${f} L${p} ${g} L${(c[0]-t)/r} ${(c[1]-n)/o}`)}newFreeDrawOutline(e,t,n,r,o,l){return new Fy(e,t,n,r,o,l)}getOutlines(){const e=this.#i,t=this.#t,n=this.#r,[r,o,l,c]=this.#e,d=new Float32Array((this.#f?.length??0)+2);for(let g=0,y=d.length-2;g<y;g+=2)d[g]=(this.#f[g]-r)/l,d[g+1]=(this.#f[g+1]-o)/c;if(d[d.length-2]=(this.#l-r)/l,d[d.length-1]=(this.#o-o)/c,isNaN(n[6])&&!this.isEmpty())return this.#x(d);const f=new Float32Array(this.#i.length+24+this.#t.length);let p=e.length;for(let g=0;g<p;g+=2){if(isNaN(e[g])){f[g]=f[g+1]=NaN;continue}f[g]=e[g],f[g+1]=e[g+1]}p=this.#C(f,p);for(let g=t.length-6;g>=6;g-=6)for(let y=0;y<6;y+=2){if(isNaN(t[g+y])){f[p]=f[p+1]=NaN,p+=2;continue}f[p]=t[g+y],f[p+1]=t[g+y+1],p+=2}return this.#S(f,p),this.newFreeDrawOutline(f,d,this.#e,this.#h,this.#n,this.#s)}#x(e){const t=this.#r,[n,r,o,l]=this.#e,[c,d,f,p]=this.#g(),g=new Float32Array(36);return g.set([NaN,NaN,NaN,NaN,(t[2]-n)/o,(t[3]-r)/l,NaN,NaN,NaN,NaN,(t[4]-n)/o,(t[5]-r)/l,NaN,NaN,NaN,NaN,c,d,NaN,NaN,NaN,NaN,f,p,NaN,NaN,NaN,NaN,(t[16]-n)/o,(t[17]-r)/l,NaN,NaN,NaN,NaN,(t[14]-n)/o,(t[15]-r)/l],0),this.newFreeDrawOutline(g,e,this.#e,this.#h,this.#n,this.#s)}#S(e,t){const n=this.#t;return e.set([NaN,NaN,NaN,NaN,n[4],n[5]],t),t+=6}#C(e,t){const n=this.#r.subarray(4,6),r=this.#r.subarray(16,18),[o,l,c,d]=this.#e,[f,p,g,y]=this.#g();return e.set([NaN,NaN,NaN,NaN,(n[0]-o)/c,(n[1]-l)/d,NaN,NaN,NaN,NaN,f,p,NaN,NaN,NaN,NaN,g,y,NaN,NaN,NaN,NaN,(r[0]-o)/c,(r[1]-l)/d],t),t+=24}}class Fy extends ie{#e;#t=new Float32Array(4);#n;#s;#i;#r;#l;constructor(e,t,n,r,o,l){super(),this.#l=e,this.#i=t,this.#e=n,this.#r=r,this.#n=o,this.#s=l,this.lastPoint=[NaN,NaN],this.#o(l);const[c,d,f,p]=this.#t;for(let g=0,y=e.length;g<y;g+=2)e[g]=(e[g]-c)/f,e[g+1]=(e[g+1]-d)/p;for(let g=0,y=t.length;g<y;g+=2)t[g]=(t[g]-c)/f,t[g+1]=(t[g+1]-d)/p}toSVGPath(){const e=[`M${this.#l[4]} ${this.#l[5]}`];for(let t=6,n=this.#l.length;t<n;t+=6){if(isNaN(this.#l[t])){e.push(`L${this.#l[t+4]} ${this.#l[t+5]}`);continue}e.push(`C${this.#l[t]} ${this.#l[t+1]} ${this.#l[t+2]} ${this.#l[t+3]} ${this.#l[t+4]} ${this.#l[t+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,t,n,r],o){const l=n-e,c=r-t;let d,f;switch(o){case 0:d=ie._rescale(this.#l,e,r,l,-c),f=ie._rescale(this.#i,e,r,l,-c);break;case 90:d=ie._rescaleAndSwap(this.#l,e,t,l,c),f=ie._rescaleAndSwap(this.#i,e,t,l,c);break;case 180:d=ie._rescale(this.#l,n,t,-l,c),f=ie._rescale(this.#i,n,t,-l,c);break;case 270:d=ie._rescaleAndSwap(this.#l,n,r,-l,-c),f=ie._rescaleAndSwap(this.#i,n,r,-l,-c);break}return{outline:Array.from(d),points:[Array.from(f)]}}#o(e){const t=this.#l;let n=t[4],r=t[5],o=n,l=r,c=n,d=r,f=n,p=r;const g=e?Math.max:Math.min;for(let v=6,x=t.length;v<x;v+=6){if(isNaN(t[v]))o=Math.min(o,t[v+4]),l=Math.min(l,t[v+5]),c=Math.max(c,t[v+4]),d=Math.max(d,t[v+5]),p<t[v+5]?(f=t[v+4],p=t[v+5]):p===t[v+5]&&(f=g(f,t[v+4]));else{const _=de.bezierBoundingBox(n,r,...t.slice(v,v+6));o=Math.min(o,_[0]),l=Math.min(l,_[1]),c=Math.max(c,_[2]),d=Math.max(d,_[3]),p<_[3]?(f=_[2],p=_[3]):p===_[3]&&(f=g(f,_[2]))}n=t[v+4],r=t[v+5]}const y=this.#t;y[0]=o-this.#n,y[1]=l-this.#n,y[2]=c-o+2*this.#n,y[3]=d-l+2*this.#n,this.lastPoint=[f,p]}get box(){return this.#t}newOutliner(e,t,n,r,o,l=0){return new kr(e,t,n,r,o,l)}getNewOutline(e,t){const[n,r,o,l]=this.#t,[c,d,f,p]=this.#e,g=o*f,y=l*p,v=n*f+c,x=r*p+d,_=this.newOutliner({x:this.#i[0]*g+v,y:this.#i[1]*y+x},this.#e,this.#r,e,this.#s,t??this.#n);for(let A=2;A<this.#i.length;A+=2)_.add({x:this.#i[A]*g+v,y:this.#i[A+1]*y+x});return _.getOutlines()}}class uh{#e;#t;#n=[];#s=[];constructor(e,t=0,n=0,r=!0){let o=1/0,l=-1/0,c=1/0,d=-1/0;const f=10**-4;for(const{x:A,y:C,width:E,height:P}of e){const R=Math.floor((A-t)/f)*f,M=Math.ceil((A+E+t)/f)*f,D=Math.floor((C-t)/f)*f,O=Math.ceil((C+P+t)/f)*f,H=[R,D,O,!0],U=[M,D,O,!1];this.#n.push(H,U),o=Math.min(o,R),l=Math.max(l,M),c=Math.min(c,D),d=Math.max(d,O)}const p=l-o+2*n,g=d-c+2*n,y=o-n,v=c-n,x=this.#n.at(r?-1:-2),_=[x[0],x[2]];for(const A of this.#n){const[C,E,P]=A;A[0]=(C-y)/p,A[1]=(E-v)/g,A[2]=(P-v)/g}this.#e=new Float32Array([y,v,p,g]),this.#t=_}getOutlines(){this.#n.sort((t,n)=>t[0]-n[0]||t[1]-n[1]||t[2]-n[2]);const e=[];for(const t of this.#n)t[3]?(e.push(...this.#u(t)),this.#l(t)):(this.#o(t),e.push(...this.#u(t)));return this.#i(e)}#i(e){const t=[],n=new Set;for(const l of e){const[c,d,f]=l;t.push([c,d,l],[c,f,l])}t.sort((l,c)=>l[1]-c[1]||l[0]-c[0]);for(let l=0,c=t.length;l<c;l+=2){const d=t[l][2],f=t[l+1][2];d.push(f),f.push(d),n.add(d),n.add(f)}const r=[];let o;for(;n.size>0;){const l=n.values().next().value;let[c,d,f,p,g]=l;n.delete(l);let y=c,v=d;for(o=[c,f],r.push(o);;){let x;if(n.has(p))x=p;else if(n.has(g))x=g;else break;n.delete(x),[c,d,f,p,g]=x,y!==c&&(o.push(y,v,c,v===d?d:f),y=c),v=v===d?f:d}o.push(y,v)}return new MC(r,this.#e,this.#t)}#r(e){const t=this.#s;let n=0,r=t.length-1;for(;n<=r;){const o=n+r>>1,l=t[o][0];if(l===e)return o;l<e?n=o+1:r=o-1}return r+1}#l([,e,t]){const n=this.#r(e);this.#s.splice(n,0,[e,t])}#o([,e,t]){const n=this.#r(e);for(let r=n;r<this.#s.length;r++){const[o,l]=this.#s[r];if(o!==e)break;if(o===e&&l===t){this.#s.splice(r,1);return}}for(let r=n-1;r>=0;r--){const[o,l]=this.#s[r];if(o!==e)break;if(o===e&&l===t){this.#s.splice(r,1);return}}}#u(e){const[t,n,r]=e,o=[[t,n,r]],l=this.#r(r);for(let c=0;c<l;c++){const[d,f]=this.#s[c];for(let p=0,g=o.length;p<g;p++){const[,y,v]=o[p];if(!(f<=y||v<=d)){if(y>=d){if(v>f)o[p][1]=f;else{if(g===1)return[];o.splice(p,1),p--,g--}continue}o[p][2]=d,v>f&&o.push([t,f,v])}}}return o}}class MC extends ie{#e;#t;constructor(e,t,n){super(),this.#t=e,this.#e=t,this.lastPoint=n}toSVGPath(){const e=[];for(const t of this.#t){let[n,r]=t;e.push(`M${n} ${r}`);for(let o=2;o<t.length;o+=2){const l=t[o],c=t[o+1];l===n?(e.push(`V${c}`),r=c):c===r&&(e.push(`H${l}`),n=l)}e.push("Z")}return e.join(" ")}serialize([e,t,n,r],o){const l=[],c=n-e,d=r-t;for(const f of this.#t){const p=new Array(f.length);for(let g=0;g<f.length;g+=2)p[g]=e+f[g]*c,p[g+1]=r-f[g+1]*d;l.push(p)}return l}get box(){return this.#e}get classNamesForOutlining(){return["highlightOutline"]}}class dh extends kr{newFreeDrawOutline(e,t,n,r,o,l){return new LC(e,t,n,r,o,l)}}class LC extends Fy{newOutliner(e,t,n,r,o,l=0){return new dh(e,t,n,r,o,l)}}class Rn{#e=null;#t=null;#n;#s=null;#i=!1;#r=!1;#l=null;#o;#u=null;#c=null;#h;static#d=null;static get _keyboardManager(){return Me(this,"_keyboardManager",new Ya([[["Escape","mac+Escape"],Rn.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Rn.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Rn.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Rn.prototype._moveToPrevious],[["Home","mac+Home"],Rn.prototype._moveToBeginning],[["End","mac+End"],Rn.prototype._moveToEnd]]))}constructor({editor:e=null,uiManager:t=null}){e?(this.#r=!1,this.#h=Oe.HIGHLIGHT_COLOR,this.#l=e):(this.#r=!0,this.#h=Oe.HIGHLIGHT_DEFAULT_COLOR),this.#c=e?._uiManager||t,this.#o=this.#c._eventBus,this.#n=e?.color||this.#c?.highlightColors.values().next().value||"#FFFF98",Rn.#d||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const e=this.#e=document.createElement("button");e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.setAttribute("aria-haspopup",!0);const t=this.#c._signal;e.addEventListener("click",this.#m.bind(this),{signal:t}),e.addEventListener("keydown",this.#p.bind(this),{signal:t});const n=this.#t=document.createElement("span");return n.className="swatch",n.setAttribute("aria-hidden",!0),n.style.backgroundColor=this.#n,e.append(n),e}renderMainDropdown(){const e=this.#s=this.#f();return e.setAttribute("aria-orientation","horizontal"),e.setAttribute("aria-labelledby","highlightColorPickerLabel"),e}#f(){const e=document.createElement("div"),t=this.#c._signal;e.addEventListener("contextmenu",Xn,{signal:t}),e.className="dropdown",e.role="listbox",e.setAttribute("aria-multiselectable",!1),e.setAttribute("aria-orientation","vertical"),e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[n,r]of this.#c.highlightColors){const o=document.createElement("button");o.tabIndex="0",o.role="option",o.setAttribute("data-color",r),o.title=n,o.setAttribute("data-l10n-id",Rn.#d[n]);const l=document.createElement("span");o.append(l),l.className="swatch",l.style.backgroundColor=r,o.setAttribute("aria-selected",r===this.#n),o.addEventListener("click",this.#a.bind(this,r),{signal:t}),e.append(o)}return e.addEventListener("keydown",this.#p.bind(this),{signal:t}),e}#a(e,t){t.stopPropagation(),this.#o.dispatch("switchannotationeditorparams",{source:this,type:this.#h,value:e})}_colorSelectFromKeyboard(e){if(e.target===this.#e){this.#m(e);return}const t=e.target.getAttribute("data-color");t&&this.#a(t,e)}_moveToNext(e){if(!this.#y){this.#m(e);return}if(e.target===this.#e){this.#s.firstChild?.focus();return}e.target.nextSibling?.focus()}_moveToPrevious(e){if(e.target===this.#s?.firstChild||e.target===this.#e){this.#y&&this._hideDropdownFromKeyboard();return}this.#y||this.#m(e),e.target.previousSibling?.focus()}_moveToBeginning(e){if(!this.#y){this.#m(e);return}this.#s.firstChild?.focus()}_moveToEnd(e){if(!this.#y){this.#m(e);return}this.#s.lastChild?.focus()}#p(e){Rn._keyboardManager.exec(this,e)}#m(e){if(this.#y){this.hideDropdown();return}if(this.#i=e.detail===0,this.#u||(this.#u=new AbortController,window.addEventListener("pointerdown",this.#g.bind(this),{signal:this.#c.combinedSignal(this.#u)})),this.#s){this.#s.classList.remove("hidden");return}const t=this.#s=this.#f();this.#e.append(t)}#g(e){this.#s?.contains(e.target)||this.hideDropdown()}hideDropdown(){this.#s?.classList.add("hidden"),this.#u?.abort(),this.#u=null}get#y(){return this.#s&&!this.#s.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#r){if(!this.#y){this.#l?.unselect();return}this.hideDropdown(),this.#e.focus({preventScroll:!0,focusVisible:this.#i})}}updateColor(e){if(this.#t&&(this.#t.style.backgroundColor=e),!this.#s)return;const t=this.#c.highlightColors.values();for(const n of this.#s.children)n.setAttribute("aria-selected",t.next().value===e)}destroy(){this.#e?.remove(),this.#e=null,this.#t=null,this.#s?.remove(),this.#s=null}}class st extends _e{#e=null;#t=0;#n;#s=null;#i=null;#r=null;#l=null;#o=0;#u=null;#c=null;#h=null;#d=!1;#f=null;#a;#p=null;#m="";#g;#y="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=Pe.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const e=st.prototype;return Me(this,"_keyboardManager",new Ya([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}constructor(e){super({...e,name:"highlightEditor"}),this.color=e.color||st._defaultColor,this.#g=e.thickness||st._defaultThickness,this.#a=e.opacity||st._defaultOpacity,this.#n=e.boxes||null,this.#y=e.methodOfCreation||"",this.#m=e.text||"",this._isDraggable=!1,e.highlightId>-1?(this.#d=!0,this.#v(e),this.#T()):this.#n&&(this.#e=e.anchorNode,this.#t=e.anchorOffset,this.#l=e.focusNode,this.#o=e.focusOffset,this.#w(),this.#T(),this.rotate(this.rotation))}get telemetryInitialData(){return{action:"added",type:this.#d?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:this.#g,methodOfCreation:this.#y}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}#w(){const e=new uh(this.#n,.001);this.#c=e.getOutlines(),[this.x,this.y,this.width,this.height]=this.#c.box;const t=new uh(this.#n,.0025,.001,this._uiManager.direction==="ltr");this.#r=t.getOutlines();const{lastPoint:n}=this.#r;this.#f=[(n[0]-this.x)/this.width,(n[1]-this.y)/this.height]}#v({highlightOutlines:e,highlightId:t,clipPathId:n}){this.#c=e;const r=1.5;if(this.#r=e.getNewOutline(this.#g/2+r,.0025),t>=0)this.#h=t,this.#s=n,this.parent.drawLayer.finalizeDraw(t,{bbox:e.box,path:{d:e.toSVGPath()}}),this.#p=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#r.box,path:{d:this.#r.toSVGPath()}},!0);else if(this.parent){const p=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#h,{bbox:st.#_(this.#c.box,(p-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#p,{bbox:st.#_(this.#r.box,p),path:{d:this.#r.toSVGPath()}})}const[o,l,c,d]=e.box;switch(this.rotation){case 0:this.x=o,this.y=l,this.width=c,this.height=d;break;case 90:{const[p,g]=this.parentDimensions;this.x=l,this.y=1-o,this.width=c*g/p,this.height=d*p/g;break}case 180:this.x=1-o,this.y=1-l,this.width=c,this.height=d;break;case 270:{const[p,g]=this.parentDimensions;this.x=1-l,this.y=o,this.width=c*g/p,this.height=d*p/g;break}}const{lastPoint:f}=this.#r;this.#f=[(f[0]-o)/c,(f[1]-l)/d]}static initialize(e,t){_e.initialize(e,t),st._defaultColor||=t.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(e,t){switch(e){case Oe.HIGHLIGHT_DEFAULT_COLOR:st._defaultColor=t;break;case Oe.HIGHLIGHT_THICKNESS:st._defaultThickness=t;break}}translateInPage(e,t){}get toolbarPosition(){return this.#f}updateParams(e,t){switch(e){case Oe.HIGHLIGHT_COLOR:this.#x(t);break;case Oe.HIGHLIGHT_THICKNESS:this.#S(t);break}}static get defaultPropertiesToUpdate(){return[[Oe.HIGHLIGHT_DEFAULT_COLOR,st._defaultColor],[Oe.HIGHLIGHT_THICKNESS,st._defaultThickness]]}get propertiesToUpdate(){return[[Oe.HIGHLIGHT_COLOR,this.color||st._defaultColor],[Oe.HIGHLIGHT_THICKNESS,this.#g||st._defaultThickness],[Oe.HIGHLIGHT_FREE,this.#d]]}#x(e){const t=(o,l)=>{this.color=o,this.#a=l,this.parent?.drawLayer.updateProperties(this.#h,{root:{fill:o,"fill-opacity":l}}),this.#i?.updateColor(o)},n=this.color,r=this.#a;this.addCommands({cmd:t.bind(this,e,st._defaultOpacity),undo:t.bind(this,n,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Oe.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(e)},!0)}#S(e){const t=this.#g,n=r=>{this.#g=r,this.#C(r)};this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,t),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Oe.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)}async addEditToolbar(){const e=await super.addEditToolbar();return e?(this._uiManager.highlightColors&&(this.#i=new Rn({editor:this}),e.addColorPicker(this.#i)),e):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#N())}getBaseTranslation(){return[0,0]}getRect(e,t){return super.getRect(e,t,this.#N())}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){this.#k(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#T(),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;this.parent&&!e?this.#k():e&&(this.#T(e),t=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),this.show(this._isVisible),t&&this.select()}#C(e){if(!this.#d)return;this.#v({highlightOutlines:this.#c.getNewOutline(e/2)}),this.fixAndSetPosition();const[t,n]=this.parentDimensions;this.setDims(this.width*t,this.height*n)}#k(){this.#h===null||!this.parent||(this.parent.drawLayer.remove(this.#h),this.#h=null,this.parent.drawLayer.remove(this.#p),this.#p=null)}#T(e=this.parent){this.#h===null&&({id:this.#h,clipPathId:this.#s}=e.drawLayer.draw({bbox:this.#c.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.#a},rootClass:{highlight:!0,free:this.#d},path:{d:this.#c.toSVGPath()}},!1,!0),this.#p=e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#d},bbox:this.#r.box,path:{d:this.#r.toSVGPath()}},this.#d),this.#u&&(this.#u.style.clipPath=this.#s))}static#_([e,t,n,r],o){switch(o){case 90:return[1-t-r,e,r,n];case 180:return[1-e-n,1-t-r,n,r];case 270:return[t,1-e-n,r,n]}return[e,t,n,r]}rotate(e){const{drawLayer:t}=this.parent;let n;this.#d?(e=(e-this.rotation+360)%360,n=st.#_(this.#c.box,e)):n=st.#_([this.x,this.y,this.width,this.height],e),t.updateProperties(this.#h,{bbox:n,root:{"data-main-rotation":e}}),t.updateProperties(this.#p,{bbox:st.#_(this.#r.box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();this.#m&&(e.setAttribute("aria-label",this.#m),e.setAttribute("role","mark")),this.#d?e.classList.add("free"):this.div.addEventListener("keydown",this.#R.bind(this),{signal:this._uiManager._signal});const t=this.#u=document.createElement("div");e.append(t),t.setAttribute("aria-hidden","true"),t.className="internal",t.style.clipPath=this.#s;const[n,r]=this.parentDimensions;return this.setDims(this.width*n,this.height*r),Xl(this,this.#u,["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!1}})}#R(e){st._keyboardManager.exec(this,e)}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:this.#E(!0);break;case 1:case 3:this.#E(!1);break}}#E(e){if(!this.#e)return;const t=window.getSelection();e?t.setPosition(this.#e,this.#t):t.setPosition(this.#l,this.#o)}select(){super.select(),this.#p&&this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#p&&(this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{selected:!1}}),this.#d||this.#E(!1))}get _mustFixPosition(){return!this.#d}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(this.#h,{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(this.#p,{rootClass:{hidden:!e}}))}#N(){return this.#d?this.rotation:0}#L(){if(this.#d)return null;const[e,t]=this.pageDimensions,[n,r]=this.pageTranslation,o=this.#n,l=new Float32Array(o.length*8);let c=0;for(const{x:d,y:f,width:p,height:g}of o){const y=d*e+n,v=(1-f)*t+r;l[c]=l[c+4]=y,l[c+1]=l[c+3]=v,l[c+2]=l[c+6]=y+p*e,l[c+5]=l[c+7]=v-g*t,c+=8}return l}#O(e){return this.#c.serialize(e,this.#N())}static startHighlighting(e,t,{target:n,x:r,y:o}){const{x:l,y:c,width:d,height:f}=n.getBoundingClientRect(),p=new AbortController,g=e.combinedSignal(p),y=v=>{p.abort(),this.#b(e,v)};window.addEventListener("blur",y,{signal:g}),window.addEventListener("pointerup",y,{signal:g}),window.addEventListener("pointerdown",yn,{capture:!0,passive:!1,signal:g}),window.addEventListener("contextmenu",Xn,{signal:g}),n.addEventListener("pointermove",this.#A.bind(this,e),{signal:g}),this._freeHighlight=new dh({x:r,y:o},[l,c,d,f],e.scale,this._defaultThickness/2,t,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#A(e,t){this._freeHighlight.add(t)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#b(e,t){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(t,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(e,t,n){let r=null;if(e instanceof Dy){const{data:{quadPoints:x,rect:_,rotation:A,id:C,color:E,opacity:P,popupRef:R},parent:{page:{pageNumber:M}}}=e;r=e={annotationType:Pe.HIGHLIGHT,color:Array.from(E),opacity:P,quadPoints:x,boxes:null,pageIndex:M-1,rect:_.slice(0),rotation:A,id:C,deleted:!1,popupRef:R}}else if(e instanceof Qh){const{data:{inkLists:x,rect:_,rotation:A,id:C,color:E,borderStyle:{rawWidth:P},popupRef:R},parent:{page:{pageNumber:M}}}=e;r=e={annotationType:Pe.HIGHLIGHT,color:Array.from(E),thickness:P,inkLists:x,boxes:null,pageIndex:M-1,rect:_.slice(0),rotation:A,id:C,deleted:!1,popupRef:R}}const{color:o,quadPoints:l,inkLists:c,opacity:d}=e,f=await super.deserialize(e,t,n);f.color=de.makeHexColor(...o),f.#a=d||1,c&&(f.#g=e.thickness),f.annotationElementId=e.id||null,f._initialData=r;const[p,g]=f.pageDimensions,[y,v]=f.pageTranslation;if(l){const x=f.#n=[];for(let _=0;_<l.length;_+=8)x.push({x:(l[_]-y)/p,y:1-(l[_+1]-v)/g,width:(l[_+2]-l[_])/p,height:(l[_+1]-l[_+5])/g});f.#w(),f.#T(),f.rotate(f.rotation)}else if(c){f.#d=!0;const x=c[0],_={x:x[0]-y,y:g-(x[1]-v)},A=new dh(_,[0,0,p,g],1,f.#g/2,!0,.001);for(let P=0,R=x.length;P<R;P+=2)_.x=x[P]-y,_.y=g-(x[P+1]-v),A.add(_);const{id:C,clipPathId:E}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:f.color,"fill-opacity":f._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:A.toSVGPath()}},!0,!0);f.#v({highlightOutlines:A.getOutlines(),highlightId:C,clipPathId:E}),f.#T()}return f}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const t=this.getRect(0,0),n=_e._colorManager.convert(this.color),r={annotationType:Pe.HIGHLIGHT,color:n,opacity:this.#a,thickness:this.#g,quadPoints:this.#L(),outlines:this.#O(t),pageIndex:this.pageIndex,rect:t,rotation:this.#N(),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!this.#M(r)?null:(r.id=this.annotationElementId,r)}#M(e){const{color:t}=this._initialData;return e.color.some((n,r)=>n!==t[r])}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}}class DC{#e=Object.create(null);updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,n]of Object.entries(e))this.updateProperty(t,n)}updateSVGProperty(e,t){this.#e[e]=t}toSVGProperties(){const e=this.#e;return this.#e=Object.create(null),{root:e}}reset(){this.#e=Object.create(null)}updateAll(e=this){this.updateProperties(e)}clone(){Ue("Not implemented")}}class xe extends _e{#e=null;#t;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#n=null;static#s=null;static#i=null;static#r=NaN;static#l=null;static#o=null;static#u=NaN;static _INNER_MARGIN=3;constructor(e){super(e),this.#t=e.mustBeCommitted||!1,e.drawOutlines&&(this.#c(e),this.#f())}#c({drawOutlines:e,drawId:t,drawingOptions:n}){this.#e=e,this._drawingOptions||=n,t>=0?(this._drawId=t,this.parent.drawLayer.finalizeDraw(t,e.defaultProperties)):this._drawId=this.#h(e,this.parent),this.#m(e.box)}#h(e,t){const{id:n}=t.drawLayer.draw(xe._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return n}static _mergeSVGProperties(e,t){const n=new Set(Object.keys(e));for(const[r,o]of Object.entries(t))n.has(r)?Object.assign(e[r],o):e[r]=o;return e}static getDefaultDrawingOptions(e){Ue("Not implemented")}static get typesMap(){Ue("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,t){const n=this.typesMap.get(e);n&&this._defaultDrawingOptions.updateProperty(n,t),this._currentParent&&(xe.#n.updateProperty(n,t),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,t){const n=this.constructor.typesMap.get(e);n&&this._updateProperty(e,n,t)}static get defaultPropertiesToUpdate(){const e=[],t=this._defaultDrawingOptions;for(const[n,r]of this.typesMap)e.push([n,t[r]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:t}=this;for(const[n,r]of this.constructor.typesMap)e.push([n,t[r]]);return e}_updateProperty(e,t,n){const r=this._drawingOptions,o=r[t],l=c=>{r.updateProperty(t,c);const d=this.#e.updateProperty(t,c);d&&this.#m(d),this.parent?.drawLayer.updateProperties(this._drawId,r.toSVGProperties())};this.addCommands({cmd:l.bind(this,n),undo:l.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,xe._mergeSVGProperties(this.#e.getPathResizingSVGProperties(this.#p()),{bbox:this.#g()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,xe._mergeSVGProperties(this.#e.getPathResizedSVGProperties(this.#p()),{bbox:this.#g()}))}_onTranslating(e,t){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#g(e,t)})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,xe._mergeSVGProperties(this.#e.getPathTranslatedSVGProperties(this.#p(),this.parentDimensions),{bbox:this.#g()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#t&&(this.#t=!1,this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){this.#d(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#f(),this.#m(this.#e.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),this.#d()):e&&(this._uiManager.addShouldRescale(this),this.#f(e),t=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),t&&this.select()}#d(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#f(e=this.parent){if(!(this._drawId!==null&&this.parent===e)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#h(this.#e,e)}}#a([e,t,n,r]){const{parentDimensions:[o,l],rotation:c}=this;switch(c){case 90:return[t,1-e,n*(l/o),r*(o/l)];case 180:return[1-e,1-t,n,r];case 270:return[1-t,e,n*(l/o),r*(o/l)];default:return[e,t,n,r]}}#p(){const{x:e,y:t,width:n,height:r,parentDimensions:[o,l],rotation:c}=this;switch(c){case 90:return[1-t,e,n*(o/l),r*(l/o)];case 180:return[1-e,1-t,n,r];case 270:return[t,1-e,n*(o/l),r*(l/o)];default:return[e,t,n,r]}}#m(e){if([this.x,this.y,this.width,this.height]=this.#a(e),this.div){this.fixAndSetPosition();const[t,n]=this.parentDimensions;this.setDims(this.width*t,this.height*n)}this._onResized()}#g(){const{x:e,y:t,width:n,height:r,rotation:o,parentRotation:l,parentDimensions:[c,d]}=this;switch((o*4+l)/90){case 1:return[1-t-r,e,r,n];case 2:return[1-e-n,1-t-r,n,r];case 3:return[t,1-e-n,r,n];case 4:return[e,t-n*(c/d),r*(d/c),n*(c/d)];case 5:return[1-t,e,n*(c/d),r*(d/c)];case 6:return[1-e-r*(d/c),1-t,r*(d/c),n*(c/d)];case 7:return[t-n*(c/d),1-e-r*(d/c),n*(c/d),r*(d/c)];case 8:return[e-n,t-r,n,r];case 9:return[1-t,e-n,r,n];case 10:return[1-e,1-t,n,r];case 11:return[t-r,1-e,r,n];case 12:return[e-r*(d/c),t,r*(d/c),n*(c/d)];case 13:return[1-t-n*(c/d),e-r*(d/c),n*(c/d),r*(d/c)];case 14:return[1-e,1-t-n*(c/d),r*(d/c),n*(c/d)];case 15:return[t,1-e,n*(c/d),r*(d/c)];default:return[e,t,n,r]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,xe._mergeSVGProperties({bbox:this.#g()},this.#e.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#m(this.#e.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;const e=super.render();e.classList.add("draw");const t=document.createElement("div");e.append(t),t.setAttribute("aria-hidden","true"),t.className="internal";const[n,r]=this.parentDimensions;return this.setDims(this.width*n,this.height*r),this._uiManager.addShouldRescale(this),this.disableEditing(),e}static createDrawerInstance(e,t,n,r,o){Ue("Not implemented")}static startDrawing(e,t,n,r){const{target:o,offsetX:l,offsetY:c,pointerId:d,pointerType:f}=r;if(xe.#l&&xe.#l!==f)return;const{viewport:{rotation:p}}=e,{width:g,height:y}=o.getBoundingClientRect(),v=xe.#s=new AbortController,x=e.combinedSignal(v);if(xe.#r||=d,xe.#l??=f,window.addEventListener("pointerup",_=>{xe.#r===_.pointerId?this._endDraw(_):xe.#o?.delete(_.pointerId)},{signal:x}),window.addEventListener("pointercancel",_=>{xe.#r===_.pointerId?this._currentParent.endDrawingSession():xe.#o?.delete(_.pointerId)},{signal:x}),window.addEventListener("pointerdown",_=>{xe.#l===_.pointerType&&((xe.#o||=new Set).add(_.pointerId),xe.#n.isCancellable()&&(xe.#n.removeLastElement(),xe.#n.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:x}),window.addEventListener("contextmenu",Xn,{signal:x}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:x}),o.addEventListener("touchmove",_=>{_.timeStamp===xe.#u&&yn(_)},{signal:x}),e.toggleDrawing(),t._editorUndoBar?.hide(),xe.#n){e.drawLayer.updateProperties(this._currentDrawId,xe.#n.startNew(l,c,g,y,p));return}t.updateUIForDefaultProperties(this),xe.#n=this.createDrawerInstance(l,c,g,y,p),xe.#i=this.getDefaultDrawingOptions(),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(xe.#i.toSVGProperties(),xe.#n.defaultSVGProperties),!0,!1)}static _drawMove(e){if(xe.#u=-1,!xe.#n)return;const{offsetX:t,offsetY:n,pointerId:r}=e;if(xe.#r===r){if(xe.#o?.size>=1){this._endDraw(e);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,xe.#n.add(t,n)),xe.#u=e.timeStamp,yn(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,xe.#n=null,xe.#i=null,xe.#l=null,xe.#u=NaN),xe.#s&&(xe.#s.abort(),xe.#s=null,xe.#r=NaN,xe.#o=null)}static _endDraw(e){const t=this._currentParent;if(t){if(t.toggleDrawing(!0),this._cleanup(!1),e&&t.drawLayer.updateProperties(this._currentDrawId,xe.#n.end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const n=xe.#n,r=this._currentDrawId,o=n.getLastElement();t.addCommands({cmd:()=>{t.drawLayer.updateProperties(r,n.setLastElement(o))},undo:()=>{t.drawLayer.updateProperties(r,n.removeLastElement())},mustExec:!1,type:Oe.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){const t=this._currentParent;if(!t)return null;if(t.toggleDrawing(!0),t.cleanUndoStack(Oe.DRAW_STEP),!xe.#n.isEmpty()){const{pageDimensions:[n,r],scale:o}=t,l=t.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:xe.#n.getOutlines(n*o,r*o,o,this._INNER_MARGIN),drawingOptions:xe.#i,mustBeCommitted:!e});return this._cleanup(!0),l}return t.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,t,n,r,o,l){Ue("Not implemented")}static async deserialize(e,t,n){const{rawDims:{pageWidth:r,pageHeight:o,pageX:l,pageY:c}}=t.viewport,d=this.deserializeDraw(l,c,r,o,this._INNER_MARGIN,e),f=await super.deserialize(e,t,n);return f.createDrawingOptions(e),f.#c({drawOutlines:d}),f.#f(),f.onScaleChanging(),f.rotate(),f}serializeDraw(e){const[t,n]=this.pageTranslation,[r,o]=this.pageDimensions;return this.#e.serialize([t,n,r,o],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}}class OC{#e=new Float64Array(6);#t;#n;#s;#i;#r;#l="";#o=0;#u=new Sc;#c;#h;constructor(e,t,n,r,o,l){this.#c=n,this.#h=r,this.#s=o,this.#i=l,[e,t]=this.#d(e,t);const c=this.#t=[NaN,NaN,NaN,NaN,e,t];this.#r=[e,t],this.#n=[{line:c,points:this.#r}],this.#e.set(c,0)}updateProperty(e,t){e==="stroke-width"&&(this.#i=t)}#d(e,t){return ie._normalizePoint(e,t,this.#c,this.#h,this.#s)}isEmpty(){return!this.#n||this.#n.length===0}isCancellable(){return this.#r.length<=10}add(e,t){[e,t]=this.#d(e,t);const[n,r,o,l]=this.#e.subarray(2,6),c=e-o,d=t-l;return Math.hypot(this.#c*c,this.#h*d)<=2?null:(this.#r.push(e,t),isNaN(n)?(this.#e.set([o,l,e,t],2),this.#t.push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(this.#e[0])&&this.#t.splice(6,6),this.#e.set([n,r,o,l,e,t],0),this.#t.push(...ie.createBezierPoints(n,r,o,l,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const n=this.add(e,t);return n||(this.#r.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,n,r,o){this.#c=n,this.#h=r,this.#s=o,[e,t]=this.#d(e,t);const l=this.#t=[NaN,NaN,NaN,NaN,e,t];this.#r=[e,t];const c=this.#n.at(-1);return c&&(c.line=new Float32Array(c.line),c.points=new Float32Array(c.points)),this.#n.push({line:l,points:this.#r}),this.#e.set(l,0),this.#o=0,this.toSVGPath(),null}getLastElement(){return this.#n.at(-1)}setLastElement(e){return this.#n?(this.#n.push(e),this.#t=e.line,this.#r=e.points,this.#o=0,{path:{d:this.toSVGPath()}}):this.#u.setLastElement(e)}removeLastElement(){if(!this.#n)return this.#u.removeLastElement();this.#n.pop(),this.#l="";for(let e=0,t=this.#n.length;e<t;e++){const{line:n,points:r}=this.#n[e];this.#t=n,this.#r=r,this.#o=0,this.toSVGPath()}return{path:{d:this.#l}}}toSVGPath(){const e=ie.svgRound(this.#t[4]),t=ie.svgRound(this.#t[5]);if(this.#r.length===2)return this.#l=`${this.#l} M ${e} ${t} Z`,this.#l;if(this.#r.length<=6){const r=this.#l.lastIndexOf("M");this.#l=`${this.#l.slice(0,r)} M ${e} ${t}`,this.#o=6}if(this.#r.length===4){const r=ie.svgRound(this.#t[10]),o=ie.svgRound(this.#t[11]);return this.#l=`${this.#l} L ${r} ${o}`,this.#o=12,this.#l}const n=[];this.#o===0&&(n.push(`M ${e} ${t}`),this.#o=6);for(let r=this.#o,o=this.#t.length;r<o;r+=6){const[l,c,d,f,p,g]=this.#t.slice(r,r+6).map(ie.svgRound);n.push(`C${l} ${c} ${d} ${f} ${p} ${g}`)}return this.#l+=n.join(" "),this.#o=this.#t.length,this.#l}getOutlines(e,t,n,r){const o=this.#n.at(-1);return o.line=new Float32Array(o.line),o.points=new Float32Array(o.points),this.#u.build(this.#n,e,t,n,this.#s,this.#i,r),this.#e=null,this.#t=null,this.#n=null,this.#l=null,this.#u}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class Sc extends ie{#e;#t=0;#n;#s;#i;#r;#l;#o;#u;build(e,t,n,r,o,l,c){this.#i=t,this.#r=n,this.#l=r,this.#o=o,this.#u=l,this.#n=c??0,this.#s=e,this.#d()}setLastElement(e){return this.#s.push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#s.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:t}of this.#s){if(e.push(`M${ie.svgRound(t[4])} ${ie.svgRound(t[5])}`),t.length===6){e.push("Z");continue}if(t.length===12){e.push(`L${ie.svgRound(t[10])} ${ie.svgRound(t[11])}`);continue}for(let n=6,r=t.length;n<r;n+=6){const[o,l,c,d,f,p]=t.subarray(n,n+6).map(ie.svgRound);e.push(`C${o} ${l} ${c} ${d} ${f} ${p}`)}}return e.join("")}serialize([e,t,n,r],o){const l=[],c=[],[d,f,p,g]=this.#h();let y,v,x,_,A,C,E,P,R;switch(this.#o){case 0:R=ie._rescale,y=e,v=t+r,x=n,_=-r,A=e+d*n,C=t+(1-f-g)*r,E=e+(d+p)*n,P=t+(1-f)*r;break;case 90:R=ie._rescaleAndSwap,y=e,v=t,x=n,_=r,A=e+f*n,C=t+d*r,E=e+(f+g)*n,P=t+(d+p)*r;break;case 180:R=ie._rescale,y=e+n,v=t,x=-n,_=r,A=e+(1-d-p)*n,C=t+f*r,E=e+(1-d)*n,P=t+(f+g)*r;break;case 270:R=ie._rescaleAndSwap,y=e+n,v=t+r,x=-n,_=-r,A=e+(1-f-g)*n,C=t+(1-d-p)*r,E=e+(1-f)*n,P=t+(1-d)*r;break}for(const{line:M,points:D}of this.#s)l.push(R(M,y,v,x,_,o?new Array(M.length):null)),c.push(R(D,y,v,x,_,o?new Array(D.length):null));return{lines:l,points:c,rect:[A,C,E,P]}}static deserialize(e,t,n,r,o,{paths:{lines:l,points:c},rotation:d,thickness:f}){const p=[];let g,y,v,x,_;switch(d){case 0:_=ie._rescale,g=-e/n,y=t/r+1,v=1/n,x=-1/r;break;case 90:_=ie._rescaleAndSwap,g=-t/r,y=-e/n,v=1/r,x=1/n;break;case 180:_=ie._rescale,g=e/n+1,y=-t/r,v=-1/n,x=1/r;break;case 270:_=ie._rescaleAndSwap,g=t/r+1,y=e/n+1,v=-1/r,x=-1/n;break}if(!l){l=[];for(const C of c){const E=C.length;if(E===2){l.push(new Float32Array([NaN,NaN,NaN,NaN,C[0],C[1]]));continue}if(E===4){l.push(new Float32Array([NaN,NaN,NaN,NaN,C[0],C[1],NaN,NaN,NaN,NaN,C[2],C[3]]));continue}const P=new Float32Array(3*(E-2));l.push(P);let[R,M,D,O]=C.subarray(0,4);P.set([NaN,NaN,NaN,NaN,R,M],0);for(let H=4;H<E;H+=2){const U=C[H],K=C[H+1];P.set(ie.createBezierPoints(R,M,D,O,U,K),(H-2)*3),[R,M,D,O]=[D,O,U,K]}}}for(let C=0,E=l.length;C<E;C++)p.push({line:_(l[C].map(P=>P??NaN),g,y,v,x),points:_(c[C].map(P=>P??NaN),g,y,v,x)});const A=new Sc;return A.build(p,n,r,1,d,f,o),A}#c(e=this.#u){const t=this.#n+e/2*this.#l;return this.#o%180===0?[t/this.#i,t/this.#r]:[t/this.#r,t/this.#i]}#h(){const[e,t,n,r]=this.#e,[o,l]=this.#c(0);return[e+o,t+l,n-2*o,r-2*l]}#d(){const e=this.#e=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:r}of this.#s){if(r.length<=12){for(let c=4,d=r.length;c<d;c+=6){const[f,p]=r.subarray(c,c+2);e[0]=Math.min(e[0],f),e[1]=Math.min(e[1],p),e[2]=Math.max(e[2],f),e[3]=Math.max(e[3],p)}continue}let o=r[4],l=r[5];for(let c=6,d=r.length;c<d;c+=6){const[f,p,g,y,v,x]=r.subarray(c,c+6);de.bezierBoundingBox(o,l,f,p,g,y,v,x,e),o=v,l=x}}const[t,n]=this.#c();e[0]=Math.min(1,Math.max(0,e[0]-t)),e[1]=Math.min(1,Math.max(0,e[1]-n)),e[2]=Math.min(1,Math.max(0,e[2]+t)),e[3]=Math.min(1,Math.max(0,e[3]+n)),e[2]-=e[0],e[3]-=e[1]}get box(){return this.#e}updateProperty(e,t){return e==="stroke-width"?this.#f(t):null}#f(e){const[t,n]=this.#c();this.#u=e;const[r,o]=this.#c(),[l,c]=[r-t,o-n],d=this.#e;return d[0]-=l,d[1]-=c,d[2]+=2*l,d[3]+=2*c,d}updateParentDimensions([e,t],n){const[r,o]=this.#c();this.#i=e,this.#r=t,this.#l=n;const[l,c]=this.#c(),d=l-r,f=c-o,p=this.#e;return p[0]-=d,p[1]-=f,p[2]+=2*d,p[3]+=2*f,p}updateRotation(e){return this.#t=e,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#e.map(ie.svgRound).join(" ")}get defaultProperties(){const[e,t]=this.#e;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ie.svgRound(e)} ${ie.svgRound(t)}`}}}get rotationTransform(){const[,,e,t]=this.#e;let n=0,r=0,o=0,l=0,c=0,d=0;switch(this.#t){case 90:r=t/e,o=-e/t,c=e;break;case 180:n=-1,l=-1,c=e,d=t;break;case 270:r=-t/e,o=e/t,d=t;break;default:return""}return`matrix(${n} ${r} ${o} ${l} ${ie.svgRound(c)} ${ie.svgRound(d)})`}getPathResizingSVGProperties([e,t,n,r]){const[o,l]=this.#c(),[c,d,f,p]=this.#e;if(Math.abs(f-o)<=ie.PRECISION||Math.abs(p-l)<=ie.PRECISION){const _=e+n/2-(c+f/2),A=t+r/2-(d+p/2);return{path:{"transform-origin":`${ie.svgRound(e)} ${ie.svgRound(t)}`,transform:`${this.rotationTransform} translate(${_} ${A})`}}}const g=(n-2*o)/(f-2*o),y=(r-2*l)/(p-2*l),v=f/n,x=p/r;return{path:{"transform-origin":`${ie.svgRound(c)} ${ie.svgRound(d)}`,transform:`${this.rotationTransform} scale(${v} ${x}) translate(${ie.svgRound(o)} ${ie.svgRound(l)}) scale(${g} ${y}) translate(${ie.svgRound(-o)} ${ie.svgRound(-l)})`}}}getPathResizedSVGProperties([e,t,n,r]){const[o,l]=this.#c(),c=this.#e,[d,f,p,g]=c;if(c[0]=e,c[1]=t,c[2]=n,c[3]=r,Math.abs(p-o)<=ie.PRECISION||Math.abs(g-l)<=ie.PRECISION){const A=e+n/2-(d+p/2),C=t+r/2-(f+g/2);for(const{line:E,points:P}of this.#s)ie._translate(E,A,C,E),ie._translate(P,A,C,P);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ie.svgRound(e)} ${ie.svgRound(t)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const y=(n-2*o)/(p-2*o),v=(r-2*l)/(g-2*l),x=-y*(d+o)+e+o,_=-v*(f+l)+t+l;if(y!==1||v!==1||x!==0||_!==0)for(const{line:A,points:C}of this.#s)ie._rescale(A,x,_,y,v,A),ie._rescale(C,x,_,y,v,C);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ie.svgRound(e)} ${ie.svgRound(t)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,t],n){const[r,o]=n,l=this.#e,c=e-l[0],d=t-l[1];if(this.#i===r&&this.#r===o)for(const{line:f,points:p}of this.#s)ie._translate(f,c,d,f),ie._translate(p,c,d,p);else{const f=this.#i/r,p=this.#r/o;this.#i=r,this.#r=o;for(const{line:g,points:y}of this.#s)ie._rescale(g,c,d,f,p,g),ie._rescale(y,c,d,f,p,y);l[2]*=f,l[3]*=p}return l[0]=e,l[1]=t,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${ie.svgRound(e)} ${ie.svgRound(t)}`}}}get defaultSVGProperties(){const e=this.#e;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${ie.svgRound(e[0])} ${ie.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}}class Jh extends DC{#e;constructor(e){super(),this.#e=e,super.updateProperties({fill:"none",stroke:_e._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){e==="stroke-width"&&(t??=this["stroke-width"],t*=this.#e.realScale),super.updateSVGProperty(e,t)}clone(){const e=new Jh(this.#e);return e.updateAll(this),e}}class Zh extends xe{static _type="ink";static _editorType=Pe.INK;static _defaultDrawingOptions=null;constructor(e){super({...e,name:"inkEditor"}),this._willKeepAspectRatio=!0}static initialize(e,t){_e.initialize(e,t),this._defaultDrawingOptions=new Jh(t.viewParameters)}static getDefaultDrawingOptions(e){const t=this._defaultDrawingOptions.clone();return t.updateProperties(e),t}static get supportMultipleDrawings(){return!0}static get typesMap(){return Me(this,"typesMap",new Map([[Oe.INK_THICKNESS,"stroke-width"],[Oe.INK_COLOR,"stroke"],[Oe.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,t,n,r,o){return new OC(e,t,n,r,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,t,n,r,o,l){return Sc.deserialize(e,t,n,r,o,l)}static async deserialize(e,t,n){let r=null;if(e instanceof Qh){const{data:{inkLists:l,rect:c,rotation:d,id:f,color:p,opacity:g,borderStyle:{rawWidth:y},popupRef:v},parent:{page:{pageNumber:x}}}=e;r=e={annotationType:Pe.INK,color:Array.from(p),thickness:y,opacity:g,paths:{points:l},boxes:null,pageIndex:x-1,rect:c.slice(0),rotation:d,id:f,deleted:!1,popupRef:v}}const o=await super.deserialize(e,t,n);return o.annotationElementId=e.id||null,o._initialData=r,o}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:t,parent:n}=this;t.updateSVGProperty("stroke-width"),n.drawLayer.updateProperties(e,t.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:t,opacity:n}){this._drawingOptions=Zh.getDefaultDrawingOptions({stroke:de.makeHexColor(...e),"stroke-width":t,"stroke-opacity":n})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:t,points:n,rect:r}=this.serializeDraw(e),{_drawingOptions:{stroke:o,"stroke-opacity":l,"stroke-width":c}}=this,d={annotationType:Pe.INK,color:_e._colorManager.convert(o),opacity:l,thickness:c,paths:{lines:t,points:n},pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?d:this.annotationElementId&&!this.#e(d)?null:(d.id=this.annotationElementId,d)}#e(e){const{color:t,thickness:n,opacity:r,pageIndex:o}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||e.color.some((l,c)=>l!==t[c])||e.thickness!==n||e.opacity!==r||e.pageIndex!==o}renderAnnotationElement(e){const{points:t,rect:n}=this.serializeDraw(!1);return e.updateEdited({rect:n,thickness:this._drawingOptions["stroke-width"],points:t}),null}}class ef extends _e{#e=null;#t=null;#n=null;#s=null;#i=null;#r="";#l=null;#o=null;#u=!1;#c=!1;static _type="stamp";static _editorType=Pe.STAMP;constructor(e){super({...e,name:"stampEditor"}),this.#s=e.bitmapUrl,this.#i=e.bitmapFile}static initialize(e,t){_e.initialize(e,t)}static get supportedTypes(){return Me(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(t=>`image/${t}`))}static get supportedTypesStr(){return Me(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(e){return this.supportedTypes.includes(e)}static paste(e,t){t.pasteEditor(Pe.STAMP,{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(e){const t=e.get("hasAltText");return{hasAltText:t.get(!0)??0,hasNoAltText:t.get(!1)??0}}#h(e,t=!1){if(!e){this.remove();return}this.#e=e.bitmap,t||(this.#t=e.id,this.#u=e.isSvg),e.file&&(this.#r=e.file.name),this.#a()}#d(){if(this.#n=null,this._uiManager.enableWaiting(!1),!!this.#l){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(e=null,t=!0){if(this.hasAltTextData())return null;const{mlManager:n}=this._uiManager;if(!n)throw new Error("No ML.");if(!await n.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:r,width:o,height:l}=e||this.copyCanvas(null,null,!0).imageData,c=await n.guess({name:"altText",request:{data:r,width:o,height:l,channels:r.length/(o*l)}});if(!c)throw new Error("No response from the AI service.");if(c.error)throw new Error("Error from the AI service.");if(c.cancel)return null;if(!c.output)throw new Error("No valid response from the AI service.");const d=c.output;return await this.setGuessedAltText(d),t&&!this.hasAltTextData()&&(this.altTextData={alt:d,decorative:!1}),d}#f(){if(this.#t){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#t).then(n=>this.#h(n,!0)).finally(()=>this.#d());return}if(this.#s){const n=this.#s;this.#s=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromUrl(n).then(r=>this.#h(r)).finally(()=>this.#d());return}if(this.#i){const n=this.#i;this.#i=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromFile(n).then(r=>this.#h(r)).finally(()=>this.#d());return}const e=document.createElement("input");e.type="file",e.accept=ef.supportedTypesStr;const t=this._uiManager._signal;this.#n=new Promise(n=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#h(r)}n()},{signal:t}),e.addEventListener("cancel",()=>{this.remove(),n()},{signal:t})}).finally(()=>this.#d()),e.click()}remove(){this.#t&&(this.#e=null,this._uiManager.imageManager.deleteId(this.#t),this.#l?.remove(),this.#l=null,this.#o&&(clearTimeout(this.#o),this.#o=null)),super.remove()}rebuild(){if(!this.parent){this.#t&&this.#f();return}super.rebuild(),this.div!==null&&(this.#t&&this.#l===null&&this.#f(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(this.#n||this.#e||this.#s||this.#i||this.#t)}get isResizable(){return!0}render(){if(this.div)return this.div;let e,t;if(this.width&&(e=this.x,t=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),this.#e?this.#a():this.#f(),this.width&&!this.annotationElementId){const[n,r]=this.parentDimensions;this.setAt(e*n,t*r,this.width*n,this.height*r)}return this._uiManager.addShouldRescale(this),this.div}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#o!==null&&clearTimeout(this.#o);const e=200;this.#o=setTimeout(()=>{this.#o=null,this.#m()},e)}#a(){const{div:e}=this;let{width:t,height:n}=this.#e;const[r,o]=this.pageDimensions,l=.75;if(this.width)t=this.width*r,n=this.height*o;else if(t>l*r||n>l*o){const p=Math.min(l*r/t,l*o/n);t*=p,n*=p}const[c,d]=this.parentDimensions;this.setDims(t*c/r,n*d/o),this._uiManager.enableWaiting(!1);const f=this.#l=document.createElement("canvas");f.setAttribute("role","img"),this.addContainer(f),this.width=t/r,this.height=n/o,this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),this.#m(),this.#c||(this.parent.addUndoableEditor(this),this.#c=!0),this._reportTelemetry({action:"inserted_image"}),this.#r&&f.setAttribute("aria-label",this.#r)}copyCanvas(e,t,n=!1){e||(e=224);const{width:r,height:o}=this.#e,l=new ah;let c=this.#e,d=r,f=o,p=null;if(t){if(r>t||o>t){const D=Math.min(t/r,t/o);d=Math.floor(r*D),f=Math.floor(o*D)}p=document.createElement("canvas");const y=p.width=Math.ceil(d*l.sx),v=p.height=Math.ceil(f*l.sy);this.#u||(c=this.#p(y,v));const x=p.getContext("2d");x.filter=this._uiManager.hcmFilter;let _="white",A="#cfcfd8";this._uiManager.hcmFilter!=="none"?A="black":window.matchMedia?.("(prefers-color-scheme: dark)").matches&&(_="#8f8f9d",A="#42414d");const C=15,E=C*l.sx,P=C*l.sy,R=new OffscreenCanvas(E*2,P*2),M=R.getContext("2d");M.fillStyle=_,M.fillRect(0,0,E*2,P*2),M.fillStyle=A,M.fillRect(0,0,E,P),M.fillRect(E,P,E,P),x.fillStyle=x.createPattern(R,"repeat"),x.fillRect(0,0,y,v),x.drawImage(c,0,0,c.width,c.height,0,0,y,v)}let g=null;if(n){let y,v;if(l.symmetric&&c.width<e&&c.height<e)y=c.width,v=c.height;else if(c=this.#e,r>e||o>e){const A=Math.min(e/r,e/o);y=Math.floor(r*A),v=Math.floor(o*A),this.#u||(c=this.#p(y,v))}const _=new OffscreenCanvas(y,v).getContext("2d",{willReadFrequently:!0});_.drawImage(c,0,0,c.width,c.height,0,0,y,v),g={width:y,height:v,data:_.getImageData(0,0,y,v).data}}return{canvas:p,width:d,height:f,imageData:g}}#p(e,t){const{width:n,height:r}=this.#e;let o=n,l=r,c=this.#e;for(;o>2*e||l>2*t;){const d=o,f=l;o>2*e&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),l>2*t&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2));const p=new OffscreenCanvas(o,l);p.getContext("2d").drawImage(c,0,0,d,f,0,0,o,l),c=p.transferToImageBitmap()}return c}#m(){const[e,t]=this.parentDimensions,{width:n,height:r}=this,o=new ah,l=Math.ceil(n*e*o.sx),c=Math.ceil(r*t*o.sy),d=this.#l;if(!d||d.width===l&&d.height===c)return;d.width=l,d.height=c;const f=this.#u?this.#e:this.#p(l,c),p=d.getContext("2d");p.filter=this._uiManager.hcmFilter,p.drawImage(f,0,0,f.width,f.height,0,0,l,c)}getImageForAltText(){return this.#l}#g(e){if(e){if(this.#u){const r=this._uiManager.imageManager.getSvgUrl(this.#t);if(r)return r}const t=document.createElement("canvas");return{width:t.width,height:t.height}=this.#e,t.getContext("2d").drawImage(this.#e,0,0),t.toDataURL()}if(this.#u){const[t,n]=this.pageDimensions,r=Math.round(this.width*t*vi.PDF_TO_CSS_UNITS),o=Math.round(this.height*n*vi.PDF_TO_CSS_UNITS),l=new OffscreenCanvas(r,o);return l.getContext("2d").drawImage(this.#e,0,0,this.#e.width,this.#e.height,0,0,r,o),l.transferToImageBitmap()}return structuredClone(this.#e)}static async deserialize(e,t,n){let r=null;if(e instanceof Oy){const{data:{rect:x,rotation:_,id:A,structParent:C,popupRef:E},container:P,parent:{page:{pageNumber:R}}}=e,M=P.querySelector("canvas"),D=n.imageManager.getFromCanvas(P.id,M);M.remove();const O=(await t._structTree.getAriaAttributes(`${zh}${A}`))?.get("aria-label")||"";r=e={annotationType:Pe.STAMP,bitmapId:D.id,bitmap:D.bitmap,pageIndex:R-1,rect:x.slice(0),rotation:_,id:A,deleted:!1,accessibilityData:{decorative:!1,altText:O},isSvg:!1,structParent:C,popupRef:E}}const o=await super.deserialize(e,t,n),{rect:l,bitmap:c,bitmapUrl:d,bitmapId:f,isSvg:p,accessibilityData:g}=e;f&&n.imageManager.isValidId(f)?(o.#t=f,c&&(o.#e=c)):o.#s=d,o.#u=p;const[y,v]=o.pageDimensions;return o.width=(l[2]-l[0])/y,o.height=(l[3]-l[1])/v,o.annotationElementId=e.id||null,g&&(o.altTextData=g),o._initialData=r,o.#c=!!r,o}serialize(e=!1,t=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n={annotationType:Pe.STAMP,bitmapId:this.#t,pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:this.#u,structTreeParentId:this._structTreeParentId};if(e)return n.bitmapUrl=this.#g(!0),n.accessibilityData=this.serializeAltText(!0),n;const{decorative:r,altText:o}=this.serializeAltText(!1);if(!r&&o&&(n.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const c=this.#y(n);if(c.isSame)return null;c.isSameAltText?delete n.accessibilityData:n.accessibilityData.structParent=this._initialData.structParent??-1}if(n.id=this.annotationElementId,t===null)return n;t.stamps||=new Map;const l=this.#u?(n.rect[2]-n.rect[0])*(n.rect[3]-n.rect[1]):null;if(!t.stamps.has(this.#t))t.stamps.set(this.#t,{area:l,serialized:n}),n.bitmap=this.#g(!1);else if(this.#u){const c=t.stamps.get(this.#t);l>c.area&&(c.area=l,c.serialized.bitmap.close(),c.serialized.bitmap=this.#g(!1))}return n}#y(e){const{pageIndex:t,accessibilityData:{altText:n}}=this._initialData,r=e.pageIndex===t,o=(e.accessibilityData?.alt||"")===n;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&r&&o,isSameAltText:o}}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}}class ks{#e;#t=!1;#n=null;#s=null;#i=null;#r=new Map;#l=!1;#o=!1;#u=!1;#c=null;#h=null;#d=null;#f=null;#a;static _initialized=!1;static#p=new Map([ft,Zh,ef,st].map(e=>[e._editorType,e]));constructor({uiManager:e,pageIndex:t,div:n,structTreeLayer:r,accessibilityManager:o,annotationLayer:l,drawLayer:c,textLayer:d,viewport:f,l10n:p}){const g=[...ks.#p.values()];if(!ks._initialized){ks._initialized=!0;for(const y of g)y.initialize(p,e)}e.registerEditorTypes(g),this.#a=e,this.pageIndex=t,this.div=n,this.#e=o,this.#n=l,this.viewport=f,this.#d=d,this.drawLayer=c,this._structTree=r,this.#a.addLayer(this)}get isEmpty(){return this.#r.size===0}get isInvisible(){return this.isEmpty&&this.#a.getMode()===Pe.NONE}updateToolbar(e){this.#a.updateToolbar(e)}updateMode(e=this.#a.getMode()){switch(this.#v(),e){case Pe.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Pe.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Pe.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const n of ks.#p.values())t.toggle(`${n._type}Editing`,e===n._editorType);this.div.hidden=!1}hasTextLayer(e){return e===this.#d?.div}setEditingState(e){this.#a.setEditingState(e)}addCommands(e){this.#a.addCommands(e)}cleanUndoStack(e){this.#a.cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){this.#n?.div.classList.toggle("disabled",!e)}async enable(){this.#u=!0,this.div.tabIndex=0,this.togglePointerEvents(!0);const e=new Set;for(const n of this.#r.values())n.enableEditing(),n.show(!0),n.annotationElementId&&(this.#a.removeChangedExistingAnnotation(n),e.add(n.annotationElementId));if(!this.#n){this.#u=!1;return}const t=this.#n.getEditableAnnotations();for(const n of t){if(n.hide(),this.#a.isDeletedAnnotationElement(n.data.id)||e.has(n.data.id))continue;const r=await this.deserialize(n);r&&(this.addOrRebuild(r),r.enableEditing())}this.#u=!1}disable(){this.#o=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1);const e=new Map,t=new Map;for(const r of this.#r.values())if(r.disableEditing(),!!r.annotationElementId){if(r.serialize()!==null){e.set(r.annotationElementId,r);continue}else t.set(r.annotationElementId,r);this.getEditableAnnotation(r.annotationElementId)?.show(),r.remove()}if(this.#n){const r=this.#n.getEditableAnnotations();for(const o of r){const{id:l}=o.data;if(this.#a.isDeletedAnnotationElement(l))continue;let c=t.get(l);if(c){c.resetAnnotationElement(o),c.show(!1),o.show();continue}c=e.get(l),c&&(this.#a.addChangedExistingAnnotation(c),c.renderAnnotationElement(o)&&c.show(!1)),o.show()}}this.#v(),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const r of ks.#p.values())n.remove(`${r._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#o=!1}getEditableAnnotation(e){return this.#n?.getEditableAnnotation(e)||null}setActiveEditor(e){this.#a.getActive()!==e&&this.#a.setActiveEditor(e)}enableTextSelection(){if(this.div.tabIndex=-1,this.#d?.div&&!this.#f){this.#f=new AbortController;const e=this.#a.combinedSignal(this.#f);this.#d.div.addEventListener("pointerdown",this.#m.bind(this),{signal:e}),this.#d.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#d?.div&&this.#f&&(this.#f.abort(),this.#f=null,this.#d.div.classList.remove("highlighting"))}#m(e){this.#a.unselectAll();const{target:t}=e;if(t===this.#d.div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&this.#d.div.contains(t)){const{isMac:n}=Wt.platform;if(e.button!==0||e.ctrlKey&&n)return;this.#a.showAllEditors("highlight",!0,!0),this.#d.div.classList.add("free"),this.toggleDrawing(),st.startHighlighting(this,this.#a.direction==="ltr",{target:this.#d.div,x:e.x,y:e.y}),this.#d.div.addEventListener("pointerup",()=>{this.#d.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#a._signal}),e.preventDefault()}}enableClick(){if(this.#s)return;this.#s=new AbortController;const e=this.#a.combinedSignal(this.#s);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){this.#s?.abort(),this.#s=null}attach(e){this.#r.set(e.id,e);const{annotationElementId:t}=e;t&&this.#a.isDeletedAnnotationElement(t)&&this.#a.removeDeletedAnnotationElement(e)}detach(e){this.#r.delete(e.id),this.#e?.removePointerInTextLayer(e.contentDiv),!this.#o&&e.annotationElementId&&this.#a.addDeletedAnnotationElement(e)}remove(e){this.detach(e),this.#a.removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){e.parent!==this&&(e.parent&&e.annotationElementId&&(this.#a.addDeletedAnnotationElement(e.annotationElementId),_e.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),e.parent?.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),this.#a.addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!this.#u),this.#a.addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!this.#i&&(e._focusEventsAllowed=!1,this.#i=setTimeout(()=>{this.#i=null,e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this.#a._signal}),t.focus())},0)),e._structTreeParentId=this.#e?.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||=this,e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),n=()=>{e.remove()};this.addCommands({cmd:t,undo:n,mustExec:!1})}getNextId(){return this.#a.getId()}get#g(){return ks.#p.get(this.#a.getMode())}combinedSignal(e){return this.#a.combinedSignal(e)}#y(e){const t=this.#g;return t?new t.prototype.constructor(e):null}canCreateNewEmptyEditor(){return this.#g?.canCreateNewEmptyEditor()}pasteEditor(e,t){this.#a.updateToolbar(e),this.#a.updateMode(e);const{offsetX:n,offsetY:r}=this.#w(),o=this.getNextId(),l=this.#y({parent:this,id:o,x:n,y:r,uiManager:this.#a,isCentered:!0,...t});l&&this.add(l)}async deserialize(e){return await ks.#p.get(e.annotationType??e.annotationEditorType)?.deserialize(e,this,this.#a)||null}createAndAddNewEditor(e,t,n={}){const r=this.getNextId(),o=this.#y({parent:this,id:r,x:e.offsetX,y:e.offsetY,uiManager:this.#a,isCentered:t,...n});return o&&this.add(o),o}#w(){const{x:e,y:t,width:n,height:r}=this.div.getBoundingClientRect(),o=Math.max(0,e),l=Math.max(0,t),c=Math.min(window.innerWidth,e+n),d=Math.min(window.innerHeight,t+r),f=(o+c)/2-e,p=(l+d)/2-t,[g,y]=this.viewport.rotation%180===0?[f,p]:[p,f];return{offsetX:g,offsetY:y}}addNewEditor(){this.createAndAddNewEditor(this.#w(),!0)}setSelected(e){this.#a.setSelected(e)}toggleSelected(e){this.#a.toggleSelected(e)}unselect(e){this.#a.unselect(e)}pointerup(e){const{isMac:t}=Wt.platform;if(!(e.button!==0||e.ctrlKey&&t)&&e.target===this.div&&this.#l&&(this.#l=!1,!(this.#g?.isDrawer&&this.#g.supportMultipleDrawings))){if(!this.#t){this.#t=!0;return}if(this.#a.getMode()===Pe.STAMP){this.#a.unselectAll();return}this.createAndAddNewEditor(e,!1)}}pointerdown(e){if(this.#a.getMode()===Pe.HIGHLIGHT&&this.enableTextSelection(),this.#l){this.#l=!1;return}const{isMac:t}=Wt.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(this.#l=!0,this.#g?.isDrawer){this.startDrawingSession(e);return}const n=this.#a.getActive();this.#t=!n||n.isEmpty()}startDrawingSession(e){if(this.div.focus(),this.#c){this.#g.startDrawing(this,this.#a,!1,e);return}this.#a.setCurrentDrawingSession(this),this.#c=new AbortController;const t=this.#a.combinedSignal(this.#c);this.div.addEventListener("blur",({relatedTarget:n})=>{n&&!this.div.contains(n)&&(this.#h=null,this.commitOrRemove())},{signal:t}),this.#g.startDrawing(this,this.#a,!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&(this.#h=t);return}this.#h&&setTimeout(()=>{this.#h?.focus(),this.#h=null},0)}endDrawingSession(e=!1){return this.#c?(this.#a.setCurrentDrawingSession(null),this.#c.abort(),this.#c=null,this.#h=null,this.#g.endDrawing(e)):null}findNewParent(e,t,n){const r=this.#a.findParent(t,n);return r===null||r===this?!1:(r.changeParent(e),!0)}commitOrRemove(){return this.#c?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#c&&this.#g.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#a.getActive()?.parent===this&&(this.#a.commitOrRemove(),this.#a.setActiveEditor(null)),this.#i&&(clearTimeout(this.#i),this.#i=null);for(const e of this.#r.values())this.#e?.removePointerInTextLayer(e.contentDiv),e.setParent(null),e.isAttachedToDOM=!1,e.div.remove();this.div=null,this.#r.clear(),this.#a.removeLayer(this)}#v(){for(const e of this.#r.values())e.isEmpty()&&e.remove()}render({viewport:e}){this.viewport=e,Nr(this.div,e);for(const t of this.#a.getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){this.#a.commitOrRemove(),this.#v();const t=this.viewport.rotation,n=e.rotation;if(this.viewport=e,Nr(this.div,{rotation:n}),t!==n)for(const r of this.#r.values())r.rotate(n)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return this.#a.viewParameters.realScale}}class Bt{#e=null;#t=0;#n=new Map;#s=new Map;constructor({pageIndex:e}){this.pageIndex=e}setParent(e){if(!this.#e){this.#e=e;return}if(this.#e!==e){if(this.#n.size>0)for(const t of this.#n.values())t.remove(),e.append(t);this.#e=e}}static get _svgFactory(){return Me(this,"_svgFactory",new Yh)}static#i(e,[t,n,r,o]){const{style:l}=e;l.top=`${100*n}%`,l.left=`${100*t}%`,l.width=`${100*r}%`,l.height=`${100*o}%`}#r(){const e=Bt._svgFactory.create(1,1,!0);return this.#e.append(e),e.setAttribute("aria-hidden",!0),e}#l(e,t){const n=Bt._svgFactory.createElement("clipPath");e.append(n);const r=`clip_${t}`;n.setAttribute("id",r),n.setAttribute("clipPathUnits","objectBoundingBox");const o=Bt._svgFactory.createElement("use");return n.append(o),o.setAttribute("href",`#${t}`),o.classList.add("clip"),r}#o(e,t){for(const[n,r]of Object.entries(t))r===null?e.removeAttribute(n):e.setAttribute(n,r)}draw(e,t=!1,n=!1){const r=this.#t++,o=this.#r(),l=Bt._svgFactory.createElement("defs");o.append(l);const c=Bt._svgFactory.createElement("path");l.append(c);const d=`path_p${this.pageIndex}_${r}`;c.setAttribute("id",d),c.setAttribute("vector-effect","non-scaling-stroke"),t&&this.#s.set(r,c);const f=n?this.#l(l,d):null,p=Bt._svgFactory.createElement("use");return o.append(p),p.setAttribute("href",`#${d}`),this.updateProperties(o,e),this.#n.set(r,o),{id:r,clipPathId:`url(#${f})`}}drawOutline(e,t){const n=this.#t++,r=this.#r(),o=Bt._svgFactory.createElement("defs");r.append(o);const l=Bt._svgFactory.createElement("path");o.append(l);const c=`path_p${this.pageIndex}_${n}`;l.setAttribute("id",c),l.setAttribute("vector-effect","non-scaling-stroke");let d;if(t){const g=Bt._svgFactory.createElement("mask");o.append(g),d=`mask_p${this.pageIndex}_${n}`,g.setAttribute("id",d),g.setAttribute("maskUnits","objectBoundingBox");const y=Bt._svgFactory.createElement("rect");g.append(y),y.setAttribute("width","1"),y.setAttribute("height","1"),y.setAttribute("fill","white");const v=Bt._svgFactory.createElement("use");g.append(v),v.setAttribute("href",`#${c}`),v.setAttribute("stroke","none"),v.setAttribute("fill","black"),v.setAttribute("fill-rule","nonzero"),v.classList.add("mask")}const f=Bt._svgFactory.createElement("use");r.append(f),f.setAttribute("href",`#${c}`),d&&f.setAttribute("mask",`url(#${d})`);const p=f.cloneNode();return r.append(p),f.classList.add("mainOutline"),p.classList.add("secondaryOutline"),this.updateProperties(r,e),this.#n.set(n,r),n}finalizeDraw(e,t){this.#s.delete(e),this.updateProperties(e,t)}updateProperties(e,t){if(!t)return;const{root:n,bbox:r,rootClass:o,path:l}=t,c=typeof e=="number"?this.#n.get(e):e;if(c){if(n&&this.#o(c,n),r&&Bt.#i(c,r),o){const{classList:d}=c;for(const[f,p]of Object.entries(o))d.toggle(f,p)}if(l){const f=c.firstChild.firstChild;this.#o(f,l)}}}updateParent(e,t){if(t===this)return;const n=this.#n.get(e);n&&(t.#e.append(n),this.#n.delete(e),t.#n.set(e,n))}remove(e){this.#s.delete(e),this.#e!==null&&(this.#n.get(e).remove(),this.#n.delete(e))}destroy(){this.#e=null;for(const e of this.#n.values())e.remove();this.#n.clear(),this.#s.clear()}}globalThis.pdfjsTestingUtils={HighlightOutliner:uh};Ce.AbortException;Ce.AnnotationEditorLayer;Ce.AnnotationEditorParamsType;Ce.AnnotationEditorType;Ce.AnnotationEditorUIManager;Ce.AnnotationLayer;Ce.AnnotationMode;Ce.ColorPicker;Ce.DOMSVGFactory;Ce.DrawLayer;Ce.FeatureTest;var FC=Ce.GlobalWorkerOptions;Ce.ImageKind;Ce.InvalidPDFException;Ce.MissingPDFException;Ce.OPS;Ce.OutputScale;Ce.PDFDataRangeTransport;Ce.PDFDateString;Ce.PDFWorker;Ce.PasswordResponses;Ce.PermissionFlag;Ce.PixelsPerInch;Ce.RenderingCancelledException;Ce.TextLayer;Ce.TouchManager;Ce.UnexpectedResponseException;Ce.Util;Ce.VerbosityLevel;Ce.XfaLayer;Ce.build;Ce.createValidAbsoluteUrl;Ce.fetchData;var jC=Ce.getDocument;Ce.getFilenameFromUrl;Ce.getPdfFilenameFromUrl;Ce.getXfaPageViewport;Ce.isDataScheme;Ce.isPdfFile;Ce.noContextMenu;Ce.normalizeUnicode;Ce.setLayerDimensions;Ce.shadow;Ce.stopEvent;Ce.version;FC.workerSrc="pdf.worker.min.mjs";async function $C(i){const e=await i.arrayBuffer(),t=await jC({data:e}).promise;let n="";for(let r=1;r<=t.numPages;r++){const c=(await(await t.getPage(r)).getTextContent()).items.map(d=>d.str).join(" ");n+=c+`
`}return{text:n,numPages:t.numPages}}function zC(i){const e=/([a-zA-Z0-9._-]+@[a-zA-Z0-9._-]+\.[a-zA-Z0-9_-]+)/gi,t=/(\+?\d{1,3}[-.\s]?)?\(?\d{1,4}\)?[-.\s]?\d{1,4}[-.\s]?\d{1,9}/g,n=i.match(e),r=i.match(t);return{email:n?n[0]:null,phone:r&&r.find(o=>o.length>8)||null,name:null}}function Se(i,e,t,n,r){if(typeof e=="function"?i!==e||!0:!e.has(i))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(i,t),t}function $(i,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?i!==e||!n:!e.has(i))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(i):n?n.value:e.get(i)}let jy=function(){const{crypto:i}=globalThis;if(i?.randomUUID)return jy=i.randomUUID.bind(i),i.randomUUID();const e=new Uint8Array(1),t=i?()=>i.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,n=>(+n^t()&15>>+n/4).toString(16))};function hh(i){return typeof i=="object"&&i!==null&&("name"in i&&i.name==="AbortError"||"message"in i&&String(i.message).includes("FetchRequestCanceledException"))}const fh=i=>{if(i instanceof Error)return i;if(typeof i=="object"&&i!==null){try{if(Object.prototype.toString.call(i)==="[object Error]"){const e=new Error(i.message,i.cause?{cause:i.cause}:{});return i.stack&&(e.stack=i.stack),i.cause&&!e.cause&&(e.cause=i.cause),i.name&&(e.name=i.name),e}}catch{}try{return new Error(JSON.stringify(i))}catch{}}return new Error(i)};class ge extends Error{}class Et extends ge{constructor(e,t,n,r){super(`${Et.makeMessage(e,t,n)}`),this.status=e,this.headers=r,this.requestID=r?.get("x-request-id"),this.error=t;const o=t;this.code=o?.code,this.param=o?.param,this.type=o?.type}static makeMessage(e,t,n){const r=t?.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):n;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,t,n,r){if(!e||!r)return new Ac({message:n,cause:fh(t)});const o=t?.error;return e===400?new $y(e,o,n,r):e===401?new zy(e,o,n,r):e===403?new By(e,o,n,r):e===404?new Hy(e,o,n,r):e===409?new Uy(e,o,n,r):e===422?new Wy(e,o,n,r):e===429?new Vy(e,o,n,r):e>=500?new Gy(e,o,n,r):new Et(e,o,n,r)}}class Pn extends Et{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Ac extends Et{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class tf extends Ac{constructor({message:e}={}){super({message:e??"Request timed out."})}}class $y extends Et{}class zy extends Et{}class By extends Et{}class Hy extends Et{}class Uy extends Et{}class Wy extends Et{}class Vy extends Et{}class Gy extends Et{}class qy extends ge{constructor(){super("Could not parse response content as the length limit was reached")}}class Xy extends ge{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}class Sa extends Error{constructor(e){super(e)}}const BC=/^[a-z][a-z0-9+.-]*:/i,HC=i=>BC.test(i);let rn=i=>(rn=Array.isArray,rn(i)),Zm=rn;function Ky(i){return typeof i!="object"?{}:i??{}}function UC(i){if(!i)return!0;for(const e in i)return!1;return!0}function WC(i,e){return Object.prototype.hasOwnProperty.call(i,e)}function Od(i){return i!=null&&typeof i=="object"&&!Array.isArray(i)}const VC=(i,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new ge(`${i} must be an integer`);if(e<0)throw new ge(`${i} must be a positive integer`);return e},GC=i=>{try{return JSON.parse(i)}catch{return}},Ja=i=>new Promise(e=>setTimeout(e,i)),di="6.9.1",qC=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function XC(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const KC=()=>{const i=XC();if(i==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":di,"X-Stainless-OS":t0(Deno.build.os),"X-Stainless-Arch":e0(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:Deno.version?.deno??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":di,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(i==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":di,"X-Stainless-OS":t0(globalThis.process.platform??"unknown"),"X-Stainless-Arch":e0(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};const e=YC();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":di,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":di,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function YC(){if(typeof navigator>"u"||!navigator)return null;const i=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of i){const n=t.exec(navigator.userAgent);if(n){const r=n[1]||0,o=n[2]||0,l=n[3]||0;return{browser:e,version:`${r}.${o}.${l}`}}}return null}const e0=i=>i==="x32"?"x32":i==="x86_64"||i==="x64"?"x64":i==="arm"?"arm":i==="aarch64"||i==="arm64"?"arm64":i?`other:${i}`:"unknown",t0=i=>(i=i.toLowerCase(),i.includes("ios")?"iOS":i==="android"?"Android":i==="darwin"?"MacOS":i==="win32"?"Windows":i==="freebsd"?"FreeBSD":i==="openbsd"?"OpenBSD":i==="linux"?"Linux":i?`Other:${i}`:"Unknown");let n0;const QC=()=>n0??(n0=KC());function JC(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new OpenAI({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function Yy(...i){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...i)}function Qy(i){let e=Symbol.asyncIterator in i?i[Symbol.asyncIterator]():i[Symbol.iterator]();return Yy({start(){},async pull(t){const{done:n,value:r}=await e.next();n?t.close():t.enqueue(r)},async cancel(){await e.return?.()}})}function Jy(i){if(i[Symbol.asyncIterator])return i;const e=i.getReader();return{async next(){try{const t=await e.read();return t?.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function ZC(i){if(i===null||typeof i!="object")return;if(i[Symbol.asyncIterator]){await i[Symbol.asyncIterator]().return?.();return}const e=i.getReader(),t=e.cancel();e.releaseLock(),await t}const eE=({headers:i,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)}),Zy="RFC3986",ev=i=>String(i),s0={RFC1738:i=>String(i).replace(/%20/g,"+"),RFC3986:ev},tE="RFC1738";let ph=(i,e)=>(ph=Object.hasOwn??Function.prototype.call.bind(Object.prototype.hasOwnProperty),ph(i,e));const ls=(()=>{const i=[];for(let e=0;e<256;++e)i.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return i})(),Fd=1024,nE=(i,e,t,n,r)=>{if(i.length===0)return i;let o=i;if(typeof i=="symbol"?o=Symbol.prototype.toString.call(i):typeof i!="string"&&(o=String(i)),t==="iso-8859-1")return escape(o).replace(/%u[0-9a-f]{4}/gi,function(c){return"%26%23"+parseInt(c.slice(2),16)+"%3B"});let l="";for(let c=0;c<o.length;c+=Fd){const d=o.length>=Fd?o.slice(c,c+Fd):o,f=[];for(let p=0;p<d.length;++p){let g=d.charCodeAt(p);if(g===45||g===46||g===95||g===126||g>=48&&g<=57||g>=65&&g<=90||g>=97&&g<=122||r===tE&&(g===40||g===41)){f[f.length]=d.charAt(p);continue}if(g<128){f[f.length]=ls[g];continue}if(g<2048){f[f.length]=ls[192|g>>6]+ls[128|g&63];continue}if(g<55296||g>=57344){f[f.length]=ls[224|g>>12]+ls[128|g>>6&63]+ls[128|g&63];continue}p+=1,g=65536+((g&1023)<<10|d.charCodeAt(p)&1023),f[f.length]=ls[240|g>>18]+ls[128|g>>12&63]+ls[128|g>>6&63]+ls[128|g&63]}l+=f.join("")}return l};function sE(i){return!i||typeof i!="object"?!1:!!(i.constructor&&i.constructor.isBuffer&&i.constructor.isBuffer(i))}function r0(i,e){if(rn(i)){const t=[];for(let n=0;n<i.length;n+=1)t.push(e(i[n]));return t}return e(i)}const tv={brackets(i){return String(i)+"[]"},comma:"comma",indices(i,e){return String(i)+"["+e+"]"},repeat(i){return String(i)}},nv=function(i,e){Array.prototype.push.apply(i,rn(e)?e:[e])};let i0;const pt={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:nE,encodeValuesOnly:!1,format:Zy,formatter:ev,indices:!1,serializeDate(i){return(i0??(i0=Function.prototype.call.bind(Date.prototype.toISOString)))(i)},skipNulls:!1,strictNullHandling:!1};function rE(i){return typeof i=="string"||typeof i=="number"||typeof i=="boolean"||typeof i=="symbol"||typeof i=="bigint"}const jd={};function sv(i,e,t,n,r,o,l,c,d,f,p,g,y,v,x,_,A,C){let E=i,P=C,R=0,M=!1;for(;(P=P.get(jd))!==void 0&&!M;){const K=P.get(i);if(R+=1,typeof K<"u"){if(K===R)throw new RangeError("Cyclic object value");M=!0}typeof P.get(jd)>"u"&&(R=0)}if(typeof f=="function"?E=f(e,E):E instanceof Date?E=y?.(E):t==="comma"&&rn(E)&&(E=r0(E,function(K){return K instanceof Date?y?.(K):K})),E===null){if(o)return d&&!_?d(e,pt.encoder,A,"key",v):e;E=""}if(rE(E)||sE(E)){if(d){const K=_?e:d(e,pt.encoder,A,"key",v);return[x?.(K)+"="+x?.(d(E,pt.encoder,A,"value",v))]}return[x?.(e)+"="+x?.(String(E))]}const D=[];if(typeof E>"u")return D;let O;if(t==="comma"&&rn(E))_&&d&&(E=r0(E,d)),O=[{value:E.length>0?E.join(",")||null:void 0}];else if(rn(f))O=f;else{const K=Object.keys(E);O=p?K.sort(p):K}const H=c?String(e).replace(/\./g,"%2E"):String(e),U=n&&rn(E)&&E.length===1?H+"[]":H;if(r&&rn(E)&&E.length===0)return U+"[]";for(let K=0;K<O.length;++K){const V=O[K],fe=typeof V=="object"&&typeof V.value<"u"?V.value:E[V];if(l&&fe===null)continue;const we=g&&c?V.replace(/\./g,"%2E"):V,be=rn(E)?typeof t=="function"?t(U,we):U:U+(g?"."+we:"["+we+"]");C.set(i,R);const De=new WeakMap;De.set(jd,C),nv(D,sv(fe,be,t,n,r,o,l,c,t==="comma"&&_&&rn(E)?null:d,f,p,g,y,v,x,_,A,De))}return D}function iE(i=pt){if(typeof i.allowEmptyArrays<"u"&&typeof i.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof i.encodeDotInKeys<"u"&&typeof i.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(i.encoder!==null&&typeof i.encoder<"u"&&typeof i.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=i.charset||pt.charset;if(typeof i.charset<"u"&&i.charset!=="utf-8"&&i.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let t=Zy;if(typeof i.format<"u"){if(!ph(s0,i.format))throw new TypeError("Unknown format option provided.");t=i.format}const n=s0[t];let r=pt.filter;(typeof i.filter=="function"||rn(i.filter))&&(r=i.filter);let o;if(i.arrayFormat&&i.arrayFormat in tv?o=i.arrayFormat:"indices"in i?o=i.indices?"indices":"repeat":o=pt.arrayFormat,"commaRoundTrip"in i&&typeof i.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const l=typeof i.allowDots>"u"?i.encodeDotInKeys?!0:pt.allowDots:!!i.allowDots;return{addQueryPrefix:typeof i.addQueryPrefix=="boolean"?i.addQueryPrefix:pt.addQueryPrefix,allowDots:l,allowEmptyArrays:typeof i.allowEmptyArrays=="boolean"?!!i.allowEmptyArrays:pt.allowEmptyArrays,arrayFormat:o,charset:e,charsetSentinel:typeof i.charsetSentinel=="boolean"?i.charsetSentinel:pt.charsetSentinel,commaRoundTrip:!!i.commaRoundTrip,delimiter:typeof i.delimiter>"u"?pt.delimiter:i.delimiter,encode:typeof i.encode=="boolean"?i.encode:pt.encode,encodeDotInKeys:typeof i.encodeDotInKeys=="boolean"?i.encodeDotInKeys:pt.encodeDotInKeys,encoder:typeof i.encoder=="function"?i.encoder:pt.encoder,encodeValuesOnly:typeof i.encodeValuesOnly=="boolean"?i.encodeValuesOnly:pt.encodeValuesOnly,filter:r,format:t,formatter:n,serializeDate:typeof i.serializeDate=="function"?i.serializeDate:pt.serializeDate,skipNulls:typeof i.skipNulls=="boolean"?i.skipNulls:pt.skipNulls,sort:typeof i.sort=="function"?i.sort:null,strictNullHandling:typeof i.strictNullHandling=="boolean"?i.strictNullHandling:pt.strictNullHandling}}function aE(i,e={}){let t=i;const n=iE(e);let r,o;typeof n.filter=="function"?(o=n.filter,t=o("",t)):rn(n.filter)&&(o=n.filter,r=o);const l=[];if(typeof t!="object"||t===null)return"";const c=tv[n.arrayFormat],d=c==="comma"&&n.commaRoundTrip;r||(r=Object.keys(t)),n.sort&&r.sort(n.sort);const f=new WeakMap;for(let y=0;y<r.length;++y){const v=r[y];n.skipNulls&&t[v]===null||nv(l,sv(t[v],v,c,d,n.allowEmptyArrays,n.strictNullHandling,n.skipNulls,n.encodeDotInKeys,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset,f))}const p=l.join(n.delimiter);let g=n.addQueryPrefix===!0?"?":"";return n.charsetSentinel&&(n.charset==="iso-8859-1"?g+="utf8=%26%2310003%3B&":g+="utf8=%E2%9C%93&"),p.length>0?g+p:""}function oE(i){let e=0;for(const r of i)e+=r.length;const t=new Uint8Array(e);let n=0;for(const r of i)t.set(r,n),n+=r.length;return t}let a0;function nf(i){let e;return(a0??(e=new globalThis.TextEncoder,a0=e.encode.bind(e)))(i)}let o0;function l0(i){let e;return(o0??(e=new globalThis.TextDecoder,o0=e.decode.bind(e)))(i)}var fn,pn;class Cc{constructor(){fn.set(this,void 0),pn.set(this,void 0),Se(this,fn,new Uint8Array),Se(this,pn,null)}decode(e){if(e==null)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?nf(e):e;Se(this,fn,oE([$(this,fn,"f"),t]));const n=[];let r;for(;(r=lE($(this,fn,"f"),$(this,pn,"f")))!=null;){if(r.carriage&&$(this,pn,"f")==null){Se(this,pn,r.index);continue}if($(this,pn,"f")!=null&&(r.index!==$(this,pn,"f")+1||r.carriage)){n.push(l0($(this,fn,"f").subarray(0,$(this,pn,"f")-1))),Se(this,fn,$(this,fn,"f").subarray($(this,pn,"f"))),Se(this,pn,null);continue}const o=$(this,pn,"f")!==null?r.preceding-1:r.preceding,l=l0($(this,fn,"f").subarray(0,o));n.push(l),Se(this,fn,$(this,fn,"f").subarray(r.index)),Se(this,pn,null)}return n}flush(){return $(this,fn,"f").length?this.decode(`
`):[]}}fn=new WeakMap,pn=new WeakMap;Cc.NEWLINE_CHARS=new Set([`
`,"\r"]);Cc.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function lE(i,e){for(let r=e??0;r<i.length;r++){if(i[r]===10)return{preceding:r,index:r+1,carriage:!1};if(i[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function cE(i){for(let n=0;n<i.length-1;n++){if(i[n]===10&&i[n+1]===10||i[n]===13&&i[n+1]===13)return n+2;if(i[n]===13&&i[n+1]===10&&n+3<i.length&&i[n+2]===13&&i[n+3]===10)return n+4}return-1}const Kl={off:0,error:200,warn:300,info:400,debug:500},c0=(i,e,t)=>{if(i){if(WC(Kl,i))return i;At(t).warn(`${e} was set to ${JSON.stringify(i)}, expected one of ${JSON.stringify(Object.keys(Kl))}`)}};function Aa(){}function _l(i,e,t){return!e||Kl[i]>Kl[t]?Aa:e[i].bind(e)}const uE={error:Aa,warn:Aa,info:Aa,debug:Aa};let u0=new WeakMap;function At(i){const e=i.logger,t=i.logLevel??"off";if(!e)return uE;const n=u0.get(e);if(n&&n[0]===t)return n[1];const r={error:_l("error",e,t),warn:_l("warn",e,t),info:_l("info",e,t),debug:_l("debug",e,t)};return u0.set(e,[t,r]),r}const Ar=i=>(i.options&&(i.options={...i.options},delete i.options.headers),i.headers&&(i.headers=Object.fromEntries((i.headers instanceof Headers?[...i.headers]:Object.entries(i.headers)).map(([e,t])=>[e,e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":t]))),"retryOfRequestLogID"in i&&(i.retryOfRequestLogID&&(i.retryOf=i.retryOfRequestLogID),delete i.retryOfRequestLogID),i);var ba;class ds{constructor(e,t,n){this.iterator=e,ba.set(this,void 0),this.controller=t,Se(this,ba,n)}static fromSSEResponse(e,t,n){let r=!1;const o=n?At(n):console;async function*l(){if(r)throw new ge("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let c=!1;try{for await(const d of dE(e,t))if(!c){if(d.data.startsWith("[DONE]")){c=!0;continue}if(d.event===null||!d.event.startsWith("thread.")){let f;try{f=JSON.parse(d.data)}catch(p){throw o.error("Could not parse message into JSON:",d.data),o.error("From chunk:",d.raw),p}if(f&&f.error)throw new Et(void 0,f.error,void 0,e.headers);yield f}else{let f;try{f=JSON.parse(d.data)}catch(p){throw console.error("Could not parse message into JSON:",d.data),console.error("From chunk:",d.raw),p}if(d.event=="error")throw new Et(void 0,f.error,f.message,void 0);yield{event:d.event,data:f}}}c=!0}catch(d){if(hh(d))return;throw d}finally{c||t.abort()}}return new ds(l,t,n)}static fromReadableStream(e,t,n){let r=!1;async function*o(){const c=new Cc,d=Jy(e);for await(const f of d)for(const p of c.decode(f))yield p;for(const f of c.flush())yield f}async function*l(){if(r)throw new ge("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let c=!1;try{for await(const d of o())c||d&&(yield JSON.parse(d));c=!0}catch(d){if(hh(d))return;throw d}finally{c||t.abort()}}return new ds(l,t,n)}[(ba=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){const e=[],t=[],n=this.iterator(),r=o=>({next:()=>{if(o.length===0){const l=n.next();e.push(l),t.push(l)}return o.shift()}});return[new ds(()=>r(e),this.controller,$(this,ba,"f")),new ds(()=>r(t),this.controller,$(this,ba,"f"))]}toReadableStream(){const e=this;let t;return Yy({async start(){t=e[Symbol.asyncIterator]()},async pull(n){try{const{value:r,done:o}=await t.next();if(o)return n.close();const l=nf(JSON.stringify(r)+`
`);n.enqueue(l)}catch(r){n.error(r)}},async cancel(){await t.return?.()}})}}async function*dE(i,e){if(!i.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new ge("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new ge("Attempted to iterate over a response with no body");const t=new fE,n=new Cc,r=Jy(i.body);for await(const o of hE(r))for(const l of n.decode(o)){const c=t.decode(l);c&&(yield c)}for(const o of n.flush()){const l=t.decode(o);l&&(yield l)}}async function*hE(i){let e=new Uint8Array;for await(const t of i){if(t==null)continue;const n=t instanceof ArrayBuffer?new Uint8Array(t):typeof t=="string"?nf(t):t;let r=new Uint8Array(e.length+n.length);r.set(e),r.set(n,e.length),e=r;let o;for(;(o=cE(e))!==-1;)yield e.slice(0,o),e=e.slice(o)}e.length>0&&(yield e)}class fE{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const o={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],o}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,n,r]=pE(e,":");return r.startsWith(" ")&&(r=r.substring(1)),t==="event"?this.event=r:t==="data"&&this.data.push(r),null}}function pE(i,e){const t=i.indexOf(e);return t!==-1?[i.substring(0,t),e,i.substring(t+e.length)]:[i,"",""]}async function rv(i,e){const{response:t,requestLogID:n,retryOfRequestLogID:r,startTime:o}=e,l=await(async()=>{if(e.options.stream)return At(i).debug("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller,i):ds.fromSSEResponse(t,e.controller,i);if(t.status===204)return null;if(e.options.__binaryResponse)return t;const d=t.headers.get("content-type")?.split(";")[0]?.trim();if(d?.includes("application/json")||d?.endsWith("+json")){const g=await t.json();return iv(g,t)}return await t.text()})();return At(i).debug(`[${n}] response parsed`,Ar({retryOfRequestLogID:r,url:t.url,status:t.status,body:l,durationMs:Date.now()-o})),l}function iv(i,e){return!i||typeof i!="object"||Array.isArray(i)?i:Object.defineProperty(i,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}var Ca;class Ec extends Promise{constructor(e,t,n=rv){super(r=>{r(null)}),this.responsePromise=t,this.parseResponse=n,Ca.set(this,void 0),Se(this,Ca,e)}_thenUnwrap(e){return new Ec($(this,Ca,"f"),this.responsePromise,async(t,n)=>iv(e(await this.parseResponse(t,n),n),n.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t,request_id:t.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse($(this,Ca,"f"),e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}Ca=new WeakMap;var Sl;class sf{constructor(e,t,n,r){Sl.set(this,void 0),Se(this,Sl,e),this.options=r,this.response=t,this.body=n}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}async getNextPage(){const e=this.nextPageRequestOptions();if(!e)throw new ge("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await $(this,Sl,"f").requestAPIList(this.constructor,e)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(Sl=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const t of e.getPaginatedItems())yield t}}class gE extends Ec{constructor(e,t,n){super(e,t,async(r,o)=>new n(r,o.response,await rv(r,o),o.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const t of e)yield t}}class kc extends sf{constructor(e,t,n,r){super(e,t,n,r),this.data=n.data||[],this.object=n.object}getPaginatedItems(){return this.data??[]}nextPageRequestOptions(){return null}}class lt extends sf{constructor(e,t,n,r){super(e,t,n,r),this.data=n.data||[],this.has_more=n.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const e=this.getPaginatedItems(),t=e[e.length-1]?.id;return t?{...this.options,query:{...Ky(this.options.query),after:t}}:null}}class Yl extends sf{constructor(e,t,n,r){super(e,t,n,r),this.data=n.data||[],this.has_more=n.has_more||!1,this.last_id=n.last_id||""}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const e=this.last_id;return e?{...this.options,query:{...Ky(this.options.query),after:e}}:null}}const av=()=>{if(typeof File>"u"){const{process:i}=globalThis,e=typeof i?.versions?.node=="string"&&parseInt(i.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(e?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Da(i,e,t){return av(),new File(i,e??"unknown_file",t)}function Ol(i){return(typeof i=="object"&&i!==null&&("name"in i&&i.name&&String(i.name)||"url"in i&&i.url&&String(i.url)||"filename"in i&&i.filename&&String(i.filename)||"path"in i&&i.path&&String(i.path))||"").split(/[\\/]/).pop()||void 0}const rf=i=>i!=null&&typeof i=="object"&&typeof i[Symbol.asyncIterator]=="function",d0=async(i,e)=>gh(i.body)?{...i,body:await ov(i.body,e)}:i,Mr=async(i,e)=>({...i,body:await ov(i.body,e)}),h0=new WeakMap;function mE(i){const e=typeof i=="function"?i:i.fetch,t=h0.get(e);if(t)return t;const n=(async()=>{try{const r="Response"in e?e.Response:(await e("data:,")).constructor,o=new FormData;return o.toString()!==await new r(o).text()}catch{return!0}})();return h0.set(e,n),n}const ov=async(i,e)=>{if(!await mE(e))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");const t=new FormData;return await Promise.all(Object.entries(i||{}).map(([n,r])=>mh(t,n,r))),t},lv=i=>i instanceof Blob&&"name"in i,yE=i=>typeof i=="object"&&i!==null&&(i instanceof Response||rf(i)||lv(i)),gh=i=>{if(yE(i))return!0;if(Array.isArray(i))return i.some(gh);if(i&&typeof i=="object"){for(const e in i)if(gh(i[e]))return!0}return!1},mh=async(i,e,t)=>{if(t!==void 0){if(t==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof t=="string"||typeof t=="number"||typeof t=="boolean")i.append(e,String(t));else if(t instanceof Response)i.append(e,Da([await t.blob()],Ol(t)));else if(rf(t))i.append(e,Da([await new Response(Qy(t)).blob()],Ol(t)));else if(lv(t))i.append(e,t,Ol(t));else if(Array.isArray(t))await Promise.all(t.map(n=>mh(i,e+"[]",n)));else if(typeof t=="object")await Promise.all(Object.entries(t).map(([n,r])=>mh(i,`${e}[${n}]`,r)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${t} instead`)}},cv=i=>i!=null&&typeof i=="object"&&typeof i.size=="number"&&typeof i.type=="string"&&typeof i.text=="function"&&typeof i.slice=="function"&&typeof i.arrayBuffer=="function",vE=i=>i!=null&&typeof i=="object"&&typeof i.name=="string"&&typeof i.lastModified=="number"&&cv(i),bE=i=>i!=null&&typeof i=="object"&&typeof i.url=="string"&&typeof i.blob=="function";async function wE(i,e,t){if(av(),i=await i,vE(i))return i instanceof File?i:Da([await i.arrayBuffer()],i.name);if(bE(i)){const r=await i.blob();return e||(e=new URL(i.url).pathname.split(/[\\/]/).pop()),Da(await yh(r),e,t)}const n=await yh(i);if(e||(e=Ol(i)),!t?.type){const r=n.find(o=>typeof o=="object"&&"type"in o&&o.type);typeof r=="string"&&(t={...t,type:r})}return Da(n,e,t)}async function yh(i){let e=[];if(typeof i=="string"||ArrayBuffer.isView(i)||i instanceof ArrayBuffer)e.push(i);else if(cv(i))e.push(i instanceof Blob?i:await i.arrayBuffer());else if(rf(i))for await(const t of i)e.push(...await yh(t));else{const t=i?.constructor?.name;throw new Error(`Unexpected data type: ${typeof i}${t?`; constructor: ${t}`:""}${xE(i)}`)}return e}function xE(i){return typeof i!="object"||i===null?"":`; props: [${Object.getOwnPropertyNames(i).map(t=>`"${t}"`).join(", ")}]`}class he{constructor(e){this._client=e}}function uv(i){return i.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const f0=Object.freeze(Object.create(null)),_E=(i=uv)=>function(t,...n){if(t.length===1)return t[0];let r=!1;const o=[],l=t.reduce((p,g,y)=>{/[?#]/.test(g)&&(r=!0);const v=n[y];let x=(r?encodeURIComponent:i)(""+v);return y!==n.length&&(v==null||typeof v=="object"&&v.toString===Object.getPrototypeOf(Object.getPrototypeOf(v.hasOwnProperty??f0)??f0)?.toString)&&(x=v+"",o.push({start:p.length+g.length,length:x.length,error:`Value of type ${Object.prototype.toString.call(v).slice(8,-1)} is not a valid path parameter`})),p+g+(y===n.length?"":x)},""),c=l.split(/[?#]/,1)[0],d=/(?<=^|\/)(?:\.|%2e){1,2}(?=\/|$)/gi;let f;for(;(f=d.exec(c))!==null;)o.push({start:f.index,length:f[0].length,error:`Value "${f[0]}" can't be safely passed as a path parameter`});if(o.sort((p,g)=>p.start-g.start),o.length>0){let p=0;const g=o.reduce((y,v)=>{const x=" ".repeat(v.start-p),_="^".repeat(v.length);return p=v.start+v.length,y+x+_},"");throw new ge(`Path parameters result in path with invalid segments:
${o.map(y=>y.error).join(`
`)}
${l}
${g}`)}return l},X=_E(uv);let dv=class extends he{list(e,t={},n){return this._client.getAPIList(X`/chat/completions/${e}/messages`,lt,{query:t,...n})}};function Ql(i){return i!==void 0&&"function"in i&&i.function!==void 0}function af(i){return i?.$brand==="auto-parseable-response-format"}function Za(i){return i?.$brand==="auto-parseable-tool"}function SE(i,e){return!e||!hv(e)?{...i,choices:i.choices.map(t=>(fv(t.message.tool_calls),{...t,message:{...t.message,parsed:null,...t.message.tool_calls?{tool_calls:t.message.tool_calls}:void 0}}))}:of(i,e)}function of(i,e){const t=i.choices.map(n=>{if(n.finish_reason==="length")throw new qy;if(n.finish_reason==="content_filter")throw new Xy;return fv(n.message.tool_calls),{...n,message:{...n.message,...n.message.tool_calls?{tool_calls:n.message.tool_calls?.map(r=>CE(e,r))??void 0}:void 0,parsed:n.message.content&&!n.message.refusal?AE(e,n.message.content):null}}});return{...i,choices:t}}function AE(i,e){return i.response_format?.type!=="json_schema"?null:i.response_format?.type==="json_schema"?"$parseRaw"in i.response_format?i.response_format.$parseRaw(e):JSON.parse(e):null}function CE(i,e){const t=i.tools?.find(n=>Ql(n)&&n.function?.name===e.function.name);return{...e,function:{...e.function,parsed_arguments:Za(t)?t.$parseRaw(e.function.arguments):t?.function.strict?JSON.parse(e.function.arguments):null}}}function EE(i,e){if(!i||!("tools"in i)||!i.tools)return!1;const t=i.tools?.find(n=>Ql(n)&&n.function?.name===e.function.name);return Ql(t)&&(Za(t)||t?.function.strict||!1)}function hv(i){return af(i.response_format)?!0:i.tools?.some(e=>Za(e)||e.type==="function"&&e.function.strict===!0)??!1}function fv(i){for(const e of i||[])if(e.type!=="function")throw new ge(`Currently only \`function\` tool calls are supported; Received \`${e.type}\``)}function kE(i){for(const e of i??[]){if(e.type!=="function")throw new ge(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new ge(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}const Jl=i=>i?.role==="assistant",pv=i=>i?.role==="tool";var vh,Fl,jl,Ea,ka,$l,Ra,Es,Ta,Zl,ec,hi,gv;class lf{constructor(){vh.add(this),this.controller=new AbortController,Fl.set(this,void 0),jl.set(this,()=>{}),Ea.set(this,()=>{}),ka.set(this,void 0),$l.set(this,()=>{}),Ra.set(this,()=>{}),Es.set(this,{}),Ta.set(this,!1),Zl.set(this,!1),ec.set(this,!1),hi.set(this,!1),Se(this,Fl,new Promise((e,t)=>{Se(this,jl,e,"f"),Se(this,Ea,t,"f")})),Se(this,ka,new Promise((e,t)=>{Se(this,$l,e,"f"),Se(this,Ra,t,"f")})),$(this,Fl,"f").catch(()=>{}),$(this,ka,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},$(this,vh,"m",gv).bind(this))},0)}_connected(){this.ended||($(this,jl,"f").call(this),this._emit("connect"))}get ended(){return $(this,Ta,"f")}get errored(){return $(this,Zl,"f")}get aborted(){return $(this,ec,"f")}abort(){this.controller.abort()}on(e,t){return($(this,Es,"f")[e]||($(this,Es,"f")[e]=[])).push({listener:t}),this}off(e,t){const n=$(this,Es,"f")[e];if(!n)return this;const r=n.findIndex(o=>o.listener===t);return r>=0&&n.splice(r,1),this}once(e,t){return($(this,Es,"f")[e]||($(this,Es,"f")[e]=[])).push({listener:t,once:!0}),this}emitted(e){return new Promise((t,n)=>{Se(this,hi,!0),e!=="error"&&this.once("error",n),this.once(e,t)})}async done(){Se(this,hi,!0),await $(this,ka,"f")}_emit(e,...t){if($(this,Ta,"f"))return;e==="end"&&(Se(this,Ta,!0),$(this,$l,"f").call(this));const n=$(this,Es,"f")[e];if(n&&($(this,Es,"f")[e]=n.filter(r=>!r.once),n.forEach(({listener:r})=>r(...t))),e==="abort"){const r=t[0];!$(this,hi,"f")&&!n?.length&&Promise.reject(r),$(this,Ea,"f").call(this,r),$(this,Ra,"f").call(this,r),this._emit("end");return}if(e==="error"){const r=t[0];!$(this,hi,"f")&&!n?.length&&Promise.reject(r),$(this,Ea,"f").call(this,r),$(this,Ra,"f").call(this,r),this._emit("end")}}_emitFinal(){}}Fl=new WeakMap,jl=new WeakMap,Ea=new WeakMap,ka=new WeakMap,$l=new WeakMap,Ra=new WeakMap,Es=new WeakMap,Ta=new WeakMap,Zl=new WeakMap,ec=new WeakMap,hi=new WeakMap,vh=new WeakSet,gv=function(e){if(Se(this,Zl,!0),e instanceof Error&&e.name==="AbortError"&&(e=new Pn),e instanceof Pn)return Se(this,ec,!0),this._emit("abort",e);if(e instanceof ge)return this._emit("error",e);if(e instanceof Error){const t=new ge(e.message);return t.cause=e,this._emit("error",t)}return this._emit("error",new ge(String(e)))};function RE(i){return typeof i.parse=="function"}var Ht,bh,tc,wh,xh,_h,mv,yv;const TE=10;class vv extends lf{constructor(){super(...arguments),Ht.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){this._chatCompletions.push(e),this._emit("chatCompletion",e);const t=e.choices[0]?.message;return t&&this._addMessage(t),e}_addMessage(e,t=!0){if("content"in e||(e.content=null),this.messages.push(e),t){if(this._emit("message",e),pv(e)&&e.content)this._emit("functionToolCallResult",e.content);else if(Jl(e)&&e.tool_calls)for(const n of e.tool_calls)n.type==="function"&&this._emit("functionToolCall",n.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new ge("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),$(this,Ht,"m",bh).call(this)}async finalMessage(){return await this.done(),$(this,Ht,"m",tc).call(this)}async finalFunctionToolCall(){return await this.done(),$(this,Ht,"m",wh).call(this)}async finalFunctionToolCallResult(){return await this.done(),$(this,Ht,"m",xh).call(this)}async totalUsage(){return await this.done(),$(this,Ht,"m",_h).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const t=$(this,Ht,"m",tc).call(this);t&&this._emit("finalMessage",t);const n=$(this,Ht,"m",bh).call(this);n&&this._emit("finalContent",n);const r=$(this,Ht,"m",wh).call(this);r&&this._emit("finalFunctionToolCall",r);const o=$(this,Ht,"m",xh).call(this);o!=null&&this._emit("finalFunctionToolCallResult",o),this._chatCompletions.some(l=>l.usage)&&this._emit("totalUsage",$(this,Ht,"m",_h).call(this))}async _createChatCompletion(e,t,n){const r=n?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),$(this,Ht,"m",mv).call(this,t);const o=await e.chat.completions.create({...t,stream:!1},{...n,signal:this.controller.signal});return this._connected(),this._addChatCompletion(of(o,t))}async _runChatCompletion(e,t,n){for(const r of t.messages)this._addMessage(r,!1);return await this._createChatCompletion(e,t,n)}async _runTools(e,t,n){const r="tool",{tool_choice:o="auto",stream:l,...c}=t,d=typeof o!="string"&&o.type==="function"&&o?.function?.name,{maxChatCompletions:f=TE}=n||{},p=t.tools.map(v=>{if(Za(v)){if(!v.$callback)throw new ge("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:v.$callback,name:v.function.name,description:v.function.description||"",parameters:v.function.parameters,parse:v.$parseRaw,strict:!0}}}return v}),g={};for(const v of p)v.type==="function"&&(g[v.function.name||v.function.function.name]=v.function);const y="tools"in t?p.map(v=>v.type==="function"?{type:"function",function:{name:v.function.name||v.function.function.name,parameters:v.function.parameters,description:v.function.description,strict:v.function.strict}}:v):void 0;for(const v of t.messages)this._addMessage(v,!1);for(let v=0;v<f;++v){const _=(await this._createChatCompletion(e,{...c,tool_choice:o,tools:y,messages:[...this.messages]},n)).choices[0]?.message;if(!_)throw new ge("missing message in ChatCompletion response");if(!_.tool_calls?.length)return;for(const A of _.tool_calls){if(A.type!=="function")continue;const C=A.id,{name:E,arguments:P}=A.function,R=g[E];if(R){if(d&&d!==E){const H=`Invalid tool_call: ${JSON.stringify(E)}. ${JSON.stringify(d)} requested. Please try again`;this._addMessage({role:r,tool_call_id:C,content:H});continue}}else{const H=`Invalid tool_call: ${JSON.stringify(E)}. Available options are: ${Object.keys(g).map(U=>JSON.stringify(U)).join(", ")}. Please try again`;this._addMessage({role:r,tool_call_id:C,content:H});continue}let M;try{M=RE(R)?await R.parse(P):P}catch(H){const U=H instanceof Error?H.message:String(H);this._addMessage({role:r,tool_call_id:C,content:U});continue}const D=await R.function(M,this),O=$(this,Ht,"m",yv).call(this,D);if(this._addMessage({role:r,tool_call_id:C,content:O}),d)return}}}}Ht=new WeakSet,bh=function(){return $(this,Ht,"m",tc).call(this).content??null},tc=function(){let e=this.messages.length;for(;e-- >0;){const t=this.messages[e];if(Jl(t))return{...t,content:t.content??null,refusal:t.refusal??null}}throw new ge("stream ended without producing a ChatCompletionMessage with role=assistant")},wh=function(){for(let e=this.messages.length-1;e>=0;e--){const t=this.messages[e];if(Jl(t)&&t?.tool_calls?.length)return t.tool_calls.filter(n=>n.type==="function").at(-1)?.function}},xh=function(){for(let e=this.messages.length-1;e>=0;e--){const t=this.messages[e];if(pv(t)&&t.content!=null&&typeof t.content=="string"&&this.messages.some(n=>n.role==="assistant"&&n.tool_calls?.some(r=>r.type==="function"&&r.id===t.tool_call_id)))return t.content}},_h=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:t}of this._chatCompletions)t&&(e.completion_tokens+=t.completion_tokens,e.prompt_tokens+=t.prompt_tokens,e.total_tokens+=t.total_tokens);return e},mv=function(e){if(e.n!=null&&e.n>1)throw new ge("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},yv=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class cf extends vv{static runTools(e,t,n){const r=new cf,o={...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"runTools"}};return r._run(()=>r._runTools(e,t,o)),r}_addMessage(e,t=!0){super._addMessage(e,t),Jl(e)&&e.content&&this._emit("content",e.content)}}const bv=1,wv=2,xv=4,_v=8,Sv=16,Av=32,Cv=64,Ev=128,kv=256,Rv=Ev|kv,Tv=Sv|Av|Rv|Cv,Pv=bv|wv|Tv,Nv=xv|_v,PE=Pv|Nv,bt={STR:bv,NUM:wv,ARR:xv,OBJ:_v,NULL:Sv,BOOL:Av,NAN:Cv,INFINITY:Ev,MINUS_INFINITY:kv,INF:Rv,SPECIAL:Tv,ATOM:Pv,COLLECTION:Nv,ALL:PE};class NE extends Error{}class IE extends Error{}function ME(i,e=bt.ALL){if(typeof i!="string")throw new TypeError(`expecting str, got ${typeof i}`);if(!i.trim())throw new Error(`${i} is empty`);return LE(i.trim(),e)}const LE=(i,e)=>{const t=i.length;let n=0;const r=y=>{throw new NE(`${y} at position ${n}`)},o=y=>{throw new IE(`${y} at position ${n}`)},l=()=>(g(),n>=t&&r("Unexpected end of input"),i[n]==='"'?c():i[n]==="{"?d():i[n]==="["?f():i.substring(n,n+4)==="null"||bt.NULL&e&&t-n<4&&"null".startsWith(i.substring(n))?(n+=4,null):i.substring(n,n+4)==="true"||bt.BOOL&e&&t-n<4&&"true".startsWith(i.substring(n))?(n+=4,!0):i.substring(n,n+5)==="false"||bt.BOOL&e&&t-n<5&&"false".startsWith(i.substring(n))?(n+=5,!1):i.substring(n,n+8)==="Infinity"||bt.INFINITY&e&&t-n<8&&"Infinity".startsWith(i.substring(n))?(n+=8,1/0):i.substring(n,n+9)==="-Infinity"||bt.MINUS_INFINITY&e&&1<t-n&&t-n<9&&"-Infinity".startsWith(i.substring(n))?(n+=9,-1/0):i.substring(n,n+3)==="NaN"||bt.NAN&e&&t-n<3&&"NaN".startsWith(i.substring(n))?(n+=3,NaN):p()),c=()=>{const y=n;let v=!1;for(n++;n<t&&(i[n]!=='"'||v&&i[n-1]==="\\");)v=i[n]==="\\"?!v:!1,n++;if(i.charAt(n)=='"')try{return JSON.parse(i.substring(y,++n-Number(v)))}catch(x){o(String(x))}else if(bt.STR&e)try{return JSON.parse(i.substring(y,n-Number(v))+'"')}catch{return JSON.parse(i.substring(y,i.lastIndexOf("\\"))+'"')}r("Unterminated string literal")},d=()=>{n++,g();const y={};try{for(;i[n]!=="}";){if(g(),n>=t&&bt.OBJ&e)return y;const v=c();g(),n++;try{const x=l();Object.defineProperty(y,v,{value:x,writable:!0,enumerable:!0,configurable:!0})}catch(x){if(bt.OBJ&e)return y;throw x}g(),i[n]===","&&n++}}catch{if(bt.OBJ&e)return y;r("Expected '}' at end of object")}return n++,y},f=()=>{n++;const y=[];try{for(;i[n]!=="]";)y.push(l()),g(),i[n]===","&&n++}catch{if(bt.ARR&e)return y;r("Expected ']' at end of array")}return n++,y},p=()=>{if(n===0){i==="-"&&bt.NUM&e&&r("Not sure what '-' is");try{return JSON.parse(i)}catch(v){if(bt.NUM&e)try{return i[i.length-1]==="."?JSON.parse(i.substring(0,i.lastIndexOf("."))):JSON.parse(i.substring(0,i.lastIndexOf("e")))}catch{}o(String(v))}}const y=n;for(i[n]==="-"&&n++;i[n]&&!",]}".includes(i[n]);)n++;n==t&&!(bt.NUM&e)&&r("Unterminated number literal");try{return JSON.parse(i.substring(y,n))}catch{i.substring(y,n)==="-"&&bt.NUM&e&&r("Not sure what '-' is");try{return JSON.parse(i.substring(y,i.lastIndexOf("e")))}catch(x){o(String(x))}}},g=()=>{for(;n<t&&` 
\r	`.includes(i[n]);)n++};return l()},p0=i=>ME(i,bt.ALL^bt.NUM);var dt,As,oi,er,$d,Al,zd,Bd,Hd,Cl,Ud,g0;class Wa extends vv{constructor(e){super(),dt.add(this),As.set(this,void 0),oi.set(this,void 0),er.set(this,void 0),Se(this,As,e),Se(this,oi,[])}get currentChatCompletionSnapshot(){return $(this,er,"f")}static fromReadableStream(e){const t=new Wa(null);return t._run(()=>t._fromReadableStream(e)),t}static createChatCompletion(e,t,n){const r=new Wa(t);return r._run(()=>r._runChatCompletion(e,{...t,stream:!0},{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"stream"}})),r}async _createChatCompletion(e,t,n){super._createChatCompletion;const r=n?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),$(this,dt,"m",$d).call(this);const o=await e.chat.completions.create({...t,stream:!0},{...n,signal:this.controller.signal});this._connected();for await(const l of o)$(this,dt,"m",zd).call(this,l);if(o.controller.signal?.aborted)throw new Pn;return this._addChatCompletion($(this,dt,"m",Cl).call(this))}async _fromReadableStream(e,t){const n=t?.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),$(this,dt,"m",$d).call(this),this._connected();const r=ds.fromReadableStream(e,this.controller);let o;for await(const l of r)o&&o!==l.id&&this._addChatCompletion($(this,dt,"m",Cl).call(this)),$(this,dt,"m",zd).call(this,l),o=l.id;if(r.controller.signal?.aborted)throw new Pn;return this._addChatCompletion($(this,dt,"m",Cl).call(this))}[(As=new WeakMap,oi=new WeakMap,er=new WeakMap,dt=new WeakSet,$d=function(){this.ended||Se(this,er,void 0)},Al=function(t){let n=$(this,oi,"f")[t.index];return n||(n={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},$(this,oi,"f")[t.index]=n,n)},zd=function(t){if(this.ended)return;const n=$(this,dt,"m",g0).call(this,t);this._emit("chunk",t,n);for(const r of t.choices){const o=n.choices[r.index];r.delta.content!=null&&o.message?.role==="assistant"&&o.message?.content&&(this._emit("content",r.delta.content,o.message.content),this._emit("content.delta",{delta:r.delta.content,snapshot:o.message.content,parsed:o.message.parsed})),r.delta.refusal!=null&&o.message?.role==="assistant"&&o.message?.refusal&&this._emit("refusal.delta",{delta:r.delta.refusal,snapshot:o.message.refusal}),r.logprobs?.content!=null&&o.message?.role==="assistant"&&this._emit("logprobs.content.delta",{content:r.logprobs?.content,snapshot:o.logprobs?.content??[]}),r.logprobs?.refusal!=null&&o.message?.role==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:r.logprobs?.refusal,snapshot:o.logprobs?.refusal??[]});const l=$(this,dt,"m",Al).call(this,o);o.finish_reason&&($(this,dt,"m",Hd).call(this,o),l.current_tool_call_index!=null&&$(this,dt,"m",Bd).call(this,o,l.current_tool_call_index));for(const c of r.delta.tool_calls??[])l.current_tool_call_index!==c.index&&($(this,dt,"m",Hd).call(this,o),l.current_tool_call_index!=null&&$(this,dt,"m",Bd).call(this,o,l.current_tool_call_index)),l.current_tool_call_index=c.index;for(const c of r.delta.tool_calls??[]){const d=o.message.tool_calls?.[c.index];d?.type&&(d?.type==="function"?this._emit("tool_calls.function.arguments.delta",{name:d.function?.name,index:c.index,arguments:d.function.arguments,parsed_arguments:d.function.parsed_arguments,arguments_delta:c.function?.arguments??""}):(d?.type,void 0))}}},Bd=function(t,n){if($(this,dt,"m",Al).call(this,t).done_tool_calls.has(n))return;const o=t.message.tool_calls?.[n];if(!o)throw new Error("no tool call snapshot");if(!o.type)throw new Error("tool call snapshot missing `type`");if(o.type==="function"){const l=$(this,As,"f")?.tools?.find(c=>Ql(c)&&c.function.name===o.function.name);this._emit("tool_calls.function.arguments.done",{name:o.function.name,index:n,arguments:o.function.arguments,parsed_arguments:Za(l)?l.$parseRaw(o.function.arguments):l?.function.strict?JSON.parse(o.function.arguments):null})}else o.type},Hd=function(t){const n=$(this,dt,"m",Al).call(this,t);if(t.message.content&&!n.content_done){n.content_done=!0;const r=$(this,dt,"m",Ud).call(this);this._emit("content.done",{content:t.message.content,parsed:r?r.$parseRaw(t.message.content):null})}t.message.refusal&&!n.refusal_done&&(n.refusal_done=!0,this._emit("refusal.done",{refusal:t.message.refusal})),t.logprobs?.content&&!n.logprobs_content_done&&(n.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:t.logprobs.content})),t.logprobs?.refusal&&!n.logprobs_refusal_done&&(n.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:t.logprobs.refusal}))},Cl=function(){if(this.ended)throw new ge("stream has ended, this shouldn't happen");const t=$(this,er,"f");if(!t)throw new ge("request ended without sending any chunks");return Se(this,er,void 0),Se(this,oi,[]),DE(t,$(this,As,"f"))},Ud=function(){const t=$(this,As,"f")?.response_format;return af(t)?t:null},g0=function(t){var n,r,o,l;let c=$(this,er,"f");const{choices:d,...f}=t;c?Object.assign(c,f):c=Se(this,er,{...f,choices:[]});for(const{delta:p,finish_reason:g,index:y,logprobs:v=null,...x}of t.choices){let _=c.choices[y];if(_||(_=c.choices[y]={finish_reason:g,index:y,message:{},logprobs:v,...x}),v)if(!_.logprobs)_.logprobs=Object.assign({},v);else{const{content:D,refusal:O,...H}=v;Object.assign(_.logprobs,H),D&&((n=_.logprobs).content??(n.content=[]),_.logprobs.content.push(...D)),O&&((r=_.logprobs).refusal??(r.refusal=[]),_.logprobs.refusal.push(...O))}if(g&&(_.finish_reason=g,$(this,As,"f")&&hv($(this,As,"f")))){if(g==="length")throw new qy;if(g==="content_filter")throw new Xy}if(Object.assign(_,x),!p)continue;const{content:A,refusal:C,function_call:E,role:P,tool_calls:R,...M}=p;if(Object.assign(_.message,M),C&&(_.message.refusal=(_.message.refusal||"")+C),P&&(_.message.role=P),E&&(_.message.function_call?(E.name&&(_.message.function_call.name=E.name),E.arguments&&((o=_.message.function_call).arguments??(o.arguments=""),_.message.function_call.arguments+=E.arguments)):_.message.function_call=E),A&&(_.message.content=(_.message.content||"")+A,!_.message.refusal&&$(this,dt,"m",Ud).call(this)&&(_.message.parsed=p0(_.message.content))),R){_.message.tool_calls||(_.message.tool_calls=[]);for(const{index:D,id:O,type:H,function:U,...K}of R){const V=(l=_.message.tool_calls)[D]??(l[D]={});Object.assign(V,K),O&&(V.id=O),H&&(V.type=H),U&&(V.function??(V.function={name:U.name??"",arguments:""})),U?.name&&(V.function.name=U.name),U?.arguments&&(V.function.arguments+=U.arguments,EE($(this,As,"f"),V)&&(V.function.parsed_arguments=p0(V.function.arguments)))}}}return c},Symbol.asyncIterator)](){const e=[],t=[];let n=!1;return this.on("chunk",r=>{const o=t.shift();o?o.resolve(r):e.push(r)}),this.on("end",()=>{n=!0;for(const r of t)r.resolve(void 0);t.length=0}),this.on("abort",r=>{n=!0;for(const o of t)o.reject(r);t.length=0}),this.on("error",r=>{n=!0;for(const o of t)o.reject(r);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((o,l)=>t.push({resolve:o,reject:l})).then(o=>o?{value:o,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new ds(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function DE(i,e){const{id:t,choices:n,created:r,model:o,system_fingerprint:l,...c}=i,d={...c,id:t,choices:n.map(({message:f,finish_reason:p,index:g,logprobs:y,...v})=>{if(!p)throw new ge(`missing finish_reason for choice ${g}`);const{content:x=null,function_call:_,tool_calls:A,...C}=f,E=f.role;if(!E)throw new ge(`missing role for choice ${g}`);if(_){const{arguments:P,name:R}=_;if(P==null)throw new ge(`missing function_call.arguments for choice ${g}`);if(!R)throw new ge(`missing function_call.name for choice ${g}`);return{...v,message:{content:x,function_call:{arguments:P,name:R},role:E,refusal:f.refusal??null},finish_reason:p,index:g,logprobs:y}}return A?{...v,index:g,finish_reason:p,logprobs:y,message:{...C,role:E,content:x,refusal:f.refusal??null,tool_calls:A.map((P,R)=>{const{function:M,type:D,id:O,...H}=P,{arguments:U,name:K,...V}=M||{};if(O==null)throw new ge(`missing choices[${g}].tool_calls[${R}].id
${El(i)}`);if(D==null)throw new ge(`missing choices[${g}].tool_calls[${R}].type
${El(i)}`);if(K==null)throw new ge(`missing choices[${g}].tool_calls[${R}].function.name
${El(i)}`);if(U==null)throw new ge(`missing choices[${g}].tool_calls[${R}].function.arguments
${El(i)}`);return{...H,id:O,type:D,function:{...V,name:K,arguments:U}}})}}:{...v,message:{...C,content:x,role:E,refusal:f.refusal??null},finish_reason:p,index:g,logprobs:y}}),created:r,model:o,object:"chat.completion",...l?{system_fingerprint:l}:{}};return SE(d,e)}function El(i){return JSON.stringify(i)}class nc extends Wa{static fromReadableStream(e){const t=new nc(null);return t._run(()=>t._fromReadableStream(e)),t}static runTools(e,t,n){const r=new nc(t),o={...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"runTools"}};return r._run(()=>r._runTools(e,t,o)),r}}let uf=class extends he{constructor(){super(...arguments),this.messages=new dv(this._client)}create(e,t){return this._client.post("/chat/completions",{body:e,...t,stream:e.stream??!1})}retrieve(e,t){return this._client.get(X`/chat/completions/${e}`,t)}update(e,t,n){return this._client.post(X`/chat/completions/${e}`,{body:t,...n})}list(e={},t){return this._client.getAPIList("/chat/completions",lt,{query:e,...t})}delete(e,t){return this._client.delete(X`/chat/completions/${e}`,t)}parse(e,t){return kE(e.tools),this._client.chat.completions.create(e,{...t,headers:{...t?.headers,"X-Stainless-Helper-Method":"chat.completions.parse"}})._thenUnwrap(n=>of(n,e))}runTools(e,t){return e.stream?nc.runTools(this._client,e,t):cf.runTools(this._client,e,t)}stream(e,t){return Wa.createChatCompletion(this._client,e,t)}};uf.Messages=dv;class df extends he{constructor(){super(...arguments),this.completions=new uf(this._client)}}df.Completions=uf;const Iv=Symbol("brand.privateNullableHeaders");function*OE(i){if(!i)return;if(Iv in i){const{values:n,nulls:r}=i;yield*n.entries();for(const o of r)yield[o,null];return}let e=!1,t;i instanceof Headers?t=i.entries():Zm(i)?t=i:(e=!0,t=Object.entries(i??{}));for(let n of t){const r=n[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const o=Zm(n[1])?n[1]:[n[1]];let l=!1;for(const c of o)c!==void 0&&(e&&!l&&(l=!0,yield[r,null]),yield[r,c])}}const ae=i=>{const e=new Headers,t=new Set;for(const n of i){const r=new Set;for(const[o,l]of OE(n)){const c=o.toLowerCase();r.has(c)||(e.delete(o),r.add(c)),l===null?(e.delete(o),t.add(c)):(e.append(o,l),t.delete(c))}}return{[Iv]:!0,values:e,nulls:t}};class Mv extends he{create(e,t){return this._client.post("/audio/speech",{body:e,...t,headers:ae([{Accept:"application/octet-stream"},t?.headers]),__binaryResponse:!0})}}class Lv extends he{create(e,t){return this._client.post("/audio/transcriptions",Mr({body:e,...t,stream:e.stream??!1,__metadata:{model:e.model}},this._client))}}class Dv extends he{create(e,t){return this._client.post("/audio/translations",Mr({body:e,...t,__metadata:{model:e.model}},this._client))}}class eo extends he{constructor(){super(...arguments),this.transcriptions=new Lv(this._client),this.translations=new Dv(this._client),this.speech=new Mv(this._client)}}eo.Transcriptions=Lv;eo.Translations=Dv;eo.Speech=Mv;class Ov extends he{create(e,t){return this._client.post("/batches",{body:e,...t})}retrieve(e,t){return this._client.get(X`/batches/${e}`,t)}list(e={},t){return this._client.getAPIList("/batches",lt,{query:e,...t})}cancel(e,t){return this._client.post(X`/batches/${e}/cancel`,t)}}class Fv extends he{create(e,t){return this._client.post("/assistants",{body:e,...t,headers:ae([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}retrieve(e,t){return this._client.get(X`/assistants/${e}`,{...t,headers:ae([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}update(e,t,n){return this._client.post(X`/assistants/${e}`,{body:t,...n,headers:ae([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}list(e={},t){return this._client.getAPIList("/assistants",lt,{query:e,...t,headers:ae([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}delete(e,t){return this._client.delete(X`/assistants/${e}`,{...t,headers:ae([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}}let jv=class extends he{create(e,t){return this._client.post("/realtime/sessions",{body:e,...t,headers:ae([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}};class $v extends he{create(e,t){return this._client.post("/realtime/transcription_sessions",{body:e,...t,headers:ae([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}}let Rc=class extends he{constructor(){super(...arguments),this.sessions=new jv(this._client),this.transcriptionSessions=new $v(this._client)}};Rc.Sessions=jv;Rc.TranscriptionSessions=$v;class zv extends he{create(e,t){return this._client.post("/chatkit/sessions",{body:e,...t,headers:ae([{"OpenAI-Beta":"chatkit_beta=v1"},t?.headers])})}cancel(e,t){return this._client.post(X`/chatkit/sessions/${e}/cancel`,{...t,headers:ae([{"OpenAI-Beta":"chatkit_beta=v1"},t?.headers])})}}let Bv=class extends he{retrieve(e,t){return this._client.get(X`/chatkit/threads/${e}`,{...t,headers:ae([{"OpenAI-Beta":"chatkit_beta=v1"},t?.headers])})}list(e={},t){return this._client.getAPIList("/chatkit/threads",Yl,{query:e,...t,headers:ae([{"OpenAI-Beta":"chatkit_beta=v1"},t?.headers])})}delete(e,t){return this._client.delete(X`/chatkit/threads/${e}`,{...t,headers:ae([{"OpenAI-Beta":"chatkit_beta=v1"},t?.headers])})}listItems(e,t={},n){return this._client.getAPIList(X`/chatkit/threads/${e}/items`,Yl,{query:t,...n,headers:ae([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}};class Tc extends he{constructor(){super(...arguments),this.sessions=new zv(this._client),this.threads=new Bv(this._client)}}Tc.Sessions=zv;Tc.Threads=Bv;class Hv extends he{create(e,t,n){return this._client.post(X`/threads/${e}/messages`,{body:t,...n,headers:ae([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,t,n){const{thread_id:r}=t;return this._client.get(X`/threads/${r}/messages/${e}`,{...n,headers:ae([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,t,n){const{thread_id:r,...o}=t;return this._client.post(X`/threads/${r}/messages/${e}`,{body:o,...n,headers:ae([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}list(e,t={},n){return this._client.getAPIList(X`/threads/${e}/messages`,lt,{query:t,...n,headers:ae([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}delete(e,t,n){const{thread_id:r}=t;return this._client.delete(X`/threads/${r}/messages/${e}`,{...n,headers:ae([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}}class Uv extends he{retrieve(e,t,n){const{thread_id:r,run_id:o,...l}=t;return this._client.get(X`/threads/${r}/runs/${o}/steps/${e}`,{query:l,...n,headers:ae([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}list(e,t,n){const{thread_id:r,...o}=t;return this._client.getAPIList(X`/threads/${r}/runs/${e}/steps`,lt,{query:o,...n,headers:ae([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}}const FE=i=>{if(typeof Buffer<"u"){const e=Buffer.from(i,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{const e=atob(i),t=e.length,n=new Uint8Array(t);for(let r=0;r<t;r++)n[r]=e.charCodeAt(r);return Array.from(new Float32Array(n.buffer))}};var jE={};const li=i=>{if(typeof globalThis.process<"u")return jE?.[i]?.trim()??void 0;if(typeof globalThis.Deno<"u")return globalThis.Deno.env?.get?.(i)?.trim()};var Ct,Rr,Sh,us,zl,qn,Tr,gi,Cr,sc,gn,Bl,Hl,Oa,Pa,Na,m0,y0,v0,b0,w0,x0,_0;class Fa extends lf{constructor(){super(...arguments),Ct.add(this),Sh.set(this,[]),us.set(this,{}),zl.set(this,{}),qn.set(this,void 0),Tr.set(this,void 0),gi.set(this,void 0),Cr.set(this,void 0),sc.set(this,void 0),gn.set(this,void 0),Bl.set(this,void 0),Hl.set(this,void 0),Oa.set(this,void 0)}[(Sh=new WeakMap,us=new WeakMap,zl=new WeakMap,qn=new WeakMap,Tr=new WeakMap,gi=new WeakMap,Cr=new WeakMap,sc=new WeakMap,gn=new WeakMap,Bl=new WeakMap,Hl=new WeakMap,Oa=new WeakMap,Ct=new WeakSet,Symbol.asyncIterator)](){const e=[],t=[];let n=!1;return this.on("event",r=>{const o=t.shift();o?o.resolve(r):e.push(r)}),this.on("end",()=>{n=!0;for(const r of t)r.resolve(void 0);t.length=0}),this.on("abort",r=>{n=!0;for(const o of t)o.reject(r);t.length=0}),this.on("error",r=>{n=!0;for(const o of t)o.reject(r);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((o,l)=>t.push({resolve:o,reject:l})).then(o=>o?{value:o,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const t=new Rr;return t._run(()=>t._fromReadableStream(e)),t}async _fromReadableStream(e,t){const n=t?.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),this._connected();const r=ds.fromReadableStream(e,this.controller);for await(const o of r)$(this,Ct,"m",Pa).call(this,o);if(r.controller.signal?.aborted)throw new Pn;return this._addRun($(this,Ct,"m",Na).call(this))}toReadableStream(){return new ds(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,t,n,r){const o=new Rr;return o._run(()=>o._runToolAssistantStream(e,t,n,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),o}async _createToolAssistantStream(e,t,n,r){const o=r?.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort()));const l={...n,stream:!0},c=await e.submitToolOutputs(t,l,{...r,signal:this.controller.signal});this._connected();for await(const d of c)$(this,Ct,"m",Pa).call(this,d);if(c.controller.signal?.aborted)throw new Pn;return this._addRun($(this,Ct,"m",Na).call(this))}static createThreadAssistantStream(e,t,n){const r=new Rr;return r._run(()=>r._threadAssistantStream(e,t,{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"stream"}})),r}static createAssistantStream(e,t,n,r){const o=new Rr;return o._run(()=>o._runAssistantStream(e,t,n,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),o}currentEvent(){return $(this,Bl,"f")}currentRun(){return $(this,Hl,"f")}currentMessageSnapshot(){return $(this,qn,"f")}currentRunStepSnapshot(){return $(this,Oa,"f")}async finalRunSteps(){return await this.done(),Object.values($(this,us,"f"))}async finalMessages(){return await this.done(),Object.values($(this,zl,"f"))}async finalRun(){if(await this.done(),!$(this,Tr,"f"))throw Error("Final run was not received.");return $(this,Tr,"f")}async _createThreadAssistantStream(e,t,n){const r=n?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort()));const o={...t,stream:!0},l=await e.createAndRun(o,{...n,signal:this.controller.signal});this._connected();for await(const c of l)$(this,Ct,"m",Pa).call(this,c);if(l.controller.signal?.aborted)throw new Pn;return this._addRun($(this,Ct,"m",Na).call(this))}async _createAssistantStream(e,t,n,r){const o=r?.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort()));const l={...n,stream:!0},c=await e.create(t,l,{...r,signal:this.controller.signal});this._connected();for await(const d of c)$(this,Ct,"m",Pa).call(this,d);if(c.controller.signal?.aborted)throw new Pn;return this._addRun($(this,Ct,"m",Na).call(this))}static accumulateDelta(e,t){for(const[n,r]of Object.entries(t)){if(!e.hasOwnProperty(n)){e[n]=r;continue}let o=e[n];if(o==null){e[n]=r;continue}if(n==="index"||n==="type"){e[n]=r;continue}if(typeof o=="string"&&typeof r=="string")o+=r;else if(typeof o=="number"&&typeof r=="number")o+=r;else if(Od(o)&&Od(r))o=this.accumulateDelta(o,r);else if(Array.isArray(o)&&Array.isArray(r)){if(o.every(l=>typeof l=="string"||typeof l=="number")){o.push(...r);continue}for(const l of r){if(!Od(l))throw new Error(`Expected array delta entry to be an object but got: ${l}`);const c=l.index;if(c==null)throw console.error(l),new Error("Expected array delta entry to have an `index` property");if(typeof c!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${c}`);const d=o[c];d==null?o.push(l):o[c]=this.accumulateDelta(d,l)}continue}else throw Error(`Unhandled record type: ${n}, deltaValue: ${r}, accValue: ${o}`);e[n]=o}return e}_addRun(e){return e}async _threadAssistantStream(e,t,n){return await this._createThreadAssistantStream(t,e,n)}async _runAssistantStream(e,t,n,r){return await this._createAssistantStream(t,e,n,r)}async _runToolAssistantStream(e,t,n,r){return await this._createToolAssistantStream(t,e,n,r)}}Rr=Fa,Pa=function(e){if(!this.ended)switch(Se(this,Bl,e),$(this,Ct,"m",v0).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":$(this,Ct,"m",_0).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":$(this,Ct,"m",y0).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":$(this,Ct,"m",m0).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},Na=function(){if(this.ended)throw new ge("stream has ended, this shouldn't happen");if(!$(this,Tr,"f"))throw Error("Final run has not been received");return $(this,Tr,"f")},m0=function(e){const[t,n]=$(this,Ct,"m",w0).call(this,e,$(this,qn,"f"));Se(this,qn,t),$(this,zl,"f")[t.id]=t;for(const r of n){const o=t.content[r.index];o?.type=="text"&&this._emit("textCreated",o.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,t),e.data.delta.content)for(const r of e.data.delta.content){if(r.type=="text"&&r.text){let o=r.text,l=t.content[r.index];if(l&&l.type=="text")this._emit("textDelta",o,l.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(r.index!=$(this,gi,"f")){if($(this,Cr,"f"))switch($(this,Cr,"f").type){case"text":this._emit("textDone",$(this,Cr,"f").text,$(this,qn,"f"));break;case"image_file":this._emit("imageFileDone",$(this,Cr,"f").image_file,$(this,qn,"f"));break}Se(this,gi,r.index)}Se(this,Cr,t.content[r.index])}break;case"thread.message.completed":case"thread.message.incomplete":if($(this,gi,"f")!==void 0){const r=e.data.content[$(this,gi,"f")];if(r)switch(r.type){case"image_file":this._emit("imageFileDone",r.image_file,$(this,qn,"f"));break;case"text":this._emit("textDone",r.text,$(this,qn,"f"));break}}$(this,qn,"f")&&this._emit("messageDone",e.data),Se(this,qn,void 0)}},y0=function(e){const t=$(this,Ct,"m",b0).call(this,e);switch(Se(this,Oa,t),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const n=e.data.delta;if(n.step_details&&n.step_details.type=="tool_calls"&&n.step_details.tool_calls&&t.step_details.type=="tool_calls")for(const o of n.step_details.tool_calls)o.index==$(this,sc,"f")?this._emit("toolCallDelta",o,t.step_details.tool_calls[o.index]):($(this,gn,"f")&&this._emit("toolCallDone",$(this,gn,"f")),Se(this,sc,o.index),Se(this,gn,t.step_details.tool_calls[o.index]),$(this,gn,"f")&&this._emit("toolCallCreated",$(this,gn,"f")));this._emit("runStepDelta",e.data.delta,t);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":Se(this,Oa,void 0),e.data.step_details.type=="tool_calls"&&$(this,gn,"f")&&(this._emit("toolCallDone",$(this,gn,"f")),Se(this,gn,void 0)),this._emit("runStepDone",e.data,t);break}},v0=function(e){$(this,Sh,"f").push(e),this._emit("event",e)},b0=function(e){switch(e.event){case"thread.run.step.created":return $(this,us,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let t=$(this,us,"f")[e.data.id];if(!t)throw Error("Received a RunStepDelta before creation of a snapshot");let n=e.data;if(n.delta){const r=Rr.accumulateDelta(t,n.delta);$(this,us,"f")[e.data.id]=r}return $(this,us,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":$(this,us,"f")[e.data.id]=e.data;break}if($(this,us,"f")[e.data.id])return $(this,us,"f")[e.data.id];throw new Error("No snapshot available")},w0=function(e,t){let n=[];switch(e.event){case"thread.message.created":return[e.data,n];case"thread.message.delta":if(!t)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let r=e.data;if(r.delta.content)for(const o of r.delta.content)if(o.index in t.content){let l=t.content[o.index];t.content[o.index]=$(this,Ct,"m",x0).call(this,o,l)}else t.content[o.index]=o,n.push(o);return[t,n];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(t)return[t,n];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},x0=function(e,t){return Rr.accumulateDelta(t,e)},_0=function(e){switch(Se(this,Hl,e.data),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":case"thread.run.incomplete":Se(this,Tr,e.data),$(this,gn,"f")&&(this._emit("toolCallDone",$(this,gn,"f")),Se(this,gn,void 0));break}};let hf=class extends he{constructor(){super(...arguments),this.steps=new Uv(this._client)}create(e,t,n){const{include:r,...o}=t;return this._client.post(X`/threads/${e}/runs`,{query:{include:r},body:o,...n,headers:ae([{"OpenAI-Beta":"assistants=v2"},n?.headers]),stream:t.stream??!1})}retrieve(e,t,n){const{thread_id:r}=t;return this._client.get(X`/threads/${r}/runs/${e}`,{...n,headers:ae([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,t,n){const{thread_id:r,...o}=t;return this._client.post(X`/threads/${r}/runs/${e}`,{body:o,...n,headers:ae([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}list(e,t={},n){return this._client.getAPIList(X`/threads/${e}/runs`,lt,{query:t,...n,headers:ae([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}cancel(e,t,n){const{thread_id:r}=t;return this._client.post(X`/threads/${r}/runs/${e}/cancel`,{...n,headers:ae([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}async createAndPoll(e,t,n){const r=await this.create(e,t,n);return await this.poll(r.id,{thread_id:e},n)}createAndStream(e,t,n){return Fa.createAssistantStream(e,this._client.beta.threads.runs,t,n)}async poll(e,t,n){const r=ae([n?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":n?.pollIntervalMs?.toString()??void 0}]);for(;;){const{data:o,response:l}=await this.retrieve(e,t,{...n,headers:{...n?.headers,...r}}).withResponse();switch(o.status){case"queued":case"in_progress":case"cancelling":let c=5e3;if(n?.pollIntervalMs)c=n.pollIntervalMs;else{const d=l.headers.get("openai-poll-after-ms");if(d){const f=parseInt(d);isNaN(f)||(c=f)}}await Ja(c);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return o}}}stream(e,t,n){return Fa.createAssistantStream(e,this._client.beta.threads.runs,t,n)}submitToolOutputs(e,t,n){const{thread_id:r,...o}=t;return this._client.post(X`/threads/${r}/runs/${e}/submit_tool_outputs`,{body:o,...n,headers:ae([{"OpenAI-Beta":"assistants=v2"},n?.headers]),stream:t.stream??!1})}async submitToolOutputsAndPoll(e,t,n){const r=await this.submitToolOutputs(e,t,n);return await this.poll(r.id,t,n)}submitToolOutputsStream(e,t,n){return Fa.createToolAssistantStream(e,this._client.beta.threads.runs,t,n)}};hf.Steps=Uv;class Pc extends he{constructor(){super(...arguments),this.runs=new hf(this._client),this.messages=new Hv(this._client)}create(e={},t){return this._client.post("/threads",{body:e,...t,headers:ae([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}retrieve(e,t){return this._client.get(X`/threads/${e}`,{...t,headers:ae([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}update(e,t,n){return this._client.post(X`/threads/${e}`,{body:t,...n,headers:ae([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}delete(e,t){return this._client.delete(X`/threads/${e}`,{...t,headers:ae([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}createAndRun(e,t){return this._client.post("/threads/runs",{body:e,...t,headers:ae([{"OpenAI-Beta":"assistants=v2"},t?.headers]),stream:e.stream??!1})}async createAndRunPoll(e,t){const n=await this.createAndRun(e,t);return await this.runs.poll(n.id,{thread_id:n.thread_id},t)}createAndRunStream(e,t){return Fa.createThreadAssistantStream(e,this._client.beta.threads,t)}}Pc.Runs=hf;Pc.Messages=Hv;class xi extends he{constructor(){super(...arguments),this.realtime=new Rc(this._client),this.chatkit=new Tc(this._client),this.assistants=new Fv(this._client),this.threads=new Pc(this._client)}}xi.Realtime=Rc;xi.ChatKit=Tc;xi.Assistants=Fv;xi.Threads=Pc;class Wv extends he{create(e,t){return this._client.post("/completions",{body:e,...t,stream:e.stream??!1})}}class Vv extends he{retrieve(e,t,n){const{container_id:r}=t;return this._client.get(X`/containers/${r}/files/${e}/content`,{...n,headers:ae([{Accept:"application/binary"},n?.headers]),__binaryResponse:!0})}}let ff=class extends he{constructor(){super(...arguments),this.content=new Vv(this._client)}create(e,t,n){return this._client.post(X`/containers/${e}/files`,Mr({body:t,...n},this._client))}retrieve(e,t,n){const{container_id:r}=t;return this._client.get(X`/containers/${r}/files/${e}`,n)}list(e,t={},n){return this._client.getAPIList(X`/containers/${e}/files`,lt,{query:t,...n})}delete(e,t,n){const{container_id:r}=t;return this._client.delete(X`/containers/${r}/files/${e}`,{...n,headers:ae([{Accept:"*/*"},n?.headers])})}};ff.Content=Vv;class pf extends he{constructor(){super(...arguments),this.files=new ff(this._client)}create(e,t){return this._client.post("/containers",{body:e,...t})}retrieve(e,t){return this._client.get(X`/containers/${e}`,t)}list(e={},t){return this._client.getAPIList("/containers",lt,{query:e,...t})}delete(e,t){return this._client.delete(X`/containers/${e}`,{...t,headers:ae([{Accept:"*/*"},t?.headers])})}}pf.Files=ff;class Gv extends he{create(e,t,n){const{include:r,...o}=t;return this._client.post(X`/conversations/${e}/items`,{query:{include:r},body:o,...n})}retrieve(e,t,n){const{conversation_id:r,...o}=t;return this._client.get(X`/conversations/${r}/items/${e}`,{query:o,...n})}list(e,t={},n){return this._client.getAPIList(X`/conversations/${e}/items`,Yl,{query:t,...n})}delete(e,t,n){const{conversation_id:r}=t;return this._client.delete(X`/conversations/${r}/items/${e}`,n)}}class gf extends he{constructor(){super(...arguments),this.items=new Gv(this._client)}create(e={},t){return this._client.post("/conversations",{body:e,...t})}retrieve(e,t){return this._client.get(X`/conversations/${e}`,t)}update(e,t,n){return this._client.post(X`/conversations/${e}`,{body:t,...n})}delete(e,t){return this._client.delete(X`/conversations/${e}`,t)}}gf.Items=Gv;class qv extends he{create(e,t){const n=!!e.encoding_format;let r=n?e.encoding_format:"base64";n&&At(this._client).debug("embeddings/user defined encoding_format:",e.encoding_format);const o=this._client.post("/embeddings",{body:{...e,encoding_format:r},...t});return n?o:(At(this._client).debug("embeddings/decoding base64 embeddings from base64"),o._thenUnwrap(l=>(l&&l.data&&l.data.forEach(c=>{const d=c.embedding;c.embedding=FE(d)}),l)))}}class Xv extends he{retrieve(e,t,n){const{eval_id:r,run_id:o}=t;return this._client.get(X`/evals/${r}/runs/${o}/output_items/${e}`,n)}list(e,t,n){const{eval_id:r,...o}=t;return this._client.getAPIList(X`/evals/${r}/runs/${e}/output_items`,lt,{query:o,...n})}}class mf extends he{constructor(){super(...arguments),this.outputItems=new Xv(this._client)}create(e,t,n){return this._client.post(X`/evals/${e}/runs`,{body:t,...n})}retrieve(e,t,n){const{eval_id:r}=t;return this._client.get(X`/evals/${r}/runs/${e}`,n)}list(e,t={},n){return this._client.getAPIList(X`/evals/${e}/runs`,lt,{query:t,...n})}delete(e,t,n){const{eval_id:r}=t;return this._client.delete(X`/evals/${r}/runs/${e}`,n)}cancel(e,t,n){const{eval_id:r}=t;return this._client.post(X`/evals/${r}/runs/${e}`,n)}}mf.OutputItems=Xv;class yf extends he{constructor(){super(...arguments),this.runs=new mf(this._client)}create(e,t){return this._client.post("/evals",{body:e,...t})}retrieve(e,t){return this._client.get(X`/evals/${e}`,t)}update(e,t,n){return this._client.post(X`/evals/${e}`,{body:t,...n})}list(e={},t){return this._client.getAPIList("/evals",lt,{query:e,...t})}delete(e,t){return this._client.delete(X`/evals/${e}`,t)}}yf.Runs=mf;let Kv=class extends he{create(e,t){return this._client.post("/files",Mr({body:e,...t},this._client))}retrieve(e,t){return this._client.get(X`/files/${e}`,t)}list(e={},t){return this._client.getAPIList("/files",lt,{query:e,...t})}delete(e,t){return this._client.delete(X`/files/${e}`,t)}content(e,t){return this._client.get(X`/files/${e}/content`,{...t,headers:ae([{Accept:"application/binary"},t?.headers]),__binaryResponse:!0})}async waitForProcessing(e,{pollInterval:t=5e3,maxWait:n=1800*1e3}={}){const r=new Set(["processed","error","deleted"]),o=Date.now();let l=await this.retrieve(e);for(;!l.status||!r.has(l.status);)if(await Ja(t),l=await this.retrieve(e),Date.now()-o>n)throw new tf({message:`Giving up on waiting for file ${e} to finish processing after ${n} milliseconds.`});return l}};class Yv extends he{}let Qv=class extends he{run(e,t){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...t})}validate(e,t){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...t})}};class vf extends he{constructor(){super(...arguments),this.graders=new Qv(this._client)}}vf.Graders=Qv;class Jv extends he{create(e,t,n){return this._client.getAPIList(X`/fine_tuning/checkpoints/${e}/permissions`,kc,{body:t,method:"post",...n})}retrieve(e,t={},n){return this._client.get(X`/fine_tuning/checkpoints/${e}/permissions`,{query:t,...n})}delete(e,t,n){const{fine_tuned_model_checkpoint:r}=t;return this._client.delete(X`/fine_tuning/checkpoints/${r}/permissions/${e}`,n)}}let bf=class extends he{constructor(){super(...arguments),this.permissions=new Jv(this._client)}};bf.Permissions=Jv;class Zv extends he{list(e,t={},n){return this._client.getAPIList(X`/fine_tuning/jobs/${e}/checkpoints`,lt,{query:t,...n})}}class wf extends he{constructor(){super(...arguments),this.checkpoints=new Zv(this._client)}create(e,t){return this._client.post("/fine_tuning/jobs",{body:e,...t})}retrieve(e,t){return this._client.get(X`/fine_tuning/jobs/${e}`,t)}list(e={},t){return this._client.getAPIList("/fine_tuning/jobs",lt,{query:e,...t})}cancel(e,t){return this._client.post(X`/fine_tuning/jobs/${e}/cancel`,t)}listEvents(e,t={},n){return this._client.getAPIList(X`/fine_tuning/jobs/${e}/events`,lt,{query:t,...n})}pause(e,t){return this._client.post(X`/fine_tuning/jobs/${e}/pause`,t)}resume(e,t){return this._client.post(X`/fine_tuning/jobs/${e}/resume`,t)}}wf.Checkpoints=Zv;class _i extends he{constructor(){super(...arguments),this.methods=new Yv(this._client),this.jobs=new wf(this._client),this.checkpoints=new bf(this._client),this.alpha=new vf(this._client)}}_i.Methods=Yv;_i.Jobs=wf;_i.Checkpoints=bf;_i.Alpha=vf;class eb extends he{}class xf extends he{constructor(){super(...arguments),this.graderModels=new eb(this._client)}}xf.GraderModels=eb;class tb extends he{createVariation(e,t){return this._client.post("/images/variations",Mr({body:e,...t},this._client))}edit(e,t){return this._client.post("/images/edits",Mr({body:e,...t,stream:e.stream??!1},this._client))}generate(e,t){return this._client.post("/images/generations",{body:e,...t,stream:e.stream??!1})}}class nb extends he{retrieve(e,t){return this._client.get(X`/models/${e}`,t)}list(e){return this._client.getAPIList("/models",kc,e)}delete(e,t){return this._client.delete(X`/models/${e}`,t)}}class sb extends he{create(e,t){return this._client.post("/moderations",{body:e,...t})}}class rb extends he{accept(e,t,n){return this._client.post(X`/realtime/calls/${e}/accept`,{body:t,...n,headers:ae([{Accept:"*/*"},n?.headers])})}hangup(e,t){return this._client.post(X`/realtime/calls/${e}/hangup`,{...t,headers:ae([{Accept:"*/*"},t?.headers])})}refer(e,t,n){return this._client.post(X`/realtime/calls/${e}/refer`,{body:t,...n,headers:ae([{Accept:"*/*"},n?.headers])})}reject(e,t={},n){return this._client.post(X`/realtime/calls/${e}/reject`,{body:t,...n,headers:ae([{Accept:"*/*"},n?.headers])})}}class ib extends he{create(e,t){return this._client.post("/realtime/client_secrets",{body:e,...t})}}class Nc extends he{constructor(){super(...arguments),this.clientSecrets=new ib(this._client),this.calls=new rb(this._client)}}Nc.ClientSecrets=ib;Nc.Calls=rb;function $E(i,e){return!e||!BE(e)?{...i,output_parsed:null,output:i.output.map(t=>t.type==="function_call"?{...t,parsed_arguments:null}:t.type==="message"?{...t,content:t.content.map(n=>({...n,parsed:null}))}:t)}:ab(i,e)}function ab(i,e){const t=i.output.map(r=>{if(r.type==="function_call")return{...r,parsed_arguments:WE(e,r)};if(r.type==="message"){const o=r.content.map(l=>l.type==="output_text"?{...l,parsed:zE(e,l.text)}:l);return{...r,content:o}}return r}),n=Object.assign({},i,{output:t});return Object.getOwnPropertyDescriptor(i,"output_text")||Ah(n),Object.defineProperty(n,"output_parsed",{enumerable:!0,get(){for(const r of n.output)if(r.type==="message"){for(const o of r.content)if(o.type==="output_text"&&o.parsed!==null)return o.parsed}return null}}),n}function zE(i,e){return i.text?.format?.type!=="json_schema"?null:"$parseRaw"in i.text?.format?(i.text?.format).$parseRaw(e):JSON.parse(e)}function BE(i){return!!af(i.text?.format)}function HE(i){return i?.$brand==="auto-parseable-tool"}function UE(i,e){return i.find(t=>t.type==="function"&&t.name===e)}function WE(i,e){const t=UE(i.tools??[],e.name);return{...e,...e,parsed_arguments:HE(t)?t.$parseRaw(e.arguments):t?.strict?JSON.parse(e.arguments):null}}function Ah(i){const e=[];for(const t of i.output)if(t.type==="message")for(const n of t.content)n.type==="output_text"&&e.push(n.text);i.output_text=e.join("")}var ci,kl,tr,Rl,S0,A0,C0,E0;class _f extends lf{constructor(e){super(),ci.add(this),kl.set(this,void 0),tr.set(this,void 0),Rl.set(this,void 0),Se(this,kl,e)}static createResponse(e,t,n){const r=new _f(t);return r._run(()=>r._createOrRetrieveResponse(e,t,{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"stream"}})),r}async _createOrRetrieveResponse(e,t,n){const r=n?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),$(this,ci,"m",S0).call(this);let o,l=null;"response_id"in t?(o=await e.responses.retrieve(t.response_id,{stream:!0},{...n,signal:this.controller.signal,stream:!0}),l=t.starting_after??null):o=await e.responses.create({...t,stream:!0},{...n,signal:this.controller.signal}),this._connected();for await(const c of o)$(this,ci,"m",A0).call(this,c,l);if(o.controller.signal?.aborted)throw new Pn;return $(this,ci,"m",C0).call(this)}[(kl=new WeakMap,tr=new WeakMap,Rl=new WeakMap,ci=new WeakSet,S0=function(){this.ended||Se(this,tr,void 0)},A0=function(t,n){if(this.ended)return;const r=(l,c)=>{(n==null||c.sequence_number>n)&&this._emit(l,c)},o=$(this,ci,"m",E0).call(this,t);switch(r("event",t),t.type){case"response.output_text.delta":{const l=o.output[t.output_index];if(!l)throw new ge(`missing output at index ${t.output_index}`);if(l.type==="message"){const c=l.content[t.content_index];if(!c)throw new ge(`missing content at index ${t.content_index}`);if(c.type!=="output_text")throw new ge(`expected content to be 'output_text', got ${c.type}`);r("response.output_text.delta",{...t,snapshot:c.text})}break}case"response.function_call_arguments.delta":{const l=o.output[t.output_index];if(!l)throw new ge(`missing output at index ${t.output_index}`);l.type==="function_call"&&r("response.function_call_arguments.delta",{...t,snapshot:l.arguments});break}default:r(t.type,t);break}},C0=function(){if(this.ended)throw new ge("stream has ended, this shouldn't happen");const t=$(this,tr,"f");if(!t)throw new ge("request ended without sending any events");Se(this,tr,void 0);const n=VE(t,$(this,kl,"f"));return Se(this,Rl,n),n},E0=function(t){let n=$(this,tr,"f");if(!n){if(t.type!=="response.created")throw new ge(`When snapshot hasn't been set yet, expected 'response.created' event, got ${t.type}`);return n=Se(this,tr,t.response),n}switch(t.type){case"response.output_item.added":{n.output.push(t.item);break}case"response.content_part.added":{const r=n.output[t.output_index];if(!r)throw new ge(`missing output at index ${t.output_index}`);const o=r.type,l=t.part;o==="message"&&l.type!=="reasoning_text"?r.content.push(l):o==="reasoning"&&l.type==="reasoning_text"&&(r.content||(r.content=[]),r.content.push(l));break}case"response.output_text.delta":{const r=n.output[t.output_index];if(!r)throw new ge(`missing output at index ${t.output_index}`);if(r.type==="message"){const o=r.content[t.content_index];if(!o)throw new ge(`missing content at index ${t.content_index}`);if(o.type!=="output_text")throw new ge(`expected content to be 'output_text', got ${o.type}`);o.text+=t.delta}break}case"response.function_call_arguments.delta":{const r=n.output[t.output_index];if(!r)throw new ge(`missing output at index ${t.output_index}`);r.type==="function_call"&&(r.arguments+=t.delta);break}case"response.reasoning_text.delta":{const r=n.output[t.output_index];if(!r)throw new ge(`missing output at index ${t.output_index}`);if(r.type==="reasoning"){const o=r.content?.[t.content_index];if(!o)throw new ge(`missing content at index ${t.content_index}`);if(o.type!=="reasoning_text")throw new ge(`expected content to be 'reasoning_text', got ${o.type}`);o.text+=t.delta}break}case"response.completed":{Se(this,tr,t.response);break}}return n},Symbol.asyncIterator)](){const e=[],t=[];let n=!1;return this.on("event",r=>{const o=t.shift();o?o.resolve(r):e.push(r)}),this.on("end",()=>{n=!0;for(const r of t)r.resolve(void 0);t.length=0}),this.on("abort",r=>{n=!0;for(const o of t)o.reject(r);t.length=0}),this.on("error",r=>{n=!0;for(const o of t)o.reject(r);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((o,l)=>t.push({resolve:o,reject:l})).then(o=>o?{value:o,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=$(this,Rl,"f");if(!e)throw new ge("stream ended without producing a ChatCompletion");return e}}function VE(i,e){return $E(i,e)}class ob extends he{list(e,t={},n){return this._client.getAPIList(X`/responses/${e}/input_items`,lt,{query:t,...n})}}class lb extends he{count(e={},t){return this._client.post("/responses/input_tokens",{body:e,...t})}}class Ic extends he{constructor(){super(...arguments),this.inputItems=new ob(this._client),this.inputTokens=new lb(this._client)}create(e,t){return this._client.post("/responses",{body:e,...t,stream:e.stream??!1})._thenUnwrap(n=>("object"in n&&n.object==="response"&&Ah(n),n))}retrieve(e,t={},n){return this._client.get(X`/responses/${e}`,{query:t,...n,stream:t?.stream??!1})._thenUnwrap(r=>("object"in r&&r.object==="response"&&Ah(r),r))}delete(e,t){return this._client.delete(X`/responses/${e}`,{...t,headers:ae([{Accept:"*/*"},t?.headers])})}parse(e,t){return this._client.responses.create(e,t)._thenUnwrap(n=>ab(n,e))}stream(e,t){return _f.createResponse(this._client,e,t)}cancel(e,t){return this._client.post(X`/responses/${e}/cancel`,t)}}Ic.InputItems=ob;Ic.InputTokens=lb;class cb extends he{create(e,t,n){return this._client.post(X`/uploads/${e}/parts`,Mr({body:t,...n},this._client))}}class Sf extends he{constructor(){super(...arguments),this.parts=new cb(this._client)}create(e,t){return this._client.post("/uploads",{body:e,...t})}cancel(e,t){return this._client.post(X`/uploads/${e}/cancel`,t)}complete(e,t,n){return this._client.post(X`/uploads/${e}/complete`,{body:t,...n})}}Sf.Parts=cb;const GE=async i=>{const e=await Promise.allSettled(i),t=e.filter(r=>r.status==="rejected");if(t.length){for(const r of t)console.error(r.reason);throw new Error(`${t.length} promise(s) failed - see the above errors`)}const n=[];for(const r of e)r.status==="fulfilled"&&n.push(r.value);return n};class ub extends he{create(e,t,n){return this._client.post(X`/vector_stores/${e}/file_batches`,{body:t,...n,headers:ae([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,t,n){const{vector_store_id:r}=t;return this._client.get(X`/vector_stores/${r}/file_batches/${e}`,{...n,headers:ae([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}cancel(e,t,n){const{vector_store_id:r}=t;return this._client.post(X`/vector_stores/${r}/file_batches/${e}/cancel`,{...n,headers:ae([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}async createAndPoll(e,t,n){const r=await this.create(e,t);return await this.poll(e,r.id,n)}listFiles(e,t,n){const{vector_store_id:r,...o}=t;return this._client.getAPIList(X`/vector_stores/${r}/file_batches/${e}/files`,lt,{query:o,...n,headers:ae([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}async poll(e,t,n){const r=ae([n?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":n?.pollIntervalMs?.toString()??void 0}]);for(;;){const{data:o,response:l}=await this.retrieve(t,{vector_store_id:e},{...n,headers:r}).withResponse();switch(o.status){case"in_progress":let c=5e3;if(n?.pollIntervalMs)c=n.pollIntervalMs;else{const d=l.headers.get("openai-poll-after-ms");if(d){const f=parseInt(d);isNaN(f)||(c=f)}}await Ja(c);break;case"failed":case"cancelled":case"completed":return o}}}async uploadAndPoll(e,{files:t,fileIds:n=[]},r){if(t==null||t.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const o=r?.maxConcurrency??5,l=Math.min(o,t.length),c=this._client,d=t.values(),f=[...n];async function p(y){for(let v of y){const x=await c.files.create({file:v,purpose:"assistants"},r);f.push(x.id)}}const g=Array(l).fill(d).map(p);return await GE(g),await this.createAndPoll(e,{file_ids:f})}}class db extends he{create(e,t,n){return this._client.post(X`/vector_stores/${e}/files`,{body:t,...n,headers:ae([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,t,n){const{vector_store_id:r}=t;return this._client.get(X`/vector_stores/${r}/files/${e}`,{...n,headers:ae([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,t,n){const{vector_store_id:r,...o}=t;return this._client.post(X`/vector_stores/${r}/files/${e}`,{body:o,...n,headers:ae([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}list(e,t={},n){return this._client.getAPIList(X`/vector_stores/${e}/files`,lt,{query:t,...n,headers:ae([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}delete(e,t,n){const{vector_store_id:r}=t;return this._client.delete(X`/vector_stores/${r}/files/${e}`,{...n,headers:ae([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}async createAndPoll(e,t,n){const r=await this.create(e,t,n);return await this.poll(e,r.id,n)}async poll(e,t,n){const r=ae([n?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":n?.pollIntervalMs?.toString()??void 0}]);for(;;){const o=await this.retrieve(t,{vector_store_id:e},{...n,headers:r}).withResponse(),l=o.data;switch(l.status){case"in_progress":let c=5e3;if(n?.pollIntervalMs)c=n.pollIntervalMs;else{const d=o.response.headers.get("openai-poll-after-ms");if(d){const f=parseInt(d);isNaN(f)||(c=f)}}await Ja(c);break;case"failed":case"completed":return l}}}async upload(e,t,n){const r=await this._client.files.create({file:t,purpose:"assistants"},n);return this.create(e,{file_id:r.id},n)}async uploadAndPoll(e,t,n){const r=await this.upload(e,t,n);return await this.poll(e,r.id,n)}content(e,t,n){const{vector_store_id:r}=t;return this._client.getAPIList(X`/vector_stores/${r}/files/${e}/content`,kc,{...n,headers:ae([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}}class Mc extends he{constructor(){super(...arguments),this.files=new db(this._client),this.fileBatches=new ub(this._client)}create(e,t){return this._client.post("/vector_stores",{body:e,...t,headers:ae([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}retrieve(e,t){return this._client.get(X`/vector_stores/${e}`,{...t,headers:ae([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}update(e,t,n){return this._client.post(X`/vector_stores/${e}`,{body:t,...n,headers:ae([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}list(e={},t){return this._client.getAPIList("/vector_stores",lt,{query:e,...t,headers:ae([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}delete(e,t){return this._client.delete(X`/vector_stores/${e}`,{...t,headers:ae([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}search(e,t,n){return this._client.getAPIList(X`/vector_stores/${e}/search`,kc,{body:t,method:"post",...n,headers:ae([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}}Mc.Files=db;Mc.FileBatches=ub;class hb extends he{create(e,t){return this._client.post("/videos",d0({body:e,...t},this._client))}retrieve(e,t){return this._client.get(X`/videos/${e}`,t)}list(e={},t){return this._client.getAPIList("/videos",Yl,{query:e,...t})}delete(e,t){return this._client.delete(X`/videos/${e}`,t)}downloadContent(e,t={},n){return this._client.get(X`/videos/${e}/content`,{query:t,...n,headers:ae([{Accept:"application/binary"},n?.headers]),__binaryResponse:!0})}remix(e,t,n){return this._client.post(X`/videos/${e}/remix`,d0({body:t,...n},this._client))}}var fi,fb,Ul;class pb extends he{constructor(){super(...arguments),fi.add(this)}async unwrap(e,t,n=this._client.webhookSecret,r=300){return await this.verifySignature(e,t,n,r),JSON.parse(e)}async verifySignature(e,t,n=this._client.webhookSecret,r=300){if(typeof crypto>"u"||typeof crypto.subtle.importKey!="function"||typeof crypto.subtle.verify!="function")throw new Error("Webhook signature verification is only supported when the `crypto` global is defined");$(this,fi,"m",fb).call(this,n);const o=ae([t]).values,l=$(this,fi,"m",Ul).call(this,o,"webhook-signature"),c=$(this,fi,"m",Ul).call(this,o,"webhook-timestamp"),d=$(this,fi,"m",Ul).call(this,o,"webhook-id"),f=parseInt(c,10);if(isNaN(f))throw new Sa("Invalid webhook timestamp format");const p=Math.floor(Date.now()/1e3);if(p-f>r)throw new Sa("Webhook timestamp is too old");if(f>p+r)throw new Sa("Webhook timestamp is too new");const g=l.split(" ").map(_=>_.startsWith("v1,")?_.substring(3):_),y=n.startsWith("whsec_")?Buffer.from(n.replace("whsec_",""),"base64"):Buffer.from(n,"utf-8"),v=d?`${d}.${c}.${e}`:`${c}.${e}`,x=await crypto.subtle.importKey("raw",y,{name:"HMAC",hash:"SHA-256"},!1,["verify"]);for(const _ of g)try{const A=Buffer.from(_,"base64");if(await crypto.subtle.verify("HMAC",x,A,new TextEncoder().encode(v)))return}catch{continue}throw new Sa("The given webhook signature does not match the expected signature")}}fi=new WeakSet,fb=function(e){if(typeof e!="string"||e.length===0)throw new Error("The webhook secret must either be set using the env var, OPENAI_WEBHOOK_SECRET, on the client class, OpenAI({ webhookSecret: '123' }), or passed to this function")},Ul=function(e,t){if(!e)throw new Error("Headers are required");const n=e.get(t);if(n==null)throw new Error(`Missing required header: ${t}`);return n};var Ch,Af,Wl,gb;class Te{constructor({baseURL:e=li("OPENAI_BASE_URL"),apiKey:t=li("OPENAI_API_KEY"),organization:n=li("OPENAI_ORG_ID")??null,project:r=li("OPENAI_PROJECT_ID")??null,webhookSecret:o=li("OPENAI_WEBHOOK_SECRET")??null,...l}={}){if(Ch.add(this),Wl.set(this,void 0),this.completions=new Wv(this),this.chat=new df(this),this.embeddings=new qv(this),this.files=new Kv(this),this.images=new tb(this),this.audio=new eo(this),this.moderations=new sb(this),this.models=new nb(this),this.fineTuning=new _i(this),this.graders=new xf(this),this.vectorStores=new Mc(this),this.webhooks=new pb(this),this.beta=new xi(this),this.batches=new Ov(this),this.uploads=new Sf(this),this.responses=new Ic(this),this.realtime=new Nc(this),this.conversations=new gf(this),this.evals=new yf(this),this.containers=new pf(this),this.videos=new hb(this),t===void 0)throw new ge("Missing credentials. Please pass an `apiKey`, or set the `OPENAI_API_KEY` environment variable.");const c={apiKey:t,organization:n,project:r,webhookSecret:o,...l,baseURL:e||"https://api.openai.com/v1"};if(!c.dangerouslyAllowBrowser&&qC())throw new ge(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);this.baseURL=c.baseURL,this.timeout=c.timeout??Af.DEFAULT_TIMEOUT,this.logger=c.logger??console;const d="warn";this.logLevel=d,this.logLevel=c0(c.logLevel,"ClientOptions.logLevel",this)??c0(li("OPENAI_LOG"),"process.env['OPENAI_LOG']",this)??d,this.fetchOptions=c.fetchOptions,this.maxRetries=c.maxRetries??2,this.fetch=c.fetch??JC(),Se(this,Wl,eE),this._options=c,this.apiKey=typeof t=="string"?t:"Missing Key",this.organization=n,this.project=r,this.webhookSecret=o}withOptions(e){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,organization:this.organization,project:this.project,webhookSecret:this.webhookSecret,...e})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:t}){}async authHeaders(e){return ae([{Authorization:`Bearer ${this.apiKey}`}])}stringifyQuery(e){return aE(e,{arrayFormat:"brackets"})}getUserAgent(){return`${this.constructor.name}/JS ${di}`}defaultIdempotencyKey(){return`stainless-node-retry-${jy()}`}makeStatusError(e,t,n,r){return Et.generate(e,t,n,r)}async _callApiKey(){const e=this._options.apiKey;if(typeof e!="function")return!1;let t;try{t=await e()}catch(n){throw n instanceof ge?n:new ge(`Failed to get token from 'apiKey' function: ${n.message}`,{cause:n})}if(typeof t!="string"||!t)throw new ge(`Expected 'apiKey' function argument to return a string but it returned ${t}`);return this.apiKey=t,!0}buildURL(e,t,n){const r=!$(this,Ch,"m",gb).call(this)&&n||this.baseURL,o=HC(e)?new URL(e):new URL(r+(r.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),l=this.defaultQuery();return UC(l)||(t={...l,...t}),typeof t=="object"&&t&&!Array.isArray(t)&&(o.search=this.stringifyQuery(t)),o.toString()}async prepareOptions(e){await this._callApiKey()}async prepareRequest(e,{url:t,options:n}){}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,n){return this.request(Promise.resolve(n).then(r=>({method:e,path:t,...r})))}request(e,t=null){return new Ec(this,this.makeRequest(e,t,void 0))}async makeRequest(e,t,n){const r=await e,o=r.maxRetries??this.maxRetries;t==null&&(t=o),await this.prepareOptions(r);const{req:l,url:c,timeout:d}=await this.buildRequest(r,{retryCount:o-t});await this.prepareRequest(l,{url:c,options:r});const f="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),p=n===void 0?"":`, retryOf: ${n}`,g=Date.now();if(At(this).debug(`[${f}] sending request`,Ar({retryOfRequestLogID:n,method:r.method,url:c,options:r,headers:l.headers})),r.signal?.aborted)throw new Pn;const y=new AbortController,v=await this.fetchWithTimeout(c,l,d,y).catch(fh),x=Date.now();if(v instanceof globalThis.Error){const C=`retrying, ${t} attempts remaining`;if(r.signal?.aborted)throw new Pn;const E=hh(v)||/timed? ?out/i.test(String(v)+("cause"in v?String(v.cause):""));if(t)return At(this).info(`[${f}] connection ${E?"timed out":"failed"} - ${C}`),At(this).debug(`[${f}] connection ${E?"timed out":"failed"} (${C})`,Ar({retryOfRequestLogID:n,url:c,durationMs:x-g,message:v.message})),this.retryRequest(r,t,n??f);throw At(this).info(`[${f}] connection ${E?"timed out":"failed"} - error; no more retries left`),At(this).debug(`[${f}] connection ${E?"timed out":"failed"} (error; no more retries left)`,Ar({retryOfRequestLogID:n,url:c,durationMs:x-g,message:v.message})),E?new tf:new Ac({cause:v})}const _=[...v.headers.entries()].filter(([C])=>C==="x-request-id").map(([C,E])=>", "+C+": "+JSON.stringify(E)).join(""),A=`[${f}${p}${_}] ${l.method} ${c} ${v.ok?"succeeded":"failed"} with status ${v.status} in ${x-g}ms`;if(!v.ok){const C=await this.shouldRetry(v);if(t&&C){const O=`retrying, ${t} attempts remaining`;return await ZC(v.body),At(this).info(`${A} - ${O}`),At(this).debug(`[${f}] response error (${O})`,Ar({retryOfRequestLogID:n,url:v.url,status:v.status,headers:v.headers,durationMs:x-g})),this.retryRequest(r,t,n??f,v.headers)}const E=C?"error; no more retries left":"error; not retryable";At(this).info(`${A} - ${E}`);const P=await v.text().catch(O=>fh(O).message),R=GC(P),M=R?void 0:P;throw At(this).debug(`[${f}] response error (${E})`,Ar({retryOfRequestLogID:n,url:v.url,status:v.status,headers:v.headers,message:M,durationMs:Date.now()-g})),this.makeStatusError(v.status,R,M,v.headers)}return At(this).info(A),At(this).debug(`[${f}] response start`,Ar({retryOfRequestLogID:n,url:v.url,status:v.status,headers:v.headers,durationMs:x-g})),{response:v,options:r,controller:y,requestLogID:f,retryOfRequestLogID:n,startTime:g}}getAPIList(e,t,n){return this.requestAPIList(t,{method:"get",path:e,...n})}requestAPIList(e,t){const n=this.makeRequest(t,null,void 0);return new gE(this,n,e)}async fetchWithTimeout(e,t,n,r){const{signal:o,method:l,...c}=t||{};o&&o.addEventListener("abort",()=>r.abort());const d=setTimeout(()=>r.abort(),n),f=globalThis.ReadableStream&&c.body instanceof globalThis.ReadableStream||typeof c.body=="object"&&c.body!==null&&Symbol.asyncIterator in c.body,p={signal:r.signal,...f?{duplex:"half"}:{},method:"GET",...c};l&&(p.method=l.toUpperCase());try{return await this.fetch.call(void 0,e,p)}finally{clearTimeout(d)}}async shouldRetry(e){const t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,n,r){let o;const l=r?.get("retry-after-ms");if(l){const d=parseFloat(l);Number.isNaN(d)||(o=d)}const c=r?.get("retry-after");if(c&&!o){const d=parseFloat(c);Number.isNaN(d)?o=Date.parse(c)-Date.now():o=d*1e3}if(!(o&&0<=o&&o<60*1e3)){const d=e.maxRetries??this.maxRetries;o=this.calculateDefaultRetryTimeoutMillis(t,d)}return await Ja(o),this.makeRequest(e,t-1,n)}calculateDefaultRetryTimeoutMillis(e,t){const o=t-e,l=Math.min(.5*Math.pow(2,o),8),c=1-Math.random()*.25;return l*c*1e3}async buildRequest(e,{retryCount:t=0}={}){const n={...e},{method:r,path:o,query:l,defaultBaseURL:c}=n,d=this.buildURL(o,l,c);"timeout"in n&&VC("timeout",n.timeout),n.timeout=n.timeout??this.timeout;const{bodyHeaders:f,body:p}=this.buildBody({options:n}),g=await this.buildHeaders({options:e,method:r,bodyHeaders:f,retryCount:t});return{req:{method:r,headers:g,...n.signal&&{signal:n.signal},...globalThis.ReadableStream&&p instanceof globalThis.ReadableStream&&{duplex:"half"},...p&&{body:p},...this.fetchOptions??{},...n.fetchOptions??{}},url:d,timeout:n.timeout}}async buildHeaders({options:e,method:t,bodyHeaders:n,retryCount:r}){let o={};this.idempotencyHeader&&t!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),o[this.idempotencyHeader]=e.idempotencyKey);const l=ae([o,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},...QC(),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project},await this.authHeaders(e),this._options.defaultHeaders,n,e.headers]);return this.validateHeaders(l),l.values}buildBody({options:{body:e,headers:t}}){if(!e)return{bodyHeaders:void 0,body:void 0};const n=ae([t]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&n.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:Qy(e)}:$(this,Wl,"f").call(this,{body:e,headers:n})}}Af=Te,Wl=new WeakMap,Ch=new WeakSet,gb=function(){return this.baseURL!=="https://api.openai.com/v1"};Te.OpenAI=Af;Te.DEFAULT_TIMEOUT=6e5;Te.OpenAIError=ge;Te.APIError=Et;Te.APIConnectionError=Ac;Te.APIConnectionTimeoutError=tf;Te.APIUserAbortError=Pn;Te.NotFoundError=Hy;Te.ConflictError=Uy;Te.RateLimitError=Vy;Te.BadRequestError=$y;Te.AuthenticationError=zy;Te.InternalServerError=Gy;Te.PermissionDeniedError=By;Te.UnprocessableEntityError=Wy;Te.InvalidWebhookSignatureError=Sa;Te.toFile=wE;Te.Completions=Wv;Te.Chat=df;Te.Embeddings=qv;Te.Files=Kv;Te.Images=tb;Te.Audio=eo;Te.Moderations=sb;Te.Models=nb;Te.FineTuning=_i;Te.Graders=xf;Te.VectorStores=Mc;Te.Webhooks=pb;Te.Beta=xi;Te.Batches=Ov;Te.Uploads=Sf;Te.Responses=Ic;Te.Realtime=Nc;Te.Conversations=gf;Te.Evals=yf;Te.Containers=pf;Te.Videos=hb;async function qE(i,e,t,n){if(!t)throw new Error("API Key is missing");const r=new Te({apiKey:t,dangerouslyAllowBrowser:!0}),o=Object.entries(e.evaluationCriteria).map(([p,g],y)=>`${y+1}. **${g.name}** (0-10): ${g.desc}`).join(`

`),l=e.personalizedInstructions?`

Instrucciones Adicionales:
${e.personalizedInstructions}`:"",c=`Eres un reclutador experto. Analiza el siguiente CV para el puesto descrito.
  
  PUESTO:
  ${e.jobDescription}
  ${l}

  CV:
  ${i}

  Evala en estas dimensiones:
  ${o}

  REALIZA UN ANLISIS CRTICO Y PROFUNDO. No seas superficial. Busca evidencias concretas.

  Responde SOLO con un JSON vlido en este formato:
  {
    "relevance": number (0-10),
    "education": number (0-10),
    "previousJobs": number (0-10),
    "proactivity": number (0-10),
    "analysis": {
      "relevance": "anlisis detallado y crtico",
      "education": "anlisis detallado y crtico",
      "previousJobs": "anlisis detallado y crtico",
      "proactivity": "anlisis detallado y crtico"
    },
    "strengths": ["fortaleza 1", "fortaleza 2", ...],
    "weaknesses": ["debilidad 1", "debilidad 2", ...],
    "criticalAnalysis": "Resumen ejecutivo crtico sobre la idoneidad del candidato. Por qu s o por qu no contratarlo?"
  }`,f=(await r.chat.completions.create({model:n,messages:[{role:"system",content:"Eres un asistente experto en RRHH. Responde siempre en JSON vlido y en Espaol."},{role:"user",content:c}],response_format:{type:"json_object"}})).choices[0].message.content;if(!f)throw new Error("No response from AI");try{return JSON.parse(f)}catch{throw console.error("Failed to parse AI response:",f),new Error("Invalid JSON response from AI")}}async function XE(i,e,t,n="gpt-4o-mini"){if(!t)throw new Error("API Key is required");const r=new Te({apiKey:t,dangerouslyAllowBrowser:!0}),l=`Eres un asistente de reclutamiento experto. Tienes acceso a la informacin de los siguientes candidatos:

  ${i.map(c=>`
    CANDIDATO: ${c.name}
    RESUMEN: ${c.criticalAnalysis}
    PUNTUACIN: ${c.totalScore}/40
    EXPERIENCIA: ${c.previousJobs}
    EDUCACIN: ${c.education}
    NOTAS: ${Array.isArray(c.notes)?c.notes.map(d=>d.content).join("; "):c.notes}
  `).join(`

-------------------

`)}

  PREGUNTA DEL RECLUTADOR:
  "${e}"

  INSTRUCCIONES:
  - Responde basndote NICAMENTE en la informacin proporcionada.
  - Si te piden comparar, compara sus puntos fuertes y dbiles.
  - Si te piden simular una respuesta del candidato, hazlo basndote en su perfil.
  - S profesional, objetivo y directo.
  `;try{return(await r.chat.completions.create({messages:[{role:"user",content:l}],model:n})).choices[0].message.content||"No pude generar una respuesta."}catch(c){throw console.error("Error in chat:",c),c}}async function KE(i,e,t,n="gpt-4o-mini",r=5){if(!t)throw new Error("API Key is required");const o=new Te({apiKey:t,dangerouslyAllowBrowser:!0}),l=`Eres un entrevistador experto. Genera ${r} preguntas de entrevista personalizadas para este candidato, basadas en su perfil y la descripcin del puesto.

  PUESTO:
  ${e}

  CANDIDATO:
  ${i.name}
  Resumen: ${i.criticalAnalysis}
  Debilidades detectadas: ${i.weaknesses?.join(", ")||"No especificadas"}

  INSTRUCCIONES:
  - Genera preguntas desafiantes pero justas.
  - Enfcate en validar sus debilidades y profundizar en sus fortalezas.
  - Las preguntas deben ser abiertas y conductuales.
  - Responde SOLO con un JSON que contenga un array de strings bajo la clave "questions".
  `;try{const d=(await o.chat.completions.create({messages:[{role:"user",content:l}],model:n,response_format:{type:"json_object"}})).choices[0].message.content;return d?JSON.parse(d).questions||[]:[]}catch(c){throw console.error("Error generating questions:",c),c}}function YE(){const{currentSearch:i,settings:e,addCandidate:t}=In(),[n,r]=k.useState(!1),[o,l]=k.useState(!1),[c,d]=k.useState(null),[f,p]=k.useState(null),g=k.useCallback(A=>{A.preventDefault(),r(!0)},[]),y=k.useCallback(A=>{A.preventDefault(),r(!1)},[]),v=async A=>{if(!i)return;if(!e.apiKey){p("Por favor configura tu API Key en Configuracin antes de analizar CVs.");return}l(!0),p(null);let C=0;for(let E=0;E<A.length;E++){const P=A[E];if(P.type==="application/pdf"){d({current:E+1,total:A.length,filename:P.name});try{const R=await $C(P),M=zC(R.text),D=await qE(R.text,i,e.apiKey,e.selectedModel),O=D.relevance+D.education+D.previousJobs+D.proactivity,H=URL.createObjectURL(P),U=await new Promise(K=>{const V=new FileReader;V.onloadend=()=>K(V.result),V.readAsDataURL(P)});await t({id:crypto.randomUUID(),searchId:i.id,fileName:P.name,cvText:R.text,pdfDataUrl:U,pdfUrl:H,name:M.name||P.name.replace(".pdf",""),email:M.email,phone:M.phone,...D,totalScore:O,status:"new",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),C++}catch(R){console.error(`Error processing ${P.name}:`,R),p(`Error al procesar ${P.name}: ${R.message}`)}}}l(!1),d(null)},x=k.useCallback(async A=>{A.preventDefault(),r(!1);const C=Array.from(A.dataTransfer.files);await v(C)},[i,e]),_=async A=>{if(A.target.files){const C=Array.from(A.target.files);await v(C)}};return w.jsxs("div",{className:"mb-8",children:[w.jsx("div",{onDragOver:g,onDragLeave:y,onDrop:x,className:`
          border-2 border-dashed rounded-xl p-8 text-center transition-colors
          ${n?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-blue-400"}
          ${o?"opacity-50 pointer-events-none":""}
        `,children:w.jsxs("div",{className:"flex flex-col items-center justify-center gap-4",children:[w.jsx("div",{className:"w-16 h-16 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center",children:w.jsx(Jd,{size:32})}),w.jsxs("div",{children:[w.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Arrastra y suelta CVs aqu"}),w.jsx("p",{className:"text-gray-500 mt-1",children:"o haz clic para seleccionar archivos PDF"})]}),w.jsx("input",{type:"file",multiple:!0,accept:".pdf",onChange:_,className:"hidden",id:"file-upload"}),w.jsx("label",{htmlFor:"file-upload",className:"px-6 py-2 bg-white border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 cursor-pointer shadow-sm",children:"Seleccionar Archivos"})]})}),o&&c&&w.jsxs("div",{className:"bg-blue-50 border border-blue-100 rounded-lg p-4 mb-4 flex items-center gap-3",children:[w.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600"}),w.jsxs("div",{className:"flex-1",children:[w.jsxs("p",{className:"text-sm font-medium text-blue-900",children:["Procesando ",c.current," de ",c.total,": ",c.filename]}),w.jsx("div",{className:"w-full bg-blue-200 rounded-full h-2 mt-2",children:w.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${c.current/c.total*100}%`}})})]})]}),f&&w.jsxs("div",{className:"bg-red-50 border border-red-100 rounded-lg p-4 mb-4 flex items-center gap-3 text-red-700",children:[w.jsx(DS,{size:20}),w.jsx("p",{children:f})]})]})}function QE(i){const e=["Nombre","Email","Telfono","Score Total","Relevancia","Educacin","Experiencia","Proactividad","Estado","Favorito","Fecha Entrevista","Notas"],t=i.map(c=>[c.name||"N/A",c.email||"N/A",c.phone||"N/A",c.totalScore,c.relevance,c.education,c.previousJobs,c.proactivity,c.status,c.isFavorite?"S":"No",c.interviewDate?new Date(c.interviewDate).toLocaleDateString():"",Array.isArray(c.notes)?c.notes.map(d=>d.content).join(" | "):c.notes||""]),n=[e.join(","),...t.map(c=>c.map(d=>`"${String(d).replace(/"/g,'""')}"`).join(","))].join(`
`),r=new Blob([n],{type:"text/csv;charset=utf-8;"}),o=document.createElement("a"),l=URL.createObjectURL(r);o.setAttribute("href",l),o.setAttribute("download",`candidatos_export_${new Date().toISOString().split("T")[0]}.csv`),o.style.visibility="hidden",document.body.appendChild(o),o.click(),document.body.removeChild(o)}function JE({onSelectCandidate:i}){const{candidates:e,deleteCandidate:t,toggleFavorite:n}=In(),r=(c,d)=>{c.stopPropagation(),confirm("Ests seguro de eliminar este candidato?")&&t(d)},o=(c,d)=>{c.stopPropagation(),n(d)},l=()=>{QE(e)};return e.length===0?w.jsxs("div",{className:"text-center py-12 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:[w.jsx(WS,{className:"mx-auto h-12 w-12 text-gray-400 dark:text-gray-500"}),w.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:"No hay candidatos"}),w.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Sube algunos CVs para comenzar el anlisis."})]}):w.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden transition-colors",children:[w.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center",children:[w.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-white",children:["Candidatos (",e.length,")"]}),w.jsxs("button",{onClick:l,className:"flex items-center gap-2 px-3 py-1.5 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors",children:[w.jsx(sy,{size:16}),"Exportar CSV"]})]}),w.jsx("div",{className:"overflow-x-auto",children:w.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[w.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700/50",children:w.jsxs("tr",{children:[w.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider w-10"}),w.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Candidato"}),w.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Score"}),w.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Estado"}),w.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Acciones"})]})}),w.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:e.map(c=>w.jsxs("tr",{onClick:()=>i(c),className:"hover:bg-gray-50 dark:hover:bg-gray-700/50 cursor-pointer transition-colors",children:[w.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:w.jsx("button",{onClick:d=>o(d,c.id),className:`p-1 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors ${c.isFavorite?"text-yellow-400 fill-current":"text-gray-300 dark:text-gray-600"}`,children:w.jsx(ay,{size:18,fill:c.isFavorite?"currentColor":"none"})})}),w.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:w.jsxs("div",{className:"flex items-center",children:[w.jsx("div",{className:"h-10 w-10 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center text-blue-600 dark:text-blue-400 font-bold",children:c.name?c.name.charAt(0).toUpperCase():"?"}),w.jsxs("div",{className:"ml-4",children:[w.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:c.name||"Sin nombre"}),w.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:c.email||"Sin email"})]})]})}),w.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:w.jsxs("div",{className:"flex flex-col gap-1",children:[w.jsxs("div",{className:"flex items-center justify-between",children:[w.jsx("span",{className:"font-bold text-gray-900 dark:text-white",children:c.totalScore}),w.jsx("span",{className:"text-gray-400 text-xs",children:"/40"})]}),w.jsx("div",{className:"w-full max-w-[100px] bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:w.jsx("div",{className:"bg-blue-600 dark:bg-blue-500 h-2 rounded-full",style:{width:`${c.totalScore/40*100}%`}})})]})}),w.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:w.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300",children:c.status})}),w.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:w.jsx("button",{onClick:d=>r(d,c.id),className:"text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors",children:w.jsx(oy,{size:18})})})]},c.id))})]})})]})}function ZE(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];return k.useMemo(()=>n=>{e.forEach(r=>r(n))},e)}const Lc=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Si(i){const e=Object.prototype.toString.call(i);return e==="[object Window]"||e==="[object global]"}function Cf(i){return"nodeType"in i}function Vt(i){var e,t;return i?Si(i)?i:Cf(i)&&(e=(t=i.ownerDocument)==null?void 0:t.defaultView)!=null?e:window:window}function Ef(i){const{Document:e}=Vt(i);return i instanceof e}function to(i){return Si(i)?!1:i instanceof Vt(i).HTMLElement}function mb(i){return i instanceof Vt(i).SVGElement}function Ai(i){return i?Si(i)?i.document:Cf(i)?Ef(i)?i:to(i)||mb(i)?i.ownerDocument:document:document:document}const Kn=Lc?k.useLayoutEffect:k.useEffect;function Dc(i){const e=k.useRef(i);return Kn(()=>{e.current=i}),k.useCallback(function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.current==null?void 0:e.current(...n)},[])}function ek(){const i=k.useRef(null),e=k.useCallback((n,r)=>{i.current=setInterval(n,r)},[]),t=k.useCallback(()=>{i.current!==null&&(clearInterval(i.current),i.current=null)},[]);return[e,t]}function Va(i,e){e===void 0&&(e=[i]);const t=k.useRef(i);return Kn(()=>{t.current!==i&&(t.current=i)},e),t}function no(i,e){const t=k.useRef();return k.useMemo(()=>{const n=i(t.current);return t.current=n,n},[...e])}function rc(i){const e=Dc(i),t=k.useRef(null),n=k.useCallback(r=>{r!==t.current&&e?.(r,t.current),t.current=r},[]);return[t,n]}function ic(i){const e=k.useRef();return k.useEffect(()=>{e.current=i},[i]),e.current}let Wd={};function so(i,e){return k.useMemo(()=>{if(e)return e;const t=Wd[i]==null?0:Wd[i]+1;return Wd[i]=t,i+"-"+t},[i,e])}function yb(i){return function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.reduce((o,l)=>{const c=Object.entries(l);for(const[d,f]of c){const p=o[d];p!=null&&(o[d]=p+i*f)}return o},{...e})}}const yi=yb(1),ac=yb(-1);function tk(i){return"clientX"in i&&"clientY"in i}function Oc(i){if(!i)return!1;const{KeyboardEvent:e}=Vt(i.target);return e&&i instanceof e}function nk(i){if(!i)return!1;const{TouchEvent:e}=Vt(i.target);return e&&i instanceof e}function oc(i){if(nk(i)){if(i.touches&&i.touches.length){const{clientX:e,clientY:t}=i.touches[0];return{x:e,y:t}}else if(i.changedTouches&&i.changedTouches.length){const{clientX:e,clientY:t}=i.changedTouches[0];return{x:e,y:t}}}return tk(i)?{x:i.clientX,y:i.clientY}:null}const or=Object.freeze({Translate:{toString(i){if(!i)return;const{x:e,y:t}=i;return"translate3d("+(e?Math.round(e):0)+"px, "+(t?Math.round(t):0)+"px, 0)"}},Scale:{toString(i){if(!i)return;const{scaleX:e,scaleY:t}=i;return"scaleX("+e+") scaleY("+t+")"}},Transform:{toString(i){if(i)return[or.Translate.toString(i),or.Scale.toString(i)].join(" ")}},Transition:{toString(i){let{property:e,duration:t,easing:n}=i;return e+" "+t+"ms "+n}}}),k0="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function sk(i){return i.matches(k0)?i:i.querySelector(k0)}const rk={display:"none"};function ik(i){let{id:e,value:t}=i;return He.createElement("div",{id:e,style:rk},t)}function ak(i){let{id:e,announcement:t,ariaLiveType:n="assertive"}=i;const r={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return He.createElement("div",{id:e,style:r,role:"status","aria-live":n,"aria-atomic":!0},t)}function ok(){const[i,e]=k.useState("");return{announce:k.useCallback(n=>{n!=null&&e(n)},[]),announcement:i}}const vb=k.createContext(null);function lk(i){const e=k.useContext(vb);k.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(i)},[i,e])}function ck(){const[i]=k.useState(()=>new Set),e=k.useCallback(n=>(i.add(n),()=>i.delete(n)),[i]);return[k.useCallback(n=>{let{type:r,event:o}=n;i.forEach(l=>{var c;return(c=l[r])==null?void 0:c.call(l,o)})},[i]),e]}const uk={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},dk={onDragStart(i){let{active:e}=i;return"Picked up draggable item "+e.id+"."},onDragOver(i){let{active:e,over:t}=i;return t?"Draggable item "+e.id+" was moved over droppable area "+t.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(i){let{active:e,over:t}=i;return t?"Draggable item "+e.id+" was dropped over droppable area "+t.id:"Draggable item "+e.id+" was dropped."},onDragCancel(i){let{active:e}=i;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function hk(i){let{announcements:e=dk,container:t,hiddenTextDescribedById:n,screenReaderInstructions:r=uk}=i;const{announce:o,announcement:l}=ok(),c=so("DndLiveRegion"),[d,f]=k.useState(!1);if(k.useEffect(()=>{f(!0)},[]),lk(k.useMemo(()=>({onDragStart(g){let{active:y}=g;o(e.onDragStart({active:y}))},onDragMove(g){let{active:y,over:v}=g;e.onDragMove&&o(e.onDragMove({active:y,over:v}))},onDragOver(g){let{active:y,over:v}=g;o(e.onDragOver({active:y,over:v}))},onDragEnd(g){let{active:y,over:v}=g;o(e.onDragEnd({active:y,over:v}))},onDragCancel(g){let{active:y,over:v}=g;o(e.onDragCancel({active:y,over:v}))}}),[o,e])),!d)return null;const p=He.createElement(He.Fragment,null,He.createElement(ik,{id:n,value:r.draggable}),He.createElement(ak,{id:c,announcement:l}));return t?wa.createPortal(p,t):p}var gt;(function(i){i.DragStart="dragStart",i.DragMove="dragMove",i.DragEnd="dragEnd",i.DragCancel="dragCancel",i.DragOver="dragOver",i.RegisterDroppable="registerDroppable",i.SetDroppableDisabled="setDroppableDisabled",i.UnregisterDroppable="unregisterDroppable"})(gt||(gt={}));function lc(){}function R0(i,e){return k.useMemo(()=>({sensor:i,options:e??{}}),[i,e])}function fk(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];return k.useMemo(()=>[...e].filter(n=>n!=null),[...e])}const Yn=Object.freeze({x:0,y:0});function pk(i,e){const t=oc(i);if(!t)return"0 0";const n={x:(t.x-e.left)/e.width*100,y:(t.y-e.top)/e.height*100};return n.x+"% "+n.y+"%"}function gk(i,e){let{data:{value:t}}=i,{data:{value:n}}=e;return n-t}function mk(i,e){if(!i||i.length===0)return null;const[t]=i;return t[e]}function yk(i,e){const t=Math.max(e.top,i.top),n=Math.max(e.left,i.left),r=Math.min(e.left+e.width,i.left+i.width),o=Math.min(e.top+e.height,i.top+i.height),l=r-n,c=o-t;if(n<r&&t<o){const d=e.width*e.height,f=i.width*i.height,p=l*c,g=p/(d+f-p);return Number(g.toFixed(4))}return 0}const vk=i=>{let{collisionRect:e,droppableRects:t,droppableContainers:n}=i;const r=[];for(const o of n){const{id:l}=o,c=t.get(l);if(c){const d=yk(c,e);d>0&&r.push({id:l,data:{droppableContainer:o,value:d}})}}return r.sort(gk)};function bk(i,e,t){return{...i,scaleX:e&&t?e.width/t.width:1,scaleY:e&&t?e.height/t.height:1}}function bb(i,e){return i&&e?{x:i.left-e.left,y:i.top-e.top}:Yn}function wk(i){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return r.reduce((l,c)=>({...l,top:l.top+i*c.y,bottom:l.bottom+i*c.y,left:l.left+i*c.x,right:l.right+i*c.x}),{...t})}}const xk=wk(1);function wb(i){if(i.startsWith("matrix3d(")){const e=i.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(i.startsWith("matrix(")){const e=i.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function _k(i,e,t){const n=wb(e);if(!n)return i;const{scaleX:r,scaleY:o,x:l,y:c}=n,d=i.left-l-(1-r)*parseFloat(t),f=i.top-c-(1-o)*parseFloat(t.slice(t.indexOf(" ")+1)),p=r?i.width/r:i.width,g=o?i.height/o:i.height;return{width:p,height:g,top:f,right:d+p,bottom:f+g,left:d}}const Sk={ignoreTransform:!1};function Ci(i,e){e===void 0&&(e=Sk);let t=i.getBoundingClientRect();if(e.ignoreTransform){const{transform:f,transformOrigin:p}=Vt(i).getComputedStyle(i);f&&(t=_k(t,f,p))}const{top:n,left:r,width:o,height:l,bottom:c,right:d}=t;return{top:n,left:r,width:o,height:l,bottom:c,right:d}}function T0(i){return Ci(i,{ignoreTransform:!0})}function Ak(i){const e=i.innerWidth,t=i.innerHeight;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}function Ck(i,e){return e===void 0&&(e=Vt(i).getComputedStyle(i)),e.position==="fixed"}function Ek(i,e){e===void 0&&(e=Vt(i).getComputedStyle(i));const t=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(r=>{const o=e[r];return typeof o=="string"?t.test(o):!1})}function kf(i,e){const t=[];function n(r){if(e!=null&&t.length>=e||!r)return t;if(Ef(r)&&r.scrollingElement!=null&&!t.includes(r.scrollingElement))return t.push(r.scrollingElement),t;if(!to(r)||mb(r)||t.includes(r))return t;const o=Vt(i).getComputedStyle(r);return r!==i&&Ek(r,o)&&t.push(r),Ck(r,o)?t:n(r.parentNode)}return i?n(i):t}function xb(i){const[e]=kf(i,1);return e??null}function Vd(i){return!Lc||!i?null:Si(i)?i:Cf(i)?Ef(i)||i===Ai(i).scrollingElement?window:to(i)?i:null:null}function _b(i){return Si(i)?i.scrollX:i.scrollLeft}function Sb(i){return Si(i)?i.scrollY:i.scrollTop}function Eh(i){return{x:_b(i),y:Sb(i)}}var xt;(function(i){i[i.Forward=1]="Forward",i[i.Backward=-1]="Backward"})(xt||(xt={}));function Ab(i){return!Lc||!i?!1:i===document.scrollingElement}function Cb(i){const e={x:0,y:0},t=Ab(i)?{height:window.innerHeight,width:window.innerWidth}:{height:i.clientHeight,width:i.clientWidth},n={x:i.scrollWidth-t.width,y:i.scrollHeight-t.height},r=i.scrollTop<=e.y,o=i.scrollLeft<=e.x,l=i.scrollTop>=n.y,c=i.scrollLeft>=n.x;return{isTop:r,isLeft:o,isBottom:l,isRight:c,maxScroll:n,minScroll:e}}const kk={x:.2,y:.2};function Rk(i,e,t,n,r){let{top:o,left:l,right:c,bottom:d}=t;n===void 0&&(n=10),r===void 0&&(r=kk);const{isTop:f,isBottom:p,isLeft:g,isRight:y}=Cb(i),v={x:0,y:0},x={x:0,y:0},_={height:e.height*r.y,width:e.width*r.x};return!f&&o<=e.top+_.height?(v.y=xt.Backward,x.y=n*Math.abs((e.top+_.height-o)/_.height)):!p&&d>=e.bottom-_.height&&(v.y=xt.Forward,x.y=n*Math.abs((e.bottom-_.height-d)/_.height)),!y&&c>=e.right-_.width?(v.x=xt.Forward,x.x=n*Math.abs((e.right-_.width-c)/_.width)):!g&&l<=e.left+_.width&&(v.x=xt.Backward,x.x=n*Math.abs((e.left+_.width-l)/_.width)),{direction:v,speed:x}}function Tk(i){if(i===document.scrollingElement){const{innerWidth:o,innerHeight:l}=window;return{top:0,left:0,right:o,bottom:l,width:o,height:l}}const{top:e,left:t,right:n,bottom:r}=i.getBoundingClientRect();return{top:e,left:t,right:n,bottom:r,width:i.clientWidth,height:i.clientHeight}}function Eb(i){return i.reduce((e,t)=>yi(e,Eh(t)),Yn)}function Pk(i){return i.reduce((e,t)=>e+_b(t),0)}function Nk(i){return i.reduce((e,t)=>e+Sb(t),0)}function kb(i,e){if(e===void 0&&(e=Ci),!i)return;const{top:t,left:n,bottom:r,right:o}=e(i);xb(i)&&(r<=0||o<=0||t>=window.innerHeight||n>=window.innerWidth)&&i.scrollIntoView({block:"center",inline:"center"})}const Ik=[["x",["left","right"],Pk],["y",["top","bottom"],Nk]];class Rf{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const n=kf(t),r=Eb(n);this.rect={...e},this.width=e.width,this.height=e.height;for(const[o,l,c]of Ik)for(const d of l)Object.defineProperty(this,d,{get:()=>{const f=c(n),p=r[o]-f;return this.rect[d]+p},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class ja{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(t=>{var n;return(n=this.target)==null?void 0:n.removeEventListener(...t)})},this.target=e}add(e,t,n){var r;(r=this.target)==null||r.addEventListener(e,t,n),this.listeners.push([e,t,n])}}function Mk(i){const{EventTarget:e}=Vt(i);return i instanceof e?i:Ai(i)}function Gd(i,e){const t=Math.abs(i.x),n=Math.abs(i.y);return typeof e=="number"?Math.sqrt(t**2+n**2)>e:"x"in e&&"y"in e?t>e.x&&n>e.y:"x"in e?t>e.x:"y"in e?n>e.y:!1}var Tn;(function(i){i.Click="click",i.DragStart="dragstart",i.Keydown="keydown",i.ContextMenu="contextmenu",i.Resize="resize",i.SelectionChange="selectionchange",i.VisibilityChange="visibilitychange"})(Tn||(Tn={}));function P0(i){i.preventDefault()}function Lk(i){i.stopPropagation()}var $e;(function(i){i.Space="Space",i.Down="ArrowDown",i.Right="ArrowRight",i.Left="ArrowLeft",i.Up="ArrowUp",i.Esc="Escape",i.Enter="Enter",i.Tab="Tab"})($e||($e={}));const Rb={start:[$e.Space,$e.Enter],cancel:[$e.Esc],end:[$e.Space,$e.Enter,$e.Tab]},Dk=(i,e)=>{let{currentCoordinates:t}=e;switch(i.code){case $e.Right:return{...t,x:t.x+25};case $e.Left:return{...t,x:t.x-25};case $e.Down:return{...t,y:t.y+25};case $e.Up:return{...t,y:t.y-25}}};class Tb{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:t}}=e;this.props=e,this.listeners=new ja(Ai(t)),this.windowListeners=new ja(Vt(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Tn.Resize,this.handleCancel),this.windowListeners.add(Tn.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Tn.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:t}=this.props,n=e.node.current;n&&kb(n),t(Yn)}handleKeyDown(e){if(Oc(e)){const{active:t,context:n,options:r}=this.props,{keyboardCodes:o=Rb,coordinateGetter:l=Dk,scrollBehavior:c="smooth"}=r,{code:d}=e;if(o.end.includes(d)){this.handleEnd(e);return}if(o.cancel.includes(d)){this.handleCancel(e);return}const{collisionRect:f}=n.current,p=f?{x:f.left,y:f.top}:Yn;this.referenceCoordinates||(this.referenceCoordinates=p);const g=l(e,{active:t,context:n.current,currentCoordinates:p});if(g){const y=ac(g,p),v={x:0,y:0},{scrollableAncestors:x}=n.current;for(const _ of x){const A=e.code,{isTop:C,isRight:E,isLeft:P,isBottom:R,maxScroll:M,minScroll:D}=Cb(_),O=Tk(_),H={x:Math.min(A===$e.Right?O.right-O.width/2:O.right,Math.max(A===$e.Right?O.left:O.left+O.width/2,g.x)),y:Math.min(A===$e.Down?O.bottom-O.height/2:O.bottom,Math.max(A===$e.Down?O.top:O.top+O.height/2,g.y))},U=A===$e.Right&&!E||A===$e.Left&&!P,K=A===$e.Down&&!R||A===$e.Up&&!C;if(U&&H.x!==g.x){const V=_.scrollLeft+y.x,fe=A===$e.Right&&V<=M.x||A===$e.Left&&V>=D.x;if(fe&&!y.y){_.scrollTo({left:V,behavior:c});return}fe?v.x=_.scrollLeft-V:v.x=A===$e.Right?_.scrollLeft-M.x:_.scrollLeft-D.x,v.x&&_.scrollBy({left:-v.x,behavior:c});break}else if(K&&H.y!==g.y){const V=_.scrollTop+y.y,fe=A===$e.Down&&V<=M.y||A===$e.Up&&V>=D.y;if(fe&&!y.x){_.scrollTo({top:V,behavior:c});return}fe?v.y=_.scrollTop-V:v.y=A===$e.Down?_.scrollTop-M.y:_.scrollTop-D.y,v.y&&_.scrollBy({top:-v.y,behavior:c});break}}this.handleMove(e,yi(ac(g,this.referenceCoordinates),v))}}}handleMove(e,t){const{onMove:n}=this.props;e.preventDefault(),n(t)}handleEnd(e){const{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){const{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Tb.activators=[{eventName:"onKeyDown",handler:(i,e,t)=>{let{keyboardCodes:n=Rb,onActivation:r}=e,{active:o}=t;const{code:l}=i.nativeEvent;if(n.start.includes(l)){const c=o.activatorNode.current;return c&&i.target!==c?!1:(i.preventDefault(),r?.({event:i.nativeEvent}),!0)}return!1}}];function N0(i){return!!(i&&"distance"in i)}function I0(i){return!!(i&&"delay"in i)}class Tf{constructor(e,t,n){var r;n===void 0&&(n=Mk(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;const{event:o}=e,{target:l}=o;this.props=e,this.events=t,this.document=Ai(l),this.documentListeners=new ja(this.document),this.listeners=new ja(n),this.windowListeners=new ja(Vt(l)),this.initialCoordinates=(r=oc(o))!=null?r:Yn,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:n}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Tn.Resize,this.handleCancel),this.windowListeners.add(Tn.DragStart,P0),this.windowListeners.add(Tn.VisibilityChange,this.handleCancel),this.windowListeners.add(Tn.ContextMenu,P0),this.documentListeners.add(Tn.Keydown,this.handleKeydown),t){if(n!=null&&n({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(I0(t)){this.timeoutId=setTimeout(this.handleStart,t.delay),this.handlePending(t);return}if(N0(t)){this.handlePending(t);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,t){const{active:n,onPending:r}=this.props;r(n,e,this.initialCoordinates,t)}handleStart(){const{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(Tn.Click,Lk,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Tn.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;const{activated:n,initialCoordinates:r,props:o}=this,{onMove:l,options:{activationConstraint:c}}=o;if(!r)return;const d=(t=oc(e))!=null?t:Yn,f=ac(r,d);if(!n&&c){if(N0(c)){if(c.tolerance!=null&&Gd(f,c.tolerance))return this.handleCancel();if(Gd(f,c.distance))return this.handleStart()}if(I0(c)&&Gd(f,c.tolerance))return this.handleCancel();this.handlePending(c,f);return}e.cancelable&&e.preventDefault(),l(d)}handleEnd(){const{onAbort:e,onEnd:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleCancel(){const{onAbort:e,onCancel:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleKeydown(e){e.code===$e.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const Ok={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Pb extends Tf{constructor(e){const{event:t}=e,n=Ai(t.target);super(e,Ok,n)}}Pb.activators=[{eventName:"onPointerDown",handler:(i,e)=>{let{nativeEvent:t}=i,{onActivation:n}=e;return!t.isPrimary||t.button!==0?!1:(n?.({event:t}),!0)}}];const Fk={move:{name:"mousemove"},end:{name:"mouseup"}};var kh;(function(i){i[i.RightClick=2]="RightClick"})(kh||(kh={}));class Nb extends Tf{constructor(e){super(e,Fk,Ai(e.event.target))}}Nb.activators=[{eventName:"onMouseDown",handler:(i,e)=>{let{nativeEvent:t}=i,{onActivation:n}=e;return t.button===kh.RightClick?!1:(n?.({event:t}),!0)}}];const qd={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Ib extends Tf{constructor(e){super(e,qd)}static setup(){return window.addEventListener(qd.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(qd.move.name,e)};function e(){}}}Ib.activators=[{eventName:"onTouchStart",handler:(i,e)=>{let{nativeEvent:t}=i,{onActivation:n}=e;const{touches:r}=t;return r.length>1?!1:(n?.({event:t}),!0)}}];var $a;(function(i){i[i.Pointer=0]="Pointer",i[i.DraggableRect=1]="DraggableRect"})($a||($a={}));var cc;(function(i){i[i.TreeOrder=0]="TreeOrder",i[i.ReversedTreeOrder=1]="ReversedTreeOrder"})(cc||(cc={}));function jk(i){let{acceleration:e,activator:t=$a.Pointer,canScroll:n,draggingRect:r,enabled:o,interval:l=5,order:c=cc.TreeOrder,pointerCoordinates:d,scrollableAncestors:f,scrollableAncestorRects:p,delta:g,threshold:y}=i;const v=zk({delta:g,disabled:!o}),[x,_]=ek(),A=k.useRef({x:0,y:0}),C=k.useRef({x:0,y:0}),E=k.useMemo(()=>{switch(t){case $a.Pointer:return d?{top:d.y,bottom:d.y,left:d.x,right:d.x}:null;case $a.DraggableRect:return r}},[t,r,d]),P=k.useRef(null),R=k.useCallback(()=>{const D=P.current;if(!D)return;const O=A.current.x*C.current.x,H=A.current.y*C.current.y;D.scrollBy(O,H)},[]),M=k.useMemo(()=>c===cc.TreeOrder?[...f].reverse():f,[c,f]);k.useEffect(()=>{if(!o||!f.length||!E){_();return}for(const D of M){if(n?.(D)===!1)continue;const O=f.indexOf(D),H=p[O];if(!H)continue;const{direction:U,speed:K}=Rk(D,H,E,e,y);for(const V of["x","y"])v[V][U[V]]||(K[V]=0,U[V]=0);if(K.x>0||K.y>0){_(),P.current=D,x(R,l),A.current=K,C.current=U;return}}A.current={x:0,y:0},C.current={x:0,y:0},_()},[e,R,n,_,o,l,JSON.stringify(E),JSON.stringify(v),x,f,M,p,JSON.stringify(y)])}const $k={x:{[xt.Backward]:!1,[xt.Forward]:!1},y:{[xt.Backward]:!1,[xt.Forward]:!1}};function zk(i){let{delta:e,disabled:t}=i;const n=ic(e);return no(r=>{if(t||!n||!r)return $k;const o={x:Math.sign(e.x-n.x),y:Math.sign(e.y-n.y)};return{x:{[xt.Backward]:r.x[xt.Backward]||o.x===-1,[xt.Forward]:r.x[xt.Forward]||o.x===1},y:{[xt.Backward]:r.y[xt.Backward]||o.y===-1,[xt.Forward]:r.y[xt.Forward]||o.y===1}}},[t,e,n])}function Bk(i,e){const t=e!=null?i.get(e):void 0,n=t?t.node.current:null;return no(r=>{var o;return e==null?null:(o=n??r)!=null?o:null},[n,e])}function Hk(i,e){return k.useMemo(()=>i.reduce((t,n)=>{const{sensor:r}=n,o=r.activators.map(l=>({eventName:l.eventName,handler:e(l.handler,n)}));return[...t,...o]},[]),[i,e])}var Ga;(function(i){i[i.Always=0]="Always",i[i.BeforeDragging=1]="BeforeDragging",i[i.WhileDragging=2]="WhileDragging"})(Ga||(Ga={}));var Rh;(function(i){i.Optimized="optimized"})(Rh||(Rh={}));const M0=new Map;function Uk(i,e){let{dragging:t,dependencies:n,config:r}=e;const[o,l]=k.useState(null),{frequency:c,measure:d,strategy:f}=r,p=k.useRef(i),g=A(),y=Va(g),v=k.useCallback(function(C){C===void 0&&(C=[]),!y.current&&l(E=>E===null?C:E.concat(C.filter(P=>!E.includes(P))))},[y]),x=k.useRef(null),_=no(C=>{if(g&&!t)return M0;if(!C||C===M0||p.current!==i||o!=null){const E=new Map;for(let P of i){if(!P)continue;if(o&&o.length>0&&!o.includes(P.id)&&P.rect.current){E.set(P.id,P.rect.current);continue}const R=P.node.current,M=R?new Rf(d(R),R):null;P.rect.current=M,M&&E.set(P.id,M)}return E}return C},[i,o,t,g,d]);return k.useEffect(()=>{p.current=i},[i]),k.useEffect(()=>{g||v()},[t,g]),k.useEffect(()=>{o&&o.length>0&&l(null)},[JSON.stringify(o)]),k.useEffect(()=>{g||typeof c!="number"||x.current!==null||(x.current=setTimeout(()=>{v(),x.current=null},c))},[c,g,v,...n]),{droppableRects:_,measureDroppableContainers:v,measuringScheduled:o!=null};function A(){switch(f){case Ga.Always:return!1;case Ga.BeforeDragging:return t;default:return!t}}}function Pf(i,e){return no(t=>i?t||(typeof e=="function"?e(i):i):null,[e,i])}function Wk(i,e){return Pf(i,e)}function Vk(i){let{callback:e,disabled:t}=i;const n=Dc(e),r=k.useMemo(()=>{if(t||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:o}=window;return new o(n)},[n,t]);return k.useEffect(()=>()=>r?.disconnect(),[r]),r}function Fc(i){let{callback:e,disabled:t}=i;const n=Dc(e),r=k.useMemo(()=>{if(t||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:o}=window;return new o(n)},[t]);return k.useEffect(()=>()=>r?.disconnect(),[r]),r}function Gk(i){return new Rf(Ci(i),i)}function L0(i,e,t){e===void 0&&(e=Gk);const[n,r]=k.useState(null);function o(){r(d=>{if(!i)return null;if(i.isConnected===!1){var f;return(f=d??t)!=null?f:null}const p=e(i);return JSON.stringify(d)===JSON.stringify(p)?d:p})}const l=Vk({callback(d){if(i)for(const f of d){const{type:p,target:g}=f;if(p==="childList"&&g instanceof HTMLElement&&g.contains(i)){o();break}}}}),c=Fc({callback:o});return Kn(()=>{o(),i?(c?.observe(i),l?.observe(document.body,{childList:!0,subtree:!0})):(c?.disconnect(),l?.disconnect())},[i]),n}function qk(i){const e=Pf(i);return bb(i,e)}const D0=[];function Xk(i){const e=k.useRef(i),t=no(n=>i?n&&n!==D0&&i&&e.current&&i.parentNode===e.current.parentNode?n:kf(i):D0,[i]);return k.useEffect(()=>{e.current=i},[i]),t}function Kk(i){const[e,t]=k.useState(null),n=k.useRef(i),r=k.useCallback(o=>{const l=Vd(o.target);l&&t(c=>c?(c.set(l,Eh(l)),new Map(c)):null)},[]);return k.useEffect(()=>{const o=n.current;if(i!==o){l(o);const c=i.map(d=>{const f=Vd(d);return f?(f.addEventListener("scroll",r,{passive:!0}),[f,Eh(f)]):null}).filter(d=>d!=null);t(c.length?new Map(c):null),n.current=i}return()=>{l(i),l(o)};function l(c){c.forEach(d=>{const f=Vd(d);f?.removeEventListener("scroll",r)})}},[r,i]),k.useMemo(()=>i.length?e?Array.from(e.values()).reduce((o,l)=>yi(o,l),Yn):Eb(i):Yn,[i,e])}function O0(i,e){e===void 0&&(e=[]);const t=k.useRef(null);return k.useEffect(()=>{t.current=null},e),k.useEffect(()=>{const n=i!==Yn;n&&!t.current&&(t.current=i),!n&&t.current&&(t.current=null)},[i]),t.current?ac(i,t.current):Yn}function Yk(i){k.useEffect(()=>{if(!Lc)return;const e=i.map(t=>{let{sensor:n}=t;return n.setup==null?void 0:n.setup()});return()=>{for(const t of e)t?.()}},i.map(e=>{let{sensor:t}=e;return t}))}function Qk(i,e){return k.useMemo(()=>i.reduce((t,n)=>{let{eventName:r,handler:o}=n;return t[r]=l=>{o(l,e)},t},{}),[i,e])}function Mb(i){return k.useMemo(()=>i?Ak(i):null,[i])}const F0=[];function Jk(i,e){e===void 0&&(e=Ci);const[t]=i,n=Mb(t?Vt(t):null),[r,o]=k.useState(F0);function l(){o(()=>i.length?i.map(d=>Ab(d)?n:new Rf(e(d),d)):F0)}const c=Fc({callback:l});return Kn(()=>{c?.disconnect(),l(),i.forEach(d=>c?.observe(d))},[i]),r}function Lb(i){if(!i)return null;if(i.children.length>1)return i;const e=i.children[0];return to(e)?e:i}function Zk(i){let{measure:e}=i;const[t,n]=k.useState(null),r=k.useCallback(f=>{for(const{target:p}of f)if(to(p)){n(g=>{const y=e(p);return g?{...g,width:y.width,height:y.height}:y});break}},[e]),o=Fc({callback:r}),l=k.useCallback(f=>{const p=Lb(f);o?.disconnect(),p&&o?.observe(p),n(p?e(p):null)},[e,o]),[c,d]=rc(l);return k.useMemo(()=>({nodeRef:c,rect:t,setRef:d}),[t,c,d])}const eR=[{sensor:Pb,options:{}},{sensor:Tb,options:{}}],tR={current:{}},Vl={draggable:{measure:T0},droppable:{measure:T0,strategy:Ga.WhileDragging,frequency:Rh.Optimized},dragOverlay:{measure:Ci}};class za extends Map{get(e){var t;return e!=null&&(t=super.get(e))!=null?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:t}=e;return!t})}getNodeFor(e){var t,n;return(t=(n=this.get(e))==null?void 0:n.node.current)!=null?t:void 0}}const nR={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new za,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:lc},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Vl,measureDroppableContainers:lc,windowRect:null,measuringScheduled:!1},Db={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:lc,draggableNodes:new Map,over:null,measureDroppableContainers:lc},ro=k.createContext(Db),Ob=k.createContext(nR);function sR(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new za}}}function rR(i,e){switch(e.type){case gt.DragStart:return{...i,draggable:{...i.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case gt.DragMove:return i.draggable.active==null?i:{...i,draggable:{...i.draggable,translate:{x:e.coordinates.x-i.draggable.initialCoordinates.x,y:e.coordinates.y-i.draggable.initialCoordinates.y}}};case gt.DragEnd:case gt.DragCancel:return{...i,draggable:{...i.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case gt.RegisterDroppable:{const{element:t}=e,{id:n}=t,r=new za(i.droppable.containers);return r.set(n,t),{...i,droppable:{...i.droppable,containers:r}}}case gt.SetDroppableDisabled:{const{id:t,key:n,disabled:r}=e,o=i.droppable.containers.get(t);if(!o||n!==o.key)return i;const l=new za(i.droppable.containers);return l.set(t,{...o,disabled:r}),{...i,droppable:{...i.droppable,containers:l}}}case gt.UnregisterDroppable:{const{id:t,key:n}=e,r=i.droppable.containers.get(t);if(!r||n!==r.key)return i;const o=new za(i.droppable.containers);return o.delete(t),{...i,droppable:{...i.droppable,containers:o}}}default:return i}}function iR(i){let{disabled:e}=i;const{active:t,activatorEvent:n,draggableNodes:r}=k.useContext(ro),o=ic(n),l=ic(t?.id);return k.useEffect(()=>{if(!e&&!n&&o&&l!=null){if(!Oc(o)||document.activeElement===o.target)return;const c=r.get(l);if(!c)return;const{activatorNode:d,node:f}=c;if(!d.current&&!f.current)return;requestAnimationFrame(()=>{for(const p of[d.current,f.current]){if(!p)continue;const g=sk(p);if(g){g.focus();break}}})}},[n,e,r,l,o]),null}function Fb(i,e){let{transform:t,...n}=e;return i!=null&&i.length?i.reduce((r,o)=>o({transform:r,...n}),t):t}function aR(i){return k.useMemo(()=>({draggable:{...Vl.draggable,...i?.draggable},droppable:{...Vl.droppable,...i?.droppable},dragOverlay:{...Vl.dragOverlay,...i?.dragOverlay}}),[i?.draggable,i?.droppable,i?.dragOverlay])}function oR(i){let{activeNode:e,measure:t,initialRect:n,config:r=!0}=i;const o=k.useRef(!1),{x:l,y:c}=typeof r=="boolean"?{x:r,y:r}:r;Kn(()=>{if(!l&&!c||!e){o.current=!1;return}if(o.current||!n)return;const f=e?.node.current;if(!f||f.isConnected===!1)return;const p=t(f),g=bb(p,n);if(l||(g.x=0),c||(g.y=0),o.current=!0,Math.abs(g.x)>0||Math.abs(g.y)>0){const y=xb(f);y&&y.scrollBy({top:g.y,left:g.x})}},[e,l,c,n,t])}const jc=k.createContext({...Yn,scaleX:1,scaleY:1});var nr;(function(i){i[i.Uninitialized=0]="Uninitialized",i[i.Initializing=1]="Initializing",i[i.Initialized=2]="Initialized"})(nr||(nr={}));const lR=k.memo(function(e){var t,n,r,o;let{id:l,accessibility:c,autoScroll:d=!0,children:f,sensors:p=eR,collisionDetection:g=vk,measuring:y,modifiers:v,...x}=e;const _=k.useReducer(rR,void 0,sR),[A,C]=_,[E,P]=ck(),[R,M]=k.useState(nr.Uninitialized),D=R===nr.Initialized,{draggable:{active:O,nodes:H,translate:U},droppable:{containers:K}}=A,V=O!=null?H.get(O):null,fe=k.useRef({initial:null,translated:null}),we=k.useMemo(()=>{var Ye;return O!=null?{id:O,data:(Ye=V?.data)!=null?Ye:tR,rect:fe}:null},[O,V]),be=k.useRef(null),[De,Z]=k.useState(null),[J,Y]=k.useState(null),te=Va(x,Object.values(x)),ee=so("DndDescribedBy",l),L=k.useMemo(()=>K.getEnabled(),[K]),B=aR(y),{droppableRects:se,measureDroppableContainers:me,measuringScheduled:ke}=Uk(L,{dragging:D,dependencies:[U.x,U.y],config:B.droppable}),ce=Bk(H,O),pe=k.useMemo(()=>J?oc(J):null,[J]),Ee=Ls(),Le=Wk(ce,B.draggable.measure);oR({activeNode:O!=null?H.get(O):null,config:Ee.layoutShiftCompensation,initialRect:Le,measure:B.draggable.measure});const Re=L0(ce,B.draggable.measure,Le),Jn=L0(ce?ce.parentElement:null),an=k.useRef({activatorEvent:null,active:null,activeNode:ce,collisionRect:null,collisions:null,droppableRects:se,draggableNodes:H,draggingNode:null,draggingNodeRect:null,droppableContainers:K,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Mn=K.getNodeFor((t=an.current.over)==null?void 0:t.id),on=Zk({measure:B.dragOverlay.measure}),hs=(n=on.nodeRef.current)!=null?n:ce,fs=D?(r=on.rect)!=null?r:Re:null,Or=!!(on.nodeRef.current&&on.rect),Ei=qk(Or?null:Re),cr=Mb(hs?Vt(hs):null),Gt=Xk(D?Mn??ce:null),Ln=Jk(Gt),Ns=Fb(v,{transform:{x:U.x-Ei.x,y:U.y-Ei.y,scaleX:1,scaleY:1},activatorEvent:J,active:we,activeNodeRect:Re,containerNodeRect:Jn,draggingNodeRect:fs,over:an.current.over,overlayNodeRect:on.rect,scrollableAncestors:Gt,scrollableAncestorRects:Ln,windowRect:cr}),ki=pe?yi(pe,U):null,Ri=Kk(Gt),io=O0(Ri),ao=O0(Ri,[Re]),Zn=yi(Ns,io),Dn=fs?xk(fs,Ns):null,Is=we&&Dn?g({active:we,collisionRect:Dn,droppableRects:se,droppableContainers:L,pointerCoordinates:ki}):null,Ms=mk(Is,"id"),[qt,oo]=k.useState(null),lo=Or?Ns:yi(Ns,ao),co=bk(lo,(o=qt?.rect)!=null?o:null,Re),Ti=k.useRef(null),Fr=k.useCallback((Ye,kt)=>{let{sensor:Rt,options:On}=kt;if(be.current==null)return;const jt=H.get(be.current);if(!jt)return;const Tt=Ye.nativeEvent,Xt=new Rt({active:be.current,activeNode:jt,event:Tt,options:On,context:an,onAbort(Qe){if(!H.get(Qe))return;const{onDragAbort:Pt}=te.current,Fn={id:Qe};Pt?.(Fn),E({type:"onDragAbort",event:Fn})},onPending(Qe,bn,Pt,Fn){if(!H.get(Qe))return;const{onDragPending:es}=te.current,ln={id:Qe,constraint:bn,initialCoordinates:Pt,offset:Fn};es?.(ln),E({type:"onDragPending",event:ln})},onStart(Qe){const bn=be.current;if(bn==null)return;const Pt=H.get(bn);if(!Pt)return;const{onDragStart:Fn}=te.current,jn={activatorEvent:Tt,active:{id:bn,data:Pt.data,rect:fe}};wa.unstable_batchedUpdates(()=>{Fn?.(jn),M(nr.Initializing),C({type:gt.DragStart,initialCoordinates:Qe,active:bn}),E({type:"onDragStart",event:jn}),Z(Ti.current),Y(Tt)})},onMove(Qe){C({type:gt.DragMove,coordinates:Qe})},onEnd:ps(gt.DragEnd),onCancel:ps(gt.DragCancel)});Ti.current=Xt;function ps(Qe){return async function(){const{active:Pt,collisions:Fn,over:jn,scrollAdjustedTranslate:es}=an.current;let ln=null;if(Pt&&es){const{cancelDrop:gs}=te.current;ln={activatorEvent:Tt,active:Pt,collisions:Fn,delta:es,over:jn},Qe===gt.DragEnd&&typeof gs=="function"&&await Promise.resolve(gs(ln))&&(Qe=gt.DragCancel)}be.current=null,wa.unstable_batchedUpdates(()=>{C({type:Qe}),M(nr.Uninitialized),oo(null),Z(null),Y(null),Ti.current=null;const gs=Qe===gt.DragEnd?"onDragEnd":"onDragCancel";if(ln){const Mi=te.current[gs];Mi?.(ln),E({type:gs,event:ln})}})}}},[H]),Pi=k.useCallback((Ye,kt)=>(Rt,On)=>{const jt=Rt.nativeEvent,Tt=H.get(On);if(be.current!==null||!Tt||jt.dndKit||jt.defaultPrevented)return;const Xt={active:Tt};Ye(Rt,kt.options,Xt)===!0&&(jt.dndKit={capturedBy:kt.sensor},be.current=On,Fr(Rt,kt))},[H,Fr]),jr=Hk(p,Pi);Yk(p),Kn(()=>{Re&&R===nr.Initializing&&M(nr.Initialized)},[Re,R]),k.useEffect(()=>{const{onDragMove:Ye}=te.current,{active:kt,activatorEvent:Rt,collisions:On,over:jt}=an.current;if(!kt||!Rt)return;const Tt={active:kt,activatorEvent:Rt,collisions:On,delta:{x:Zn.x,y:Zn.y},over:jt};wa.unstable_batchedUpdates(()=>{Ye?.(Tt),E({type:"onDragMove",event:Tt})})},[Zn.x,Zn.y]),k.useEffect(()=>{const{active:Ye,activatorEvent:kt,collisions:Rt,droppableContainers:On,scrollAdjustedTranslate:jt}=an.current;if(!Ye||be.current==null||!kt||!jt)return;const{onDragOver:Tt}=te.current,Xt=On.get(Ms),ps=Xt&&Xt.rect.current?{id:Xt.id,rect:Xt.rect.current,data:Xt.data,disabled:Xt.disabled}:null,Qe={active:Ye,activatorEvent:kt,collisions:Rt,delta:{x:jt.x,y:jt.y},over:ps};wa.unstable_batchedUpdates(()=>{oo(ps),Tt?.(Qe),E({type:"onDragOver",event:Qe})})},[Ms]),Kn(()=>{an.current={activatorEvent:J,active:we,activeNode:ce,collisionRect:Dn,collisions:Is,droppableRects:se,draggableNodes:H,draggingNode:hs,draggingNodeRect:fs,droppableContainers:K,over:qt,scrollableAncestors:Gt,scrollAdjustedTranslate:Zn},fe.current={initial:fs,translated:Dn}},[we,ce,Is,Dn,H,hs,fs,se,K,qt,Gt,Zn]),jk({...Ee,delta:U,draggingRect:Dn,pointerCoordinates:ki,scrollableAncestors:Gt,scrollableAncestorRects:Ln});const Ni=k.useMemo(()=>({active:we,activeNode:ce,activeNodeRect:Re,activatorEvent:J,collisions:Is,containerNodeRect:Jn,dragOverlay:on,draggableNodes:H,droppableContainers:K,droppableRects:se,over:qt,measureDroppableContainers:me,scrollableAncestors:Gt,scrollableAncestorRects:Ln,measuringConfiguration:B,measuringScheduled:ke,windowRect:cr}),[we,ce,Re,J,Is,Jn,on,H,K,se,qt,me,Gt,Ln,B,ke,cr]),Ii=k.useMemo(()=>({activatorEvent:J,activators:jr,active:we,activeNodeRect:Re,ariaDescribedById:{draggable:ee},dispatch:C,draggableNodes:H,over:qt,measureDroppableContainers:me}),[J,jr,we,Re,C,ee,H,qt,me]);return He.createElement(vb.Provider,{value:P},He.createElement(ro.Provider,{value:Ii},He.createElement(Ob.Provider,{value:Ni},He.createElement(jc.Provider,{value:co},f)),He.createElement(iR,{disabled:c?.restoreFocus===!1})),He.createElement(hk,{...c,hiddenTextDescribedById:ee}));function Ls(){const Ye=De?.autoScrollEnabled===!1,kt=typeof d=="object"?d.enabled===!1:d===!1,Rt=D&&!Ye&&!kt;return typeof d=="object"?{...d,enabled:Rt}:{enabled:Rt}}}),cR=k.createContext(null),j0="button",uR="Draggable";function dR(i){let{id:e,data:t,disabled:n=!1,attributes:r}=i;const o=so(uR),{activators:l,activatorEvent:c,active:d,activeNodeRect:f,ariaDescribedById:p,draggableNodes:g,over:y}=k.useContext(ro),{role:v=j0,roleDescription:x="draggable",tabIndex:_=0}=r??{},A=d?.id===e,C=k.useContext(A?jc:cR),[E,P]=rc(),[R,M]=rc(),D=Qk(l,e),O=Va(t);Kn(()=>(g.set(e,{id:e,key:o,node:E,activatorNode:R,data:O}),()=>{const U=g.get(e);U&&U.key===o&&g.delete(e)}),[g,e]);const H=k.useMemo(()=>({role:v,tabIndex:_,"aria-disabled":n,"aria-pressed":A&&v===j0?!0:void 0,"aria-roledescription":x,"aria-describedby":p.draggable}),[n,v,_,A,x,p.draggable]);return{active:d,activatorEvent:c,activeNodeRect:f,attributes:H,isDragging:A,listeners:n?void 0:D,node:E,over:y,setNodeRef:P,setActivatorNodeRef:M,transform:C}}function jb(){return k.useContext(Ob)}const hR="Droppable",fR={timeout:25};function $b(i){let{data:e,disabled:t=!1,id:n,resizeObserverConfig:r}=i;const o=so(hR),{active:l,dispatch:c,over:d,measureDroppableContainers:f}=k.useContext(ro),p=k.useRef({disabled:t}),g=k.useRef(!1),y=k.useRef(null),v=k.useRef(null),{disabled:x,updateMeasurementsFor:_,timeout:A}={...fR,...r},C=Va(_??n),E=k.useCallback(()=>{if(!g.current){g.current=!0;return}v.current!=null&&clearTimeout(v.current),v.current=setTimeout(()=>{f(Array.isArray(C.current)?C.current:[C.current]),v.current=null},A)},[A]),P=Fc({callback:E,disabled:x||!l}),R=k.useCallback((H,U)=>{P&&(U&&(P.unobserve(U),g.current=!1),H&&P.observe(H))},[P]),[M,D]=rc(R),O=Va(e);return k.useEffect(()=>{!P||!M.current||(P.disconnect(),g.current=!1,P.observe(M.current))},[M,P]),k.useEffect(()=>(c({type:gt.RegisterDroppable,element:{id:n,key:o,disabled:t,node:M,rect:y,data:O}}),()=>c({type:gt.UnregisterDroppable,key:o,id:n})),[n]),k.useEffect(()=>{t!==p.current.disabled&&(c({type:gt.SetDroppableDisabled,id:n,key:o,disabled:t}),p.current.disabled=t)},[n,o,t,c]),{active:l,rect:y,isOver:d?.id===n,node:M,over:d,setNodeRef:D}}function pR(i){let{animation:e,children:t}=i;const[n,r]=k.useState(null),[o,l]=k.useState(null),c=ic(t);return!t&&!n&&c&&r(c),Kn(()=>{if(!o)return;const d=n?.key,f=n?.props.id;if(d==null||f==null){r(null);return}Promise.resolve(e(f,o)).then(()=>{r(null)})},[e,n,o]),He.createElement(He.Fragment,null,t,n?k.cloneElement(n,{ref:l}):null)}const gR={x:0,y:0,scaleX:1,scaleY:1};function mR(i){let{children:e}=i;return He.createElement(ro.Provider,{value:Db},He.createElement(jc.Provider,{value:gR},e))}const yR={position:"fixed",touchAction:"none"},vR=i=>Oc(i)?"transform 250ms ease":void 0,bR=k.forwardRef((i,e)=>{let{as:t,activatorEvent:n,adjustScale:r,children:o,className:l,rect:c,style:d,transform:f,transition:p=vR}=i;if(!c)return null;const g=r?f:{...f,scaleX:1,scaleY:1},y={...yR,width:c.width,height:c.height,top:c.top,left:c.left,transform:or.Transform.toString(g),transformOrigin:r&&n?pk(n,c):void 0,transition:typeof p=="function"?p(n):p,...d};return He.createElement(t,{className:l,style:y,ref:e},o)}),wR=i=>e=>{let{active:t,dragOverlay:n}=e;const r={},{styles:o,className:l}=i;if(o!=null&&o.active)for(const[c,d]of Object.entries(o.active))d!==void 0&&(r[c]=t.node.style.getPropertyValue(c),t.node.style.setProperty(c,d));if(o!=null&&o.dragOverlay)for(const[c,d]of Object.entries(o.dragOverlay))d!==void 0&&n.node.style.setProperty(c,d);return l!=null&&l.active&&t.node.classList.add(l.active),l!=null&&l.dragOverlay&&n.node.classList.add(l.dragOverlay),function(){for(const[d,f]of Object.entries(r))t.node.style.setProperty(d,f);l!=null&&l.active&&t.node.classList.remove(l.active)}},xR=i=>{let{transform:{initial:e,final:t}}=i;return[{transform:or.Transform.toString(e)},{transform:or.Transform.toString(t)}]},_R={duration:250,easing:"ease",keyframes:xR,sideEffects:wR({styles:{active:{opacity:"0"}}})};function SR(i){let{config:e,draggableNodes:t,droppableContainers:n,measuringConfiguration:r}=i;return Dc((o,l)=>{if(e===null)return;const c=t.get(o);if(!c)return;const d=c.node.current;if(!d)return;const f=Lb(l);if(!f)return;const{transform:p}=Vt(l).getComputedStyle(l),g=wb(p);if(!g)return;const y=typeof e=="function"?e:AR(e);return kb(d,r.draggable.measure),y({active:{id:o,data:c.data,node:d,rect:r.draggable.measure(d)},draggableNodes:t,dragOverlay:{node:l,rect:r.dragOverlay.measure(f)},droppableContainers:n,measuringConfiguration:r,transform:g})})}function AR(i){const{duration:e,easing:t,sideEffects:n,keyframes:r}={..._R,...i};return o=>{let{active:l,dragOverlay:c,transform:d,...f}=o;if(!e)return;const p={x:c.rect.left-l.rect.left,y:c.rect.top-l.rect.top},g={scaleX:d.scaleX!==1?l.rect.width*d.scaleX/c.rect.width:1,scaleY:d.scaleY!==1?l.rect.height*d.scaleY/c.rect.height:1},y={x:d.x-p.x,y:d.y-p.y,...g},v=r({...f,active:l,dragOverlay:c,transform:{initial:d,final:y}}),[x]=v,_=v[v.length-1];if(JSON.stringify(x)===JSON.stringify(_))return;const A=n?.({active:l,dragOverlay:c,...f}),C=c.node.animate(v,{duration:e,easing:t,fill:"forwards"});return new Promise(E=>{C.onfinish=()=>{A?.(),E()}})}}let $0=0;function CR(i){return k.useMemo(()=>{if(i!=null)return $0++,$0},[i])}const ER=He.memo(i=>{let{adjustScale:e=!1,children:t,dropAnimation:n,style:r,transition:o,modifiers:l,wrapperElement:c="div",className:d,zIndex:f=999}=i;const{activatorEvent:p,active:g,activeNodeRect:y,containerNodeRect:v,draggableNodes:x,droppableContainers:_,dragOverlay:A,over:C,measuringConfiguration:E,scrollableAncestors:P,scrollableAncestorRects:R,windowRect:M}=jb(),D=k.useContext(jc),O=CR(g?.id),H=Fb(l,{activatorEvent:p,active:g,activeNodeRect:y,containerNodeRect:v,draggingNodeRect:A.rect,over:C,overlayNodeRect:A.rect,scrollableAncestors:P,scrollableAncestorRects:R,transform:D,windowRect:M}),U=Pf(y),K=SR({config:n,draggableNodes:x,droppableContainers:_,measuringConfiguration:E}),V=U?A.setRef:void 0;return He.createElement(mR,null,He.createElement(pR,{animation:K},g&&O?He.createElement(bR,{key:O,id:g.id,ref:V,as:c,activatorEvent:p,adjustScale:e,className:d,transition:o,rect:U,style:{zIndex:f,...r},transform:H},t):null))});function zb(i,e,t){const n=i.slice();return n.splice(t<0?n.length+t:t,0,n.splice(e,1)[0]),n}function kR(i,e){return i.reduce((t,n,r)=>{const o=e.get(n);return o&&(t[r]=o),t},Array(i.length))}function Tl(i){return i!==null&&i>=0}function RR(i,e){if(i===e)return!0;if(i.length!==e.length)return!1;for(let t=0;t<i.length;t++)if(i[t]!==e[t])return!1;return!0}function TR(i){return typeof i=="boolean"?{draggable:i,droppable:i}:i}const Bb=i=>{let{rects:e,activeIndex:t,overIndex:n,index:r}=i;const o=zb(e,n,t),l=e[r],c=o[r];return!c||!l?null:{x:c.left-l.left,y:c.top-l.top,scaleX:c.width/l.width,scaleY:c.height/l.height}},Pl={scaleX:1,scaleY:1},PR=i=>{var e;let{activeIndex:t,activeNodeRect:n,index:r,rects:o,overIndex:l}=i;const c=(e=o[t])!=null?e:n;if(!c)return null;if(r===t){const f=o[l];return f?{x:0,y:t<l?f.top+f.height-(c.top+c.height):f.top-c.top,...Pl}:null}const d=NR(o,r,t);return r>t&&r<=l?{x:0,y:-c.height-d,...Pl}:r<t&&r>=l?{x:0,y:c.height+d,...Pl}:{x:0,y:0,...Pl}};function NR(i,e,t){const n=i[e],r=i[e-1],o=i[e+1];return n?t<e?r?n.top-(r.top+r.height):o?o.top-(n.top+n.height):0:o?o.top-(n.top+n.height):r?n.top-(r.top+r.height):0:0}const Hb="Sortable",Ub=He.createContext({activeIndex:-1,containerId:Hb,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Bb,disabled:{draggable:!1,droppable:!1}});function IR(i){let{children:e,id:t,items:n,strategy:r=Bb,disabled:o=!1}=i;const{active:l,dragOverlay:c,droppableRects:d,over:f,measureDroppableContainers:p}=jb(),g=so(Hb,t),y=c.rect!==null,v=k.useMemo(()=>n.map(D=>typeof D=="object"&&"id"in D?D.id:D),[n]),x=l!=null,_=l?v.indexOf(l.id):-1,A=f?v.indexOf(f.id):-1,C=k.useRef(v),E=!RR(v,C.current),P=A!==-1&&_===-1||E,R=TR(o);Kn(()=>{E&&x&&p(v)},[E,v,x,p]),k.useEffect(()=>{C.current=v},[v]);const M=k.useMemo(()=>({activeIndex:_,containerId:g,disabled:R,disableTransforms:P,items:v,overIndex:A,useDragOverlay:y,sortedRects:kR(v,d),strategy:r}),[_,g,R.draggable,R.droppable,P,v,A,d,y,r]);return He.createElement(Ub.Provider,{value:M},e)}const MR=i=>{let{id:e,items:t,activeIndex:n,overIndex:r}=i;return zb(t,n,r).indexOf(e)},LR=i=>{let{containerId:e,isSorting:t,wasDragging:n,index:r,items:o,newIndex:l,previousItems:c,previousContainerId:d,transition:f}=i;return!f||!n||c!==o&&r===l?!1:t?!0:l!==r&&e===d},DR={duration:200,easing:"ease"},Wb="transform",OR=or.Transition.toString({property:Wb,duration:0,easing:"linear"}),FR={roleDescription:"sortable"};function jR(i){let{disabled:e,index:t,node:n,rect:r}=i;const[o,l]=k.useState(null),c=k.useRef(t);return Kn(()=>{if(!e&&t!==c.current&&n.current){const d=r.current;if(d){const f=Ci(n.current,{ignoreTransform:!0}),p={x:d.left-f.left,y:d.top-f.top,scaleX:d.width/f.width,scaleY:d.height/f.height};(p.x||p.y)&&l(p)}}t!==c.current&&(c.current=t)},[e,t,n,r]),k.useEffect(()=>{o&&l(null)},[o]),o}function $R(i){let{animateLayoutChanges:e=LR,attributes:t,disabled:n,data:r,getNewIndex:o=MR,id:l,strategy:c,resizeObserverConfig:d,transition:f=DR}=i;const{items:p,containerId:g,activeIndex:y,disabled:v,disableTransforms:x,sortedRects:_,overIndex:A,useDragOverlay:C,strategy:E}=k.useContext(Ub),P=zR(n,v),R=p.indexOf(l),M=k.useMemo(()=>({sortable:{containerId:g,index:R,items:p},...r}),[g,r,R,p]),D=k.useMemo(()=>p.slice(p.indexOf(l)),[p,l]),{rect:O,node:H,isOver:U,setNodeRef:K}=$b({id:l,data:M,disabled:P.droppable,resizeObserverConfig:{updateMeasurementsFor:D,...d}}),{active:V,activatorEvent:fe,activeNodeRect:we,attributes:be,setNodeRef:De,listeners:Z,isDragging:J,over:Y,setActivatorNodeRef:te,transform:ee}=dR({id:l,data:M,attributes:{...FR,...t},disabled:P.draggable}),L=ZE(K,De),B=!!V,se=B&&!x&&Tl(y)&&Tl(A),me=!C&&J,ke=me&&se?ee:null,pe=se?ke??(c??E)({rects:_,activeNodeRect:we,activeIndex:y,overIndex:A,index:R}):null,Ee=Tl(y)&&Tl(A)?o({id:l,items:p,activeIndex:y,overIndex:A}):R,Le=V?.id,Re=k.useRef({activeId:Le,items:p,newIndex:Ee,containerId:g}),Jn=p!==Re.current.items,an=e({active:V,containerId:g,isDragging:J,isSorting:B,id:l,index:R,items:p,newIndex:Re.current.newIndex,previousItems:Re.current.items,previousContainerId:Re.current.containerId,transition:f,wasDragging:Re.current.activeId!=null}),Mn=jR({disabled:!an,index:R,node:H,rect:O});return k.useEffect(()=>{B&&Re.current.newIndex!==Ee&&(Re.current.newIndex=Ee),g!==Re.current.containerId&&(Re.current.containerId=g),p!==Re.current.items&&(Re.current.items=p)},[B,Ee,g,p]),k.useEffect(()=>{if(Le===Re.current.activeId)return;if(Le!=null&&Re.current.activeId==null){Re.current.activeId=Le;return}const hs=setTimeout(()=>{Re.current.activeId=Le},50);return()=>clearTimeout(hs)},[Le]),{active:V,activeIndex:y,attributes:be,data:M,rect:O,index:R,newIndex:Ee,items:p,isOver:U,isSorting:B,isDragging:J,listeners:Z,node:H,overIndex:A,over:Y,setNodeRef:L,setActivatorNodeRef:te,setDroppableNodeRef:K,setDraggableNodeRef:De,transform:Mn??pe,transition:on()};function on(){if(Mn||Jn&&Re.current.newIndex===R)return OR;if(!(me&&!Oc(fe)||!f)&&(B||an))return or.Transition.toString({...f,property:Wb})}}function zR(i,e){var t,n;return typeof i=="boolean"?{draggable:i,droppable:!1}:{draggable:(t=i?.draggable)!=null?t:e.draggable,droppable:(n=i?.droppable)!=null?n:e.droppable}}$e.Down,$e.Right,$e.Up,$e.Left;const z0=[{id:"new",title:"Nuevo",color:"bg-gray-100",darkColor:"dark:bg-gray-800"},{id:"review",title:"En Revisin",color:"bg-blue-50",darkColor:"dark:bg-blue-900/20"},{id:"preselected",title:"Preseleccionado",color:"bg-indigo-50",darkColor:"dark:bg-indigo-900/20"},{id:"interview_scheduled",title:"Entrevista",color:"bg-yellow-50",darkColor:"dark:bg-yellow-900/20"},{id:"approved",title:"Aprobado",color:"bg-green-50",darkColor:"dark:bg-green-900/20"},{id:"rejected",title:"Rechazado",color:"bg-red-50",darkColor:"dark:bg-red-900/20"}];function BR({candidate:i,onClick:e}){const{attributes:t,listeners:n,setNodeRef:r,transform:o,transition:l,isDragging:c}=$R({id:i.id,data:{candidate:i}}),d={transform:or.Transform.toString(o),transition:l,opacity:c?.5:1};return w.jsxs("div",{ref:r,style:d,...t,...n,onClick:e,className:"bg-white dark:bg-gray-700 p-4 rounded-lg shadow-sm border border-gray-200 dark:border-gray-600 mb-3 cursor-grab hover:shadow-md transition-shadow",children:[w.jsxs("div",{className:"flex justify-between items-start mb-2",children:[w.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white truncate pr-2",children:i.name||"Sin nombre"}),w.jsx("span",{className:"font-bold text-blue-600 dark:text-blue-400 text-sm",children:i.totalScore})]}),w.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2 truncate",children:i.email}),w.jsxs("div",{className:"flex items-center gap-1 mb-2",children:[w.jsx("div",{className:"flex-1 h-1.5 bg-gray-100 dark:bg-gray-600 rounded-full overflow-hidden",children:w.jsx("div",{className:"h-full bg-green-500 rounded-full",style:{width:`${i.relevance*10}%`}})}),w.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-500 w-6 text-right",children:i.relevance})]})]})}function HR({id:i,children:e}){const{setNodeRef:t}=$b({id:i});return w.jsx("div",{ref:t,className:"min-h-full",children:e})}function UR({candidates:i,onSelectCandidate:e}){const{moveCandidate:t}=In(),[n,r]=k.useState(null),o=fk(R0(Nb,{activationConstraint:{distance:10}}),R0(Ib,{activationConstraint:{delay:250,tolerance:5}})),l=d=>{const{active:f}=d;r(f.data.current?.candidate||null)},c=d=>{const{active:f,over:p}=d;if(p&&f.id!==p.id){const g=p.id;z0.some(y=>y.id===g)&&t(f.id,g)}r(null)};return w.jsxs(lR,{sensors:o,onDragStart:l,onDragEnd:c,children:[w.jsx("div",{className:"flex h-full gap-4 overflow-x-auto pb-4",children:z0.map(d=>w.jsxs("div",{className:`flex-shrink-0 w-72 rounded-xl ${d.color} ${d.darkColor} flex flex-col max-h-full transition-colors`,children:[w.jsxs("div",{className:"p-4 font-semibold text-gray-700 dark:text-gray-200 flex justify-between items-center",children:[d.title,w.jsx("span",{className:"bg-white dark:bg-gray-700 px-2 py-0.5 rounded-full text-xs text-gray-500 dark:text-gray-300 shadow-sm",children:i.filter(f=>f.status===d.id).length})]}),w.jsx("div",{className:"flex-1 p-3 overflow-y-auto min-h-[100px]",children:w.jsx(IR,{items:i.filter(f=>f.status===d.id).map(f=>f.id),strategy:PR,children:w.jsx(HR,{id:d.id,children:i.filter(f=>f.status===d.id).map(f=>w.jsx(BR,{candidate:f,onClick:()=>e(f)},f.id))})})})]},d.id))}),w.jsx(ER,{children:n?w.jsx("div",{className:"bg-white dark:bg-gray-700 p-4 rounded-lg shadow-lg border border-blue-200 dark:border-blue-500/30 transform rotate-3 cursor-grabbing w-72",children:w.jsxs("div",{className:"flex justify-between items-start mb-2",children:[w.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:n.name}),w.jsx("span",{className:"font-bold text-blue-600 dark:text-blue-400",children:n.totalScore})]})}):null})]})}function WR({candidate:i,onClose:e}){const{currentSearch:t,settings:n}=In(),[r,o]=k.useState(5),[l,c]=k.useState(!1),[d,f]=k.useState([]),[p,g]=k.useState(null),y=async()=>{if(t){c(!0);try{const x=await KE(i,t.jobDescription,n.apiKey,n.selectedModel,r);f(x)}catch(x){console.error("Failed to generate questions:",x)}finally{c(!1)}}};k.useEffect(()=>{},[]);const v=(x,_)=>{navigator.clipboard.writeText(x),g(_),setTimeout(()=>g(null),2e3)};return w.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60] p-4",children:w.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-2xl flex flex-col max-h-[80vh]",children:[w.jsxs("div",{className:"p-6 border-b border-gray-200 flex justify-between items-center",children:[w.jsxs("div",{children:[w.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Generador de Preguntas"}),w.jsxs("p",{className:"text-sm text-gray-500",children:["Entrevista para ",i.name]})]}),w.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:w.jsx(hc,{size:24})})]}),w.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:d.length===0&&!l?w.jsxs("div",{className:"flex flex-col items-center justify-center h-full space-y-6",children:[w.jsx("div",{className:"w-16 h-16 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center",children:w.jsx(Ed,{size:32})}),w.jsxs("div",{className:"text-center max-w-md",children:[w.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Configura tu entrevista"}),w.jsx("p",{className:"text-gray-500 mt-2",children:"Selecciona cuntas preguntas quieres generar para este candidato."})]}),w.jsxs("div",{className:"flex items-center gap-4 bg-gray-50 p-4 rounded-lg border border-gray-200",children:[w.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Nmero de preguntas:"}),w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("button",{onClick:()=>o(Math.max(1,r-1)),className:"w-8 h-8 rounded-full bg-white border border-gray-300 flex items-center justify-center hover:bg-gray-50",children:"-"}),w.jsx("span",{className:"w-8 text-center font-bold",children:r}),w.jsx("button",{onClick:()=>o(Math.min(10,r+1)),className:"w-8 h-8 rounded-full bg-white border border-gray-300 flex items-center justify-center hover:bg-gray-50",children:"+"})]})]}),w.jsx("button",{onClick:y,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium transition-colors shadow-sm",children:"Generar Preguntas"})]}):l?w.jsxs("div",{className:"flex flex-col items-center justify-center py-12 space-y-4",children:[w.jsx(Ed,{className:"animate-spin text-blue-600",size:32}),w.jsxs("p",{className:"text-gray-500",children:["Generando ",r," preguntas personalizadas..."]})]}):w.jsx("div",{className:"space-y-4",children:d.map((x,_)=>w.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200 flex gap-4 group hover:border-blue-200 transition-colors",children:[w.jsx("div",{className:"w-6 h-6 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center shrink-0 text-sm font-bold",children:_+1}),w.jsx("p",{className:"flex-1 text-gray-800",children:x}),w.jsx("button",{onClick:()=>v(x,_),className:"text-gray-400 hover:text-blue-600 opacity-0 group-hover:opacity-100 transition-opacity",title:"Copiar pregunta",children:p===_?w.jsx(NS,{size:18,className:"text-green-600"}):w.jsx($S,{size:18})})]},_))})}),d.length>0&&w.jsxs("div",{className:"p-6 border-t border-gray-200 bg-gray-50 rounded-b-xl flex justify-between items-center",children:[w.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[w.jsx("span",{children:"Preguntas:"}),w.jsx("select",{value:r,onChange:x=>o(Number(x.target.value)),className:"bg-white border border-gray-300 rounded px-2 py-1 text-sm focus:ring-2 focus:ring-blue-500",children:[3,5,7,10].map(x=>w.jsx("option",{value:x,children:x},x))})]}),w.jsxs("button",{onClick:y,disabled:l,className:"flex items-center gap-2 px-4 py-2 bg-white border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 disabled:opacity-50 transition-colors font-medium",children:[w.jsx(Ed,{size:16,className:l?"animate-spin":""}),"Regenerar"]})]})]})})}function Nl({title:i,score:e,color:t}){return w.jsxs("div",{className:`p-3 rounded-lg ${t}`,children:[w.jsx("div",{className:"text-xs font-medium opacity-80 uppercase tracking-wider",children:i}),w.jsxs("div",{className:"text-2xl font-bold mt-1",children:[e,"/10"]})]})}function Il({title:i,content:e}){return w.jsxs("div",{children:[w.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-1",children:i}),w.jsx("p",{className:"text-sm text-gray-600 leading-relaxed",children:e})]})}const VR=[{value:"new",label:"Nuevo"},{value:"review",label:"En Revisin"},{value:"preselected",label:"Preseleccionado"},{value:"interview_scheduled",label:"Entrevista Agendada"},{value:"interviewing",label:"Entrevistando"},{value:"approved",label:"Aprobado"},{value:"rejected",label:"Rechazado"},{value:"offer_sent",label:"Oferta Enviada"},{value:"hired",label:"Contratado"},{value:"declined",label:"Declinado"},{value:"archived",label:"Archivado"}];function GR({candidate:i,onClose:e}){const{candidates:t,updateCandidate:n,toggleFavorite:r,moveCandidate:o}=In(),l=t.find(D=>D.id===i.id)||i,[c,d]=k.useState(""),[f,p]=k.useState(!1),[g,y]=k.useState(l.interviewDate||""),[v,x]=k.useState(!1),[_,A]=k.useState(null),C=Array.isArray(l.notes)?l.notes:l.notes?[{id:"legacy",content:l.notes,date:l.createdAt}]:[];k.useEffect(()=>{if(l.pdfDataUrl)try{if(l.pdfDataUrl.startsWith("data:application/pdf;base64,")){const D=l.pdfDataUrl.split(",")[1],O=window.atob(D),H=O.length,U=new Uint8Array(H);for(let fe=0;fe<H;fe++)U[fe]=O.charCodeAt(fe);const K=new Blob([U],{type:"application/pdf"}),V=URL.createObjectURL(K);return A(V),()=>URL.revokeObjectURL(V)}else A(l.pdfDataUrl)}catch(D){console.error("Error processing PDF data",D)}else l.pdfUrl&&A(l.pdfUrl)},[l.pdfDataUrl,l.pdfUrl]);const E=async()=>{if(c.trim()){p(!0);try{const D={id:crypto.randomUUID(),content:c,date:new Date().toISOString()},O=[...C,D];await n({...l,notes:O}),d("")}catch(D){console.error("Failed to save note:",D)}finally{p(!1)}}},P=async D=>{const O=D.target.value;y(O),await n({...l,interviewDate:O})},R=async D=>{const O=D.target.value;await o(l.id,O)},M=["interview_scheduled","interviewing","approved","offer_sent","hired"].includes(l.status);return w.jsxs(w.Fragment,{children:[w.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:w.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl w-full max-w-[95vw] h-[90vh] flex flex-col overflow-hidden transition-colors",children:[w.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700 shrink-0 bg-white dark:bg-gray-800 transition-colors",children:[w.jsxs("div",{className:"flex items-center gap-4",children:[w.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 flex items-center justify-center text-xl font-bold",children:l.name?l.name.charAt(0).toUpperCase():"?"}),w.jsxs("div",{children:[w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:l.name}),w.jsx("button",{onClick:()=>r(l.id),className:`p-1 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors ${l.isFavorite?"text-yellow-400 fill-current":"text-gray-300 dark:text-gray-600"}`,children:w.jsx(ay,{size:20,fill:l.isFavorite?"currentColor":"none"})})]}),w.jsx("div",{className:"flex items-center gap-4 text-sm text-gray-500 dark:text-gray-400",children:l.phone&&w.jsxs("div",{className:"flex items-center gap-1",children:[w.jsx(tA,{size:14}),w.jsx("span",{children:l.phone})]})})]})]}),w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsxs("div",{className:"relative",children:[w.jsx("select",{value:l.status,onChange:R,className:"appearance-none pl-3 pr-8 py-1.5 bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-sm font-medium text-gray-700 dark:text-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-transparent cursor-pointer",children:VR.map(D=>w.jsx("option",{value:D.value,children:D.label},D.value))}),w.jsx(MS,{size:14,className:"absolute right-2.5 top-1/2 transform -translate-y-1/2 text-gray-500 dark:text-gray-400 pointer-events-none"})]}),w.jsxs("button",{onClick:()=>x(!0),className:"flex items-center gap-2 px-3 py-1.5 text-sm font-medium text-blue-700 dark:text-blue-300 bg-blue-50 dark:bg-blue-900/30 hover:bg-blue-100 dark:hover:bg-blue-900/50 rounded-lg transition-colors",children:[w.jsx(JS,{size:16}),"Generar Preguntas"]}),M&&w.jsxs("div",{className:"flex items-center gap-2 bg-orange-50 dark:bg-orange-900/20 px-3 py-1.5 rounded-lg border border-orange-100 dark:border-orange-900/30",children:[w.jsx(TS,{size:16,className:"text-orange-500 dark:text-orange-400"}),w.jsx("span",{className:"text-xs font-medium text-orange-700 dark:text-orange-300",children:"Entrevista:"}),w.jsx("input",{type:"datetime-local",value:g,onChange:P,className:"text-sm bg-transparent border-none p-0 focus:ring-0 text-gray-700 dark:text-gray-300 w-36"})]}),w.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded-full text-sm font-medium",children:[w.jsx("span",{children:"Score:"}),w.jsxs("span",{className:"text-lg font-bold",children:[l.totalScore,"/40"]})]}),w.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors text-gray-500 dark:text-gray-400",children:w.jsx(hc,{size:24})})]})]}),w.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[w.jsx("div",{className:"w-5/12 overflow-y-auto border-r border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900/50 transition-colors",children:w.jsxs("div",{className:"p-6 space-y-6",children:[w.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[w.jsx(Nl,{title:"Relevancia",score:l.relevance,color:"bg-white dark:bg-gray-800 border border-blue-100 dark:border-blue-900/30 text-blue-700 dark:text-blue-400"}),w.jsx(Nl,{title:"Educacin",score:l.education,color:"bg-white dark:bg-gray-800 border border-purple-100 dark:border-purple-900/30 text-purple-700 dark:text-purple-400"}),w.jsx(Nl,{title:"Experiencia",score:l.previousJobs,color:"bg-white dark:bg-gray-800 border border-orange-100 dark:border-orange-900/30 text-orange-700 dark:text-orange-400"}),w.jsx(Nl,{title:"Proactividad",score:l.proactivity,color:"bg-white dark:bg-gray-800 border border-green-100 dark:border-green-900/30 text-green-700 dark:text-green-400"})]}),w.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700 shadow-sm transition-colors",children:[w.jsx("div",{className:"flex items-center justify-between mb-3",children:w.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[w.jsx("span",{children:""})," Notas"]})}),w.jsx("div",{className:"space-y-3 mb-4 max-h-[200px] overflow-y-auto",children:C.length>0?C.map(D=>w.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-3 rounded-lg text-sm",children:[w.jsx("p",{className:"text-gray-800 dark:text-gray-200 whitespace-pre-wrap",children:D.content}),w.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1",children:new Date(D.date).toLocaleString()})]},D.id)):w.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500 italic text-center py-2",children:"No hay notas an"})}),w.jsx("div",{className:"flex gap-2",children:w.jsx("textarea",{value:c,onChange:D=>d(D.target.value),placeholder:"Aadir nueva nota...",className:"flex-1 h-20 p-3 border border-gray-200 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500"})}),w.jsxs("button",{onClick:E,disabled:f||!c.trim(),className:"w-full mt-2 flex items-center justify-center gap-2 px-4 py-2 bg-gray-900 dark:bg-gray-700 text-white rounded-lg hover:bg-gray-800 dark:hover:bg-gray-600 disabled:opacity-50 transition-colors text-sm font-medium",children:[w.jsx(ry,{size:16}),f?"Guardando...":"Aadir Nota"]})]}),w.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700 shadow-sm space-y-6 transition-colors",children:[w.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white border-b border-gray-100 dark:border-gray-700 pb-2",children:"Anlisis de IA"}),w.jsx(Il,{title:"Relevancia del Perfil",content:l.analysis.relevance}),w.jsx(Il,{title:"Nivel Educativo",content:l.analysis.education}),w.jsx(Il,{title:"Experiencia Laboral",content:l.analysis.previousJobs}),w.jsx(Il,{title:"Proactividad y Logros",content:l.analysis.proactivity})]}),w.jsxs("div",{className:"text-xs text-gray-400 dark:text-gray-500 text-center pt-4",children:["Aadido el ",new Date(l.createdAt).toLocaleDateString(),"  ID: ",l.id.slice(0,8)]})]})}),w.jsxs("div",{className:"w-7/12 bg-gray-200 dark:bg-gray-900 flex flex-col border-l border-gray-200 dark:border-gray-700",children:[w.jsxs("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 p-2 flex justify-between items-center px-4 transition-colors",children:[w.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-300 truncate max-w-[300px]",children:l.fileName}),_&&w.jsxs("a",{href:_,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 text-sm flex items-center gap-1",children:[w.jsx(HS,{size:14}),"Abrir en nueva pestaa"]})]}),w.jsx("div",{className:"flex-1 relative bg-gray-100 dark:bg-gray-900",children:_?w.jsx("object",{data:_,type:"application/pdf",className:"absolute inset-0 w-full h-full",children:w.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-500 dark:text-gray-400",children:[w.jsx("p",{children:"No se pudo visualizar el PDF directamente."}),w.jsx("a",{href:_,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline mt-2",children:"Descargar PDF"})]})}):w.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-gray-500 dark:text-gray-400",children:"No hay vista previa disponible"})})]})]})]})}),v&&w.jsx(WR,{candidate:l,onClose:()=>x(!1)})]})}function qR(){const{id:i}=A_(),{selectSearch:e,currentSearch:t,candidates:n,isLoading:r}=In(),[o,l]=k.useState("list"),[c,d]=k.useState(!1),[f,p]=k.useState(null);return k.useEffect(()=>{i&&e(parseInt(i))},[i,e]),r?w.jsx("div",{className:"flex items-center justify-center h-full text-gray-500 dark:text-gray-400",children:"Cargando..."}):t?w.jsxs("div",{className:"flex flex-col h-full bg-gray-50 dark:bg-gray-900 transition-colors",children:[w.jsxs("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-4 md:px-8 py-3 flex justify-between items-center shrink-0 transition-colors",children:[w.jsxs("div",{children:[w.jsx("h1",{className:"text-xl md:text-2xl font-bold text-gray-900 dark:text-white",children:t.name}),w.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 truncate max-w-xl md:max-w-2xl",children:t.jobDescription})]}),w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsxs("div",{className:"bg-gray-100 dark:bg-gray-700 p-1 rounded-lg flex",children:[w.jsx("button",{onClick:()=>l("list"),className:`p-2 rounded-md transition-colors ${o==="list"?"bg-white dark:bg-gray-600 shadow-sm text-blue-600 dark:text-blue-400":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200"}`,children:w.jsx(YS,{size:20})}),w.jsx("button",{onClick:()=>l("kanban"),className:`p-2 rounded-md transition-colors ${o==="kanban"?"bg-white dark:bg-gray-600 shadow-sm text-blue-600 dark:text-blue-400":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200"}`,children:w.jsx(GS,{size:20})})]}),w.jsxs("button",{onClick:()=>d(!c),className:`flex items-center gap-2 px-3 md:px-4 py-2 rounded-lg font-medium transition-colors text-sm md:text-base ${c?"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300":"bg-blue-600 text-white hover:bg-blue-700"}`,children:[w.jsx(Jd,{size:18,className:"md:w-5 md:h-5"}),w.jsx("span",{className:"hidden md:inline",children:c?"Ocultar Subida":"Subir CVs"}),w.jsx("span",{className:"md:hidden",children:c?"Ocultar":"Subir"})]})]})]}),w.jsxs("div",{className:"flex-1 overflow-hidden p-4 md:p-8 bg-gray-50 dark:bg-gray-900 transition-colors",children:[c&&w.jsx("div",{className:"mb-8 animate-in slide-in-from-top-4 duration-300",children:w.jsx(YE,{})}),n.length===0&&!c?w.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-500 dark:text-gray-400",children:[w.jsx(Jd,{size:48,className:"mb-4 text-gray-300 dark:text-gray-600"}),w.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"No hay candidatos an"}),w.jsx("p",{className:"mb-6",children:"Sube los CVs para comenzar el anlisis"}),w.jsx("button",{onClick:()=>d(!0),className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium",children:"Subir CVs"})]}):w.jsx("div",{className:"h-full overflow-auto",children:o==="list"?w.jsx(JE,{onSelectCandidate:p}):w.jsx(UR,{candidates:n,onSelectCandidate:p})})]}),f&&w.jsx(GR,{candidate:f,onClose:()=>p(null)})]}):w.jsx("div",{className:"p-8 text-gray-500 dark:text-gray-400",children:"Bsqueda no encontrada"})}function XR(){const{candidates:i,settings:e}=In(),[t,n]=k.useState(new Set),[r,o]=k.useState([]),[l,c]=k.useState(""),[d,f]=k.useState(!1),[p,g]=k.useState(""),[y,v]=k.useState("score"),x=k.useRef(null),_=()=>{x.current?.scrollIntoView({behavior:"smooth"})};k.useEffect(()=>{_()},[r]);const A=R=>{const M=new Set(t);M.has(R)?M.delete(R):M.add(R),n(M)},C=i.filter(R=>R.name?.toLowerCase().includes(p.toLowerCase())).sort((R,M)=>y==="score"?M.totalScore-R.totalScore:(R.name||"").localeCompare(M.name||"")),E=()=>{t.size===C.length&&C.length>0?n(new Set):n(new Set(C.map(R=>R.id)))},P=async R=>{if(R.preventDefault(),!l.trim()||t.size===0)return;const M={id:crypto.randomUUID(),role:"user",content:l,timestamp:new Date};o(D=>[...D,M]),c(""),f(!0);try{const D=i.filter(U=>t.has(U.id)),O=await XE(D,l,e.apiKey,e.selectedModel),H={id:crypto.randomUUID(),role:"assistant",content:O,timestamp:new Date};o(U=>[...U,H])}catch(D){console.error("Chat error:",D);const O={id:crypto.randomUUID(),role:"assistant",content:"Lo siento, hubo un error al procesar tu solicitud. Por favor verifica tu API Key en la configuracin.",timestamp:new Date};o(H=>[...H,O])}finally{f(!1)}};return w.jsxs("div",{className:"flex h-full bg-gray-50 dark:bg-gray-900 transition-colors",children:[w.jsxs("div",{className:"w-80 bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 flex flex-col transition-colors",children:[w.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 space-y-3",children:[w.jsxs("div",{children:[w.jsxs("h2",{className:"font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[w.jsx(Cm,{size:20}),"Seleccionar Candidatos"]}),w.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:'Elige con quines quieres "chatear".'})]}),w.jsxs("div",{className:"space-y-2",children:[w.jsx("input",{type:"text",placeholder:"Buscar candidato...",value:p,onChange:R=>g(R.target.value),className:"w-full px-3 py-2 text-sm border border-gray-200 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500"}),w.jsxs("div",{className:"flex gap-2",children:[w.jsxs("select",{value:y,onChange:R=>v(R.target.value),className:"flex-1 px-2 py-1.5 text-sm border border-gray-200 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white",children:[w.jsx("option",{value:"score",children:"Por Score"}),w.jsx("option",{value:"name",children:"Por Nombre"})]}),w.jsx("button",{onClick:E,className:"px-3 py-1.5 text-xs font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/30 rounded-lg hover:bg-blue-100 dark:hover:bg-blue-900/50 transition-colors",children:t.size===C.length&&C.length>0?"Ninguno":"Todos"})]})]})]}),w.jsx("div",{className:"flex-1 overflow-y-auto p-2 space-y-1",children:C.length===0?w.jsx("div",{className:"text-center py-8 text-gray-400 dark:text-gray-500 text-sm",children:"No se encontraron candidatos."}):C.map(R=>w.jsxs("div",{onClick:()=>A(R.id),className:`flex items-center gap-3 p-3 rounded-lg cursor-pointer transition-colors ${t.has(R.id)?"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800":"hover:bg-gray-50 dark:hover:bg-gray-700/50 border border-transparent"}`,children:[w.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold ${t.has(R.id)?"bg-blue-100 dark:bg-blue-900/40 text-blue-600 dark:text-blue-400":"bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400"}`,children:R.name?R.name.charAt(0).toUpperCase():"?"}),w.jsxs("div",{className:"flex-1 min-w-0",children:[w.jsx("div",{className:`text-sm font-medium truncate ${t.has(R.id)?"text-blue-900 dark:text-blue-300":"text-gray-900 dark:text-gray-200"}`,children:R.name||"Sin nombre"}),w.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:["Score: ",R.totalScore,"/40"]})]}),w.jsx("div",{className:`w-4 h-4 rounded border flex items-center justify-center ${t.has(R.id)?"bg-blue-600 border-blue-600 dark:bg-blue-500 dark:border-blue-500":"border-gray-300 dark:border-gray-600"}`,children:t.has(R.id)&&w.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})})]},R.id))}),w.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50",children:w.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 text-center",children:[t.size," seleccionados"]})})]}),w.jsxs("div",{className:"flex-1 flex flex-col h-full bg-gray-50 dark:bg-gray-900 transition-colors",children:[w.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[r.length===0?w.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-400 dark:text-gray-500",children:[w.jsx(jh,{size:48,className:"mb-4 opacity-20"}),w.jsx("p",{className:"text-lg font-medium text-gray-500 dark:text-gray-400",children:"Chat con Candidatos"}),w.jsx("p",{className:"text-sm max-w-md text-center mt-2",children:"Selecciona uno o ms candidatos del panel izquierdo y haz preguntas comparativas o especficas sobre sus perfiles."})]}):r.map(R=>w.jsxs("div",{className:`flex gap-4 ${R.role==="user"?"justify-end":"justify-start"}`,children:[R.role==="assistant"&&w.jsx("div",{className:"w-8 h-8 rounded-full bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400 flex items-center justify-center shrink-0",children:w.jsx(Am,{size:18})}),w.jsxs("div",{className:`max-w-[80%] rounded-2xl p-4 ${R.role==="user"?"bg-blue-600 text-white rounded-tr-none":"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 text-gray-800 dark:text-gray-200 rounded-tl-none shadow-sm"}`,children:[w.jsx("div",{className:"whitespace-pre-wrap text-sm leading-relaxed",children:R.content}),w.jsx("div",{className:`text-xs mt-2 ${R.role==="user"?"text-blue-100":"text-gray-400 dark:text-gray-500"}`,children:R.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),R.role==="user"&&w.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 flex items-center justify-center shrink-0",children:w.jsx(Cm,{size:18})})]},R.id)),d&&w.jsxs("div",{className:"flex gap-4 justify-start",children:[w.jsx("div",{className:"w-8 h-8 rounded-full bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400 flex items-center justify-center shrink-0",children:w.jsx(Am,{size:18})}),w.jsx("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-2xl rounded-tl-none p-4 shadow-sm",children:w.jsxs("div",{className:"flex gap-1",children:[w.jsx("div",{className:"w-2 h-2 bg-gray-400 dark:bg-gray-500 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),w.jsx("div",{className:"w-2 h-2 bg-gray-400 dark:bg-gray-500 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),w.jsx("div",{className:"w-2 h-2 bg-gray-400 dark:bg-gray-500 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})})]}),w.jsx("div",{ref:x})]}),w.jsx("div",{className:"p-4 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 transition-colors",children:w.jsxs("form",{onSubmit:P,className:"flex gap-2 max-w-4xl mx-auto",children:[w.jsx("input",{type:"text",value:l,onChange:R=>c(R.target.value),placeholder:t.size===0?"Selecciona candidatos para comenzar...":"Escribe tu pregunta...",disabled:t.size===0||d,className:"flex-1 border border-gray-300 dark:border-gray-600 rounded-xl px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-50 disabled:text-gray-400 dark:disabled:bg-gray-900 dark:disabled:text-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500"}),w.jsx("button",{type:"submit",disabled:t.size===0||d||!l.trim(),className:"bg-blue-600 text-white p-3 rounded-xl hover:bg-blue-700 disabled:opacity-50 disabled:hover:bg-blue-600 transition-colors",children:w.jsx(oA,{size:20})})]})})]})]})}function KR(){const{settings:i,setSettings:e}=In(),[t,n]=k.useState(i.apiKey),[r,o]=k.useState(!1),[l,c]=k.useState(""),d=async y=>{y.preventDefault(),await e({...i,apiKey:t}),o(!0),setTimeout(()=>o(!1),2e3)},f=async()=>{if(!l.trim()||!i.defaultEvaluationCriteria)return;const y={...i.criteriaPresets||{},[l.trim()]:i.defaultEvaluationCriteria};await e({...i,criteriaPresets:y}),c("")},p=async y=>{if(!i.criteriaPresets)return;const v={...i.criteriaPresets};delete v[y],await e({...i,criteriaPresets:v})},g=async y=>{!i.criteriaPresets||!i.criteriaPresets[y]||await e({...i,defaultEvaluationCriteria:i.criteriaPresets[y]})};return w.jsxs("div",{className:"p-8 max-w-3xl mx-auto",children:[w.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-8",children:"Configuracin"}),w.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm overflow-hidden transition-colors",children:[w.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[w.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Configuracin de IA"}),w.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:"Gestiona tu conexin con OpenAI"})]}),w.jsxs("form",{onSubmit:d,className:"p-6 space-y-6",children:[w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"OpenAI API Key"}),w.jsx("input",{type:"password",value:t,onChange:y=>n(y.target.value),placeholder:"sk-...",className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500"}),w.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2",children:"Tu clave API se almacena localmente en tu navegador y nunca se enva a nuestros servidores."})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Modelo de OpenAI"}),w.jsxs("select",{value:i.selectedModel,onChange:y=>e({...i,selectedModel:y.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[w.jsx("option",{value:"gpt-4o",children:"GPT-4o"}),w.jsx("option",{value:"gpt-4o-mini",children:"GPT-4o Mini"}),w.jsx("option",{value:"gpt-4-turbo",children:"GPT-4 Turbo"}),w.jsx("option",{value:"gpt-3.5-turbo",children:"GPT-3.5 Turbo"})]}),w.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2",children:"Selecciona el modelo que se utilizar para analizar los CVs."})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Tema"}),w.jsxs("div",{className:"flex items-center gap-4",children:[w.jsxs("button",{type:"button",onClick:()=>e({...i,theme:"light"}),className:`flex-1 py-3 px-4 rounded-lg border flex items-center justify-center gap-2 transition-all ${i.theme==="light"?"border-blue-500 bg-blue-50 text-blue-700 ring-1 ring-blue-500 dark:bg-blue-900/30 dark:text-blue-300":"border-gray-200 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300"}`,children:[w.jsx("span",{children:""}),w.jsx("span",{className:"font-medium",children:"Claro"})]}),w.jsxs("button",{type:"button",onClick:()=>e({...i,theme:"dark"}),className:`flex-1 py-3 px-4 rounded-lg border flex items-center justify-center gap-2 transition-all ${i.theme==="dark"?"border-blue-500 bg-blue-900 text-white ring-1 ring-blue-500":"border-gray-200 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300"}`,children:[w.jsx("span",{children:""}),w.jsx("span",{className:"font-medium",children:"Oscuro"})]})]})]}),w.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[w.jsxs("div",{className:"flex items-center justify-between mb-4",children:[w.jsxs("div",{children:[w.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Criterios de Evaluacin por Defecto"}),w.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Define los criterios que se utilizarn por defecto al crear una nueva bsqueda."})]}),w.jsx("button",{type:"button",onClick:()=>e({...i,defaultEvaluationCriteria:{relevance:{name:"Relevancia del Perfil al Puesto",desc:"Compara el contenido del CV con el contexto del puesto de trabajo. Considera habilidades, experiencia y ajuste general."},education:{name:"Nivel Educativo",desc:"Evala el prestigio de las instituciones educativas. El ttulo principal cuenta el 80% del valor, certificaciones adicionales, programas de intercambio, etc. cuentan el 20%."},previousJobs:{name:"Trabajos Previos",desc:"Evala el prestigio de empleadores anteriores y del nivel del ltimo puesto ocupado."},proactivity:{name:"Proactividad",desc:"Evala actividades extracurriculares, certificaciones, aprendizaje continuo e iniciativa mostrada ms all de los requisitos bsicos del trabajo."}}}),className:"text-sm text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 font-medium",children:"Restaurar Recomendados"})]}),w.jsx("div",{className:"space-y-4",children:Object.entries(i.defaultEvaluationCriteria||{relevance:{name:"Relevancia del Perfil al Puesto",desc:"Compara el contenido del CV con el contexto del puesto de trabajo. Considera habilidades, experiencia y ajuste general."},education:{name:"Nivel Educativo",desc:"Evala el prestigio de las instituciones educativas. El ttulo principal cuenta el 80% del valor, certificaciones adicionales, programas de intercambio, etc. cuentan el 20%."},previousJobs:{name:"Trabajos Previos",desc:"Evala el prestigio de empleadores anteriores y del nivel del ltimo puesto ocupado."},proactivity:{name:"Proactividad",desc:"Evala actividades extracurriculares, certificaciones, aprendizaje continuo e iniciativa mostrada ms all de los requisitos bsicos del trabajo."}}).map(([y,v])=>w.jsx("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-4 rounded-lg border border-gray-200 dark:border-gray-600",children:w.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[w.jsxs("div",{children:[w.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Nombre Visible"}),w.jsx("input",{type:"text",value:v.name,onChange:x=>{const _={...i.defaultEvaluationCriteria};i.defaultEvaluationCriteria||Object.assign(_,{relevance:{name:"Relevancia del Perfil al Puesto",desc:"Compara el contenido del CV con el contexto del puesto de trabajo. Considera habilidades, experiencia y ajuste general."},education:{name:"Nivel Educativo",desc:"Evala el prestigio de las instituciones educativas. El ttulo principal cuenta el 80% del valor, certificaciones adicionales, programas de intercambio, etc. cuentan el 20%."},previousJobs:{name:"Trabajos Previos",desc:"Evala el prestigio de empleadores anteriores y del nivel del ltimo puesto ocupado."},proactivity:{name:"Proactividad",desc:"Evala actividades extracurriculares, certificaciones, aprendizaje continuo e iniciativa mostrada ms all de los requisitos bsicos del trabajo."}}),_[y]={...v,name:x.target.value},e({...i,defaultEvaluationCriteria:_})},className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Descripcin para IA"}),w.jsx("textarea",{value:v.desc,onChange:x=>{const _={...i.defaultEvaluationCriteria};i.defaultEvaluationCriteria||Object.assign(_,{relevance:{name:"Relevancia del Perfil al Puesto",desc:"Compara el contenido del CV con el contexto del puesto de trabajo. Considera habilidades, experiencia y ajuste general."},education:{name:"Nivel Educativo",desc:"Evala el prestigio de las instituciones educativas. El ttulo principal cuenta el 80% del valor, certificaciones adicionales, programas de intercambio, etc. cuentan el 20%."},previousJobs:{name:"Trabajos Previos",desc:"Evala el prestigio de empleadores anteriores y del nivel del ltimo puesto ocupado."},proactivity:{name:"Proactividad",desc:"Evala actividades extracurriculares, certificaciones, aprendizaje continuo e iniciativa mostrada ms all de los requisitos bsicos del trabajo."}}),_[y]={...v,desc:x.target.value},e({...i,defaultEvaluationCriteria:_})},rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white resize-y"})]})]})},y))}),w.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-2",children:"Nota: Por ahora solo se pueden editar los criterios existentes. La capacidad de agregar/eliminar criterios se aadir pronto."}),w.jsxs("div",{className:"mt-8 border-t border-gray-200 dark:border-gray-700 pt-6",children:[w.jsx("h4",{className:"text-md font-medium text-gray-900 dark:text-white mb-4",children:"Presets de Criterios"}),w.jsxs("div",{className:"flex gap-2 mb-4",children:[w.jsx("input",{type:"text",value:l,onChange:y=>c(y.target.value),placeholder:"Nombre del nuevo preset...",className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),w.jsxs("button",{type:"button",onClick:f,disabled:!l.trim(),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 text-sm font-medium flex items-center gap-2",children:[w.jsx(Yd,{size:16}),"Guardar Preset"]})]}),i.criteriaPresets&&Object.keys(i.criteriaPresets).length>0&&w.jsxs("div",{className:"space-y-2",children:[w.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-2",children:"Presets Guardados:"}),Object.keys(i.criteriaPresets).map(y=>w.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700/30 rounded-lg border border-gray-200 dark:border-gray-600",children:[w.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:y}),w.jsxs("div",{className:"flex gap-2",children:[w.jsx("button",{type:"button",onClick:()=>g(y),className:"p-2 text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded-lg transition-colors",title:"Cargar este preset",children:w.jsx(sy,{size:16})}),w.jsx("button",{type:"button",onClick:()=>p(y),className:"p-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/30 rounded-lg transition-colors",title:"Eliminar preset",children:w.jsx(oy,{size:16})})]})]},y))]})]})]}),w.jsxs("div",{className:"flex items-center justify-between pt-4",children:[w.jsx("div",{className:"text-sm text-green-600 dark:text-green-400 font-medium transition-opacity duration-300",style:{opacity:r?1:0},children:"Configuracin guardada correctamente!"}),w.jsxs("button",{type:"submit",className:"flex items-center gap-2 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium transition-colors",children:[w.jsx(ry,{size:20}),"Guardar Cambios"]})]})]})]})]})}function YR(){const{init:i,settings:e}=In();return k.useEffect(()=>{i()},[i]),k.useEffect(()=>{e.theme==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[e.theme]),w.jsx(uS,{children:w.jsx(B_,{children:w.jsxs(Sr,{path:"/",element:w.jsx(LA,{}),children:[w.jsx(Sr,{index:!0,element:w.jsx(FA,{})}),w.jsx(Sr,{path:"search/:id",element:w.jsx(qR,{})}),w.jsx(Sr,{path:"chat",element:w.jsx(XR,{})}),w.jsx(Sr,{path:"settings",element:w.jsx(KR,{})}),w.jsx(Sr,{path:"*",element:w.jsx(j_,{to:"/",replace:!0})})]})})})}Vx.createRoot(document.getElementById("root")).render(w.jsx(k.StrictMode,{children:w.jsx(YR,{})}));</script>
    <style rel="stylesheet" crossorigin>*,:before,:after{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }*,:before,:after{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}:before,:after{--tw-content: ""}html,:host{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;-o-tab-size:4;tab-size:4;font-family:ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji";font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-feature-settings:normal;font-variation-settings:normal;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;letter-spacing:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dl,dd,h1,h2,h3,h4,h5,h6,hr,figure,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}ol,ul,menu{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{opacity:1;color:#9ca3af}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}button,[role=button]{cursor:pointer}:disabled{cursor:default}img,svg,video,canvas,audio,iframe,embed,object{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]:where(:not([hidden=until-found])){display:none}.pointer-events-none{pointer-events:none}.visible{visibility:visible}.fixed{position:fixed}.absolute{position:absolute}.relative{position:relative}.inset-0{inset:0}.left-3{left:.75rem}.right-2\.5{right:.625rem}.top-1\/2{top:50%}.z-50{z-index:50}.z-\[60\]{z-index:60}.mx-auto{margin-left:auto;margin-right:auto}.mb-1{margin-bottom:.25rem}.mb-2{margin-bottom:.5rem}.mb-3{margin-bottom:.75rem}.mb-4{margin-bottom:1rem}.mb-6{margin-bottom:1.5rem}.mb-8{margin-bottom:2rem}.ml-4{margin-left:1rem}.mt-1{margin-top:.25rem}.mt-2{margin-top:.5rem}.mt-8{margin-top:2rem}.line-clamp-2{overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2}.block{display:block}.flex{display:flex}.table{display:table}.grid{display:grid}.hidden{display:none}.h-1\.5{height:.375rem}.h-10{height:2.5rem}.h-12{height:3rem}.h-16{height:4rem}.h-2{height:.5rem}.h-20{height:5rem}.h-24{height:6rem}.h-3{height:.75rem}.h-4{height:1rem}.h-40{height:10rem}.h-5{height:1.25rem}.h-6{height:1.5rem}.h-8{height:2rem}.h-\[90vh\]{height:90vh}.h-full{height:100%}.h-screen{height:100vh}.max-h-\[200px\]{max-height:200px}.max-h-\[80vh\]{max-height:80vh}.max-h-\[90vh\]{max-height:90vh}.max-h-full{max-height:100%}.min-h-\[100px\]{min-height:100px}.min-h-full{min-height:100%}.w-10{width:2.5rem}.w-12{width:3rem}.w-16{width:4rem}.w-2{width:.5rem}.w-3{width:.75rem}.w-36{width:9rem}.w-4{width:1rem}.w-5{width:1.25rem}.w-5\/12{width:41.666667%}.w-6{width:1.5rem}.w-64{width:16rem}.w-7\/12{width:58.333333%}.w-72{width:18rem}.w-8{width:2rem}.w-80{width:20rem}.w-full{width:100%}.min-w-0{min-width:0px}.min-w-full{min-width:100%}.max-w-2xl{max-width:42rem}.max-w-3xl{max-width:48rem}.max-w-4xl{max-width:56rem}.max-w-7xl{max-width:80rem}.max-w-\[100px\]{max-width:100px}.max-w-\[300px\]{max-width:300px}.max-w-\[80\%\]{max-width:80%}.max-w-\[95vw\]{max-width:95vw}.max-w-md{max-width:28rem}.max-w-xl{max-width:36rem}.flex-1{flex:1 1 0%}.flex-shrink-0,.shrink-0{flex-shrink:0}.-translate-y-1\/2{--tw-translate-y: -50%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.rotate-3{--tw-rotate: 3deg;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.transform{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}@keyframes bounce{0%,to{transform:translateY(-25%);animation-timing-function:cubic-bezier(.8,0,1,1)}50%{transform:none;animation-timing-function:cubic-bezier(0,0,.2,1)}}.animate-bounce{animation:bounce 1s infinite}@keyframes spin{to{transform:rotate(360deg)}}.animate-spin{animation:spin 1s linear infinite}.cursor-grab{cursor:grab}.cursor-grabbing{cursor:grabbing}.cursor-pointer{cursor:pointer}.resize-none{resize:none}.resize-y{resize:vertical}.list-disc{list-style-type:disc}.appearance-none{-webkit-appearance:none;-moz-appearance:none;appearance:none}.grid-cols-1{grid-template-columns:repeat(1,minmax(0,1fr))}.grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.flex-col{flex-direction:column}.items-start{align-items:flex-start}.items-center{align-items:center}.justify-start{justify-content:flex-start}.justify-end{justify-content:flex-end}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.gap-1{gap:.25rem}.gap-2{gap:.5rem}.gap-3{gap:.75rem}.gap-4{gap:1rem}.gap-6{gap:1.5rem}.space-y-1>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.25rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.25rem * var(--tw-space-y-reverse))}.space-y-2>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.5rem * var(--tw-space-y-reverse))}.space-y-3>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.75rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.75rem * var(--tw-space-y-reverse))}.space-y-4>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(1rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1rem * var(--tw-space-y-reverse))}.space-y-6>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(1.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1.5rem * var(--tw-space-y-reverse))}.space-y-8>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(2rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(2rem * var(--tw-space-y-reverse))}.divide-y>:not([hidden])~:not([hidden]){--tw-divide-y-reverse: 0;border-top-width:calc(1px * calc(1 - var(--tw-divide-y-reverse)));border-bottom-width:calc(1px * var(--tw-divide-y-reverse))}.divide-gray-200>:not([hidden])~:not([hidden]){--tw-divide-opacity: 1;border-color:rgb(229 231 235 / var(--tw-divide-opacity, 1))}.overflow-auto{overflow:auto}.overflow-hidden{overflow:hidden}.overflow-x-auto{overflow-x:auto}.overflow-y-auto{overflow-y:auto}.truncate{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.whitespace-nowrap{white-space:nowrap}.whitespace-pre-wrap{white-space:pre-wrap}.rounded{border-radius:.25rem}.rounded-2xl{border-radius:1rem}.rounded-full{border-radius:9999px}.rounded-lg{border-radius:.5rem}.rounded-md{border-radius:.375rem}.rounded-xl{border-radius:.75rem}.rounded-b-xl{border-bottom-right-radius:.75rem;border-bottom-left-radius:.75rem}.rounded-tl-none{border-top-left-radius:0}.rounded-tr-none{border-top-right-radius:0}.border{border-width:1px}.border-2{border-width:2px}.border-b{border-bottom-width:1px}.border-b-2{border-bottom-width:2px}.border-l{border-left-width:1px}.border-r{border-right-width:1px}.border-t{border-top-width:1px}.border-dashed{border-style:dashed}.border-none{border-style:none}.border-blue-100{--tw-border-opacity: 1;border-color:rgb(219 234 254 / var(--tw-border-opacity, 1))}.border-blue-200{--tw-border-opacity: 1;border-color:rgb(191 219 254 / var(--tw-border-opacity, 1))}.border-blue-500{--tw-border-opacity: 1;border-color:rgb(59 130 246 / var(--tw-border-opacity, 1))}.border-blue-600{--tw-border-opacity: 1;border-color:rgb(37 99 235 / var(--tw-border-opacity, 1))}.border-gray-100{--tw-border-opacity: 1;border-color:rgb(243 244 246 / var(--tw-border-opacity, 1))}.border-gray-200{--tw-border-opacity: 1;border-color:rgb(229 231 235 / var(--tw-border-opacity, 1))}.border-gray-300{--tw-border-opacity: 1;border-color:rgb(209 213 219 / var(--tw-border-opacity, 1))}.border-green-100{--tw-border-opacity: 1;border-color:rgb(220 252 231 / var(--tw-border-opacity, 1))}.border-orange-100{--tw-border-opacity: 1;border-color:rgb(255 237 213 / var(--tw-border-opacity, 1))}.border-purple-100{--tw-border-opacity: 1;border-color:rgb(243 232 255 / var(--tw-border-opacity, 1))}.border-red-100{--tw-border-opacity: 1;border-color:rgb(254 226 226 / var(--tw-border-opacity, 1))}.border-transparent{border-color:transparent}.bg-black{--tw-bg-opacity: 1;background-color:rgb(0 0 0 / var(--tw-bg-opacity, 1))}.bg-black\/50{background-color:#00000080}.bg-blue-100{--tw-bg-opacity: 1;background-color:rgb(219 234 254 / var(--tw-bg-opacity, 1))}.bg-blue-200{--tw-bg-opacity: 1;background-color:rgb(191 219 254 / var(--tw-bg-opacity, 1))}.bg-blue-50{--tw-bg-opacity: 1;background-color:rgb(239 246 255 / var(--tw-bg-opacity, 1))}.bg-blue-600{--tw-bg-opacity: 1;background-color:rgb(37 99 235 / var(--tw-bg-opacity, 1))}.bg-blue-900{--tw-bg-opacity: 1;background-color:rgb(30 58 138 / var(--tw-bg-opacity, 1))}.bg-gray-100{--tw-bg-opacity: 1;background-color:rgb(243 244 246 / var(--tw-bg-opacity, 1))}.bg-gray-200{--tw-bg-opacity: 1;background-color:rgb(229 231 235 / var(--tw-bg-opacity, 1))}.bg-gray-400{--tw-bg-opacity: 1;background-color:rgb(156 163 175 / var(--tw-bg-opacity, 1))}.bg-gray-50{--tw-bg-opacity: 1;background-color:rgb(249 250 251 / var(--tw-bg-opacity, 1))}.bg-gray-900{--tw-bg-opacity: 1;background-color:rgb(17 24 39 / var(--tw-bg-opacity, 1))}.bg-green-100{--tw-bg-opacity: 1;background-color:rgb(220 252 231 / var(--tw-bg-opacity, 1))}.bg-green-50{--tw-bg-opacity: 1;background-color:rgb(240 253 244 / var(--tw-bg-opacity, 1))}.bg-green-500{--tw-bg-opacity: 1;background-color:rgb(34 197 94 / var(--tw-bg-opacity, 1))}.bg-green-600{--tw-bg-opacity: 1;background-color:rgb(22 163 74 / var(--tw-bg-opacity, 1))}.bg-indigo-50{--tw-bg-opacity: 1;background-color:rgb(238 242 255 / var(--tw-bg-opacity, 1))}.bg-orange-50{--tw-bg-opacity: 1;background-color:rgb(255 247 237 / var(--tw-bg-opacity, 1))}.bg-red-50{--tw-bg-opacity: 1;background-color:rgb(254 242 242 / var(--tw-bg-opacity, 1))}.bg-transparent{background-color:transparent}.bg-white{--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1))}.bg-yellow-50{--tw-bg-opacity: 1;background-color:rgb(254 252 232 / var(--tw-bg-opacity, 1))}.bg-opacity-50{--tw-bg-opacity: .5}.fill-current{fill:currentColor}.p-0{padding:0}.p-1{padding:.25rem}.p-2{padding:.5rem}.p-3{padding:.75rem}.p-4{padding:1rem}.p-6{padding:1.5rem}.p-8{padding:2rem}.px-2{padding-left:.5rem;padding-right:.5rem}.px-3{padding-left:.75rem;padding-right:.75rem}.px-4{padding-left:1rem;padding-right:1rem}.px-6{padding-left:1.5rem;padding-right:1.5rem}.py-0\.5{padding-top:.125rem;padding-bottom:.125rem}.py-1{padding-top:.25rem;padding-bottom:.25rem}.py-1\.5{padding-top:.375rem;padding-bottom:.375rem}.py-12{padding-top:3rem;padding-bottom:3rem}.py-2{padding-top:.5rem;padding-bottom:.5rem}.py-20{padding-top:5rem;padding-bottom:5rem}.py-3{padding-top:.75rem;padding-bottom:.75rem}.py-4{padding-top:1rem;padding-bottom:1rem}.py-8{padding-top:2rem;padding-bottom:2rem}.pb-2{padding-bottom:.5rem}.pb-4{padding-bottom:1rem}.pl-10{padding-left:2.5rem}.pl-3{padding-left:.75rem}.pr-2{padding-right:.5rem}.pr-4{padding-right:1rem}.pr-8{padding-right:2rem}.pt-4{padding-top:1rem}.pt-6{padding-top:1.5rem}.text-left{text-align:left}.text-center{text-align:center}.text-right{text-align:right}.text-2xl{font-size:1.5rem;line-height:2rem}.text-3xl{font-size:1.875rem;line-height:2.25rem}.text-lg{font-size:1.125rem;line-height:1.75rem}.text-sm{font-size:.875rem;line-height:1.25rem}.text-xl{font-size:1.25rem;line-height:1.75rem}.text-xs{font-size:.75rem;line-height:1rem}.font-bold{font-weight:700}.font-medium{font-weight:500}.font-semibold{font-weight:600}.uppercase{text-transform:uppercase}.italic{font-style:italic}.leading-relaxed{line-height:1.625}.tracking-wider{letter-spacing:.05em}.text-blue-100{--tw-text-opacity: 1;color:rgb(219 234 254 / var(--tw-text-opacity, 1))}.text-blue-600{--tw-text-opacity: 1;color:rgb(37 99 235 / var(--tw-text-opacity, 1))}.text-blue-700{--tw-text-opacity: 1;color:rgb(29 78 216 / var(--tw-text-opacity, 1))}.text-blue-900{--tw-text-opacity: 1;color:rgb(30 58 138 / var(--tw-text-opacity, 1))}.text-gray-300{--tw-text-opacity: 1;color:rgb(209 213 219 / var(--tw-text-opacity, 1))}.text-gray-400{--tw-text-opacity: 1;color:rgb(156 163 175 / var(--tw-text-opacity, 1))}.text-gray-500{--tw-text-opacity: 1;color:rgb(107 114 128 / var(--tw-text-opacity, 1))}.text-gray-600{--tw-text-opacity: 1;color:rgb(75 85 99 / var(--tw-text-opacity, 1))}.text-gray-700{--tw-text-opacity: 1;color:rgb(55 65 81 / var(--tw-text-opacity, 1))}.text-gray-800{--tw-text-opacity: 1;color:rgb(31 41 55 / var(--tw-text-opacity, 1))}.text-gray-900{--tw-text-opacity: 1;color:rgb(17 24 39 / var(--tw-text-opacity, 1))}.text-green-600{--tw-text-opacity: 1;color:rgb(22 163 74 / var(--tw-text-opacity, 1))}.text-green-700{--tw-text-opacity: 1;color:rgb(21 128 61 / var(--tw-text-opacity, 1))}.text-orange-300{--tw-text-opacity: 1;color:rgb(253 186 116 / var(--tw-text-opacity, 1))}.text-orange-500{--tw-text-opacity: 1;color:rgb(249 115 22 / var(--tw-text-opacity, 1))}.text-orange-700{--tw-text-opacity: 1;color:rgb(194 65 12 / var(--tw-text-opacity, 1))}.text-purple-600{--tw-text-opacity: 1;color:rgb(147 51 234 / var(--tw-text-opacity, 1))}.text-purple-700{--tw-text-opacity: 1;color:rgb(126 34 206 / var(--tw-text-opacity, 1))}.text-red-600{--tw-text-opacity: 1;color:rgb(220 38 38 / var(--tw-text-opacity, 1))}.text-red-700{--tw-text-opacity: 1;color:rgb(185 28 28 / var(--tw-text-opacity, 1))}.text-white{--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.text-yellow-400{--tw-text-opacity: 1;color:rgb(250 204 21 / var(--tw-text-opacity, 1))}.placeholder-gray-400::-moz-placeholder{--tw-placeholder-opacity: 1;color:rgb(156 163 175 / var(--tw-placeholder-opacity, 1))}.placeholder-gray-400::placeholder{--tw-placeholder-opacity: 1;color:rgb(156 163 175 / var(--tw-placeholder-opacity, 1))}.opacity-0{opacity:0}.opacity-20{opacity:.2}.opacity-50{opacity:.5}.opacity-80{opacity:.8}.shadow-lg{--tw-shadow: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1);--tw-shadow-colored: 0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-sm{--tw-shadow: 0 1px 2px 0 rgb(0 0 0 / .05);--tw-shadow-colored: 0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-xl{--tw-shadow: 0 20px 25px -5px rgb(0 0 0 / .1), 0 8px 10px -6px rgb(0 0 0 / .1);--tw-shadow-colored: 0 20px 25px -5px var(--tw-shadow-color), 0 8px 10px -6px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.ring-1{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.ring-blue-500{--tw-ring-opacity: 1;--tw-ring-color: rgb(59 130 246 / var(--tw-ring-opacity, 1))}.filter{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.backdrop-blur-sm{--tw-backdrop-blur: blur(4px);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.transition{transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-all{transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-colors{transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-opacity{transition-property:opacity;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-shadow{transition-property:box-shadow;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.duration-200{transition-duration:.2s}.duration-300{transition-duration:.3s}.hover\:border-blue-200:hover{--tw-border-opacity: 1;border-color:rgb(191 219 254 / var(--tw-border-opacity, 1))}.hover\:border-blue-300:hover{--tw-border-opacity: 1;border-color:rgb(147 197 253 / var(--tw-border-opacity, 1))}.hover\:border-blue-400:hover{--tw-border-opacity: 1;border-color:rgb(96 165 250 / var(--tw-border-opacity, 1))}.hover\:bg-blue-100:hover{--tw-bg-opacity: 1;background-color:rgb(219 234 254 / var(--tw-bg-opacity, 1))}.hover\:bg-blue-50:hover{--tw-bg-opacity: 1;background-color:rgb(239 246 255 / var(--tw-bg-opacity, 1))}.hover\:bg-blue-700:hover{--tw-bg-opacity: 1;background-color:rgb(29 78 216 / var(--tw-bg-opacity, 1))}.hover\:bg-gray-100:hover{--tw-bg-opacity: 1;background-color:rgb(243 244 246 / var(--tw-bg-opacity, 1))}.hover\:bg-gray-50:hover{--tw-bg-opacity: 1;background-color:rgb(249 250 251 / var(--tw-bg-opacity, 1))}.hover\:bg-gray-800:hover{--tw-bg-opacity: 1;background-color:rgb(31 41 55 / var(--tw-bg-opacity, 1))}.hover\:bg-green-700:hover{--tw-bg-opacity: 1;background-color:rgb(21 128 61 / var(--tw-bg-opacity, 1))}.hover\:bg-red-50:hover{--tw-bg-opacity: 1;background-color:rgb(254 242 242 / var(--tw-bg-opacity, 1))}.hover\:text-blue-600:hover{--tw-text-opacity: 1;color:rgb(37 99 235 / var(--tw-text-opacity, 1))}.hover\:text-blue-700:hover{--tw-text-opacity: 1;color:rgb(29 78 216 / var(--tw-text-opacity, 1))}.hover\:text-blue-800:hover{--tw-text-opacity: 1;color:rgb(30 64 175 / var(--tw-text-opacity, 1))}.hover\:text-gray-600:hover{--tw-text-opacity: 1;color:rgb(75 85 99 / var(--tw-text-opacity, 1))}.hover\:text-gray-700:hover{--tw-text-opacity: 1;color:rgb(55 65 81 / var(--tw-text-opacity, 1))}.hover\:text-red-600:hover{--tw-text-opacity: 1;color:rgb(220 38 38 / var(--tw-text-opacity, 1))}.hover\:underline:hover{text-decoration-line:underline}.hover\:shadow-md:hover{--tw-shadow: 0 4px 6px -1px rgb(0 0 0 / .1), 0 2px 4px -2px rgb(0 0 0 / .1);--tw-shadow-colored: 0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.focus\:border-transparent:focus{border-color:transparent}.focus\:ring-0:focus{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(0px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.focus\:ring-2:focus{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.focus\:ring-blue-500:focus{--tw-ring-opacity: 1;--tw-ring-color: rgb(59 130 246 / var(--tw-ring-opacity, 1))}.disabled\:bg-gray-50:disabled{--tw-bg-opacity: 1;background-color:rgb(249 250 251 / var(--tw-bg-opacity, 1))}.disabled\:text-gray-400:disabled{--tw-text-opacity: 1;color:rgb(156 163 175 / var(--tw-text-opacity, 1))}.disabled\:opacity-50:disabled{opacity:.5}.disabled\:hover\:bg-blue-600:hover:disabled{--tw-bg-opacity: 1;background-color:rgb(37 99 235 / var(--tw-bg-opacity, 1))}.group:hover .group-hover\:bg-blue-600{--tw-bg-opacity: 1;background-color:rgb(37 99 235 / var(--tw-bg-opacity, 1))}.group:hover .group-hover\:text-blue-600{--tw-text-opacity: 1;color:rgb(37 99 235 / var(--tw-text-opacity, 1))}.group:hover .group-hover\:text-white{--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.group:hover .group-hover\:opacity-100{opacity:1}.dark\:divide-gray-700:is(.dark *)>:not([hidden])~:not([hidden]){--tw-divide-opacity: 1;border-color:rgb(55 65 81 / var(--tw-divide-opacity, 1))}.dark\:border-blue-500:is(.dark *){--tw-border-opacity: 1;border-color:rgb(59 130 246 / var(--tw-border-opacity, 1))}.dark\:border-blue-500\/30:is(.dark *){border-color:#3b82f64d}.dark\:border-blue-800:is(.dark *){--tw-border-opacity: 1;border-color:rgb(30 64 175 / var(--tw-border-opacity, 1))}.dark\:border-blue-800\/30:is(.dark *){border-color:#1e40af4d}.dark\:border-blue-900\/30:is(.dark *){border-color:#1e3a8a4d}.dark\:border-gray-600:is(.dark *){--tw-border-opacity: 1;border-color:rgb(75 85 99 / var(--tw-border-opacity, 1))}.dark\:border-gray-700:is(.dark *){--tw-border-opacity: 1;border-color:rgb(55 65 81 / var(--tw-border-opacity, 1))}.dark\:border-green-900\/30:is(.dark *){border-color:#14532d4d}.dark\:border-orange-900\/30:is(.dark *){border-color:#7c2d124d}.dark\:border-purple-900\/30:is(.dark *){border-color:#581c874d}.dark\:bg-blue-500:is(.dark *){--tw-bg-opacity: 1;background-color:rgb(59 130 246 / var(--tw-bg-opacity, 1))}.dark\:bg-blue-900\/20:is(.dark *){background-color:#1e3a8a33}.dark\:bg-blue-900\/30:is(.dark *){background-color:#1e3a8a4d}.dark\:bg-blue-900\/40:is(.dark *){background-color:#1e3a8a66}.dark\:bg-gray-500:is(.dark *){--tw-bg-opacity: 1;background-color:rgb(107 114 128 / var(--tw-bg-opacity, 1))}.dark\:bg-gray-600:is(.dark *){--tw-bg-opacity: 1;background-color:rgb(75 85 99 / var(--tw-bg-opacity, 1))}.dark\:bg-gray-700:is(.dark *){--tw-bg-opacity: 1;background-color:rgb(55 65 81 / var(--tw-bg-opacity, 1))}.dark\:bg-gray-700\/30:is(.dark *){background-color:#3741514d}.dark\:bg-gray-700\/50:is(.dark *){background-color:#37415180}.dark\:bg-gray-800:is(.dark *){--tw-bg-opacity: 1;background-color:rgb(31 41 55 / var(--tw-bg-opacity, 1))}.dark\:bg-gray-800\/50:is(.dark *){background-color:#1f293780}.dark\:bg-gray-900:is(.dark *){--tw-bg-opacity: 1;background-color:rgb(17 24 39 / var(--tw-bg-opacity, 1))}.dark\:bg-gray-900\/50:is(.dark *){background-color:#11182780}.dark\:bg-green-900\/20:is(.dark *){background-color:#14532d33}.dark\:bg-green-900\/30:is(.dark *){background-color:#14532d4d}.dark\:bg-indigo-900\/20:is(.dark *){background-color:#312e8133}.dark\:bg-orange-900\/20:is(.dark *){background-color:#7c2d1233}.dark\:bg-red-900\/20:is(.dark *){background-color:#7f1d1d33}.dark\:bg-yellow-900\/20:is(.dark *){background-color:#713f1233}.dark\:text-blue-300:is(.dark *){--tw-text-opacity: 1;color:rgb(147 197 253 / var(--tw-text-opacity, 1))}.dark\:text-blue-400:is(.dark *){--tw-text-opacity: 1;color:rgb(96 165 250 / var(--tw-text-opacity, 1))}.dark\:text-gray-200:is(.dark *){--tw-text-opacity: 1;color:rgb(229 231 235 / var(--tw-text-opacity, 1))}.dark\:text-gray-300:is(.dark *){--tw-text-opacity: 1;color:rgb(209 213 219 / var(--tw-text-opacity, 1))}.dark\:text-gray-400:is(.dark *){--tw-text-opacity: 1;color:rgb(156 163 175 / var(--tw-text-opacity, 1))}.dark\:text-gray-500:is(.dark *){--tw-text-opacity: 1;color:rgb(107 114 128 / var(--tw-text-opacity, 1))}.dark\:text-gray-600:is(.dark *){--tw-text-opacity: 1;color:rgb(75 85 99 / var(--tw-text-opacity, 1))}.dark\:text-green-400:is(.dark *){--tw-text-opacity: 1;color:rgb(74 222 128 / var(--tw-text-opacity, 1))}.dark\:text-orange-300:is(.dark *){--tw-text-opacity: 1;color:rgb(253 186 116 / var(--tw-text-opacity, 1))}.dark\:text-orange-400:is(.dark *){--tw-text-opacity: 1;color:rgb(251 146 60 / var(--tw-text-opacity, 1))}.dark\:text-purple-400:is(.dark *){--tw-text-opacity: 1;color:rgb(192 132 252 / var(--tw-text-opacity, 1))}.dark\:text-white:is(.dark *){--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.dark\:placeholder-gray-500:is(.dark *)::-moz-placeholder{--tw-placeholder-opacity: 1;color:rgb(107 114 128 / var(--tw-placeholder-opacity, 1))}.dark\:placeholder-gray-500:is(.dark *)::placeholder{--tw-placeholder-opacity: 1;color:rgb(107 114 128 / var(--tw-placeholder-opacity, 1))}.dark\:hover\:border-blue-500:hover:is(.dark *){--tw-border-opacity: 1;border-color:rgb(59 130 246 / var(--tw-border-opacity, 1))}.dark\:hover\:bg-blue-900\/30:hover:is(.dark *){background-color:#1e3a8a4d}.dark\:hover\:bg-blue-900\/50:hover:is(.dark *){background-color:#1e3a8a80}.dark\:hover\:bg-gray-600:hover:is(.dark *){--tw-bg-opacity: 1;background-color:rgb(75 85 99 / var(--tw-bg-opacity, 1))}.dark\:hover\:bg-gray-700:hover:is(.dark *){--tw-bg-opacity: 1;background-color:rgb(55 65 81 / var(--tw-bg-opacity, 1))}.dark\:hover\:bg-gray-700\/50:hover:is(.dark *){background-color:#37415180}.dark\:hover\:bg-red-900\/30:hover:is(.dark *){background-color:#7f1d1d4d}.dark\:hover\:text-blue-300:hover:is(.dark *){--tw-text-opacity: 1;color:rgb(147 197 253 / var(--tw-text-opacity, 1))}.dark\:hover\:text-gray-200:hover:is(.dark *){--tw-text-opacity: 1;color:rgb(229 231 235 / var(--tw-text-opacity, 1))}.dark\:hover\:text-gray-300:hover:is(.dark *){--tw-text-opacity: 1;color:rgb(209 213 219 / var(--tw-text-opacity, 1))}.dark\:hover\:text-red-400:hover:is(.dark *){--tw-text-opacity: 1;color:rgb(248 113 113 / var(--tw-text-opacity, 1))}.dark\:disabled\:bg-gray-900:disabled:is(.dark *){--tw-bg-opacity: 1;background-color:rgb(17 24 39 / var(--tw-bg-opacity, 1))}.dark\:disabled\:text-gray-600:disabled:is(.dark *){--tw-text-opacity: 1;color:rgb(75 85 99 / var(--tw-text-opacity, 1))}.group:hover .dark\:group-hover\:text-blue-400:is(.dark *){--tw-text-opacity: 1;color:rgb(96 165 250 / var(--tw-text-opacity, 1))}@media(min-width:768px){.md\:inline{display:inline}.md\:hidden{display:none}.md\:h-5{height:1.25rem}.md\:w-5{width:1.25rem}.md\:max-w-2xl{max-width:42rem}.md\:grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.md\:p-8{padding:2rem}.md\:px-4{padding-left:1rem;padding-right:1rem}.md\:px-8{padding-left:2rem;padding-right:2rem}.md\:text-2xl{font-size:1.5rem;line-height:2rem}.md\:text-base{font-size:1rem;line-height:1.5rem}}@media(min-width:1024px){.lg\:grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}}</style>
  </head>
  <body>
    <div id="root"></div>
  </body>
</html>
